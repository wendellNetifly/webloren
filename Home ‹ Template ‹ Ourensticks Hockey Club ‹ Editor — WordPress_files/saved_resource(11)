/*
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

*/

var media = wp.media;

// VIEW: MEDIA ITEM:

media.view.MEXPItem = wp.Backbone.View.extend({

    tagName   : 'li',
    className : 'mexp-item attachment',

    render: function() {

    	this.template = media.template( 'mexp-' + this.options.service.id + '-item-' + this.options.tab );
       	this.$el.html( this.template( this.model.toJSON() ) );

        return this;

    }

});

// VIEW - BOTTOM TOOLBAR

media.view.Toolbar.MEXP = media.view.Toolbar.extend({

	initialize: function() {

		var serviceName = this.controller.state().id.replace( /mexp-service-/g, '');

		_.defaults( this.options, {
		    event : 'inserter',
		    close : false,
			items : {
			    // See wp.media.view.Button
			    inserter     : {
			        id       : 'mexp-button',
			        style    : 'primary',
			        text     : ( 'undefined' != typeof( mexp.services[serviceName].labels.insert ) && mexp.services[serviceName].labels.insert ) ? mexp.services[serviceName].labels.insert : mexp.labels.insert,
			        priority : 80,
			        click    : function() {
						if ( this.controller.state().props && this.controller.state().props.at(0).get( 'sideload' ) )
							this.controller.state().mexpSideload();
						else
							this.controller.state().mexpInsert();
					}
			    }
			}
		});

		media.view.Toolbar.prototype.initialize.apply( this, arguments );

		this.set( 'pagination', new media.view.Button({
			tagName: 'a',
			classes: 'mexp-pagination button button-secondary',
			id: serviceName + '-loadmore',
			text: mexp.labels.loadmore,
			priority: -20
		}) );
	},

	refresh: function() {

		var selection = this.controller.state().props.get( '_all' ).get( 'selection' );

		// @TODO i think this is redundant
		this.get( 'inserter' ).model.set( 'disabled', !selection.length );

		media.view.Toolbar.prototype.refresh.apply( this, arguments );

	}

});

// VIEW - MEDIA CONTENT AREA

media.view.MEXP = media.View.extend({

	events: {
		'click .mexp-item-area'     : 'toggleSelectionHandler',
		'click .mexp-item .check'   : 'removeSelectionHandler',
		'submit .mexp-toolbar form' : 'updateInput'
	},

	initialize: function() {

		/* fired when you switch router tabs */
		
		var _this = this;

		this.collection = new Backbone.Collection();
		this.service    = this.options.service;
		this.tab        = this.options.tab;

		this.createToolbar();
		this.clearItems();

		if ( this.model.get( 'items' ) && this.model.get( 'alwaysRefresh' ) ) {
			this.model.set( 'items', [] );
			this.model.set( 'cursor', null );
			this.collection = new Backbone.Collection();
			this.collection.once( 'reset', this.render, this );
			this.collection.reset();
			this.model.set( 'fetchOnRender', false );
			this.loading();
			this.fetchItems();

			jQuery( '#' + this.service.id + '-loadmore' ).attr( 'disabled', false ).show();
		} else if ( this.model.get( 'items' ) ) {

			this.collection = new Backbone.Collection();
			this.collection.reset( this.model.get( 'items' ) );

			jQuery( '#' + this.service.id + '-loadmore' ).attr( 'disabled', false ).show();
		} else {
			jQuery( '#' + this.service.id + '-loadmore' ).hide();
		}

		// @TODO do this somewhere else:
		// @TODO this gets reverted anyway when the button model's disabled state changes. look into it.
		//jQuery( '#mexp-button' ).text( this.service.labels.insert );

		this.collection.on( 'reset', this.render, this );

		this.model.on( 'change:params', this.changedParams, this );

		this.on( 'loading',       this.loading, this );
		this.on( 'loaded',        this.loaded, this );
		this.on( 'change:params', this.changedParams, this );
		this.on( 'change:page',   this.changedPage, this );

		jQuery( '.mexp-pagination' ).click( function( event ) {
			_this.paginate( event );
		} );

		if ( _this.model.get( 'fetchOnRender' ) ) {
			_this.model.set( 'fetchOnRender', false );
			_this.loading();
			_this.fetchItems();
		}

	},

	render: function() {

		/* fired when you switch router tabs */

		var selection = this.getSelection();

		if ( this.collection && this.collection.models.length ) {

			this.clearItems();

			var container = document.createDocumentFragment();

			this.collection.each( function( model ) {
				container.appendChild( this.renderItem( model ) );
			}, this );

			this.$el.find( '.mexp-items' ).append( container );

		}

		selection.each( function( model ) {
			var id = '#mexp-item-' + this.service.id + '-' + this.tab + '-' + model.get( 'id' );
			this.$el.find( id ).closest( '.mexp-item' ).addClass( 'selected details' );
		}, this );

		jQuery( '#mexp-button' ).prop( 'disabled', !selection.length );

		return this;

	},

	renderItem : function( model ) {

		var view = new media.view.MEXPItem({
			model   : model,
			service : this.service,
			tab     : this.tab
		});

		return view.render().el;

	},

	createToolbar: function() {

		// @TODO this could be a separate view:
		html = '<div class="mexp-error attachments"></div>';
		this.$el.prepend( html );

		// @TODO this could be a separate view:
		html = '<div class="mexp-empty attachments"></div>';
		this.$el.prepend( html );

		// @TODO this could be a separate view:
		html = '<ul class="mexp-items attachments clearfix"></ul>';
		this.$el.append( html );

		// @TODO this could be a separate view:
		var toolbar_template = media.template( 'mexp-' + this.service.id + '-search-' + this.tab );
		var toolbar_html = toolbar_template( this.model.toJSON() );
		// Only append the toolbar if the toolbar has content.
		if ( toolbar_html.replace( /^\s+$/, '').length )
			this.$el.prepend( '<div class="mexp-toolbar media-toolbar clearfix">' + toolbar_html + '</div>' );

	},

	removeSelectionHandler: function( event ) {

		var target = jQuery( '#' + event.currentTarget.id );
		var id     = target.attr( 'data-id' );

		this.removeFromSelection( target, id );

		event.preventDefault();

	},

	toggleSelectionHandler: function( event ) {

		if ( event.target.href )
			return;

		var target = jQuery( '#' + event.currentTarget.id );
		var id     = target.attr( 'data-id' );

		if ( this.getSelection().get( id ) )
			this.removeFromSelection( target, id );
		else
			this.addToSelection( target, id );

	},

	addToSelection: function( target, id ) {

		target.closest( '.mexp-item' ).addClass( 'selected details' );

		this.getSelection().add( this.collection._byId[id] );

		// @TODO why isn't this triggered by the above line?
		this.controller.state().props.trigger( 'change:selection' );

	},

	removeFromSelection: function( target, id ) {

		target.closest( '.mexp-item' ).removeClass( 'selected details' );

		this.getSelection().remove( this.collection._byId[id] );

		// @TODO why isn't this triggered by the above line?
		this.controller.state().props.trigger( 'change:selection' );

	},

	clearSelection: function() {
		this.getSelection().reset();
	},

	getSelection : function() {
		return this.controller.state().props.get( '_all' ).get( 'selection' );
	},

	clearItems: function() {

		this.$el.find( '.mexp-item' ).removeClass( 'selected details' );
		this.$el.find( '.mexp-items' ).empty();
		this.$el.find( '.mexp-pagination' ).hide();

	},

	loading: function() {

		// show spinner
		this.$el.find( '.mexp-loading' ).show();

		// hide messages
		this.$el.find( '.mexp-error' ).hide().text('');
		this.$el.find( '.mexp-empty' ).hide().text('');

		// disable 'load more' button
		jQuery( '#' + this.service.id + '-loadmore' ).attr( 'disabled', true );
	},

	loaded: function( response ) {

		// hide spinner
		this.$el.find( '.mexp-loading' ).hide();

		// disable 'load more' button
		if ( this.model.get( 'max_id' ) == 0 )
			jQuery( '#' + this.service.id + '-loadmore' ).hide();
		else
			jQuery( '#' + this.service.id + '-loadmore' ).show();

	},

	fetchItems: function() {

		this.trigger( 'loading' );

		var data = {
			_nonce  : mexp._nonce,
			service : this.service.id,
			tab     : this.tab,
			params  : this.model.get( 'params' ),
			page    : this.model.get( 'page' ),
			max_id  : this.model.get( 'max_id' ),
			cursor  : this.model.get( 'cursor' )
		};

		media.ajax( 'mexp_request', {
			context : this,
			success : this.fetchedSuccess,
			error   : this.fetchedError,
			data    : data
		} );

	},

	fetchedSuccess: function( response ) {

		if ( !this.model.get( 'page' ) ) {

			if ( !response.items ) {
				this.fetchedEmpty( response );
				return;
			}

			this.model.set( 'min_id', response.meta.min_id );
			this.model.set( 'items',  response.items );

			this.collection.reset( response.items );
		} else {

			if ( !response.items ) {
				this.fetchedEmpty( response );
				return;
			}

			this.model.set( 'items', this.model.get( 'items' ).concat( response.items ) );

			var collection = new Backbone.Collection( response.items );
			var container  = document.createDocumentFragment();

			this.collection.add( collection.models );

			collection.each( function( model ) {
				container.appendChild( this.renderItem( model ) );
			}, this );

			this.$el.find( '.mexp-items' ).append( container );

		}

		jQuery( '#' + this.service.id + '-loadmore' ).attr( 'disabled', false ).show();
		this.model.set( 'max_id', response.meta.max_id );

		if ( response.meta.cursor )
			this.model.set( 'cursor', response.meta.cursor );

		this.trigger( 'loaded loaded:success', response );

	},

	fetchedEmpty: function( response ) {

		this.$el.find( '.mexp-empty' ).text( this.service.labels.noresults ).show();
		this.$el.find( '.mexp-pagination' ).hide();

		this.trigger( 'loaded loaded:noresults', response );

	},

	fetchedError: function( response ) {

		this.$el.find( '.mexp-error' ).text( response.error_message ).show();
		jQuery( '#' + this.service.id + '-loadmore' ).attr( 'disabled', false ).show();
		this.trigger( 'loaded loaded:error', response );

	},

	updateInput: function( event ) {

		// triggered when a search is submitted

		var params = this.model.get( 'params' );
		var els = this.$el.find( '.mexp-toolbar' ).find( ':input' ).each( function( k, el ) {
			var n = jQuery(this).attr('name');
			if ( n )
				params[n] = jQuery(this).val();
		} );
		
		this.clearSelection();
		jQuery( '#mexp-button' ).attr( 'disabled', 'disabled' );
		this.model.set( 'params', params );
		this.trigger( 'change:params' ); // why isn't this triggering automatically? might be because params is an object

		event.preventDefault();

	},

	paginate : function( event ) {

		if( 0 == this.collection.length )
			return;

		var page = this.model.get( 'page' ) || 1;

		this.model.set( 'page', page + 1 );
		this.trigger( 'change:page' );

		event.preventDefault();

	},

	changedPage: function() {

		// triggered when the pagination is changed

		this.fetchItems();

	},

	changedParams: function() {

		// triggered when the search parameters are changed

		this.model.set( 'page',   null );
		this.model.set( 'min_id', null );
		this.model.set( 'max_id', null );
		this.model.set( 'cursor', null );

		this.clearItems();
		this.fetchItems();

	}

});

// VIEW - MEDIA FRAME (MENU BAR)	

var post_frame = media.view.MediaFrame.Post;

media.view.MediaFrame.Post = post_frame.extend({

	initialize: function() {

		post_frame.prototype.initialize.apply( this, arguments );

		_.each( mexp.services, function( service, service_id ) {

			var id = 'mexp-service-' + service.id;
			var controller = {
				id      : id,
				router  : id + '-router',
				toolbar : id + '-toolbar',
				menu    : 'default',
				title   : service.labels.title,
				tabs    : service.tabs,
				priority: 100 // places it above Insert From URL
			};

			for ( var tab in service.tabs ) {

				// Content
				this.on( 'content:render:' + id + '-content-' + tab, _.bind( this.mexpContentRender, this, service, tab ) );

				// Set the default tab
				if ( service.tabs[tab].defaultTab )
					controller.content = id + '-content-' + tab;

			}

			this.states.add([
				new media.controller.MEXP( controller )
			]);

			// Tabs
			this.on( 'router:create:' + id + '-router', this.createRouter, this );
			this.on( 'router:render:' + id + '-router', _.bind( this.mexpRouterRender, this, service ) );

			// Toolbar
			this.on( 'toolbar:create:' + id + '-toolbar', this.mexpToolbarCreate, this );
			//this.on( 'toolbar:render:' + id + '-toolbar', _.bind( this.mexpToolbarRender, this, service ) );

		}, this );

	},

	mexpRouterRender : function( service, view ) {

		var id   = 'mexp-service-' + service.id;
		var tabs = {};

		for ( var tab in service.tabs ) {
			tab_id = id + '-content-' + tab;
			tabs[tab_id] = {
				text : service.tabs[tab].text
			};
		}

		view.set( tabs );

	},

	mexpToolbarRender : function( service, view ) {

		view.set( 'selection', new media.view.Selection.MEXP({
			service    : service,
			controller : this,
			collection : this.state().props.get('_all').get('selection'),
			priority   : -40
		}).render() );

	},

	mexpContentRender : function( service, tab ) {

		/* called when a tab becomes active */

		this.content.set( new media.view.MEXP( {
			service    : service,
			controller : this,
			model      : this.state().props.get( tab ),
			tab        : tab,
			className  : 'clearfix attachments-browser mexp-content mexp-content-' + service.id + ' mexp-content-' + service.id + '-' + tab
		} ) );

	},

	mexpToolbarCreate : function( toolbar ) {

		toolbar.view = new media.view.Toolbar.MEXP( {
			controller : this
		} );

	}

});

// CONTROLLER:

media.controller.MEXP = media.controller.State.extend({

	initialize: function( options ) {

		this.props = new Backbone.Collection();

		for ( var tab in options.tabs ) {

			this.props.add( new Backbone.Model({
				id     : tab,
				params : {},
				page   : null,
				min_id : null,
				max_id : null,
				cursor : null,
				fetchOnRender : options.tabs[ tab ].fetchOnRender,
				alwaysRefresh : options.tabs[ tab ].alwaysRefresh,
				sideload : options.tabs[ tab ].sideload
			}) );

		}

		this.props.add( new Backbone.Model({
			id        : '_all',
			selection : new Backbone.Collection()
		}) );

		this.props.on( 'change:selection', this.refresh, this );

	},

	refresh: function() {
		this.frame.toolbar.get().refresh();
	},

	mexpInsert: function() {

		var selection = this.frame.content.get().getSelection(),
		urls          = [];

		selection.each( function( model ) {
			urls.push( model.get( 'url' ) );
		}, this );

		if ( typeof(tinymce) === 'undefined' || tinymce.activeEditor === null || tinymce.activeEditor.isHidden() ) {
			media.editor.insert( _.toArray( urls ).join( "\n\n" ) );
		} else {
			media.editor.insert( "<p>" + _.toArray( urls ).join( "</p><p>" ) + "</p>" );
		}

		selection.reset();
		this.frame.close();

	},

	mexpSideload : function() {

		var selection = this.frame.content.get().getSelection(),
			serviceName = this.attributes.id.replace( /mexp-service-/g, '' ),
			nonce = jQuery( '#' + serviceName + '_verify' ).val(),
			self = this;

		this.frame.setState( 'insert' );
		selection.each( function( model ) {
			var filename = model.get( 'content' ),
				new_selection = this.frame.state().get( 'selection' ),
				file = {},
				attributes = {
					file: file,
					uploading: true,
					date: new Date(),
					filename: filename,
					menuOrder: 0,
					uploadedTo: wp.media.model.settings.post.id,
					type : 'image',
					subtype : 'jpg',
					loaded : 0,
					size : 100,
					percent : 40
				};

			file.attachment = wp.media.model.Attachment.create( attributes );
			wp.Uploader.queue.add( file.attachment );
			new_selection.add( file.attachment ? [ file.attachment ] : [] );

			jQuery.post( ajaxurl, {
				action: serviceName + '_sideload',
				nonce: nonce,
				url: filename
			} ).done( function( r ){
				self.frame.uploader.uploader.uploader.trigger( 'FileUploaded', file, {
					response : r,
					status : 200
				});
			});
		}, this );
		selection.reset();
	}

});
;
/*
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

*/

var mexp_twitter_location_js_loaded = false;
var mexp_twitter_location_map       = null;
var mexp_twitter_location_marker    = null;
var mexp_twitter_location_timeout   = null;
var pf = wp.media.view.MediaFrame.Post;

wp.media.view.MediaFrame.Post = pf.extend({

	initialize: function() {

		pf.prototype.initialize.apply( this, arguments );

		this.on( 'content:render:mexp-service-twitter-content-location', _.bind( function() {

			this.state().frame.content.get().on( 'loaded', function( response ) {

				if ( ! response || ! response.meta || ! response.meta.coords )
					return;

				var ll = new google.maps.LatLng( response.meta.coords.lat, response.meta.coords.lng );

				mexp_twitter_location_marker.setPosition( ll );
				mexp_twitter_location_map.panTo( ll );

			} );

			if ( !mexp_twitter_location_js_loaded ) {
				$('#mexp_twitter_map_canvas').css( 'background-image', 'url(' + mexp.admin_url + '/images/wpspin_light.gif)');
				if ( ! google.maps ) { // Google Maps is not loaded yet
                    var script = document.createElement("script");
                    script.type = "text/javascript";
                    script.src = mexp.services.twitter.labels.gmaps_url + '?key=' + mexp.services.twitter.labels.api_key + '&callback=mexp_twitter_location_initialize';
                    document.body.appendChild(script);
				} else {
                    mexp_twitter_location_initialize();
				}
			} else {
				mexp_twitter_location_initialize();
			}

		}, this ) );

	}

});

function mexp_twitter_location_initialize() {

	var callback = function() {
		mexp_twitter_location_fetch( mexp_twitter_location_load );
	};

	if ( navigator.geolocation ) {
		navigator.geolocation.getCurrentPosition( mexp_twitter_location_load, callback );
		mexp_twitter_location_timeout = window.setTimeout( callback, 8000 );
	} else {
		mexp_twitter_location_fetch( callback );
	}

	mexp_twitter_location_js_loaded = true;

}

function mexp_twitter_location_fetch( callback ) {

	callback( {
		coords : google.loader.ClientLocation
	} );

}

function mexp_twitter_location_load( position ) {

	var lat, lng;
	$ = jQuery;

	window.clearTimeout( mexp_twitter_location_timeout );

	// Enable the visual refresh
	google.maps.visualRefresh = true;

	var loc = $('#mexp-twitter-search-location-coords').val();

	if ( loc ) {
		ll = loc.split( ',' );
		lat = ll[0];
		lng = ll[1];
	} else if ( position.coords ) {
		lat = position.coords.latitude;
		lng = position.coords.longitude;
		$('#mexp-twitter-search-location-coords').val( lat + ',' + lng );
	}

	var radius = $('#mexp-twitter-search-location-radius').val();
	var mapOptions = {
		center            : new google.maps.LatLng( lat, lng ),
		zoom              : 10,
		mapTypeId         : google.maps.MapTypeId.ROADMAP,
		mapTypeControl    : false,
		streetViewControl : false
	};
	mexp_twitter_location_map = new google.maps.Map( document.getElementById( 'mexp_twitter_map_canvas' ), mapOptions );
	mexp_twitter_location_marker = new google.maps.Marker({
		position  : new google.maps.LatLng( lat, lng ),
		draggable : true,
		map       : mexp_twitter_location_map
	});
	var circle = new google.maps.Circle({
		map          : mexp_twitter_location_map,
		radius       : ( radius * 1000 ), // metres
		strokeWeight : 1,
		fillColor    : 'blue',
		fillOpacity  : 0.15,
		strokeColor  : '#fff'
	});
	circle.bindTo( 'center', mexp_twitter_location_marker, 'position' );

	$('#mexp-twitter-search-location-radius').on('change',function(){
		circle.setRadius( $(this).val() * 1000 );
	});
	$('#mexp-twitter-search-location-name').on('change',function(){
		$('#mexp-twitter-search-location-coords').val('');
	});

	google.maps.event.addListener(mexp_twitter_location_marker, 'dragend', function() {
		p = mexp_twitter_location_marker.getPosition();
		mexp_twitter_location_map.panTo( p );
		$('#mexp-twitter-search-location-coords').val( p.lat() + ',' + p.lng() ).closest('form').submit();
	});

}
;
/**
 * VideoPress admin media scripts
 */
(function($) {
	var VideoPressModalView = Backbone.View.extend({
		'className': 'videopress-modal-container',
		'template': wp.media.template( 'videopress-media-modal' ),

		// Render the VideoPress modal with a video object by guid.
		render: function( guid ) {
			this.delegateEvents( {
				'click .videopress-modal-close': 'closeModal',
				'click .videopress-modal-backdrop': 'closeModal'
			} );

			this.guid = guid;

			if ( ! this.$frame )
				this.$frame = $( '.media-frame-content' );

			this.$video = $( '#videopress-object-' + this.guid );
			this.$el.html( this.template( { 'video' : this.$video.html() } ) );
			this.$modal = this.$( '.videopress-modal' );
			this.$modal.hide();

			this.$frame.append( this.$el );
			this.$modal.slideDown( 'fast' );

			return this;
		},

		closeModal: function() {
			var view = this;
			var guid = this.guid;

			this.$modal.slideUp( 'fast', function() { view.remove(); } );

			$.post( ajaxurl, { action: 'videopress_get_screenshot', guid: guid }, function(r) {
				if ( 'success' == r.status && r.data.length > 0 ) {
					var $thumbnail = $( '#videopress-thumbnail-' + guid );
					var $img = $( '<img />' );

					// Avoid the jumpy effect
					$thumbnail.height( $thumbnail.find( 'img' ).height() );

					$img.attr( 'src', r.data );
					$thumbnail.html( $img );
				}
			}, 'json' );

			return this;
		}
	});

	var VideoPressModal = new VideoPressModalView();

	$( document ).on( 'click', 'a.videopress-preview', function() {
		VideoPressModal.render( $( this ).data( 'videopress-guid' ) );
	} );

	$( document ).on( 'vpRefreshThumbnail', function( e, guid ) {
		console.log( guid );
	} );
})(jQuery);;
(()=>{var e,t;e=jQuery,(t=wp.media).view.Settings.Gallery=t.view.Settings.Gallery.extend({render:function(){var a=this.$el;return t.view.Settings.prototype.render.apply(this,arguments),a.append(t.template("jetpack-gallery-settings")),t.gallery.defaults.type="default",this.update.apply(this,["type"]),a.find("select[name=type]").on("change",(function(){var t=a.find("select[name=columns]").closest("label.setting");"default"===e(this).val()||"thumbnails"===e(this).val()?t.show():t.hide()})).change(),this}})})();;
/* global jQuery, wp, wpcomGutenberg */

( function ( $ ) {

	/* Don't allow users to publish if they haven't verified their email yet.
	 *
	 * This is used to render an email confirmation modal in the post editor
	 * when going through the Launchpad newsletter flow
	 * for new users that haven't verified their email yet.
	 * P2 reference - https://wp.me/paYE8P-23O.
	 *
	 * Uses Gutenberg's notice component
	 * @see https://github.com/WordPress/gutenberg/tree/trunk/packages/components/src/notice
	 */
	function displayEmailUnverifiedNotice() {
		if ( wp && wp.data && wp.data.dispatch ) {
			wp.data.dispatch( 'core/notices' ).createWarningNotice( wpcomGutenberg.verifyNotice.message, {
				isDismissible: false,
				actions: [
					{
						label: wpcomGutenberg.verifyNotice.resendLabel,
						url: wpcomGutenberg.verifyNotice.resendUrl,
					}
				]
			} );
		}

		setInterval( function() {
			var $publishButton = $( '.editor-post-publish-panel__toggle, .editor-post-publish-button' );
			if ( $publishButton.length < 1 ) {
				return;
			}

			$publishButton.attr( 'disabled', 'disabled' );
		}, 1000 );
	}

	if ( typeof wpcomGutenberg !== 'undefined' && wpcomGutenberg.isEmailUnverified && ! wpcomGutenberg.isPrivateByDefault ) {
		displayEmailUnverifiedNotice();
	}
} )( jQuery );
;
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.createReactClass=e(require("react")):t.createReactClass=e(t.React)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function o(t){return t}function r(t,e,n){function r(t,e){var n=N.hasOwnProperty(e)?N[e]:null;b.hasOwnProperty(e)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function u(t,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var o=t.prototype,i=o.__reactAutoBindPairs;n.hasOwnProperty(c)&&g.mixins(t,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var u=n[a],p=o.hasOwnProperty(a);if(r(p,a),g.hasOwnProperty(a))g[a](t,u);else{var l=N.hasOwnProperty(a),E="function"==typeof u,m=E&&!l&&!p&&!1!==n.autobind;if(m)i.push(a,u),o[a]=u;else if(p){var h=N[a];s(l&&("DEFINE_MANY_MERGED"===h||"DEFINE_MANY"===h),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",h,a),"DEFINE_MANY_MERGED"===h?o[a]=f(o[a],u):"DEFINE_MANY"===h&&(o[a]=d(o[a],u))}else o[a]=u}}}else;}function p(t,e){if(e)for(var n in e){var o=e[n];if(e.hasOwnProperty(n)){var r=n in g;s(!r,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in t;if(i){var a=_.hasOwnProperty(n)?_[n]:null;return s("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=f(t[n],o))}t[n]=o}}}function l(t,e){s(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(s(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function f(t,e){return function(){var n=t.apply(this,arguments),o=e.apply(this,arguments);if(null==n)return o;if(null==o)return n;var r={};return l(r,n),l(r,o),r}}function d(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function E(t,e){var n=e.bind(t);return n}function m(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var o=e[n],r=e[n+1];t[o]=E(t,r)}}function h(t){var e=o(function(t,o,r){this.__reactAutoBindPairs.length&&m(this),this.props=t,this.context=o,this.refs=a,this.updater=r||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;s("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=i});e.prototype=new I,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],y.forEach(u.bind(null,e)),u(e,v),u(e,t),u(e,D),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),s(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in N)e.prototype[r]||(e.prototype[r]=null);return e}var y=[],N={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},g={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)u(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=i({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=i({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=i({},t.propTypes,e)},statics:function(t,e){p(t,e)},autobind:function(){}},v={componentDidMount:function(){this.__isMounted=!0}},D={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},I=function(){};return i(I.prototype,t.prototype,b),h}var i=n(5),a=n(3),s=n(4),c="mixins";t.exports=r},function(e,n){e.exports=t},function(t,e,n){"use strict";var o=n(1),r=n(0);if(void 0===o)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new o.Component).updater;t.exports=r(o.Component,o.isValidElement,i)},function(t,e,n){"use strict";var o={};t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o,i,a,s,c){if(r(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,o,i,a,s,c],l=0;u=new Error(e.replace(/%s/g,function(){return p[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var r=function(t){};t.exports=o},function(t,e,n){"use strict";function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,c=o(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var p in n)i.call(n,p)&&(c[p]=n[p]);if(r){s=r(n);for(var l=0;l<s.length;l++)a.call(n,s[l])&&(c[s[l]]=n[s[l]])}}return c}}])});;
/* global Promise, wp */

/**
 * Unregister the WordPress core embed block variation.
 */
function unregisterWordPressEmbedBlockVariation( settings, name ) {
	'use strict';
	if ( name !== 'core/embed' || ! settings.variations ) {
		return settings;
	}

	settings.variations = settings.variations.filter( function( variation ) {
		return variation.name !== 'wordpress';
	} );

	return settings;
}

wp.hooks.addFilter( 'blocks.registerBlockType', 'unregisterWordPressEmbedBlockVariation', unregisterWordPressEmbedBlockVariation );

/**
 * Transform oEmbed response
 */
function transformOEmbedApiResponse( options, next ) {
	if ( options.path && options.path.indexOf( 'oembed' ) !== -1 ) {
		var url = wp.url.getQueryArg( options.path, 'url' );
		var response = next( options, next );

		/**
		 * Creates an embed response emulating core's fallback link.
		 */
		function createFallbackResponse() {
			var link = document.createElement( 'a' );
			link.href = url;
			link.innerText = url;
			return {
				html: link.outerHTML,
				type: 'rich',
				provider_name: 'Embed'
			};
		}

		return new Promise( function( resolve ) {
			response
				.then( function ( data ) {
					if ( data.html ) {
						/**
						* Removes wrappers from YouTube, Vimeo, Dailymotion, TED block, e.g.
						* <span class="embed-youtube">, <div class="embed-vimeo">, <div class="embed-dailymotion">, <div class="embed-ted">
						* and return just the <iframe> child directly to allow wide & full width sizing.
						* See: https://github.com/Automattic/wp-calypso/issues/43047, https://github.com/Automattic/wp-calypso/issues/102661
						*/
						var doc = document.implementation.createHTMLDocument('');
						doc.body.innerHTML = data.html;
						var selectors = [ '[class="embed-youtube"]', '[class="embed-vimeo"]', '[class="embed-dailymotion"]', '[class="embed-ted"]' ].join( ',' );
						var wrapper = doc.querySelector(selectors);
						data.html = wrapper ? wrapper.innerHTML : data.html;
					}

					resolve( data );
				} )
				.catch( function () {
					resolve( createFallbackResponse() );
				} );
		} );
	} else {
		return next( options, next );
	}
}
wp.apiFetch.use( transformOEmbedApiResponse );;
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JetpackScriptDataModule=t():e.JetpackScriptDataModule=t()}(globalThis,(()=>(()=>{"use strict";var e={729:(e,t,r)=>{r.d(t,{$8:()=>n.$8,IT:()=>n.IT,L2:()=>n.L2,Sy:()=>n.Sy,au:()=>n.au,d9:()=>n.d9,d_:()=>n.d_,e5:()=>n.e5,hT:()=>n.hT,lI:()=>n.lI,mH:()=>n.mH,oQ:()=>n.oQ,sV:()=>n.sV});var n=r(336)},336:(e,t,r)=>{function n(){return window.JetpackScriptData}function o(){return n().site}function i(e=""){return`${n().site.admin_url}${e}`}function a(e=""){return i(`admin.php?page=jetpack${e}`)}function u(e=""){return i(`admin.php?page=my-jetpack${e}`)}function c(){return n().site.plan?.features?.active??[]}function s(e){return c().includes(e)}function p(){return"wpcom"===n().site?.host}function d(){return"atomic"===n().site?.host}function f(){return"woa"===n().site?.host}function l(){return n().site?.is_wpcom_platform}function m(){return"unknown"===n()?.site?.host}function S(e){return n().user.current_user.capabilities[e]}r.d(t,{$8:()=>l,IT:()=>s,L2:()=>m,Sy:()=>p,au:()=>n,d9:()=>d,d_:()=>S,e5:()=>u,hT:()=>i,lI:()=>f,mH:()=>c,oQ:()=>a,sV:()=>o})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{currentUserCan:()=>o.d_,getActiveFeatures:()=>o.mH,getAdminUrl:()=>o.hT,getJetpackAdminPageUrl:()=>o.oQ,getMyJetpackUrl:()=>o.e5,getScriptData:()=>o.au,getSiteData:()=>o.sV,isAtomicSite:()=>o.d9,isJetpackSelfHostedSite:()=>o.L2,isSimpleSite:()=>o.Sy,isWoASite:()=>o.lI,isWpcomPlatformSite:()=>o.$8,siteHasFeature:()=>o.IT});var o=r(729);return n})()));;
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JetpackConnection=t():e.JetpackConnection=t()}(globalThis,(()=>(()=>{var e={7689:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={error:"TcCZnGE6mad8Dvz9pCZi",button:"_mn6o2Dtm5pfFWc8_A1K"}},2258:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={button:"zI5tJ_qhWE6Oe6Lk75GY","is-icon-button":"tuBt2DLqimiImoqVzPqo",small:"Na39I683LAaSA99REg14",normal:"ipS7tKy9GntCS4R3vekF",icon:"paGLQwtPEaJmtArCcmyK",regular:"lZAo6_oGfclXOO9CC6Rd","full-width":"xJDOiJxTt0R_wSl8Ipz_",loading:"q_tVWqMjl39RcY6WtQA6","external-icon":"CDuBjJp_8jxzx5j6Nept"}},9535:()=>{},8403:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={sm:"(max-width: 599px)",md:"(min-width: 600px) and (max-width: 959px)",lg:"(min-width: 960px)"}},6406:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={placeholder:"NisihrgiIKl_knpYJtfg",pulse:"R2i0K45dEF157drbVRPI"}},4319:()=>{},8325:()=>{},9634:()=>{},4495:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={reset:"WQVtrU6q0L1Igcj7wCrQ","headline-medium":"UujoBFTnQNY2cWU2SIsH","headline-small":"TeGO5V_thHw5lDAm1_2M","headline-small-regular":"WolQzb2MsSgiNmLtc7_j","title-medium":"hUB0JT8p1T2Hw28N6qC8","title-medium-semi-bold":"gKZWDv5chz3_O3Syp74H","title-small":"zY2No8Ga4b8shbOQGhnv",body:"tIj0D1t8Cc892ikmgFPZ","body-small":"KdcN0BnOaVeVhyLRKqhS","body-extra-small":"dso3Rh3tl3Xv1GumBktz","body-extra-small-bold":"mQ1UlbN9u4Mg9byO8m7v",label:"PItlW5vRExLnTj4a8eLE","m-0":"TwRpPlktzxhmFVeua7P5","mx-0":"zVfqx7gyb3o9mxfGynn1","my-0":"iSHVzNiB9iVleGljaQxy","mt-0":"xqDIp6cNVr_E6RXaiPyD","mr-0":"S8EwaXk1kyPizt6x4WH2","mb-0":"ODX5Vr1TARoLFkDDFooD","ml-0":"cphJ8dCpfimnky7P2FHg","m-1":"PFgIhNxIyiSuNvQjAIYj","mx-1":"M2jKmUzDxvJjjVEPU3zn","my-1":"io15gAh8tMTNbSEfwJKk","mt-1":"rcTN5uw9xIEeMEGL3Xi_","mr-1":"CQSkybjq2TcRM1Xo9COV","mb-1":"hfqOWgq6_MEGdFE82eOY","ml-1":"I8MxZQYTbuu595yfesWA","m-2":"kQkc6rmdpvLKPkyoJtVQ","mx-2":"j6vFPxWuu4Jan2ldoxpp","my-2":"hqr39dC4H_AbactPAkCG","mt-2":"c3dQnMi16C6J6Ecy4283","mr-2":"YNZmHOuRo6hU7zzKfPdP","mb-2":"Db8lbak1_wunpPk8NwKU","ml-2":"ftsYE5J9hLzquQ0tA5dY","m-3":"Det4MHzLUW7EeDnafPzq","mx-3":"h_8EEAztC29Vve1datb5","my-3":"YXIXJ0h1k47u6hzK8KcM","mt-3":"soADBBkcIKCBXzCTuV9_","mr-3":"zSX59ziEaEWGjnpZa4uV","mb-3":"yrVTnq_WBMbejg89c2ZQ","ml-3":"UKtHPJnI2cXBWtPDm5hM","m-4":"guexok_Tqd5Tf52hRlbT","mx-4":"oS1E2KfTBZkJ3F0tN7T6","my-4":"DN1OhhXi6AoBgEdDSbGd","mt-4":"ot2kkMcYHv53hLZ4LSn0","mr-4":"A1krOZZhlQ6Sp8Cy4bly","mb-4":"pkDbXXXL32237M0hokEh","ml-4":"XXv4kDTGvEnQeuGKOPU3","m-5":"yGqHk1a57gaISwkXwXe6","mx-5":"X8cghM358X3DkXLc9aNK","my-5":"GdfSmGwHlFnN2S6xBn1f","mt-5":"yqeuzwyGQ7zG0avrGqi_","mr-5":"g9emeCkuHvYhveiJbfXO","mb-5":"Lvk3dqcyHbZ07QCRlrUQ","ml-5":"r3yQECDQ9qX0XZzXlVAg","m-6":"aQhlPwht2Cz1X_63Miw0","mx-6":"JyHb0vK3wJgpblL9s5j8","my-6":"cY2gULL1lAv6WPNIRuf3","mt-6":"NBWQ9Lwhh_fnry3lg_p7","mr-6":"yIOniNe5E40C8fWvBm5V","mb-6":"t30usboNSyqfQWIwHvT3","ml-6":"Nm_TyFkYCMhOoghoToKJ","m-7":"C4qJKoBXpgKtpmrqtEKB","mx-7":"S93Srbu6NQ_PBr7DmTiD","my-7":"fJj8k6gGJDks3crUZxOS","mt-7":"cW6D6djs7Ppm7fD7TeoV","mr-7":"DuCnqNfcxcP3Z__Yo5Ro","mb-7":"im8407m2fw5vOg7O2zsw","ml-7":"G0fbeBgvz2sh3uTP9gNl","m-8":"kvW3sBCxRxUqz1jrVMJl","mx-8":"tOjEqjLONQdkiYx_XRnw","my-8":"op5hFSx318zgxsoZZNLN","mt-8":"c9WfNHP6TFKWIfLxv52J","mr-8":"sBA75QqcqRwwYSHJh2wc","mb-8":"GpL6idrXmSOM6jB8Ohsf","ml-8":"HbtWJoQwpgGycz8dGzeT","p-0":"uxX3khU88VQ_Ah49Ejsa","px-0":"KX0FhpBKwKzs9fOUdbNz","py-0":"PfK8vKDyN32dnimlzYjz","pt-0":"emxLHRjQuJsImnPbQIzE","pr-0":"kJ8WzlpTVgdViXt8ukP9","pb-0":"tg_UIUI11VBzrTAn2AzJ","pl-0":"uczvl8kaz84oPQJ2DB2R","p-1":"o7UHPcdVK3lt7q3lqV4o","px-1":"IDqEOxvDoYrFYxELPmtX","py-1":"DdywPW2qSYlu2pt8tpO2","pt-1":"npy3hw4A5QSkDicb2CJJ","pr-1":"LgbptTApNY5NwLQvEFAt","pb-1":"WZQy2SZuZso59bUsXXyl","pl-1":"o331apInxNunbYB3SfPE","p-2":"fMPIyD9Vqki1Lrc_yJnG","px-2":"i2pMcTcdrr10IQoiSm_L","py-2":"eA702gn32kwptiI1obXH","pt-2":"o9bGieUKcYc8o0Ij9oZX","pr-2":"SwZcFez1RDqWsOFjB5iG","pb-2":"eHpLc_idmuEqeqCTvqkN","pl-2":"vU39i2B4P1fUTMB2l6Vo","p-3":"JHWNzBnE29awhdu5BEh1","px-3":"X72lGbb56L3KFzC2xQ9N","py-3":"BzfNhRG8wXdCEB5ocQ6e","pt-3":"srV0KSDC83a2fiimSMMQ","pr-3":"lUWfkmbQjCskhcNwkyCm","pb-3":"Ts0dIlc3aTSL7V4cIHis","pl-3":"CzlqQXXhX6MvorArFZ8B","p-4":"TqMPkQtR_DdZuKb5vBoV","px-4":"a7UrjhI69Vetlcj9ZVzz","py-4":"StEhBzGs2Gi5dDEkjhAv","pt-4":"FGneZfZyvYrt1dG0zcnm","pr-4":"APEH216rpdlJWgD2fHc8","pb-4":"oGwXC3ohCic9XnAj6x69","pl-4":"U6gnT9y42ViPNOcNzBwb","p-5":"IpdRLBwnHqbqFrixgbYC","px-5":"HgNeXvkBa9o3bQ5fvFZm","py-5":"tJtFZM3XfPG9v9TSDfN1","pt-5":"PdifHW45QeXYfK568uD8","pr-5":"mbLkWTTZ0Za_BBbFZ5b2","pb-5":"vVWpZpLlWrkTt0hMk8XU","pl-5":"RxfaJj5a1Nt6IavEo5Zl","p-6":"SppJULDGdnOGcjZNCYBy","px-6":"palY2nLwdoyooPUm9Hhk","py-6":"WYw1JvZC0ppLdvSAPhr_","pt-6":"YEEJ9b90ueQaPfiU8aeN","pr-6":"QE0ssnsKvWJMqlhPbY5u","pb-6":"n8yA3jHlMRyLd5UIfoND","pl-6":"tXHmxYnHzbwtfxEaG51n","p-7":"kBTsPKkO_3g_tLkj77Um","px-7":"RyhrFx6Y1FGDrGAAyaxm","py-7":"CBwRpB0bDN3iEdQPPMJO","pt-7":"vQVSq6SvWKbOMu6r4H6b","pr-7":"oBy5__aEADMsH46mrgFX","pb-7":"KVEXoJqf1s92j0JMdNmN","pl-7":"ZMXGNrNaKW3k_3TLz0Fq","p-8":"tuiR9PhkHXhGyEgzRZRI","px-8":"U7454qyWkQNa2iaSJziu","py-8":"VLYIv2GVocjuN93e8HC8","pt-8":"X1rm9DQ1zLGLfogja5Gn","pr-8":"JS7G6kAuqJo5GIuF8S5t","pb-8":"Y8F9ga1TDCMbM1lj4gUz","pl-8":"AJuyNGrI63BOWql719H8"}},1772:()=>{},9064:()=>{},381:()=>{},4175:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={heading:"urouayitSUT8zW0V3p_0",notice:"iXXJlk08gFDeCvsTTlNQ",button:"MWqRqr7q6fgvLxitcWYk","bigger-than-medium":"YLcXAoc82nypTPaKSAcd",error:"e6hHy8BZ7ZKPSXbIC0UG",message:"jXz8LnXNzMDdtHqkG0sZ"}},7419:()=>{},785:()=>{},255:()=>{},3732:()=>{},2057:()=>{},1127:()=>{},7750:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(6087);const c=(0,o.forwardRef)((function({icon:e,size:t=24,...n},c){return(0,o.cloneElement)(e,{width:t,height:t,...n,ref:c})}))},1386:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(5573),c=n(790);const r=(0,c.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(o.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})})},8391:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(5573),c=n(790);const r=(0,c.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(o.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})})},4804:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let o=0,c=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(c=o))})),t.splice(c,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(5067)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},5067:(e,t,n)=>{e.exports=function(e){function t(e){let n,c,r,s=null;function i(...e){if(!i.enabled)return;const o=i,c=Number(new Date),r=c-(n||c);o.diff=r,o.prev=n,o.curr=c,n=c,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,c)=>{if("%%"===n)return"%";s++;const r=t.formatters[c];if("function"==typeof r){const t=e[s];n=r.call(o,t),e.splice(s,1),s--}return n})),t.formatArgs.call(o,e);(o.log||t.log).apply(o,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=o,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(c!==t.namespaces&&(c=t.namespaces,r=t.enabled(e)),r),set:e=>{s=e}}),"function"==typeof t.init&&t.init(i),i}function o(e,n){const o=t(this.namespace+(void 0===n?":":n)+e);return o.log=this.log,o}function c(e,t){let n=0,o=0,c=-1,r=0;for(;n<e.length;)if(o<t.length&&(t[o]===e[n]||"*"===t[o]))"*"===t[o]?(c=o,r=n,o++):(n++,o++);else{if(-1===c)return!1;o=c+1,r++,n=r}for(;o<t.length&&"*"===t[o];)o++;return o===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of n)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const n of t.skips)if(c(e,n))return!1;for(const n of t.names)if(c(e,n))return!0;return!1},t.humanize=n(3594),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},3594:e=>{var t=1e3,n=60*t,o=60*n,c=24*o,r=7*c,s=365.25*c;function i(e,t,n,o){var c=t>=1.5*n;return Math.round(e/n)+" "+o+(c?"s":"")}e.exports=function(e,a){a=a||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!i)return;var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"weeks":case"week":case"w":return a*r;case"days":case"day":case"d":return a*c;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===l&&isFinite(e))return a.long?function(e){var r=Math.abs(e);if(r>=c)return i(e,r,c,"day");if(r>=o)return i(e,r,o,"hour");if(r>=n)return i(e,r,n,"minute");if(r>=t)return i(e,r,t,"second");return e+" ms"}(e):function(e){var r=Math.abs(e);if(r>=c)return Math.round(e/c)+"d";if(r>=o)return Math.round(e/o)+"h";if(r>=n)return Math.round(e/n)+"m";if(r>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1583:(e,t,n)=>{"use strict";var o=n(1752);function c(){}function r(){}r.resetWarningCache=c,e.exports=function(){function e(e,t,n,c,r,s){if(s!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:c};return n.PropTypes=n,n}},3619:(e,t,n)=>{e.exports=n(1583)()},1752:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},372:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(4804);const c=n.n(o)()("dops:analytics");let r,s;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;const i={initialize:function(e,t,n){i.setUser(e,t),i.setSuperProps(n),i.identifyUser()},setGoogleAnalyticsEnabled:function(e,t=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){s={ID:e,username:t}},setSuperProps:function(e){r=e},assignSuperProps:function(e){r=Object.assign(r||{},e)},mc:{bumpStat:function(e,t){const n=function(e,t){let n="";if("object"==typeof e){for(const t in e)n+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);c("Bumping stats %o",e)}else n="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),c('Bumping stat "%s" in group "%s"',t,e);return n}(e,t);i.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+n+"&t="+Math.random())},bumpStatWithPageView:function(e,t){const n=function(e,t){let n="";if("object"==typeof e){for(const t in e)n+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);c("Built stats %o",e)}else n="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),c('Built stat "%s" in group "%s"',t,e);return n}(e,t);i.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+n+"&t="+Math.random())}},pageView:{record:function(e,t){i.tracks.recordPageView(e),i.ga.recordPageView(e,t)}},purchase:{record:function(e,t,n,o,c,r,s){i.ga.recordPurchase(e,t,n,o,c,r,s)}},tracks:{recordEvent:function(e,t){t=t||{},0===e.indexOf("akismet_")||0===e.indexOf("jetpack_")?(r&&(c("- Super Props: %o",r),t=Object.assign(t,r)),c('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])):c('- Event name must be prefixed by "akismet_" or "jetpack_"')},recordJetpackClick:function(e){const t="object"==typeof e?e:{target:e};i.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){i.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){c("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};i.ga.initialized||(s&&(e={userId:"u-"+s.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),i.ga.initialized=!0)},recordPageView:function(e,t){i.ga.initialize(),c("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t}))},recordEvent:function(e,t,n,o){i.ga.initialize();let r="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";void 0!==n&&(r+=" [Option Label: "+n+"]"),void 0!==o&&(r+=" [Option Value: "+o+"]"),c(r),this.googleAnalyticsEnabled&&window.ga("send","event",e,t,n,o)},recordPurchase:function(e,t,n,o,c,r,s){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:o,currency:s}),window.ga("ecommerce:addItem",{id:e,name:t,sku:n,price:c,quantity:r}),window.ga("ecommerce:send")}},identifyUser:function(){s&&window._tkq.push(["identifyUser",s.ID,s.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},a=i},5932:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p});var o=n(6439),c=n(3832);function r(e){class t extends Error{constructor(...t){super(...t),this.name=e}}return t}const s=r("JsonParseError"),i=r("JsonParseAfterRedirectError"),a=r("Api404Error"),l=r("Api404AfterRedirectError"),d=r("FetchNetworkError");const p=new function(e,t){let n=e,r=e,s={"X-WP-Nonce":t},i={credentials:"same-origin",headers:s},a={method:"post",credentials:"same-origin",headers:Object.assign({},s,{"Content-type":"application/json"})},l=function(e){const t=e.split("?"),n=t.length>1?t[1]:"",o=n.length?n.split("&"):[];return o.push("_cacheBuster="+(new Date).getTime()),t[0]+"?"+o.join("&")};const d={setApiRoot(e){n=e},setWpcomOriginApiUrl(e){r=e},setApiNonce(e){s={"X-WP-Nonce":e},i={credentials:"same-origin",headers:s},a={method:"post",credentials:"same-origin",headers:Object.assign({},s,{"Content-type":"application/json"})}},setCacheBusterCallback:e=>{l=e},registerSite:(e,t,c)=>{const r={};return(0,o.jetpackConfigHas)("consumer_slug")&&(r.plugin_slug=(0,o.jetpackConfigGet)("consumer_slug")),null!==t&&(r.redirect_uri=t),c&&(r.from=c),g(`${n}jetpack/v4/connection/register`,a,{body:JSON.stringify(r)}).then(u).then(m)},fetchAuthorizationUrl:e=>p((0,c.addQueryArgs)(`${n}jetpack/v4/connection/authorize_url`,{no_iframe:"1",redirect_uri:e}),i).then(u).then(m),fetchSiteConnectionData:()=>p(`${n}jetpack/v4/connection/data`,i).then(m),fetchSiteConnectionStatus:()=>p(`${n}jetpack/v4/connection`,i).then(m),fetchSiteConnectionTest:()=>p(`${n}jetpack/v4/connection/test`,i).then(u).then(m),fetchUserConnectionData:()=>p(`${n}jetpack/v4/connection/data`,i).then(m),fetchUserTrackingSettings:()=>p(`${n}jetpack/v4/tracking/settings`,i).then(u).then(m),updateUserTrackingSettings:e=>g(`${n}jetpack/v4/tracking/settings`,a,{body:JSON.stringify(e)}).then(u).then(m),disconnectSite:()=>g(`${n}jetpack/v4/connection`,a,{body:JSON.stringify({isActive:!1})}).then(u).then(m),fetchConnectUrl:()=>p(`${n}jetpack/v4/connection/url`,i).then(u).then(m),unlinkUser:(e=!1,t={})=>{const o={linked:!1,force:!!e};return t.disconnectAllUsers&&(o["disconnect-all-users"]=!0),g(`${n}jetpack/v4/connection/user`,a,{body:JSON.stringify(o)}).then(u).then(m)},reconnect:()=>g(`${n}jetpack/v4/connection/reconnect`,a).then(u).then(m),fetchConnectedPlugins:()=>p(`${n}jetpack/v4/connection/plugins`,i).then(u).then(m),setHasSeenWCConnectionModal:()=>g(`${n}jetpack/v4/seen-wc-connection-modal`,a).then(u).then(m),fetchModules:()=>p(`${n}jetpack/v4/module/all`,i).then(u).then(m),fetchModule:e=>p(`${n}jetpack/v4/module/${e}`,i).then(u).then(m),activateModule:e=>g(`${n}jetpack/v4/module/${e}/active`,a,{body:JSON.stringify({active:!0})}).then(u).then(m),deactivateModule:e=>g(`${n}jetpack/v4/module/${e}/active`,a,{body:JSON.stringify({active:!1})}),updateModuleOptions:(e,t)=>g(`${n}jetpack/v4/module/${e}`,a,{body:JSON.stringify(t)}).then(u).then(m),updateSettings:e=>g(`${n}jetpack/v4/settings`,a,{body:JSON.stringify(e)}).then(u).then(m),getProtectCount:()=>p(`${n}jetpack/v4/module/protect/data`,i).then(u).then(m),resetOptions:e=>g(`${n}jetpack/v4/options/${e}`,a,{body:JSON.stringify({reset:!0})}).then(u).then(m),activateVaultPress:()=>g(`${n}jetpack/v4/plugins`,a,{body:JSON.stringify({slug:"vaultpress",status:"active"})}).then(u).then(m),getVaultPressData:()=>p(`${n}jetpack/v4/module/vaultpress/data`,i).then(u).then(m),installPlugin:(e,t)=>{const o={slug:e,status:"active"};return t&&(o.source=t),g(`${n}jetpack/v4/plugins`,a,{body:JSON.stringify(o)}).then(u).then(m)},activateAkismet:()=>g(`${n}jetpack/v4/plugins`,a,{body:JSON.stringify({slug:"akismet",status:"active"})}).then(u).then(m),getAkismetData:()=>p(`${n}jetpack/v4/module/akismet/data`,i).then(u).then(m),checkAkismetKey:()=>p(`${n}jetpack/v4/module/akismet/key/check`,i).then(u).then(m),checkAkismetKeyTyped:e=>g(`${n}jetpack/v4/module/akismet/key/check`,a,{body:JSON.stringify({api_key:e})}).then(u).then(m),getFeatureTypeStatus:e=>p(`${n}jetpack/v4/feature/${e}`,i).then(u).then(m),fetchStatsData:e=>p(function(e){let t=`${n}jetpack/v4/module/stats/data`;-1!==t.indexOf("?")?t+=`&range=${encodeURIComponent(e)}`:t+=`?range=${encodeURIComponent(e)}`;return t}(e),i).then(u).then(m).then(_),getPluginUpdates:()=>p(`${n}jetpack/v4/updates/plugins`,i).then(u).then(m),getPlans:()=>p(`${n}jetpack/v4/plans`,i).then(u).then(m),fetchSettings:()=>p(`${n}jetpack/v4/settings`,i).then(u).then(m),updateSetting:e=>g(`${n}jetpack/v4/settings`,a,{body:JSON.stringify(e)}).then(u).then(m),fetchSiteData:()=>p(`${n}jetpack/v4/site`,i).then(u).then(m).then((e=>JSON.parse(e.data))),fetchSiteFeatures:()=>p(`${n}jetpack/v4/site/features`,i).then(u).then(m).then((e=>JSON.parse(e.data))),fetchSiteProducts:()=>p(`${n}jetpack/v4/site/products`,i).then(u).then(m),fetchSitePurchases:()=>p(`${n}jetpack/v4/site/purchases`,i).then(u).then(m).then((e=>JSON.parse(e.data))),fetchSiteBenefits:()=>p(`${n}jetpack/v4/site/benefits`,i).then(u).then(m).then((e=>JSON.parse(e.data))),fetchSiteDiscount:()=>p(`${n}jetpack/v4/site/discount`,i).then(u).then(m).then((e=>e.data)),fetchSetupQuestionnaire:()=>p(`${n}jetpack/v4/setup/questionnaire`,i).then(u).then(m),fetchRecommendationsData:()=>p(`${n}jetpack/v4/recommendations/data`,i).then(u).then(m),fetchRecommendationsProductSuggestions:()=>p(`${n}jetpack/v4/recommendations/product-suggestions`,i).then(u).then(m),fetchRecommendationsUpsell:()=>p(`${n}jetpack/v4/recommendations/upsell`,i).then(u).then(m),fetchRecommendationsConditional:()=>p(`${n}jetpack/v4/recommendations/conditional`,i).then(u).then(m),saveRecommendationsData:e=>g(`${n}jetpack/v4/recommendations/data`,a,{body:JSON.stringify({data:e})}).then(u),fetchProducts:()=>p(`${n}jetpack/v4/products`,i).then(u).then(m),fetchRewindStatus:()=>p(`${n}jetpack/v4/rewind`,i).then(u).then(m).then((e=>JSON.parse(e.data))),fetchScanStatus:()=>p(`${n}jetpack/v4/scan`,i).then(u).then(m).then((e=>JSON.parse(e.data))),dismissJetpackNotice:e=>g(`${n}jetpack/v4/notice/${e}`,a,{body:JSON.stringify({dismissed:!0})}).then(u).then(m),fetchPluginsData:()=>p(`${n}jetpack/v4/plugins`,i).then(u).then(m),fetchIntroOffers:()=>p(`${n}jetpack/v4/intro-offers`,i).then(u).then(m),fetchVerifySiteGoogleStatus:e=>p(null!==e?`${n}jetpack/v4/verify-site/google/${e}`:`${n}jetpack/v4/verify-site/google`,i).then(u).then(m),verifySiteGoogle:e=>g(`${n}jetpack/v4/verify-site/google`,a,{body:JSON.stringify({keyring_id:e})}).then(u).then(m),submitSurvey:e=>g(`${n}jetpack/v4/marketing/survey`,a,{body:JSON.stringify(e)}).then(u).then(m),saveSetupQuestionnaire:e=>g(`${n}jetpack/v4/setup/questionnaire`,a,{body:JSON.stringify(e)}).then(u).then(m),updateLicensingError:e=>g(`${n}jetpack/v4/licensing/error`,a,{body:JSON.stringify(e)}).then(u).then(m),updateLicenseKey:e=>g(`${n}jetpack/v4/licensing/set-license`,a,{body:JSON.stringify({license:e})}).then(u).then(m),getUserLicensesCounts:()=>p(`${n}jetpack/v4/licensing/user/counts`,i).then(u).then(m),getUserLicenses:()=>p(`${n}jetpack/v4/licensing/user/licenses`,i).then(u).then(m),updateLicensingActivationNoticeDismiss:e=>g(`${n}jetpack/v4/licensing/user/activation-notice-dismiss`,a,{body:JSON.stringify({last_detached_count:e})}).then(u).then(m),updateRecommendationsStep:e=>g(`${n}jetpack/v4/recommendations/step`,a,{body:JSON.stringify({step:e})}).then(u),confirmIDCSafeMode:()=>g(`${n}jetpack/v4/identity-crisis/confirm-safe-mode`,a).then(u),startIDCFresh:e=>g(`${n}jetpack/v4/identity-crisis/start-fresh`,a,{body:JSON.stringify({redirect_uri:e})}).then(u).then(m),migrateIDC:()=>g(`${n}jetpack/v4/identity-crisis/migrate`,a).then(u),attachLicenses:e=>g(`${n}jetpack/v4/licensing/attach-licenses`,a,{body:JSON.stringify({licenses:e})}).then(u).then(m),fetchSearchPlanInfo:()=>p(`${r}jetpack/v4/search/plan`,i).then(u).then(m),fetchSearchSettings:()=>p(`${r}jetpack/v4/search/settings`,i).then(u).then(m),updateSearchSettings:e=>g(`${r}jetpack/v4/search/settings`,a,{body:JSON.stringify(e)}).then(u).then(m),fetchSearchStats:()=>p(`${r}jetpack/v4/search/stats`,i).then(u).then(m),fetchWafSettings:()=>p(`${n}jetpack/v4/waf`,i).then(u).then(m),updateWafSettings:e=>g(`${n}jetpack/v4/waf`,a,{body:JSON.stringify(e)}).then(u).then(m),fetchWordAdsSettings:()=>p(`${n}jetpack/v4/wordads/settings`,i).then(u).then(m),updateWordAdsSettings:e=>g(`${n}jetpack/v4/wordads/settings`,a,{body:JSON.stringify(e)}),fetchSearchPricing:()=>p(`${r}jetpack/v4/search/pricing`,i).then(u).then(m),fetchMigrationStatus:()=>p(`${n}jetpack/v4/migration/status`,i).then(u).then(m),fetchBackupUndoEvent:()=>p(`${n}jetpack/v4/site/backup/undo-event`,i).then(u).then(m),fetchBackupPreflightStatus:()=>p(`${n}jetpack/v4/site/backup/preflight`,i).then(u).then(m)};function p(e,t){return fetch(l(e),t)}function g(e,t,n){return fetch(e,Object.assign({},t,n)).catch(h)}function _(e){return e.general&&void 0===e.general.response||e.week&&void 0===e.week.response||e.month&&void 0===e.month.response?e:{}}Object.assign(this,d)};function u(e){return e.status>=200&&e.status<300?e:404===e.status?new Promise((()=>{throw e.redirected?new l(e.redirected):new a})):e.json().catch((e=>g(e))).then((t=>{const n=new Error(`${t.message} (Status ${e.status})`);throw n.response=t,n.name="ApiError",n}))}function m(e){return e.json().catch((t=>g(t,e.redirected,e.url)))}function g(e,t,n){throw t?new i(n):new s}function h(){throw new d}},8089:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(6427),c=n(7723),r=n(2231),s=n(3619),i=n.n(s),a=n(1609),l=n.n(a),d=n(1112),p=n(7689);const __=c.__,u=e=>{const{label:t,onClick:n,isLoading:c=!1,loadingText:s,isDisabled:i,displayError:a=!1,errorMessage:u=__("An error occurred. Please try again.","jetpack-connection"),variant:m="primary",isExternalLink:g=!1,customClass:h}=e,_=s||l().createElement(o.Spinner,null);return l().createElement(l().Fragment,null,l().createElement(d.A,{className:(0,r.A)(p.A.button,"jp-action-button--button",h),label:t,onClick:n,variant:g?"link":m,isExternalLink:g,disabled:c||i},c?_:t),a&&l().createElement("p",{className:(0,r.A)(p.A.error,"jp-action-button__error")},u))};u.propTypes={label:i().string.isRequired,onClick:i().func,isLoading:i().bool,isDisabled:i().bool,displayError:i().bool,errorMessage:i().oneOfType([i().string,i().element]),variant:i().arrayOf(i().oneOf(["primary","secondary","link"])),isExternalLink:i().bool};const m=u},1112:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var o=n(8579),c=n.n(o),r=n(6427),s=n(7723),i=n(7750),a=n(8391),l=n(2231),d=n(1609),p=n.n(d),u=n(2258);const __=s.__,m=(0,d.forwardRef)(((e,t)=>{const{children:n,variant:o="primary",size:s="normal",weight:d="bold",icon:m,iconSize:g,disabled:h,isDestructive:_,isLoading:f,isExternalLink:y,className:b,text:k,fullWidth:v,...C}=e,E=(0,l.A)(u.A.button,b,{[u.A.normal]:"normal"===s,[u.A.small]:"small"===s,[u.A.icon]:Boolean(m),[u.A.loading]:f,[u.A.regular]:"regular"===d,[u.A["full-width"]]:v,[u.A["is-icon-button"]]:Boolean(m)&&!n});C.ref=t;const j="normal"===s?20:16,w=y&&p().createElement(p().Fragment,null,p().createElement(i.A,{size:j,icon:a.A,className:u.A["external-icon"]}),p().createElement(r.VisuallyHidden,{as:"span"},/* translators: accessibility text */
__("(opens in a new tab)","jetpack-connection"))),A=y?"_blank":void 0,N=n?.[0]&&null!==n[0]&&"components-tooltip"!==n?.[0]?.props?.className;return p().createElement(r.Button,c()({target:A,variant:o,className:(0,l.A)(E,{"has-text":!!m&&N}),icon:y?void 0:m,iconSize:g,disabled:h,"aria-disabled":h,isDestructive:_,text:k},C),f&&p().createElement(r.Spinner,null),p().createElement("span",null,n),w)}));m.displayName="Button";const g=m},9121:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(9535);const o=({format:e="horizontal",icon:t,imageUrl:n})=>React.createElement("div",{className:"jp-components__decorative-card "+(e?"jp-components__decorative-card--"+e:"")},React.createElement("div",{className:"jp-components__decorative-card__image",style:{backgroundImage:n?`url( ${n} )`:""}}),React.createElement("div",{className:"jp-components__decorative-card__content"},React.createElement("div",{className:"jp-components__decorative-card__lines"})),t?React.createElement("div",{className:"jp-components__decorative-card__icon-container"},React.createElement("span",{className:"jp-components__decorative-card__icon jp-components__decorative-card__icon--"+t})):null)},7142:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(8579),c=n.n(o),r=n(7723),s=n(2231),i=n(1609),a=n.n(i);const __=r.__,l=({logoColor:e="#069e08",showText:t=!0,className:n,height:o=32,...r})=>{const i=t?"0 0 118 32":"0 0 32 32";return a().createElement("svg",c()({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:i,className:(0,s.A)("jetpack-logo",n),"aria-labelledby":"jetpack-logo-title",height:o},r,{role:"img"}),a().createElement("title",{id:"jetpack-logo-title"},__("Jetpack Logo","jetpack-connection")),a().createElement("path",{fill:e,d:"M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M15,19H7l8-16V19z M17,29V13h8L17,29z"}),t&&a().createElement(a().Fragment,null,a().createElement("path",{d:"M41.3,26.6c-0.5-0.7-0.9-1.4-1.3-2.1c2.3-1.4,3-2.5,3-4.6V8h-3V6h6v13.4C46,22.8,45,24.8,41.3,26.6z"}),a().createElement("path",{d:"M65,18.4c0,1.1,0.8,1.3,1.4,1.3c0.5,0,2-0.2,2.6-0.4v2.1c-0.9,0.3-2.5,0.5-3.7,0.5c-1.5,0-3.2-0.5-3.2-3.1V12H60v-2h2.1V7.1 H65V10h4v2h-4V18.4z"}),a().createElement("path",{d:"M71,10h3v1.3c1.1-0.8,1.9-1.3,3.3-1.3c2.5,0,4.5,1.8,4.5,5.6s-2.2,6.3-5.8,6.3c-0.9,0-1.3-0.1-2-0.3V28h-3V10z M76.5,12.3 c-0.8,0-1.6,0.4-2.5,1.2v5.9c0.6,0.1,0.9,0.2,1.8,0.2c2,0,3.2-1.3,3.2-3.9C79,13.4,78.1,12.3,76.5,12.3z"}),a().createElement("path",{d:"M93,22h-3v-1.5c-0.9,0.7-1.9,1.5-3.5,1.5c-1.5,0-3.1-1.1-3.1-3.2c0-2.9,2.5-3.4,4.2-3.7l2.4-0.3v-0.3c0-1.5-0.5-2.3-2-2.3 c-0.7,0-2.3,0.5-3.7,1.1L84,11c1.2-0.4,3-1,4.4-1c2.7,0,4.6,1.4,4.6,4.7L93,22z M90,16.4l-2.2,0.4c-0.7,0.1-1.4,0.5-1.4,1.6 c0,0.9,0.5,1.4,1.3,1.4s1.5-0.5,2.3-1V16.4z"}),a().createElement("path",{d:"M104.5,21.3c-1.1,0.4-2.2,0.6-3.5,0.6c-4.2,0-5.9-2.4-5.9-5.9c0-3.7,2.3-6,6.1-6c1.4,0,2.3,0.2,3.2,0.5V13 c-0.8-0.3-2-0.6-3.2-0.6c-1.7,0-3.2,0.9-3.2,3.6c0,2.9,1.5,3.8,3.3,3.8c0.9,0,1.9-0.2,3.2-0.7V21.3z"}),a().createElement("path",{d:"M110,15.2c0.2-0.3,0.2-0.8,3.8-5.2h3.7l-4.6,5.7l5,6.3h-3.7l-4.2-5.8V22h-3V6h3V15.2z"}),a().createElement("path",{d:"M58.5,21.3c-1.5,0.5-2.7,0.6-4.2,0.6c-3.6,0-5.8-1.8-5.8-6c0-3.1,1.9-5.9,5.5-5.9s4.9,2.5,4.9,4.9c0,0.8,0,1.5-0.1,2h-7.3 c0.1,2.5,1.5,2.8,3.6,2.8c1.1,0,2.2-0.3,3.4-0.7C58.5,19,58.5,21.3,58.5,21.3z M56,15c0-1.4-0.5-2.9-2-2.9c-1.4,0-2.3,1.3-2.4,2.9 C51.6,15,56,15,56,15z"})))}},442:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(9491),c=n(8403);const r=["sm","md","lg"],s=(e,t)=>{const n=Array.isArray(e)?e:[e],s=Array.isArray(t)?t:[t],[i,a,l]=r,d={sm:(0,o.useMediaQuery)(c.A[i]),md:(0,o.useMediaQuery)(c.A[a]),lg:(0,o.useMediaQuery)(c.A[l])};return n.map(((e,t)=>{const n=s[t];return n?((e,t,n)=>{const o=r.indexOf(e),c=o+1,s=t.includes("=");let i=[];return t.startsWith("<")&&(i=r.slice(0,s?c:o)),t.startsWith(">")&&(i=r.slice(s?o:c)),i?.length?i.some((e=>n[e])):n[e]})(e,n,d):d[e]}))}},1876:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(2231),c=n(1609),r=n.n(c),s=n(6406);const i=({children:e=null,width:t=null,height:n=null,className:c=""})=>r().createElement("div",{className:(0,o.A)(s.A.placeholder,c),style:{width:t,height:n}},e)},9957:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(4268),c=n(6427),r=n(7723),s=n(1876),i=n(5879);n(4319);const __=r.__,a=e=>-1===e.fraction.indexOf("00"),l=({currencyCode:e="USD",priceDetails:t=__("/month, paid yearly","jetpack-connection"),...n})=>{const l=(0,o.vA)(n.priceBefore,e),d=(0,o.vA)(n.priceAfter,e);return React.createElement("div",{className:"jp-components__pricing-card"},n.icon&&React.createElement("div",{className:"jp-components__pricing-card__icon"},"string"==typeof n.icon?React.createElement("img",{src:n.icon,alt:(0,r.sprintf)(/* translators: placeholder is a product name */
__("Icon for the product %s","jetpack-connection"),n.title)}):n.icon),React.createElement("h1",{className:"jp-components__pricing-card__title"},n.title),React.createElement("div",{className:"jp-components__pricing-card__pricing"},0===n.priceAfter&&React.createElement(s.A,{width:"100%",height:48}),n.priceBefore!==n.priceAfter&&n.priceAfter>0&&React.createElement("div",{className:"jp-components__pricing-card__price-before"},React.createElement("span",{className:"jp-components__pricing-card__currency"},l.symbol),React.createElement("span",{className:"jp-components__pricing-card__price"},l.integer),a(l)&&React.createElement("span",{className:"jp-components__pricing-card__price-decimal"}," ",l.fraction),React.createElement("div",{className:"jp-components__pricing-card__price-strikethrough"})),n.priceAfter>0&&React.createElement(React.Fragment,null,React.createElement("div",{className:"jp-components__pricing-card__price-after"},React.createElement("span",{className:"jp-components__pricing-card__currency"},d.symbol),React.createElement("span",{className:"jp-components__pricing-card__price"},d.integer),a(d)&&React.createElement("span",{className:"jp-components__pricing-card__price-decimal"},d.fraction)),React.createElement("span",{className:"jp-components__pricing-card__price-details"},t))),n.children&&React.createElement("div",{className:"jp-components__pricing-card__extra-content-wrapper"},n.children),n.tosText&&React.createElement("div",{className:"jp-components__pricing-card__tos"},n.tosText),n.ctaText&&React.createElement(React.Fragment,null,!n.tosText&&React.createElement("div",{className:"jp-components__pricing-card__tos"},React.createElement(i.A,{agreeButtonLabel:n.ctaText})),React.createElement("div",{className:"jp-components__pricing-card__cta"},React.createElement(c.Button,{className:"jp-components__pricing-card__button",label:n.ctaText,onClick:n.onCtaClick},n.ctaText))),n.infoText&&React.createElement("div",{className:"jp-components__pricing-card__info"},n.infoText))}},6461:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(3619),c=n.n(o),r=n(1609),s=n.n(r);n(8325);const i=({color:e="#FFFFFF",className:t="",size:n=20})=>{const o=t+" jp-components-spinner",c={width:n,height:n,fontSize:n,borderTopColor:e},r={borderTopColor:e,borderRightColor:e};return s().createElement("div",{className:o},s().createElement("div",{className:"jp-components-spinner__outer",style:c},s().createElement("div",{className:"jp-components-spinner__inner",style:r})))};i.propTypes={color:c().string,className:c().string,size:c().number};const a=i},5879:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(8579),c=n.n(o),r=n(6427),s=n(6087),i=n(7723),a=n(2231),l=n(3924),d=n(7425);n(9634);const __=i.__,p=({multipleButtonsLabels:e})=>Array.isArray(e)&&e.length>1?(0,s.createInterpolateElement)((0,i.sprintf)(/* translators: %1$s is button label 1 and %2$s is button label 2 */
__("By clicking <strong>%1$s</strong> or <strong>%2$s</strong>, you agree to our <tosLink>Terms of Service</tosLink> and to <shareDetailsLink>sync your sites data</shareDetailsLink> with us.","jetpack-connection"),e[0],e[1]),{strong:React.createElement("strong",null),tosLink:React.createElement(g,{slug:"wpcom-tos"}),shareDetailsLink:React.createElement(g,{slug:"jetpack-support-what-data-does-jetpack-sync"})}):(0,s.createInterpolateElement)(__("By clicking the buttons above, you agree to our <tosLink>Terms of Service</tosLink> and to <shareDetailsLink>sync your sites data</shareDetailsLink> with us.","jetpack-connection"),{tosLink:React.createElement(g,{slug:"wpcom-tos"}),shareDetailsLink:React.createElement(g,{slug:"jetpack-support-what-data-does-jetpack-sync"})}),u=({agreeButtonLabel:e})=>(0,s.createInterpolateElement)((0,i.sprintf)(/* translators: %s is a button label */
__("By clicking <strong>%s</strong>, you agree to our <tosLink>Terms of Service</tosLink> and to <shareDetailsLink>sync your sites data</shareDetailsLink> with us.","jetpack-connection"),e),{strong:React.createElement("strong",null),tosLink:React.createElement(g,{slug:"wpcom-tos"}),shareDetailsLink:React.createElement(g,{slug:"jetpack-support-what-data-does-jetpack-sync"})}),m=()=>(0,s.createInterpolateElement)(__("By continuing you agree to our <tosLink>Terms of Service</tosLink> and to <shareDetailsLink>sync your sites data</shareDetailsLink> with us. Well check if that email is linked to an existing WordPress.com account or create a new one instantly.","jetpack-connection"),{tosLink:React.createElement(g,{slug:"wpcom-tos"}),shareDetailsLink:React.createElement(g,{slug:"jetpack-support-what-data-does-jetpack-sync"})}),g=({slug:e,children:t})=>React.createElement(r.ExternalLink,{className:"terms-of-service__link",href:(0,l.A)(e)},t),h=({className:e,multipleButtons:t,agreeButtonLabel:n,isTextOnly:o,...r})=>React.createElement(d.Ay,c()({className:(0,a.A)(e,"terms-of-service")},r),o?React.createElement(m,null):t?React.createElement(p,{multipleButtonsLabels:t}):React.createElement(u,{agreeButtonLabel:n}))},110:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o,Z:()=>c});const o={"headline-medium":"h1","headline-small":"h2","headline-small-regular":"h2","title-medium":"h3","title-medium-semi-bold":"h3","title-small":"h4",body:"p","body-small":"p","body-extra-small":"p","body-extra-small-bold":"p",label:"p"},c=["mt","mr","mb","ml","mx","my","m","pt","pr","pb","pl","px","py","p"]},7425:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p});var o=n(8579),c=n.n(o),r=n(2231),s=n(1609),i=n.n(s),a=n(110),l=n(4495);const d=(0,s.forwardRef)((({variant:e="body",children:t,component:n,className:o,...d},p)=>{const u=n||a.Q[e]||"span",m=(0,s.useMemo)((()=>a.Z.reduce(((e,t)=>(void 0!==d[t]&&(e+=l.A[`${t}-${d[t]}`]+" ",delete d[t]),e)),"")),[d]);return i().createElement(u,c()({className:(0,r.A)(l.A.reset,l.A[e],o,m)},d,{ref:p}),t)}));d.displayName="Text";const p=d},3924:(e,t,n)=>{"use strict";function o(e,t={}){const n={};let o;if("undefined"!=typeof window&&(o=window?.JP_CONNECTION_INITIAL_STATE?.calypsoEnv),0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,n.url=encodeURIComponent(e)}else n.source=encodeURIComponent(e);for(const e in t)n[e]=encodeURIComponent(t[e]);!Object.keys(n).includes("site")&&"undefined"!=typeof jetpack_redirects&&Object.hasOwn(jetpack_redirects,"currentSiteRawUrl")&&(n.site=jetpack_redirects.currentBlogID??jetpack_redirects.currentSiteRawUrl),o&&(n.calypso_env=o);return"https://jetpack.com/redirect/?"+Object.keys(n).map((e=>e+"="+n[e])).join("&")}n.d(t,{A:()=>o})},6439:(e,t,n)=>{let o={};try{o=n(9074)}catch{console.error("jetpackConfig is missing in your webpack config file. See @automattic/jetpack-config"),o={missingConfig:!0}}const c=e=>Object.hasOwn(o,e);e.exports={jetpackConfigHas:c,jetpackConfigGet:e=>{if(!c(e))throw'This app requires the "'+e+'" Jetpack Config to be defined in your webpack configuration file. See details in @automattic/jetpack-config package docs.';return o[e]}}},8421:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var o=n(8089),c=n(7723),r=n(3619),s=n.n(r),i=n(1609),a=n.n(i),l=n(9660);const __=c.__,d=e=>{const{apiRoot:t,apiNonce:n,connectLabel:c=__("Connect","jetpack-connection"),registrationNonce:r,redirectUri:s=null,from:i,autoTrigger:d=!1}=e,{handleRegisterSite:p,isRegistered:u,isUserConnected:m,siteIsRegistering:g,userIsConnecting:h,registrationError:_}=(0,l.A)({registrationNonce:r,redirectUri:s,apiRoot:t,apiNonce:n,autoTrigger:d,from:i});return a().createElement(a().Fragment,null,(!u||!m)&&a().createElement(o.A,{label:c,onClick:p,displayError:!!_,isLoading:g||h}))};d.propTypes={connectLabel:s().string,apiRoot:s().string.isRequired,apiNonce:s().string.isRequired,from:s().string,redirectUri:s().string.isRequired,registrationNonce:s().string.isRequired,autoTrigger:s().bool};const p=d},6212:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(7723),c=n(1609),r=n.n(c),s=n(9660),i=n(5582);const __=o.__,a=({title:e,buttonLabel:t,loadingLabel:n,apiRoot:o,apiNonce:c,registrationNonce:a,from:l,redirectUri:d,images:p,children:u,assetBaseUrl:m,autoTrigger:g,footer:h,skipUserConnection:_,skipPricingPage:f,logo:y})=>{const{handleRegisterSite:b,siteIsRegistering:k,userIsConnecting:v,registrationError:C,isOfflineMode:E}=(0,s.A)({registrationNonce:a,redirectUri:d,apiRoot:o,apiNonce:c,autoTrigger:g,from:l,skipUserConnection:_,skipPricingPage:f}),j=Boolean(C),w=k||v,A=C?.response?.code;return r().createElement(i.A,{title:e||__("Over 5 million WordPress sites are faster and more secure","jetpack-connection"),images:p||[],assetBaseUrl:m,buttonLabel:t||__("Set up Jetpack","jetpack-connection"),loadingLabel:n,handleButtonClick:b,displayButtonError:j,errorCode:A,buttonIsLoading:w,footer:h,isOfflineMode:E,logo:y},u)}},5582:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var o=n(3924),c=n(5879),r=n(8089),s=n(6087),i=n(7723),a=n(1609),l=n.n(a),d=n(2668);n(1772);const __=i.__,p=(e,t)=>{switch(e){case"fail_domain_forbidden":case"fail_ip_forbidden":case"fail_domain_tld":case"fail_subdomain_wpcom":case"siteurl_private_ip":return __("Your site host is on a private network. Jetpack can only connect to public sites.","jetpack-connection");case"connection_disabled":return __("This site has been suspended.","jetpack-connection")}if(t)return(0,s.createInterpolateElement)(__("Unavailable in <a>Offline Mode</a>","jetpack-connection"),{a:l().createElement("a",{href:(0,o.A)("jetpack-support-development-mode"),target:"_blank",rel:"noopener noreferrer"})})},u=({title:e,images:t,children:n,assetBaseUrl:o,isLoading:s,buttonLabel:i,handleButtonClick:a,displayButtonError:u,errorCode:m,buttonIsLoading:g,loadingLabel:h,footer:_,isOfflineMode:f,logo:y})=>l().createElement(d.A,{title:e,assetBaseUrl:o,images:t,className:"jp-connection__connect-screen"+(s?" jp-connection__connect-screen__loading":""),logo:y},l().createElement("div",{className:"jp-connection__connect-screen__content"},n,l().createElement("div",{className:"jp-connection__connect-screen__tos"},l().createElement(c.A,{agreeButtonLabel:i})),l().createElement(r.A,{label:i,onClick:a,displayError:u||f,errorMessage:p(m,f),isLoading:g,isDisabled:f}),l().createElement("span",{className:"jp-connection__connect-screen__loading-message",role:"status"},g?h||__("Loading","jetpack-connection"):""),_&&l().createElement("div",{className:"jp-connection__connect-screen__footer"},_)))},5745:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(1609),c=n.n(o);const r=({images:e,assetBaseUrl:t=""})=>{if(!e?.length)return null;const n=e.map(((e,n)=>c().createElement(c().Fragment,{key:n},c().createElement("img",{src:t+e,alt:""}))));return c().createElement("div",{className:"jp-connection__connect-screen__image-slider"},n)}},2668:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(7142),c=n(2231),r=n(1609),s=n.n(r),i=n(5745);n(9064);const a=({title:e,children:t,className:n,assetBaseUrl:r,images:a,logo:l,rna:d=!1})=>{const p=a?.length;return s().createElement("div",{className:(0,c.A)("jp-connection__connect-screen-layout",p?"jp-connection__connect-screen-layout__two-columns":"",n?" "+n:"")},d&&s().createElement("div",{className:"jp-connection__connect-screen-layout__color-blobs"},s().createElement("div",{className:"jp-connection__connect-screen-layout__color-blobs__green"}),s().createElement("div",{className:"jp-connection__connect-screen-layout__color-blobs__yellow"}),s().createElement("div",{className:"jp-connection__connect-screen-layout__color-blobs__blue"})),s().createElement("div",{className:"jp-connection__connect-screen-layout__left"},l||s().createElement(o.A,null),s().createElement("h2",null,e),t),p?s().createElement("div",{className:"jp-connection__connect-screen-layout__right"},s().createElement(i.A,{images:a,assetBaseUrl:r})):null)}},7945:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var o=n(7723),c=n(3619),r=n.n(c),s=n(1609),i=n.n(s),a=n(2558),l=n(9660),d=n(401);const __=o.__,p=e=>{const{title:t=__("Over 5 million WordPress sites are faster and more secure","jetpack-connection"),autoTrigger:n=!1,buttonLabel:o=__("Set up Jetpack","jetpack-connection"),apiRoot:c,apiNonce:r,registrationNonce:s,from:p,redirectUri:u,children:m,priceBefore:g,priceAfter:h,pricingIcon:_,pricingTitle:f,pricingCurrencyCode:y="USD",wpcomProductSlug:b,siteProductAvailabilityHandler:k,logo:v,rna:C=!1}=e,{handleRegisterSite:E,siteIsRegistering:j,userIsConnecting:w,registrationError:A,isOfflineMode:N}=(0,l.A)({registrationNonce:s,redirectUri:u,apiRoot:c,apiNonce:r,autoTrigger:n,from:p}),S=b||"",{run:R,hasCheckoutStarted:T}=(0,a.A)({productSlug:S,redirectUrl:u,siteProductAvailabilityHandler:k,from:p}),O=Boolean(A),L=j||w||T,I=S?R:E;return i().createElement(d.A,{title:t,buttonLabel:o,priceBefore:g,priceAfter:h,pricingIcon:_,pricingTitle:f,pricingCurrencyCode:y,handleButtonClick:I,displayButtonError:O,buttonIsLoading:L,logo:v,isOfflineMode:N,rna:C},m)};p.propTypes={title:r().string,buttonLabel:r().string,apiRoot:r().string.isRequired,apiNonce:r().string.isRequired,registrationNonce:r().string.isRequired,from:r().string,redirectUri:r().string.isRequired,autoTrigger:r().bool,pricingTitle:r().string.isRequired,pricingIcon:r().oneOfType([r().string,r().element]),priceBefore:r().number.isRequired,priceAfter:r().number.isRequired,pricingCurrencyCode:r().string,wpcomProductSlug:r().string,checkSiteHasWpcomProduct:r().func,logo:r().element};const u=p},401:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var o=n(8089),c=n(3924),r=n(9957),s=n(5879),i=n(6087),a=n(7723),l=n(2231),d=n(4804),p=n.n(d),u=n(3619),m=n.n(u),g=n(1609),h=n.n(g),_=n(2668);n(381);const __=a.__,f=p()("jetpack:connection:ConnectScreenRequiredPlanVisual"),y=e=>{const{title:t,buttonLabel:n,children:a,priceBefore:d,priceAfter:p,pricingIcon:u,pricingTitle:m,pricingCurrencyCode:g="USD",isLoading:y=!1,handleButtonClick:b=()=>{},displayButtonError:k=!1,buttonIsLoading:v=!1,logo:C,isOfflineMode:E,rna:j=!1}=e;f("props are %o",e);const w=(0,i.createInterpolateElement)(__("Already have a subscription? <connectButton/>","jetpack-connection"),{connectButton:h().createElement(o.A,{label:__("Log in to get started","jetpack-connection"),onClick:b,isLoading:v})}),A=E?(0,i.createInterpolateElement)(__("Unavailable in <a>Offline Mode</a>","jetpack-connection"),{a:h().createElement("a",{href:(0,c.A)("jetpack-support-development-mode"),target:"_blank",rel:"noopener noreferrer"})}):void 0;return h().createElement(_.A,{title:t,className:(0,l.A)("jp-connection__connect-screen-required-plan",y?"jp-connection__connect-screen-required-plan__loading":"",j?"rna":""),logo:C,rna:j},h().createElement("div",{className:"jp-connection__connect-screen-required-plan__content"},a,h().createElement("div",{className:"jp-connection__connect-screen-required-plan__pricing-card"},h().createElement(r.A,{title:m,icon:u,priceBefore:d,currencyCode:g,priceAfter:p},h().createElement(s.A,{agreeButtonLabel:n}),h().createElement(o.A,{label:n,onClick:b,displayError:k||E,errorMessage:A,isLoading:v,isDisabled:E}))),!E&&h().createElement("div",{className:"jp-connection__connect-screen-required-plan__with-subscription"},w)))};y.propTypes={pricingTitle:m().string.isRequired,priceBefore:m().number.isRequired,priceAfter:m().number.isRequired,pricingCurrencyCode:m().string,title:m().string,buttonLabel:m().string,pricingIcon:m().oneOfType([m().string,m().element]),isLoading:m().bool,handleButtonClick:m().func,displayButtonError:m().bool,buttonIsLoading:m().bool,logo:m().element,isOfflineMode:m().bool};const b=y},7840:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(5932),c=n(3619),r=n.n(c),s=n(1609);const i=e=>{const{redirectFunc:t=e=>window.location.assign(e),connectUrl:n,redirectUri:c=null,from:r}=e,[i,a]=(0,s.useState)(null);return n&&n!==i&&a(n),(0,s.useEffect)((()=>{i||o.Ay.fetchAuthorizationUrl(c).then((e=>a(e.authorizeUrl))).catch((e=>{throw e}))}),[]),i?(t(i+(r?(i.includes("?")?"&":"?")+"from="+encodeURIComponent(r):"")),null):null};i.propTypes={connectUrl:r().string,redirectUri:r().string.isRequired,from:r().string,redirectFunc:r().func};const a=i},648:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(7723),c=n(3619),r=n.n(c),s=n(1609),i=n.n(s),a=n(7499);const __=o.__,l=e=>{const{connectedPlugins:t,disconnectingPlugin:n}=e,o=(0,s.useMemo)((()=>{if(t){return Object.keys(t).map((e=>Object.assign({slug:e},t[e]))).filter((e=>n!==e.slug))}return[]}),[t,n]);return t&&o.length>0?i().createElement(i().Fragment,null,i().createElement("div",{className:"jp-connection__disconnect-dialog__step-copy"},i().createElement("p",{className:"jp-connection__disconnect-dialog__large-text"},__("Jetpack is powering other plugins on your site. If you disconnect, these plugins will no longer work.","jetpack-connection"))),i().createElement("div",{className:"jp-connection__disconnect-card__group"},o.map((e=>i().createElement(a.A,{title:e.name,key:e.slug}))))):null};l.propTypes={connectedPlugins:r().array,disconnectingPlugin:r().string};const d=l},7088:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(442),c=n(6461),r=n(6427),s=n(7723),i=n(3619),a=n.n(i),l=n(1609),d=n.n(l),p=n(4175);const __=s.__,u=e=>{const{message:t,isRestoringConnection:n,restoreConnectionCallback:i,restoreConnectionError:a}=e,[l]=(0,o.A)(["md"],[">"]),u=p.A.notice+(l?" "+p.A["bigger-than-medium"]:""),m=d().createElement(r.Icon,{icon:d().createElement(r.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d().createElement(r.Path,{d:"M11.7815 4.93772C11.8767 4.76626 12.1233 4.76626 12.2185 4.93772L20.519 19.8786C20.6116 20.0452 20.4911 20.25 20.3005 20.25H3.69951C3.50889 20.25 3.3884 20.0452 3.48098 19.8786L11.7815 4.93772Z",stroke:"#D63638",strokeWidth:"1.5"}),d().createElement(r.Path,{d:"M13 10H11V15H13V10Z",fill:"#D63638"}),d().createElement(r.Path,{d:"M13 16H11V18H13V16Z",fill:"#D63638"}))});if(!t)return null;if(n)return d().createElement(r.Notice,{status:"error",isDismissible:!1,className:u},d().createElement("div",{className:p.A.message},d().createElement(c.A,{color:"#B32D2E",size:24}),__("Reconnecting Jetpack","jetpack-connection")));const g=a?d().createElement(r.Notice,{status:"error",isDismissible:!1,className:u+" "+p.A.error},d().createElement("div",{className:p.A.message},m,(0,s.sprintf)(/* translators: placeholder is the error. */
__("There was an error reconnecting Jetpack. Error: %s","jetpack-connection"),a))):null;return d().createElement(d().Fragment,null,g,d().createElement(r.Notice,{status:"error",isDismissible:!1,className:u},d().createElement("div",{className:p.A.message},m,t),i&&d().createElement("a",{onClick:i,onKeyDown:i,className:p.A.button,href:"#"},__("Restore Connection","jetpack-connection"))))};u.propTypes={message:a().string.isRequired,restoreConnectionCallback:a().func,isRestoringConnection:a().bool,restoreConnectionError:a().string};const m=u},7499:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(3619),c=n.n(o),r=n(1609),s=n.n(r);n(7419);const i=e=>{const{title:t,value:n,description:o}=e;return s().createElement("div",{className:"jp-connection__disconnect-card card"},s().createElement("div",{className:"jp-connection__disconnect-card__card-content"},s().createElement("p",{className:"jp-connection__disconnect-card__card-headline"},t),(n||o)&&s().createElement("div",{className:"jp-connection__disconnect-card__card-stat-block"},s().createElement("span",{className:"jp-connection__disconnect-card__card-stat"},n),s().createElement("div",{className:"jp-connection__disconnect-card__card-description"},o))))};i.propTypes={title:c().string,value:c().oneOfType([c().string,c().number]),description:c().string};const a=i},3269:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var o=n(372),c=n(5932),r=n(6439),s=n(6427),i=n(7723),a=n(3619),l=n.n(a),d=n(1609),p=n.n(d),u=(n(785),n(4472)),m=n(8503),g=n(412),h=n(8090);const __=i.__,_=e=>{const[t,n]=(0,d.useState)(!1),[i,a]=(0,d.useState)(!1),[l,_]=(0,d.useState)(!1),[f,y]=(0,d.useState)(!1),[b,k]=(0,d.useState)(!1),[v,C]=(0,d.useState)(!1),{apiRoot:E,apiNonce:j,connectedPlugins:w,title:A=__("Are you sure you want to disconnect?","jetpack-connection"),pluginScreenDisconnectCallback:N,onDisconnected:S,onError:R,disconnectStepComponent:T,context:O="jetpack-dashboard",connectedUser:L={},connectedSiteId:I,isOpen:P,onClose:D}=e;let U="";(0,r.jetpackConfigHas)("consumer_slug")&&(U=(0,r.jetpackConfigGet)("consumer_slug"));const x=(0,d.useMemo)((()=>({context:O,plugin:U})),[O,U]);(0,d.useEffect)((()=>{c.Ay.setApiRoot(E),c.Ay.setApiNonce(j)}),[E,j]),(0,d.useEffect)((()=>{L&&L.ID&&L.login&&o.A.initialize(L.ID,L.login)}),[L,L.ID,L.login]),(0,d.useEffect)((()=>{P&&o.A.tracks.recordEvent("jetpack_disconnect_dialog_open",x)}),[P,x]),(0,d.useEffect)((()=>{P&&(i?!i||f||b?f&&!b?o.A.tracks.recordEvent("jetpack_disconnect_dialog_step",Object.assign({},{step:"survey"},x)):b&&o.A.tracks.recordEvent("jetpack_disconnect_dialog_step",Object.assign({},{step:"thank_you"},x)):o.A.tracks.recordEvent("jetpack_disconnect_dialog_step",Object.assign({},{step:"disconnect_confirm"},x)):o.A.tracks.recordEvent("jetpack_disconnect_dialog_step",Object.assign({},{step:"disconnect"},x)))}),[P,i,f,b,x]);const F=(0,d.useCallback)((()=>{c.Ay.disconnectSite().then((()=>{n(!1),a(!0)})).catch((e=>{n(!1),_(e),R&&R(e)}))}),[n,a,_,R]),M=(0,d.useCallback)(((e,t)=>{C(!0),fetch("https://public-api.wordpress.com/wpcom/v2/marketing/feedback-survey",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{if(!0!==e.success)throw new Error("Survey endpoint returned error code "+e.code);o.A.tracks.recordEvent("jetpack_disconnect_survey_submit",t),k(!0),C(!1)})).catch((e=>{o.A.tracks.recordEvent("jetpack_disconnect_survey_error",Object.assign({},{error:e.message},t)),k(!0),C(!1)}))}),[C,k]),B=(0,d.useCallback)((e=>{e&&e.preventDefault(),_(!1),n(!0),"plugins"!==O?F():N&&N(e)}),[_,n,N,O,F]),$=(0,d.useCallback)((e=>o.A.tracks.recordEvent(e,x)),[x]),J=(0,d.useCallback)((()=>!(!L.ID||!I)),[L,I]),z=(0,d.useCallback)(((e,t,n)=>{if(n&&n.preventDefault(),!J())return void k(!0);const o={site_id:I,user_id:L.ID,survey_id:"jetpack-plugin-disconnect",survey_responses:{"why-cancel":{response:e,text:t||null}}},c=Object.assign({},x,{disconnect_reason:e});M(o,c)}),[M,k,J,I,L,x]),q=(0,d.useCallback)((e=>{e&&e.preventDefault(),S&&S(),D()}),[S,D]),G=(0,d.useCallback)((e=>{e&&e.preventDefault(),y(!0)}),[y]);return p().createElement(p().Fragment,null,P&&p().createElement(s.Modal,{title:"",contentLabel:A,aria:{labelledby:"jp-connection__disconnect-dialog__heading"},onRequestClose:D,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,isDismissible:!1,className:"jp-connection__disconnect-dialog"+(i?" jp-connection__disconnect-dialog__success":"")},i?!i||f||b?f&&!b?p().createElement(g.A,{isSubmittingFeedback:v,onFeedBackProvided:z,onExit:q}):b?p().createElement(h.A,{onExit:q}):void 0:p().createElement(m.A,{canProvideFeedback:J(),onProvideFeedback:G,onExit:q}):p().createElement(u.A,{title:A,connectedPlugins:w,disconnectStepComponent:T,isDisconnecting:t,closeModal:D,onDisconnect:B,disconnectError:l,context:O,disconnectingPlugin:U,trackModalClick:$})))};_.propTypes={apiRoot:l().string.isRequired,apiNonce:l().string.isRequired,title:l().string,onDisconnected:l().func,onError:l().func,context:l().string,connectedPlugins:l().oneOfType([l().array,l().object]),pluginScreenDisconnectCallback:l().func,disconnectStepComponent:l().element,connectedUser:l().object,connectedSiteId:l().number,isOpen:l().bool,onClose:l().func};const f=_},8503:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(9121),c=n(6427),r=n(6087),s=n(7723),i=n(3619),a=n.n(i),l=n(1609),d=n.n(l),p=n(2365);const __=s.__,u=e=>{const{onExit:t,canProvideFeedback:n,onProvideFeedback:s}=e;return d().createElement("div",{className:"jp-connection__disconnect-dialog__content"},d().createElement(o.A,{icon:"unlink",imageUrl:p}),d().createElement("div",{className:"jp-connection__disconnect-dialog__step-copy jp-connection__disconnect-dialog__step-copy--narrow"},d().createElement("h1",null,(0,r.createInterpolateElement)(__("Jetpack has been <br/>successfully disconnected.","jetpack-connection"),{br:d().createElement("br",null)})),n&&d().createElement(d().Fragment,null,d().createElement("p",null,__("Were sorry to see you go. Here at Jetpack, were always striving to provide the best experience for our customers. Please take our short survey (2 minutes, promise).","jetpack-connection")),d().createElement("p",null,d().createElement(c.Button,{variant:"primary",onClick:s,className:"jp-connection__disconnect-dialog__btn-back-to-wp"},__("Help us improve","jetpack-connection"))),d().createElement("a",{className:"jp-connection__disconnect-dialog__link jp-connection__disconnect-dialog__link--bold",href:"#",onClick:t},__("No thank you","jetpack-connection"))),!n&&d().createElement(d().Fragment,null,d().createElement("p",null,d().createElement(c.Button,{variant:"primary",onClick:t,className:"jp-connection__disconnect-dialog__btn-back-to-wp"},__("Back to my website","jetpack-connection"))))))};u.propTypes={onExit:a().func,onProvideFeedback:a().func,canProvideFeedback:a().bool};const m=u},4472:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(3924),c=n(6427),r=n(6087),s=n(7723),i=n(3619),a=n.n(i),l=n(1609),d=n.n(l),p=n(648);const __=s.__,u=e=>{const{title:t,isDisconnecting:n,onDisconnect:s,disconnectError:i,disconnectStepComponent:a,connectedPlugins:u,disconnectingPlugin:m,closeModal:g,context:h,trackModalClick:_}=e,f=(0,l.useCallback)((()=>_("jetpack_disconnect_dialog_click_learn_about")),[_]),y=(0,l.useCallback)((()=>_("jetpack_disconnect_dialog_click_support")),[_]),b=(0,l.useCallback)((()=>{_("jetpack_disconnect_dialog_click_stay_connected"),g()}),[_,g]),k=(0,l.useCallback)((e=>{_("jetpack_disconnect_dialog_click_disconnect"),s(e)}),[_,s]),v=(0,l.useCallback)((e=>{"Escape"!==e.key||n||b()}),[b,n]);(0,l.useEffect)((()=>(document.addEventListener("keydown",v,!1),()=>{document.removeEventListener("keydown",v,!1)})),[]);return d().createElement(d().Fragment,null,d().createElement("div",{className:"jp-connection__disconnect-dialog__content"},d().createElement("h1",{id:"jp-connection__disconnect-dialog__heading"},t),d().createElement(p.A,{connectedPlugins:u,disconnectingPlugin:m}),a,(()=>{if(!(u&&Object.keys(u).filter((e=>e!==m)).length)&&!a)return d().createElement("div",{className:"jp-connection__disconnect-dialog__step-copy"},d().createElement("p",{className:"jp-connection__disconnect-dialog__large-text"},__("Jetpack is currently powering multiple products on your site.","jetpack-connection"),d().createElement("br",null),__("Once you disconnect Jetpack, these will no longer work.","jetpack-connection")))})()),d().createElement("div",{className:"jp-connection__disconnect-dialog__actions"},d().createElement("div",{className:"jp-row"},d().createElement("div",{className:"lg-col-span-8 md-col-span-9 sm-col-span-4"},d().createElement("p",null,(0,r.createInterpolateElement)(__("<strong>Need help?</strong> Learn more about the <jpConnectionInfoLink>Jetpack connection</jpConnectionInfoLink> or <jpSupportLink>contact Jetpack support</jpSupportLink>.","jetpack-connection"),{strong:d().createElement("strong",null),jpConnectionInfoLink:d().createElement(c.ExternalLink,{href:(0,o.A)("why-the-wordpress-com-connection-is-important-for-jetpack"),className:"jp-connection__disconnect-dialog__link",onClick:f}),jpSupportLink:d().createElement(c.ExternalLink,{href:(0,o.A)("jetpack-support"),className:"jp-connection__disconnect-dialog__link",onClick:y})}))),d().createElement("div",{className:"jp-connection__disconnect-dialog__button-wrap lg-col-span-4 md-col-span-7 sm-col-span-4"},d().createElement(c.Button,{variant:"primary",disabled:n,onClick:b,className:"jp-connection__disconnect-dialog__btn-dismiss"},"plugins"===h?__("Cancel","jetpack-connection"):__("Stay connected","jetpack-connection",0)),(()=>{let e=__("Disconnect","jetpack-connection");return n?e=__("Disconnecting","jetpack-connection"):"plugins"===h&&(e=__("Deactivate","jetpack-connection")),d().createElement(c.Button,{variant:"primary",disabled:n,onClick:k,className:"jp-connection__disconnect-dialog__btn-disconnect"},e)})())),i&&d().createElement("p",{className:"jp-connection__disconnect-dialog__error"},i)))};u.propTypes={title:a().string,isDisconnecting:a().bool,onDisconnect:a().func,disconnectError:a().bool,disconnectStepComponent:a().element,connectedPlugins:a().array,disconnectingPlugin:a().string,closeModal:a().func,context:a().string,trackModalClick:a().func};const m=u},412:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(7723),c=n(3619),r=n.n(c),s=n(1609),i=n.n(s),a=(n(255),n(2951));const __=o.__,l=e=>{const{onExit:t,onFeedBackProvided:n,isSubmittingFeedback:o}=e;return i().createElement("div",{className:"jp-connection__disconnect-dialog__content"},i().createElement("h1",null,__("Before you go, help us improve Jetpack","jetpack-connection")),i().createElement("p",{className:"jp-connection__disconnect-dialog__large-text"},__("Let us know what didnt work for you","jetpack-connection")),i().createElement(a.A,{onSubmit:n,isSubmittingFeedback:o}),i().createElement("a",{className:"jp-connection__disconnect-dialog__link jp-connection__disconnect-dialog__link--bold",href:"#",onClick:t},__("Skip for now","jetpack-connection")))};l.PropTypes={onExit:r().func,onFeedBackProvided:r().func,isSubmittingFeedback:r().bool};const d=l},8090:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(9121),c=n(6427),r=n(6087),s=n(7723),i=n(3619),a=n.n(i),l=n(1609),d=n.n(l),p=n(9362);const __=s.__,u=e=>{const{onExit:t}=e;return d().createElement("div",{className:"jp-connection__disconnect-dialog__content"},d().createElement(o.A,{format:"vertical",imageUrl:p}),d().createElement("div",{className:"jp-connection__disconnect-dialog__copy"},d().createElement("h1",null,__("Thank you!","jetpack-connection")),d().createElement("p",{className:"jp-connection__disconnect-dialog__large-text"},(0,r.createInterpolateElement)(__("Your answer has been submitted. <br/>Thanks for your input on how we can improve Jetpack.","jetpack-connection"),{br:d().createElement("br",null)})),d().createElement(c.Button,{variant:"primary",onClick:t,className:"jp-connection__disconnect-dialog__btn-back-to-wp"},__("Back to my website","jetpack-connection"))))};u.PropTypes={onExit:a().func,assetBaseUrl:a().string};const m=u},2951:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var o=n(6427),c=n(7723),r=n(3619),s=n.n(r),i=n(1609),a=n.n(i),l=n(8233);const __=c.__,d=e=>{const{onSubmit:t,isSubmittingFeedback:n}=e,[c,r]=(0,i.useState)(),[s,d]=(0,i.useState)(),p=[{id:"troubleshooting",answerText:__("Troubleshooting - I'll be reconnecting afterwards.","jetpack-connection")},{id:"not-working",answerText:__("I can't get it to work.","jetpack-connection")},{id:"slowed-down-site",answerText:__("It slowed down my site.","jetpack-connection")},{id:"buggy",answerText:__("It's buggy.","jetpack-connection")},{id:"what-does-it-do",answerText:__("I don't know what it does.","jetpack-connection")}],u="another-reason",m=(0,i.useCallback)((()=>{t(c,c===u?s:"")}),[t,u,s,c]),g=(0,i.useCallback)((e=>{const t=e.target.value;e.stopPropagation(),d(t)}),[d]),h=e=>e===c?"jp-connect__disconnect-survey-card--selected":"",_=(0,i.useCallback)(((e,t)=>{switch(t.key){case"Enter":case"Space":case"Spacebar":case" ":r(e)}}),[r]);return a().createElement(a().Fragment,null,a().createElement("div",{className:"jp-connection__disconnect-dialog__survey"},p.map((e=>a().createElement(l.A,{key:e.id,id:e.id,onClick:r,onKeyDown:_,className:"card jp-connect__disconnect-survey-card "+h(e.id)},a().createElement("p",{className:"jp-connect__disconnect-survey-card__answer"},e.answerText)))),a().createElement(l.A,{id:u,key:u,onClick:r,onKeyDown:_,className:"card jp-connect__disconnect-survey-card "+h(u)},a().createElement("p",{className:"jp-connect__disconnect-survey-card__answer"},__("Other:","jetpack-connection")," ",a().createElement("input",{placeholder:__("share your experience","jetpack-connection"),className:"jp-connect__disconnect-survey-card__input",type:"text",value:s,onChange:g,maxLength:1e3})))),a().createElement("p",null,a().createElement(o.Button,{disabled:!c||n,variant:"primary",onClick:m,className:"jp-connection__disconnect-dialog__btn-back-to-wp"},n?__("Submitting","jetpack-connection"):__("Submit Feedback","jetpack-connection",0))))};d.PropTypes={onSubmit:s().func,isSubmittingFeedback:s().bool};const p=d},8233:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(1609),c=n.n(o);n(255);const r=e=>{const{id:t,onClick:n,onKeyDown:r,children:s,className:i}=e,a=(0,o.useCallback)((()=>{n(t)}),[t,n]),l=(0,o.useCallback)((e=>{r(t,e)}),[t,r]);return c().createElement("div",{tabIndex:"0",role:"button",onClick:a,onKeyDown:l,className:"card jp-connect__disconnect-survey-card "+i},s)}},7018:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(7723),c=n(3619),r=n.n(c),s=n(1609),i=n.n(s);n(3732);const __=o.__,a=e=>{const{title:t,isLoading:n=!1,width:o="100%",displayTOS:c,scrollToIframe:r=!1,connectUrl:a,onComplete:l,onThirdPartyCookiesBlocked:d,location:p}=e;let{height:u="300"}=e;const m=(0,s.useRef)(void 0),g=(0,s.useRef)(void 0),h=e=>{if(g.current&&e.source===g.current.contentWindow)switch(e.data){case"close":window.removeEventListener("message",h),l&&l();break;case"wpcom_nocookie":d&&d()}};(0,s.useEffect)((()=>{r&&window.scrollTo(0,m.current.offsetTop-10),window.addEventListener("message",h)}));let _=a.replace("authorize/","authorize_iframe/");return _.includes("?")||(_+="?"),c&&(_+="&display-tos",u=(parseInt(u)+50).toString()),_+="&iframe_height="+parseInt(u),p&&(_+="&iframe_source="+p),i().createElement("div",{className:"dops-card fade-in jp-iframe-wrap",ref:m},i().createElement("h1",null,t),n?i().createElement("p",null,__("Loading","jetpack-connection")):i().createElement("iframe",{title:t,width:o,height:u,src:_,ref:g}))};a.propTypes={title:r().string.isRequired,isLoading:r().bool,width:r().string,height:r().string,connectUrl:r().string.isRequired,displayTOS:r().bool.isRequired,scrollToIframe:r().bool,onComplete:r().func,onThirdPartyCookiesBlocked:r().func,location:r().string};const l=a},4981:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var o=n(372),c=n(5932),r=n(7425),s=n(3924),i=n(1112),a=n(6427),l=n(6087),d=n(7723),p=n(7750),u=n(8391),m=n(1386),g=n(2231),h=n(3619),_=n.n(h),f=n(1609),y=n.n(f),b=n(7088),k=n(3269),v=n(3735);n(2057);const __=d.__,C=e=>{const{title:t=__("Manage your Jetpack connection","jetpack-connection"),apiRoot:n,apiNonce:i,connectedPlugins:l,onDisconnected:d,onUnlinked:p,context:u="jetpack-dashboard",connectedUser:m={},connectedSiteId:g,isOpen:h=!1,onClose:_}=e,[C,w]=(0,f.useState)(!1),[A,N]=(0,f.useState)(!1),[S,R]=(0,f.useState)(""),[T,O]=(0,f.useState)(!1);(0,f.useEffect)((()=>{c.Ay.setApiRoot(n),c.Ay.setApiNonce(i)}),[n,i]);const L=(0,f.useCallback)((e=>{e&&e.preventDefault(),w(!0)}),[w]),I=(0,f.useCallback)((e=>{e&&e.preventDefault(),w(!1)}),[w]),P=(0,f.useMemo)((()=>!!m.currentUser?.permissions?.manage_options),[m.currentUser]),D=(0,f.useCallback)((()=>{m.currentUser?.isConnected&&(N(!0),R(""),c.Ay.unlinkUser(P).then((()=>{N(!1),_(),p()})).catch((()=>{let e=__("There was some trouble disconnecting your user account, your Jetpack plugin(s) may be outdated. Please visit your plugins page and make sure all Jetpack plugins are updated.","jetpack-connection");P||(e=__("There was some trouble disconnecting your user account, your Jetpack plugin(s) may be outdated. Please ask a site admin to update Jetpack","jetpack-connection")),R(e),N(!1)})))}),[N,R,P,p,_,m]),U=(0,f.useCallback)((e=>{e&&e.preventDefault(),m.currentUser?.isMaster?O(!0):(o.A.tracks.recordEvent("jetpack_manage_connection_dialog_disconnect_user_click",{context:u}),D())}),[D,u,m]),x=(0,f.useMemo)((()=>A),[A]),F=__("Disconnecting","jetpack-connection"),M=(0,f.useCallback)((()=>{O(!1)}),[O]);return y().createElement(y().Fragment,null,h&&y().createElement(y().Fragment,null,y().createElement(a.Modal,{title:"",contentLabel:t,aria:{labelledby:"jp-connection__manage-dialog__heading"},shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,isDismissible:!1,className:"jp-connection__manage-dialog"},y().createElement("div",{className:"jp-connection__manage-dialog__content"},y().createElement("h1",{id:"jp-connection__manage-dialog__heading"},t),y().createElement(r.Ay,{className:"jp-connection__manage-dialog__large-text"},__("At least one user must be connected for your Jetpack products to work properly.","jetpack-connection")),P&&m.currentUser?.isConnected&&m.currentUser?.isMaster&&y().createElement(E,{title:__("Transfer ownership to another admin","jetpack-connection"),link:(0,s.A)("calypso-settings-manage-connection",{site:window?.myJetpackInitialState?.siteSuffix}),isExternal:!0,key:"transfer",action:"transfer",disabled:x}),m.currentUser?.isConnected&&y().createElement(y().Fragment,null,""!==S&&y().createElement(b.A,{message:S}),y().createElement(E,{title:A?F:__("Disconnect my user account","jetpack-connection"),onClick:U,key:"unlink",action:"unlink",disabled:x})),P&&y().createElement(E,{title:__("Disconnect Jetpack","jetpack-connection"),onClick:L,key:"disconnect",action:"disconnect",disabled:x})),y().createElement(j,{onClose:_,disabled:x})),y().createElement(k.A,{apiRoot:n,apiNonce:i,onDisconnected:d,connectedPlugins:l,connectedSiteId:g,connectedUser:m,isOpen:C,onClose:I,context:u}),y().createElement(v.A,{isOpen:T,onClose:M,apiRoot:n,apiNonce:i,onDisconnected:d,onUnlinked:p})))},E=({title:e,onClick:t=()=>null,isExternal:n=!1,link:o="#",action:c,disabled:r=!1})=>{const s=(0,f.useCallback)((e=>e.preventDefault()),[]);return y().createElement("div",{className:"jp-connection__manage-dialog__action-card card"+(r?" disabled":"")},y().createElement("div",{className:"jp-connection__manage-dialog__action-card__card-content"},y().createElement("a",{href:o,className:(0,g.A)("jp-connection__manage-dialog__action-card__card-headline",c),onClick:r?s:t,target:n?"_blank":"_self",rel:"noopener noreferrer"},e,y().createElement(p.A,{icon:n?u.A:m.A,className:"jp-connection__manage-dialog__action-card__icon"}))))},j=({onClose:e,disabled:t})=>y().createElement("div",{className:"jp-row jp-connection__manage-dialog__actions"},y().createElement("div",{className:"jp-connection__manage-dialog__text-wrap lg-col-span-9 md-col-span-7 sm-col-span-3"},y().createElement(r.Ay,null,(0,l.createInterpolateElement)(__("<strong>Need help?</strong> Learn more about the <connectionInfoLink>Jetpack connection</connectionInfoLink> or <supportLink>contact Jetpack support</supportLink>","jetpack-connection"),{strong:y().createElement("strong",null),connectionInfoLink:y().createElement(a.ExternalLink,{href:(0,s.A)("why-the-wordpress-com-connection-is-important-for-jetpack"),className:"jp-connection__manage-dialog__link"}),supportLink:y().createElement(a.ExternalLink,{href:(0,s.A)("jetpack-support"),className:"jp-connection__manage-dialog__link"})}))),y().createElement("div",{className:"jp-connection__manage-dialog__button-wrap lg-col-span-3 md-col-span-1 sm-col-span-1"},y().createElement(i.A,{weight:"regular",variant:"secondary",onClick:e,className:"jp-connection__manage-dialog__btn-dismiss",disabled:t},__("Cancel","jetpack-connection"))));C.propTypes={title:_().string,apiRoot:_().string.isRequired,apiNonce:_().string.isRequired,connectedPlugins:_().oneOfType([_().array,_().object]),onDisconnected:_().func,onUnlinked:_().func,context:_().string,connectedUser:_().object,connectedSiteId:_().number,isOpen:_().bool,onClose:_().func};const w=C},3735:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var o=n(372),c=n(5932),r=n(3924),s=n(6427),i=n(6087),a=n(7723),l=n(7750),d=n(8391),p=n(1386),u=n(2231),m=n(3619),g=n.n(m),h=n(1609),_=n.n(h);n(1127);const __=a.__,f=({isOpen:e,onClose:t,apiRoot:n,apiNonce:a,onDisconnected:l,onUnlinked:d})=>{const[p,u]=(0,h.useState)(!1),[m,g]=(0,h.useState)(""),f=__("Disconnecting","jetpack-connection"),b=__("Disconnect","jetpack-connection");(0,h.useEffect)((()=>{c.Ay.setApiRoot(n),c.Ay.setApiNonce(a)}),[n,a]);const k=(0,h.useCallback)((()=>{t()}),[t]),v=(0,h.useCallback)((()=>{o.A.tracks.recordEvent("jetpack_manage_connection_dialog_owner_disconnect_click"),u(!0),g(""),c.Ay.unlinkUser(!0,{disconnectAllUsers:!0}).then((()=>{o.A.tracks.recordEvent("jetpack_manage_connection_dialog_owner_disconnect_success"),l&&l(),d&&d()})).catch((()=>{o.A.tracks.recordEvent("jetpack_manage_connection_dialog_owner_disconnect_error"),g(__("There was a problem disconnecting your account. Please try again.","jetpack-connection")),u(!1)}))}),[l,d]);return e&&_().createElement(s.Modal,{title:"",contentLabel:__("Disconnect Owner Account","jetpack-connection"),aria:{labelledby:"jp-connection__disconnect-dialog__heading"},onRequestClose:k,className:"jp-connection__disconnect-dialog"},_().createElement("div",{className:"jp-connection__disconnect-dialog__content"},_().createElement("h1",{id:"jp-connection__disconnect-dialog__heading"},__("Disconnect Owner Account","jetpack-connection")),_().createElement("p",{className:"jp-connection__disconnect-dialog__large-text"},__("Disconnecting the owner account will remove the Jetpack connection for all users on this site. The site will remain connected.","jetpack-connection")),_().createElement(y,{title:__("Transfer ownership to another admin","jetpack-connection"),link:(0,r.A)("calypso-settings-manage-connection",{site:window?.myJetpackInitialState?.siteSuffix}),isExternal:!0,action:"transfer"}),_().createElement(y,{title:__("View other connected accounts","jetpack-connection"),link:"users.php",action:"check-users"})),_().createElement("div",{className:"jp-connection__disconnect-dialog__actions"},_().createElement("div",{className:"jp-row"},_().createElement("div",{className:"lg-col-span-8 md-col-span-9 sm-col-span-4"},_().createElement("p",null,(0,i.createInterpolateElement)(__("<strong>Need help?</strong> Learn more about the <connectionInfoLink>Jetpack connection</connectionInfoLink> or <supportLink>contact Jetpack support</supportLink>","jetpack-connection"),{strong:_().createElement("strong",null),connectionInfoLink:_().createElement(s.ExternalLink,{href:(0,r.A)("why-the-wordpress-com-connection-is-important-for-jetpack"),className:"jp-connection__disconnect-dialog__link"}),supportLink:_().createElement(s.ExternalLink,{href:(0,r.A)("jetpack-support"),className:"jp-connection__disconnect-dialog__link"})}))),_().createElement("div",{className:"jp-connection__disconnect-dialog__button-wrap lg-col-span-4 md-col-span-7 sm-col-span-4"},_().createElement(s.Button,{variant:"primary",onClick:k,className:"jp-connection__disconnect-dialog__btn-dismiss"},__("Stay Connected","jetpack-connection")),_().createElement(s.Button,{variant:"primary",onClick:v,className:"jp-connection__disconnect-dialog__btn-disconnect",isDestructive:!0,disabled:p},p?f:b))),m&&_().createElement("p",{className:"jp-connection__disconnect-dialog__error"},m)))};f.propTypes={isOpen:g().bool,onClose:g().func,apiRoot:g().string.isRequired,apiNonce:g().string.isRequired,onDisconnected:g().func,onUnlinked:g().func};const y=({title:e,onClick:t=()=>null,isExternal:n=!1,link:o="#",action:c,disabled:r=!1})=>{const s=(0,h.useCallback)((e=>e.preventDefault()),[]);return _().createElement("div",{className:"jp-connection__manage-dialog__action-card card"+(r?" disabled":"")},_().createElement("div",{className:"jp-connection__manage-dialog__action-card__card-content"},_().createElement("a",{href:o,className:(0,u.A)("jp-connection__manage-dialog__action-card__card-headline",c),onClick:r?s:t,target:n?"_blank":"_self",rel:"noopener noreferrer"},e,_().createElement(l.A,{icon:n?d.A:p.A,className:"jp-connection__manage-dialog__action-card__icon"}))))},b=f},9660:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(5932),c=n(7999),r=n(7143),s=n(1609),i=n(4293);const a=window?.JP_CONNECTION_INITIAL_STATE||(0,c.getScriptData)()?.connection||{};function l({registrationNonce:e=a.registrationNonce,apiRoot:t=a.apiRoot,apiNonce:n=a.apiNonce,redirectUri:c,autoTrigger:l,from:d,skipUserConnection:p,skipPricingPage:u}={}){const{registerSite:m,connectUser:g,refreshConnectedPlugins:h}=(0,r.useDispatch)(i.a),_=(0,r.useSelect)((e=>e(i.a).getRegistrationError())),{siteIsRegistering:f,userIsConnecting:y,userConnectionData:b,connectedPlugins:k,connectionErrors:v,isRegistered:C,isUserConnected:E,hasConnectedOwner:j,isOfflineMode:w}=(0,r.useSelect)((e=>({siteIsRegistering:e(i.a).getSiteIsRegistering(),userIsConnecting:e(i.a).getUserIsConnecting(),userConnectionData:e(i.a).getUserConnectionData(),connectedPlugins:e(i.a).getConnectedPlugins(),connectionErrors:e(i.a).getConnectionErrors(),isOfflineMode:e(i.a).getIsOfflineMode(),...e(i.a).getConnectionStatus()}))),A=()=>p?c?(window.location=c,Promise.resolve(c)):Promise.resolve():g({from:d,redirectUri:c,skipPricingPage:u}),N=t=>(t&&t.preventDefault(),C?A():m({registrationNonce:e,redirectUri:c,from:d}).then((()=>A())));return(0,s.useEffect)((()=>{o.Ay.setApiRoot(t),o.Ay.setApiNonce(n)}),[t,n]),(0,s.useEffect)((()=>{!l||f||y||N()}),[]),{handleRegisterSite:N,handleConnectUser:A,refreshConnectedPlugins:h,isRegistered:C,isUserConnected:E,siteIsRegistering:f,userIsConnecting:y,registrationError:_,userConnectionData:b,hasConnectedOwner:j,connectedPlugins:k,connectionErrors:v,isOfflineMode:w}}},3765:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(7999);function c(){const e=("undefined"!=typeof window&&window?.JP_CONNECTION_INITIAL_STATE||(0,o.getScriptData)()?.connection)?.calypsoEnv;switch(e){case"development":return"http://calypso.localhost:3000/";case"wpcalypso":return"https://wpcalypso.wordpress.com/";case"horizon":return"https://horizon.wordpress.com/";default:return"https://wordpress.com/"}}},4617:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=e=>{window.location.replace(e)}},9628:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,R:()=>i});var o=n(7088),c=n(9660),r=n(1713);function s(){const{connectionErrors:e}=(0,c.A)({}),t=Object.values(e).shift(),n=t&&Object.values(t).length&&Object.values(t).shift().error_message;return{hasConnectionError:Boolean(n),connectionErrorMessage:n}}const i=()=>{const{hasConnectionError:e,connectionErrorMessage:t}=s(),{restoreConnection:n,isRestoringConnection:c,restoreConnectionError:i}=(0,r.A)();return e?React.createElement(o.A,{isRestoringConnection:c,restoreConnectionError:i,restoreConnectionCallback:n,message:t}):null}},2558:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var o=n(5932),c=n(7999),r=n(7143),s=n(4804),i=n.n(s),a=n(1609),l=n(3765),d=n(9660),p=n(4293);const u=i()("jetpack:connection:useProductCheckoutWorkflow"),{registrationNonce:m,apiRoot:g,apiNonce:h,siteSuffix:_}=window?.JP_CONNECTION_INITIAL_STATE||(0,c.getScriptData)()?.connection||{},f=()=>"undefined"!=typeof window?window?.myJetpackInitialState?.adminUrl:null;function y({productSlug:e,redirectUrl:t,siteSuffix:n=_,adminUrl:c=f(),connectAfterCheckout:s=!1,siteProductAvailabilityHandler:i=null,quantity:y=null,from:b,useBlogIdSuffix:k=!1}={}){u("productSlug is %s",e),u("redirectUrl is %s",t),u("siteSuffix is %s",n),u("from is %s",b);const[v,C]=(0,a.useState)(!1),{registerSite:E}=(0,r.useDispatch)(p.a),j=(0,r.useSelect)((e=>e(p.a).getBlogId()),[]);u("blogID is %s",j??"undefined"),k=k&&!!j;const{isUserConnected:w,isRegistered:A,handleConnectUser:N}=(0,d.A)({redirectUri:t,from:b}),S=(0,a.useMemo)((()=>{const o=(0,l.A)(),r=(!A||!w)&&s,i=r?"checkout/jetpack/":`checkout/${k?j.toString():n}/`,a=new URL(`${o}${i}${e}${null!=y?`:-q-${y}`:""}`);return r?(a.searchParams.set("connect_after_checkout",!0),a.searchParams.set("admin_url",c),a.searchParams.set("from_site_slug",n)):a.searchParams.set("site",n),a.searchParams.set("source",b),a.searchParams.set("redirect_to",t),w||a.searchParams.set("unlinked","1"),a}),[A,w,s,n,y,e,b,t,c,k,j]);u("isRegistered is %s",A),u("isUserConnected is %s",w),u("connectAfterCheckout is %s",s),u("checkoutUrl is %s",S);const R=(e=null)=>Promise.resolve(i&&i()).then((t=>{if(e&&S.searchParams.set("redirect_to",e),t)return u("handleAfterRegistration: Site has a product associated"),N();u("handleAfterRegistration: Site does not have a product associated. Redirecting to checkout %s",S),window.location.href=S}));return(0,a.useEffect)((()=>{o.Ay.setApiRoot(g),o.Ay.setApiNonce(h)}),[]),{run:(e,n=null)=>(e&&e.preventDefault(),C(!0),s?((e=null)=>{e&&S.searchParams.set("redirect_to",e),u("Redirecting to connectAfterCheckout flow: %s",S),window.location.href=S})(n):A?R(n):void E({registrationNonce:m,redirectUri:t}).then((()=>R(n)))),isRegistered:A,hasCheckoutStarted:v}}},1713:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(5932),c=n(7999),r=n(7143),s=n(1609),i=n(4293);const{apiRoot:a,apiNonce:l}=window?.JP_CONNECTION_INITIAL_STATE||(0,c.getScriptData)()?.connection||{};function d(){const[e,t]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),{disconnectUserSuccess:d,setConnectionErrors:p}=(0,r.useDispatch)(i.a);return(0,s.useEffect)((()=>{o.Ay.setApiRoot(a),o.Ay.setApiNonce(l)}),[]),{restoreConnection:(e=!0)=>(t(!0),c(null),o.Ay.reconnect().then((t=>("in_progress"===t.status?(d(),p({}),e&&(window.location.href="/wp-admin/admin.php?page=my-jetpack#/connection")):window.location.reload(),t))).catch((e=>{throw c(e),t(!1),e}))),isRestoringConnection:e,restoreConnectionError:n}}},8980:(e,t,n)=>{"use strict";n.d(t,{AY:()=>g.A,F0:()=>o.A,Hx:()=>f.a,JC:()=>l.A,Jl:()=>c.A,Ni:()=>u.A,Ob:()=>b.A,Rc:()=>d.R,Sx:()=>d.A,ag:()=>_.A,bo:()=>p.A,cS:()=>y.A,d1:()=>h.A,mX:()=>a.A,nM:()=>r.A,pK:()=>s.A,w5:()=>m.A,xW:()=>i.A});var o=n(6212),c=n(2668),r=n(7945),s=n(8421),i=n(7018),a=n(7840),l=n(7088),d=n(9628),p=n(3269),u=n(7499),m=n(9660),g=n(4981),h=n(4617),_=n(3765),f=n(4293),y=n(2558),b=n(1713)},3935:(e,t,n)=>{"use strict";n.d(t,{A1:()=>a,Ay:()=>C,DO:()=>i,Ij:()=>s,Kl:()=>m,LW:()=>l,MU:()=>g,XY:()=>d,ZO:()=>r,dz:()=>p,gH:()=>u,v_:()=>c});var o=n(5932);const c="SET_CONNECTION_STATUS",r="SET_CONNECTION_STATUS_IS_FETCHING",s="SET_SITE_IS_REGISTERING",i="SET_USER_IS_CONNECTING",a="SET_REGISTRATION_ERROR",l="CLEAR_REGISTRATION_ERROR",d="SET_AUTHORIZATION_URL",p="DISCONNECT_USER_SUCCESS",u="SET_CONNECTED_PLUGINS",m="SET_CONNECTION_ERRORS",g="SET_IS_OFFLINE_MODE",h=e=>({type:c,connectionStatus:e}),_=e=>({type:s,isRegistering:e}),f=e=>({type:i,isConnecting:e}),y=e=>({type:a,registrationError:e}),b=()=>({type:l}),k=e=>({type:d,authorizationUrl:e}),v=e=>({type:u,connectedPlugins:e});const C={setConnectionStatus:h,setConnectionStatusIsFetching:e=>({type:r,isFetching:e}),fetchConnectionStatus:()=>({type:"FETCH_CONNECTION_STATUS"}),fetchAuthorizationUrl:e=>({type:"FETCH_AUTHORIZATION_URL",redirectUri:e}),setSiteIsRegistering:_,setUserIsConnecting:f,setRegistrationError:y,clearRegistrationError:b,setAuthorizationUrl:k,registerSite:function*({registrationNonce:e,redirectUri:t,from:n=""}){yield b(),yield _(!0);try{const o=yield{type:"REGISTER_SITE",registrationNonce:e,redirectUri:t,from:n};return yield h({isRegistered:!0}),yield k(o.authorizeUrl),yield _(!1),Promise.resolve(o)}catch(e){return yield y(e),yield _(!1),Promise.reject(e)}},connectUser:function*({from:e,redirectFunc:t,redirectUri:n,skipPricingPage:o}={}){yield f(!0),yield{type:"CONNECT_USER",from:e,redirectFunc:t,redirectUri:n,skipPricingPage:o}},disconnectUserSuccess:()=>({type:p}),setConnectedPlugins:v,refreshConnectedPlugins:()=>async({dispatch:e})=>await new Promise((t=>o.Ay.fetchConnectedPlugins().then((n=>{e(v(n)),t(n)})))),setConnectionErrors:e=>({type:m,connectionErrors:e}),setIsOfflineMode:e=>({type:g,isOfflineMode:e})}},2494:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(5932),c=n(7143),r=n(2279);const s={FETCH_AUTHORIZATION_URL:({redirectUri:e})=>o.Ay.fetchAuthorizationUrl(e),REGISTER_SITE:({redirectUri:e,from:t})=>o.Ay.registerSite(null,e,t),CONNECT_USER:(0,c.createRegistryControl)((({resolveSelect:e})=>({from:t,redirectFunc:n,redirectUri:o,skipPricingPage:c}={})=>new Promise(((s,i)=>{e(r.A).getAuthorizationUrl(o).then((e=>{const o=n||(e=>window.location.assign(e)),r=new URL(e);c&&r.searchParams.set("skip_pricing","true"),t&&r.searchParams.set("from",encodeURIComponent(t));const i=r.toString();o(i),s(i)})).catch((e=>{i(e)}))}))))}},5051:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(7143),c=n(3935);const r=(0,o.combineReducers)({connectionStatus:(e={},t)=>{switch(t.type){case c.v_:return{...e,...t.connectionStatus};case c.dz:return{...e,isUserConnected:!1}}return e},connectionStatusIsFetching:(e=!1,t)=>t.type===c.ZO?t.isFetching:e,siteIsRegistering:(e=!1,t)=>t.type===c.Ij?t.isRegistering:e,userIsConnecting:(e=!1,t)=>t.type===c.DO?t.isConnecting:e,registrationError:(e,t)=>{switch(t.type){case c.LW:return!1;case c.A1:return t.registrationError;default:return e}},authorizationUrl:(e,t)=>t.type===c.XY?t.authorizationUrl:e,userConnectionData:(e,t)=>(t.type,e),connectedPlugins:(e={},t)=>t.type===c.gH?t.connectedPlugins:e,connectionErrors:(e={},t)=>t.type===c.Kl?t.connectionErrors:e,isOfflineMode:(e=!1,t)=>t.type===c.MU?t.isConnecting:e})},8019:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(7143),c=n(3935),r=n(2279);const s={...{getAuthorizationUrl:{isFulfilled:(e,...t)=>{const n=Boolean(e.authorizationUrl),c=(0,o.select)(r.A).hasFinishedResolution("getAuthorizationUrl",t);return n&&!c&&(0,o.dispatch)(r.A).finishResolution("getAuthorizationUrl",t),n},*fulfill(e){const t=yield c.Ay.fetchAuthorizationUrl(e);yield c.Ay.setAuthorizationUrl(t.authorizeUrl)}}}}},2676:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getIsOfflineMode:e=>e.isOfflineMode||!1,getWpcomUser:e=>e?.userConnectionData?.currentUser?.wpcomUser,getBlogId:e=>e?.userConnectionData?.currentUser?.blogId}}},8734:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(7143);class c{static store=null;static mayBeInit(e,t){null===c.store&&(c.store=(0,o.createReduxStore)(e,t),(0,o.register)(c.store))}}const r=c},2279:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o="jetpack-connection"},4293:(e,t,n)=>{"use strict";n.d(t,{a:()=>d.A});var o=n(7999),c=n(3935),r=n(2494),s=n(5051),i=n(8019),a=n(2676),l=n(8734),d=n(2279);const p=window.JP_CONNECTION_INITIAL_STATE||(0,o.getScriptData)()?.connection;p||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),l.A.mayBeInit(d.A,{__experimentalUseThunks:!0,reducer:s.A,actions:c.Ay,selectors:a.A,resolvers:i.A,controls:r.A,initialState:p||{}})},3673:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,M:()=>o});const o="en",c="USD"},1452:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(8443),c=n(3673),r=n(9980),s=n(1167);const i=function(){let e,t;const n=()=>{const{l10n:{locale:t}}=(0,o.getSettings)();return(e??(t||window?.window?.navigator?.language)??c.M).split("_")[0]};return{setLocale:t=>{e=t},setGeoLocation:e=>{t=e},formatNumber:(e,{decimals:t=0,forceLatin:o=!0,numberFormatOptions:c={}}={})=>{try{return(0,s.j)({browserSafeLocale:n(),decimals:t,forceLatin:o,numberFormatOptions:c}).format(e)}catch{return String(e)}},formatNumberCompact:(e,{decimals:t=0,forceLatin:o=!0,numberFormatOptions:c={}}={})=>{try{return(0,s.c)({browserSafeLocale:n(),decimals:t,forceLatin:o,numberFormatOptions:c}).format(e)}catch{return String(e)}},formatCurrency:(e,o,{stripZeros:c=!1,isSmallestUnit:s=!1,signForPositive:i=!1,forceLatin:a=!0}={})=>(0,r.u)({number:e,currency:o,browserSafeLocale:n(),stripZeros:c,isSmallestUnit:s,signForPositive:i,geoLocation:t,forceLatin:a}),getCurrencyObject:(e,o,{stripZeros:c=!1,isSmallestUnit:s=!1,signForPositive:i=!1,forceLatin:a=!0}={})=>(0,r.v)({number:e,currency:o,browserSafeLocale:n(),stripZeros:c,isSmallestUnit:s,signForPositive:i,geoLocation:t,forceLatin:a})}}},3328:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var o=n(4804),c=n.n(o),r=n(3673);const s=c()("number-formatters:get-cached-formatter"),i=new Map;function a({locale:e,fallbackLocale:t=r.M,options:n,retries:o=1}){const c=JSON.stringify([e,n]);try{return i.get(c)??i.set(c,new Intl.NumberFormat(e,n)).get(c)}catch(c){if(s(`Intl.NumberFormat was called with a non-existent locale "${e}"; falling back to ${t}`),o)return a({locale:t,options:n,retries:o-1});throw c}}},4268:(e,t,n)=>{"use strict";n.d(t,{vA:()=>l});const o=(0,n(1452).A)(),{setLocale:c,setGeoLocation:r,formatNumber:s,formatNumberCompact:i,formatCurrency:a,getCurrencyObject:l}=o},6673:(e,t,n)=>{"use strict";n.d(t,{a:()=>o});const o={AED:{symbol:".."},AFN:{symbol:""},ALL:{symbol:"Lek"},AMD:{symbol:""},ANG:{symbol:""},AOA:{symbol:"Kz"},ARS:{symbol:"$"},AUD:{symbol:"A$"},AWG:{symbol:""},AZN:{symbol:""},BAM:{symbol:""},BBD:{symbol:"Bds$"},BDT:{symbol:""},BGN:{symbol:"."},BHD:{symbol:".."},BIF:{symbol:"FBu"},BMD:{symbol:"$"},BND:{symbol:"$"},BOB:{symbol:"Bs"},BRL:{symbol:"R$"},BSD:{symbol:"$"},BTC:{symbol:""},BTN:{symbol:"Nu."},BWP:{symbol:"P"},BYR:{symbol:"."},BZD:{symbol:"BZ$"},CAD:{symbol:"C$"},CDF:{symbol:"FC"},CHF:{symbol:"CHF"},CLP:{symbol:"$"},CNY:{symbol:""},COP:{symbol:"$"},CRC:{symbol:""},CUC:{symbol:"CUC"},CUP:{symbol:"$MN"},CVE:{symbol:"$"},CZK:{symbol:"K"},DJF:{symbol:"Fdj"},DKK:{symbol:"kr."},DOP:{symbol:"RD$"},DZD:{symbol:".."},EGP:{symbol:".."},ERN:{symbol:"Nfk"},ETB:{symbol:"ETB"},EUR:{symbol:""},FJD:{symbol:"FJ$"},FKP:{symbol:""},GBP:{symbol:""},GEL:{symbol:"Lari"},GHS:{symbol:""},GIP:{symbol:""},GMD:{symbol:"D"},GNF:{symbol:"FG"},GTQ:{symbol:"Q"},GYD:{symbol:"G$"},HKD:{symbol:"HK$"},HNL:{symbol:"L."},HRK:{symbol:"kn"},HTG:{symbol:"G"},HUF:{symbol:"Ft"},IDR:{symbol:"Rp"},ILS:{symbol:""},INR:{symbol:""},IQD:{symbol:".."},IRR:{symbol:""},ISK:{symbol:"kr."},JMD:{symbol:"J$"},JOD:{symbol:".."},JPY:{symbol:""},KES:{symbol:"S"},KGS:{symbol:""},KHR:{symbol:""},KMF:{symbol:"CF"},KPW:{symbol:""},KRW:{symbol:""},KWD:{symbol:".."},KYD:{symbol:"$"},KZT:{symbol:""},LAK:{symbol:""},LBP:{symbol:".."},LKR:{symbol:""},LRD:{symbol:"L$"},LSL:{symbol:"M"},LYD:{symbol:".."},MAD:{symbol:".."},MDL:{symbol:"lei"},MGA:{symbol:"Ar"},MKD:{symbol:"."},MMK:{symbol:"K"},MNT:{symbol:""},MOP:{symbol:"MOP$"},MRO:{symbol:"UM"},MTL:{symbol:""},MUR:{symbol:""},MVR:{symbol:"MVR"},MWK:{symbol:"MK"},MXN:{symbol:"MX$"},MYR:{symbol:"RM"},MZN:{symbol:"MT"},NAD:{symbol:"N$"},NGN:{symbol:""},NIO:{symbol:"C$"},NOK:{symbol:"kr"},NPR:{symbol:""},NZD:{symbol:"NZ$"},OMR:{symbol:""},PAB:{symbol:"B/."},PEN:{symbol:"S/."},PGK:{symbol:"K"},PHP:{symbol:""},PKR:{symbol:""},PLN:{symbol:"z"},PYG:{symbol:""},QAR:{symbol:""},RON:{symbol:"lei"},RSD:{symbol:"."},RUB:{symbol:""},RWF:{symbol:"RWF"},SAR:{symbol:""},SBD:{symbol:"S$"},SCR:{symbol:""},SDD:{symbol:"LSd"},SDG:{symbol:""},SEK:{symbol:"kr"},SGD:{symbol:"S$"},SHP:{symbol:""},SLL:{symbol:"Le"},SOS:{symbol:"S"},SRD:{symbol:"$"},STD:{symbol:"Db"},SVC:{symbol:""},SYP:{symbol:""},SZL:{symbol:"E"},THB:{symbol:""},TJS:{symbol:"TJS"},TMT:{symbol:"m"},TND:{symbol:".."},TOP:{symbol:"T$"},TRY:{symbol:"TL"},TTD:{symbol:"TT$"},TVD:{symbol:"$T"},TWD:{symbol:"NT$"},TZS:{symbol:"TSh"},UAH:{symbol:""},UGX:{symbol:"USh"},USD:{},UYU:{symbol:"$U"},UZS:{symbol:""},VEB:{symbol:"Bs."},VEF:{symbol:"Bs. F."},VND:{symbol:""},VUV:{symbol:"VT"},WST:{symbol:"WS$"},XAF:{symbol:"F"},XCD:{symbol:"$"},XOF:{symbol:"F"},XPF:{symbol:"F"},YER:{symbol:""},ZAR:{symbol:"R"},ZMW:{symbol:"ZK"},WON:{symbol:""}}},9980:(e,t,n)=>{"use strict";n.d(t,{u:()=>h,v:()=>_});var o=n(4804),c=n.n(o),r=n(3673),s=n(3328),i=n(6673);const a=c()("number-formatters:number-format-currency");function l(e,t){return"USD"===e&&t&&""!==t&&"US"!==t?{symbol:"US$"}:i.a[e]}function d(e,t){return l(e,t)?e:(a(`getValidCurrency was called with a non-existent currency "${e}"; falling back to ${r.$}`),r.$)}function p({number:e,currency:t,browserSafeLocale:n,forceLatin:o=!0,stripZeros:c,signForPositive:r}){const i=`${n}${o?"-u-nu-latn":""}`,a={style:"currency",currency:t,...c&&Number.isInteger(e)&&{maximumFractionDigits:0,minimumFractionDigits:0},...r&&{signDisplay:"exceptZero"}};return(0,s.J)({locale:i,options:a})}function u(e,t,n){return p({number:0,currency:t,browserSafeLocale:e,forceLatin:n}).resolvedOptions().maximumFractionDigits}function m(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function g(e,t,n){if(isNaN(e))return a("formatCurrency was called with NaN"),0;if(n){Number.isInteger(e)||a("formatCurrency was called with isSmallestUnit and a float which will be rounded",e);const n=10**t;return m(Math.round(e)/n,t)}return m(e,t)}const h=({number:e,browserSafeLocale:t,currency:n,stripZeros:o,isSmallestUnit:c,signForPositive:r,geoLocation:s,forceLatin:i})=>{const a=d(n,s),m=l(a,s),h=u(t,a,i);if(c&&void 0===h)throw new Error(`Could not determine currency precision for ${a} in ${t}`);const _=g(e,h??0,c);return p({number:_,currency:a,browserSafeLocale:t,forceLatin:i,stripZeros:o,signForPositive:r}).formatToParts(_).reduce(((e,t)=>"currency"===t.type&&m?.symbol?e+m.symbol:e+t.value),"")},_=({number:e,browserSafeLocale:t,currency:n,stripZeros:o,isSmallestUnit:c,signForPositive:r,geoLocation:s,forceLatin:i})=>{const a=d(n,s),m=l(a,s),h=g(e,u(t,a,i)??0,c),_=p({number:h,currency:a,browserSafeLocale:t,forceLatin:i,stripZeros:o,signForPositive:r}).formatToParts(h);let f="",y="$",b="before",k=!1,v=!1,C="",E="";_.forEach((e=>{switch(e.type){case"currency":return y=m?.symbol??e.value,void(k&&(b="after"));case"group":case"integer":return C+=e.value,void(k=!0);case"decimal":case"fraction":return E+=e.value,k=!0,void(v=!0);case"minusSign":return void(f="-");case"plusSign":f="+"}}));const j=!Number.isInteger(h)&&v;return{sign:f,symbol:y,symbolPosition:b,integer:C,fraction:E,hasNonZeroFraction:j}}},1167:(e,t,n)=>{"use strict";n.d(t,{c:()=>r,j:()=>c});var o=n(3328);const c=({browserSafeLocale:e,decimals:t=0,forceLatin:n=!0,numberFormatOptions:c={}})=>{const r=`${e}${n?"-u-nu-latn":""}`,s={minimumFractionDigits:t,maximumFractionDigits:t,...c};return(0,o.J)({locale:r,options:s})},r=({numberFormatOptions:e={},...t})=>c({...t,numberFormatOptions:{notation:"compact",maximumFractionDigits:1,...e}})},2365:(e,t,n)=>{"use strict";e.exports=n.p+"images/disconnect-confirm-dc9fe8f5c68cfd1320e0.jpg"},9362:(e,t,n)=>{"use strict";e.exports=n.p+"images/disconnect-thanks-5873bfac56a9bd7322cd.jpg"},9074:e=>{"use strict";e.exports={consumer_slug:"connection_package"}},7999:e=>{"use strict";e.exports=window.JetpackScriptDataModule},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},6427:e=>{"use strict";e.exports=window.wp.components},9491:e=>{"use strict";e.exports=window.wp.compose},7143:e=>{"use strict";e.exports=window.wp.data},8443:e=>{"use strict";e.exports=window.wp.date},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives},3832:e=>{"use strict";e.exports=window.wp.url},8579:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2231:(e,t,n)=>{"use strict";function o(e){var t,n,c="";if("string"==typeof e||"number"==typeof e)c+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=o(e[t]))&&(c&&(c+=" "),c+=n)}else for(n in e)e[n]&&(c&&(c+=" "),c+=n);return c}n.d(t,{A:()=>c});const c=function(){for(var e,t,n=0,c="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=o(e))&&(c&&(c+=" "),c+=t);return c}}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var c=o.length-1;c>-1&&(!e||!/^http(s?):/.test(e));)e=o[c--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})();var o={};return(()=>{"use strict";n.r(o),n.d(o,{CONNECTION_STORE_ID:()=>e.Hx,ConnectButton:()=>e.pK,ConnectScreen:()=>e.F0,ConnectScreenLayout:()=>e.Jl,ConnectScreenRequiredPlan:()=>e.nM,ConnectUser:()=>e.mX,ConnectionError:()=>e.Rc,ConnectionErrorNotice:()=>e.JC,DisconnectCard:()=>e.Ni,DisconnectDialog:()=>e.bo,InPlaceConnection:()=>e.xW,ManageConnectionDialog:()=>e.AY,getCalypsoOrigin:()=>e.ag,thirdPartyCookiesFallbackHelper:()=>e.d1,useConnection:()=>e.w5,useConnectionErrorNotice:()=>e.Sx,useProductCheckoutWorkflow:()=>e.cS,useRestoreConnection:()=>e.Ob});var e=n(8980)})(),o})()));;
(()=>{var e={181:(e,t,r)=>{var a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype.toString,f=Math.max,d=Math.min,p=function(){return u.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=n.test(e);return r||o.test(e)?s(e.slice(2),r?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,r){var a,i,n,o,s,l,c=0,u=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=a,n=i;return a=i=void 0,c=t,o=e.apply(n,r)}function b(e){var r=e-l;return void 0===l||r>=t||r<0||h&&e-c>=n}function _(){var e=p();if(b(e))return A(e);s=setTimeout(_,function(e){var r=t-(e-l);return h?d(r,n-(e-c)):r}(e))}function A(e){return s=void 0,y&&a?m(e):(a=i=void 0,o)}function k(){var e=p(),r=b(e);if(a=arguments,i=this,l=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(_,t),u?m(e):o}(l);if(h)return s=setTimeout(_,t),m(l)}return void 0===s&&(s=setTimeout(_,t)),o}return t=g(t)||0,v(r)&&(u=!!r.leading,n=(h="maxWait"in r)?f(g(r.maxWait)||0,t):n,y="trailing"in r?!!r.trailing:y),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,a=l=i=s=void 0},k.flush=function(){return void 0===s?o:A(p())},k}},312:(e,t,r)=>{var a;!function(){"use strict";var t="input is invalid type",i="object"==typeof window,n=i?window:{};n.JS_SHA256_NO_WINDOW&&(i=!1);var o=!i&&"object"==typeof self,s=!n.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;s?n=r.g:o&&(n=self);var l=!n.JS_SHA256_NO_COMMON_JS&&e.exports,c=r.amdO,u=!n.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,h="0123456789abcdef".split(""),f=[-2147483648,8388608,32768,128],d=[24,16,8,0],p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=["hex","array","digest","arrayBuffer"],g=[];!n.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!u||!n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var y=function(e,t){return function(r){return new k(t,!0).update(r)[e]()}},m=function(e){var t=y("hex",e);s&&(t=b(t,e)),t.create=function(){return new k(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<v.length;++r){var a=v[r];t[a]=y(a,e)}return t},b=function(e,a){var i,o=r(394),s=r(903).Buffer,l=a?"sha224":"sha256";return i=s.from&&!n.JS_SHA256_NO_BUFFER_FROM?s.from:function(e){return new s(e)},function(r){if("string"==typeof r)return o.createHash(l).update(r,"utf8").digest("hex");if(null==r)throw new Error(t);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===s?o.createHash(l).update(i(r)).digest("hex"):e(r)}},_=function(e,t){return function(r,a){return new w(r,t,!0).update(a)[e]()}},A=function(e){var t=_("hex",e);t.create=function(t){return new w(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<v.length;++r){var a=v[r];t[a]=_(a,e)}return t};function k(e,t){t?(g[0]=g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0,this.blocks=g):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function w(e,r,a){var i,n=typeof e;if("string"===n){var o,s=[],l=e.length,c=0;for(i=0;i<l;++i)(o=e.charCodeAt(i))<128?s[c++]=o:o<2048?(s[c++]=192|o>>>6,s[c++]=128|63&o):o<55296||o>=57344?(s[c++]=224|o>>>12,s[c++]=128|o>>>6&63,s[c++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++i)),s[c++]=240|o>>>18,s[c++]=128|o>>>12&63,s[c++]=128|o>>>6&63,s[c++]=128|63&o);e=s}else{if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(u&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||u&&ArrayBuffer.isView(e)))throw new Error(t)}e.length>64&&(e=new k(r,!0).update(e).array());var h=[],f=[];for(i=0;i<64;++i){var d=e[i]||0;h[i]=92^d,f[i]=54^d}k.call(this,r,a),this.update(f),this.oKeyPad=h,this.inner=!0,this.sharedMemory=a}k.prototype.update=function(e){if(!this.finalized){var r,a=typeof e;if("string"!==a){if("object"!==a)throw new Error(t);if(null===e)throw new Error(t);if(u&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||u&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,n,o=0,s=e.length,l=this.blocks;o<s;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),r)for(n=this.start;o<s&&n<64;++o)l[n>>>2]|=e[o]<<d[3&n++];else for(n=this.start;o<s&&n<64;++o)(i=e.charCodeAt(o))<128?l[n>>>2]|=i<<d[3&n++]:i<2048?(l[n>>>2]|=(192|i>>>6)<<d[3&n++],l[n>>>2]|=(128|63&i)<<d[3&n++]):i<55296||i>=57344?(l[n>>>2]|=(224|i>>>12)<<d[3&n++],l[n>>>2]|=(128|i>>>6&63)<<d[3&n++],l[n>>>2]|=(128|63&i)<<d[3&n++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),l[n>>>2]|=(240|i>>>18)<<d[3&n++],l[n>>>2]|=(128|i>>>12&63)<<d[3&n++],l[n>>>2]|=(128|i>>>6&63)<<d[3&n++],l[n>>>2]|=(128|63&i)<<d[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=l[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},k.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=f[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},k.prototype.hash=function(){var e,t,r,a,i,n,o,s,l,c=this.h0,u=this.h1,h=this.h2,f=this.h3,d=this.h4,v=this.h5,g=this.h6,y=this.h7,m=this.blocks;for(e=16;e<64;++e)t=((i=m[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,r=((i=m[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,m[e]=m[e-16]+t+m[e-7]+r|0;for(l=u&h,e=0;e<64;e+=4)this.first?(this.is224?(n=300032,y=(i=m[0]-1413257819)-150054599|0,f=i+24177077|0):(n=704751109,y=(i=m[0]-210244248)-1521486534|0,f=i+143694565|0),this.first=!1):(t=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),a=(n=c&u)^c&h^l,y=f+(i=y+(r=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&v^~d&g)+p[e]+m[e])|0,f=i+(t+a)|0),t=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),a=(o=f&c)^f&u^n,g=h+(i=g+(r=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&d^~y&v)+p[e+1]+m[e+1])|0,t=((h=i+(t+a)|0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),a=(s=h&f)^h&c^o,v=u+(i=v+(r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&y^~g&d)+p[e+2]+m[e+2])|0,t=((u=i+(t+a)|0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),a=(l=u&h)^u&f^s,d=c+(i=d+(r=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&g^~v&y)+p[e+3]+m[e+3])|0,c=i+(t+a)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+c|0,this.h1=this.h1+u|0,this.h2=this.h2+h|0,this.h3=this.h3+f|0,this.h4=this.h4+d|0,this.h5=this.h5+v|0,this.h6=this.h6+g|0,this.h7=this.h7+y|0},k.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=this.h4,n=this.h5,o=this.h6,s=this.h7,l=h[e>>>28&15]+h[e>>>24&15]+h[e>>>20&15]+h[e>>>16&15]+h[e>>>12&15]+h[e>>>8&15]+h[e>>>4&15]+h[15&e]+h[t>>>28&15]+h[t>>>24&15]+h[t>>>20&15]+h[t>>>16&15]+h[t>>>12&15]+h[t>>>8&15]+h[t>>>4&15]+h[15&t]+h[r>>>28&15]+h[r>>>24&15]+h[r>>>20&15]+h[r>>>16&15]+h[r>>>12&15]+h[r>>>8&15]+h[r>>>4&15]+h[15&r]+h[a>>>28&15]+h[a>>>24&15]+h[a>>>20&15]+h[a>>>16&15]+h[a>>>12&15]+h[a>>>8&15]+h[a>>>4&15]+h[15&a]+h[i>>>28&15]+h[i>>>24&15]+h[i>>>20&15]+h[i>>>16&15]+h[i>>>12&15]+h[i>>>8&15]+h[i>>>4&15]+h[15&i]+h[n>>>28&15]+h[n>>>24&15]+h[n>>>20&15]+h[n>>>16&15]+h[n>>>12&15]+h[n>>>8&15]+h[n>>>4&15]+h[15&n]+h[o>>>28&15]+h[o>>>24&15]+h[o>>>20&15]+h[o>>>16&15]+h[o>>>12&15]+h[o>>>8&15]+h[o>>>4&15]+h[15&o];return this.is224||(l+=h[s>>>28&15]+h[s>>>24&15]+h[s>>>20&15]+h[s>>>16&15]+h[s>>>12&15]+h[s>>>8&15]+h[s>>>4&15]+h[15&s]),l},k.prototype.toString=k.prototype.hex,k.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=this.h4,n=this.h5,o=this.h6,s=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a>>>24&255,a>>>16&255,a>>>8&255,255&a,i>>>24&255,i>>>16&255,i>>>8&255,255&i,n>>>24&255,n>>>16&255,n>>>8&255,255&n,o>>>24&255,o>>>16&255,o>>>8&255,255&o];return this.is224||l.push(s>>>24&255,s>>>16&255,s>>>8&255,255&s),l},k.prototype.array=k.prototype.digest,k.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},w.prototype=new k,w.prototype.finalize=function(){if(k.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();k.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),k.prototype.finalize.call(this)}};var N=m();N.sha256=N,N.sha224=m(!0),N.sha256.hmac=A(),N.sha224.hmac=A(!0),l?e.exports=N:(n.sha256=N.sha256,n.sha224=N.sha224,c&&(void 0===(a=function(){return N}.call(N,r,N,e))||(e.exports=a)))}()},394:()=>{},903:()=>{}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,a=window.wp.blockEditor,i=window.wp.components,n=window.wp.data,o=window.wp.element;var s=r(181),l=r.n(s),c=r(312);function u(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=u(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}const h=function(){for(var e,t,r=0,a="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=u(e))&&(a&&(a+=" "),a+=t);return a};let f=function(e){return e.DEFAULT="default",e.PORTRAIT="portrait",e.LANDSCAPE="landscape",e.LINE="line",e}({}),d=function(e){return e.AUTHOR="author",e.USER="user",e.EMAIL="email",e}({}),p=function(e){return e.GROUP="gravatar/block-group",e.IMAGE="gravatar/block-image",e.NAME="gravatar/block-name",e.PARAGRAPH="gravatar/block-paragraph",e.LINK="gravatar/block-link",e}({}),v=function(e){return e.AVATAR="avatar",e.DISPLAY_NAME="displayName",e.JOB="job",e.COMPANY="company",e.LOCATION="location",e.DESCRIPTION="description",e.GRAVATAR="gravatar",e.VIEW_PROFILE="viewProfile",e.HEADER="header",e.JOB_COMPANY_LOCATION_WRAPPER="jobCompanyLocationWrapper",e.JOB_COMPANY_WRAPPER="jobCompanyWrapper",e.FOOTER="footer",e.VERIFIED_ACCOUNTS="verifiedAccounts",e}({});const g=window.wp.url;function y(e=[],t=[]){return e.forEach((({name:e,innerBlocks:r,attributes:a})=>{const i=e===p.GROUP&&!r?.length;a.name&&!i&&t.push(a.name),y(r,t)})),t}function m(e,t,r,a,i){if(r[t])return null;let n=[];return Array.isArray(i)&&(n=i.filter(Boolean),!n.length)?null:[e,{name:t,...a},n]}function b(e,t,r,a,i={linkToProfile:!0}){return m(p.IMAGE,v.AVATAR,t,{className:h("gravatar-block-image--avatar",i.className),linkUrl:i.linkToProfile?e.profile_url:"",imageUrl:e.avatar_url||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQwIiBoZWlnaHQ9IjU0MCIgdmlld0JveD0iMCAwIDU0MCA1NDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1NDAiIGhlaWdodD0iNTQwIiBmaWxsPSIjRTJFMkUyIi8+CjxsaW5lIHgxPSIzLjM1MzU1IiB5MT0iMi42NDY0NSIgeDI9IjUzNy4zNTQiIHkyPSI1MzYuNjQ2IiBzdHJva2U9IiNDOUM5QzkiLz4KPC9zdmc+Cg==",imageWidth:r,imageHeight:a,imageAlt:e.avatar_alt_text||e.display_name})}function _(e,t,r={}){return e.display_name?m(p.NAME,v.DISPLAY_NAME,t,{className:h("gravatar-text-truncate-2-lines",r.className),linkUrl:r.linkToProfile?e.profile_url:"",text:e.display_name}):null}function A(e,t,r={}){return e.job_title?m(p.PARAGRAPH,v.JOB,t,{className:h("gravatar-block-paragraph--job gravatar-text-truncate-1-line",r.className),linkUrl:r.linkToProfile?e.profile_url:"",text:e.job_title}):null}function k(e,t,r={}){return e.company?m(p.PARAGRAPH,v.COMPANY,t,{className:h("gravatar-block-paragraph--company gravatar-text-truncate-1-line",r.className),linkUrl:r.linkToProfile?e.profile_url:"",text:e.company}):null}function w(e,t,r={}){return e.location?m(p.PARAGRAPH,v.LOCATION,t,{className:h("gravatar-block-paragraph--location gravatar-text-truncate-1-line",r.className),linkUrl:r.linkToProfile?e.profile_url:"",text:e.location}):null}function N(e,t,r={}){return e.description?m(p.PARAGRAPH,v.DESCRIPTION,t,{className:h("gravatar-block-paragraph--description gravatar-text-truncate-2-lines",r.className),linkUrl:r.linkToProfile?e.profile_url:"",text:e.description}):null}function E(e,t){return[{url:e.profile_url,service_type:"gravatar",service_icon:"https://secure.gravatar.com/icons/gravatar.svg",service_label:"Gravatar",is_hidden:!1},...e.verified_accounts||[]].map((e=>e.is_hidden?null:m(p.IMAGE,e.service_label,t,{linkUrl:e.url,imageUrl:e.service_icon,imageWidth:32,imageHeight:32,imageAlt:e.service_label})))}function P(e,r,a){return e.profile_url?m(p.LINK,v.VIEW_PROFILE,r,{className:h("gravatar-block-link--align-right",a),linkUrl:e.profile_url,text:(0,t.__)("View profile ","gravatar-enhanced")}):null}window.React;const I=(e,t)=>[m(p.GROUP,v.HEADER,t,{className:"gravatar-block-group--header gravatar-block-group--align-center"},[b(e,t,72,72),m(p.GROUP,v.JOB_COMPANY_LOCATION_WRAPPER,t,{linkUrl:e.profile_url,verticalAlignment:!0},[_(e,t),m(p.GROUP,v.JOB_COMPANY_WRAPPER,t,{className:"gravatar-block-group--comma-separated"},[A(e,t),k(e,t)]),w(e,t)])]),N(e,t),m(p.GROUP,v.FOOTER,t,{className:"gravatar-block-group--footer gravatar-block-group--align-center"},[...E(e,t),P(e,t)])].filter(Boolean),R=(e,t)=>[b(e,t,354,354),_(e,t,{linkToProfile:!0}),A(e,t,{linkToProfile:!0}),w(e,t,{linkToProfile:!0}),N(e,t,{className:"gravatar-text-truncate-3-lines"}),m(p.GROUP,v.VERIFIED_ACCOUNTS,t,{className:"gravatar-block-group--verified-accounts"},E(e,t))].filter(Boolean),O=window.ReactJSXRuntime,x=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"gravatar/block","version":"0.5.0","title":"Gravatar Profile","description":"Display user information directly from Gravatar Public Profiles.","category":"widgets","keywords":["gravatar","avatar","profile","card","author","author information","user","user information"],"attributes":{"layout":{"type":"string","default":"default"},"avatarUrlSizeParam":{"type":"number","default":0},"placeholderProfile":{"type":"object","default":{"display_name":"Display Name","job_title":"Job Title","company":"Company","location":"Location","description":"Welcome to Gravatar!"}},"isChildBlockClickable":{"type":"boolean","default":true},"userType":{"type":"string","default":"author"},"userEmail":{"type":"string","default":""},"deletedElements":{"type":"object","default":{}}},"usesContext":["postType","postId"],"supports":{"html":false,"color":{"text":true,"background":true,"gradients":true},"__experimentalBorder":{"color":true,"radius":true},"shadow":true,"spacing":{"margin":true}},"textdomain":"gravatar-enhanced","render":"file:./render.php","editorScript":"file:../block.js","editorStyle":"file:../block.css","viewScript":"file:../block-view.js","viewStyle":"file:../block-view.css"}'),S={...x,icon:function(){return(0,O.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,O.jsx)(i.Path,{fillRule:"evenodd",d:"M7.25 16.437a6.5 6.5 0 1 1 9.5 0V16A2.75 2.75 0 0 0 14 13.25h-4A2.75 2.75 0 0 0 7.25 16v.437Zm1.5 1.193a6.47 6.47 0 0 0 3.25.87 6.47 6.47 0 0 0 3.25-.87V16c0-.69-.56-1.25-1.25-1.25h-4c-.69 0-1.25.56-1.25 1.25v1.63ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm10-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",clipRule:"evenodd"})})},title:(0,t.__)("Gravatar Profile","gravatar-enhanced"),description:(0,t.__)("Display user information directly from Gravatar Public Profiles.","gravatar-enhanced"),keywords:[(0,t.__)("gravatar","gravatar-enhanced"),(0,t.__)("profile","gravatar-enhanced"),(0,t.__)("author","gravatar-enhanced"),(0,t.__)("user","gravatar-enhanced"),(0,t.__)("avatar","gravatar-enhanced"),(0,t.__)("card","gravatar-enhanced")],deprecated:[{attributes:{userType:{type:"string",default:"author"},userValue:{type:"string",default:""}},isEligible:({userValue:e})=>!!e?.trim(),migrate:({userType:e,userValue:t})=>({userType:e,userEmail:t,deletedElements:{}}),save:()=>null}],edit:function({context:{postType:r,postId:s},attributes:u,setAttributes:p,clientId:v}){const{layout:m,avatarUrlSizeParam:b,placeholderProfile:_,isChildBlockClickable:A,userType:k,userEmail:w,deletedElements:N}=u,{replaceInnerBlocks:E}=(0,n.useDispatch)("core/block-editor"),[P,x]=(0,o.useState)(w),[S,j]=(0,o.useState)(),[T,U]=(0,o.useState)(""),[B,C]=(0,o.useState)(),M=(0,o.useRef)(null),G=(0,o.useRef)(N);G.current=N;const H=(0,o.useRef)(I);let D=72,L="";switch(m){case f.PORTRAIT:H.current=R,D=354,L="gravatar-block--portrait";break;case f.LANDSCAPE:L="gravatar-block--landscape";break;case f.LINE:L="gravatar-block--line"}const z=(0,a.useBlockProps)(),J=(0,n.useSelect)((e=>{const{getEditedEntityRecord:t,getEntityRecord:a}=e("core"),i=t("postType",r,s)?.author;return i?a("root","user",i)?.email:""}),[r,s]),W=[{label:(0,t.__)("Author","gravatar-enhanced"),value:d.AUTHOR},{label:(0,t.__)("User","gravatar-enhanced"),value:d.USER},{label:(0,t.__)("Custom email","gravatar-enhanced"),value:d.EMAIL}],V=(0,n.useSelect)((e=>e("core").getUsers()||[]),[]),F=V.map((({name:e,nickname:t,email:r})=>({label:`${e} (${t})`,value:r}))),$=F[0]?.value||"";(0,o.useEffect)((()=>{if(k!==d.USER||isNaN(Number(w))||!V.length)return;const e=Number(w),{email:t}=V.find((({id:t})=>t===e))||{};p(t?{userEmail:t}:{userEmail:$})}),[$,p,w,k,V]),(0,n.useSelect)((e=>{if("success"!==S)return void(M.current=null);const{innerBlocks:t=[]}=e("core/block-editor").getBlock(v),r=y(t);if(M.current?.length>r.length){const e={...N};M.current.forEach((t=>{r.includes(t)||(e[t]=!0)})),p({deletedElements:e})}M.current=r}),[S,v,N,p]),(0,o.useEffect)((()=>{j(void 0),C(void 0),U("");const r=k===d.AUTHOR&&J?J.trim():w.trim();r&&(async r=>{if(j("loading"),!function(e){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e)}(r))return j("error"),void U((0,t.__)("Please enter a valid email.","gravatar-enhanced"));const a=(0,c.sha256)(r.toLowerCase()),{errorCode:i,errorMsg:n,data:o}=await async function(e){try{const t="gravatar-block",r=(0,g.addQueryArgs)(`https://api.gravatar.com/v3/profiles/${e}`,{source:t}),a=await fetch(r);if(200!==a.status)throw a.status;const i=await a.json(),n=(0,g.addQueryArgs)(i.profile_url,{utm_source:t});return{data:{...i,profile_url:n}}}catch(e){let r=(0,t.__)("Sorry, we are unable to load this Gravatar profile.","gravatar-enhanced");switch(e){case 404:r=(0,t.__)("Profile not found.","gravatar-enhanced");break;case 429:r=(0,t.__)("Too many requests.","gravatar-enhanced");break;case 500:r=(0,t.__)("Internal server error.","gravatar-enhanced")}return{errorCode:e,errorMsg:r}}}(a);var s,l;i?(j("error"),C(i),U(n)):(j("success"),o.avatar_url=(s=o.avatar_url,l=b||D,(0,g.addQueryArgs)(s,{s:2*l})),E(v,(0,e.createBlocksFromInnerBlocksTemplate)(H.current(o,G.current))))})(r)}),[b,v,D,E,w,J,k]),(0,o.useEffect)((()=>{"success"!==S&&E(v,(0,e.createBlocksFromInnerBlocksTemplate)(H.current(_,N)))}),[S,v,N,_,E]);const Z=(0,o.useCallback)(l()((e=>p({userEmail:e})),500),[]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(a.InspectorControls,{children:(0,O.jsxs)(i.PanelBody,{title:(0,t.__)("Settings","gravatar-enhanced"),children:[(0,O.jsx)(i.SelectControl,{label:(0,t.__)("Select User","gravatar-enhanced"),value:k,options:W,onChange:function(e){let t="";e===d.USER&&(t=$),p({userType:e,userEmail:t}),x("")}}),k===d.USER&&(0,O.jsx)(i.SelectControl,{value:w,options:F,onChange:e=>p({userEmail:e})}),k===d.EMAIL&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(i.TextControl,{type:"email",value:P,onChange:e=>{x(e),Z(e)},placeholder:(0,t.__)("Enter email","gravatar-enhanced")}),404===B&&(0,O.jsx)("a",{href:`mailto:${P}?subject=${encodeURIComponent((0,t.__)("Lets set up your Gravatar profile","gravatar-enhanced"))}&body=${encodeURIComponent((0,t.sprintf)(
// translators: %1$s = newline
// translators: %1$s = newline
(0,t.__)("Hi there,%1$s%1$sI use Gravatar to create and manage a unified online profile  its free, fast to set up, and keeps your presence consistent wherever you interact online.%1$s%1$sSet up your Gravatar profile now: https://gravatar.com%1$s%1$sCheers,","gravatar-enhanced"),"\n"))}`,target:"_blank",rel:"noopener noreferrer",children:(0,t.__)("Invite to join Gravatar","gravatar-enhanced")})]})]})}),(0,O.jsxs)("div",{...z,className:h("gravatar-block",L,z.className,{"gravatar-block--custom-text-color":!!z.style.color,"gravatar-block--child-block-unclickable":k===d.EMAIL&&!w||!A}),children:["error"===S&&(0,O.jsx)("div",{className:"gravatar-block__status",children:T}),"success"===S&&(0,O.jsx)(a.InnerBlocks,{allowedBlocks:[],renderAppender:void 0}),"success"!==S&&(0,O.jsx)(a.InnerBlocks,{allowedBlocks:[],renderAppender:void 0,templateLock:"all",template:H.current(_,N)})]})]})}};(0,e.registerBlockType)(x.name,S)})()})();;
(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,r=window.wp.blockEditor,a=window.wp.data;function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}const c=function(){for(var e,t,r=0,a="",c=arguments.length;r<c;r++)(e=arguments[r])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a},o=window.ReactJSXRuntime;function l({linkUrl:e,children:t,...r}){return e?(0,o.jsx)("a",{...r,href:e,target:"_blank",children:t}):(0,o.jsx)("div",{...r,children:t})}const i=window.wp.components,s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"gravatar/block-group","version":"0.5.0","title":"Group","description":"The Group block for the Gravatar block.","category":"layout","parent":[],"attributes":{"name":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"verticalAlignment":{"type":"boolean","default":false},"className":{"type":"string","default":""}},"supports":{"html":false,"inserter":false},"textdomain":"gravatar-enhanced","editorScript":"file:../../../block-group.js"}'),p={...s,icon:function(){return(0,o.jsx)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,o.jsx)(i.Path,{d:"M18 4h-7c-1.1 0-2 .9-2 2v3H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-3h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h3V13c0 1.1.9 2 2 2h2.5v3zm0-4.5H11c-.3 0-.5-.2-.5-.5v-2.5H13c.3 0 .5.2.5.5v2.5zm5-.5c0 .3-.2.5-.5.5h-3V11c0-1.1-.9-2-2-2h-2.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7z"})})},title:(0,t.__)("Group","gravatar-enhanced"),description:(0,t.__)("The Group block for the Gravatar block.","gravatar-enhanced"),edit:function({attributes:e,clientId:t}){const{linkUrl:n,verticalAlignment:i,className:s}=e,p=(0,r.useBlockProps)(),u=(0,a.useSelect)((e=>{const{innerBlocks:r=[]}=e("core/block-editor").getBlock(t);return r.map((({name:e,attrs:t})=>[e,t]))}),[t]);return(0,o.jsx)(l,{...p,className:c("gravatar-block__child","gravatar-block-group",{"gravatar-block-group--vertical-alignment":i},p.className,s),linkUrl:n,children:(0,o.jsx)(r.InnerBlocks,{allowedBlocks:[],template:u})})}};(0,e.registerBlockType)(s.name,p)})();;
(()=>{"use strict";const e=window.wp.blocks,a=window.wp.i18n;let t=function(e){return e.AVATAR="avatar",e.DISPLAY_NAME="displayName",e.JOB="job",e.COMPANY="company",e.LOCATION="location",e.DESCRIPTION="description",e.GRAVATAR="gravatar",e.VIEW_PROFILE="viewProfile",e.HEADER="header",e.JOB_COMPANY_LOCATION_WRAPPER="jobCompanyLocationWrapper",e.JOB_COMPANY_WRAPPER="jobCompanyWrapper",e.FOOTER="footer",e.VERIFIED_ACCOUNTS="verifiedAccounts",e}({});const r=window.wp.blockEditor;function i(e){var a,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(a=0;a<n;a++)e[a]&&(t=i(e[a]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const n=function(){for(var e,a,t=0,r="",n=arguments.length;t<n;t++)(e=arguments[t])&&(a=i(e))&&(r&&(r+=" "),r+=a);return r},o=window.ReactJSXRuntime;function c({linkUrl:e,children:a,...t}){return e?(0,o.jsx)("a",{...t,href:e,target:"_blank",children:a}):(0,o.jsx)("div",{...t,children:a})}const l=window.wp.components,s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"gravatar/block-image","version":"0.5.0","title":"Image","description":"The Image block for the Gravatar block.","category":"layout","parent":[],"attributes":{"name":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"imageUrl":{"type":"string","default":""},"imageWidth":{"type":"number","default":0},"imageHeight":{"type":"number","default":0},"imageAlt":{"type":"string","default":""},"className":{"type":"string","default":""}},"supports":{"html":false,"inserter":false},"textdomain":"gravatar-enhanced","editorScript":"file:../../../block-image.js"}'),g=(0,a.__)("Image","gravatar-enhanced"),m={...s,icon:function(){return(0,o.jsx)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,o.jsx)(l.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})})},__experimentalLabel:({name:e})=>e?e===t.AVATAR?(0,a.__)("Avatar","gravatar-enhanced"):e:g,title:g,description:(0,a.__)("The Image block for the Gravatar block.","gravatar-enhanced"),edit:function({attributes:e}){const{linkUrl:a,imageUrl:t,imageWidth:i,imageHeight:l,imageAlt:s,className:g}=e,m=(0,r.useBlockProps)();return(0,o.jsx)(c,{...m,className:n("gravatar-block__child","gravatar-block-image",m.className,g),linkUrl:a,children:(0,o.jsx)("img",{className:"gravatar-block-image__image",src:t,width:i,height:l,alt:s})})}};(0,e.registerBlockType)(s.name,m)})();;
(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,r=window.wp.blockEditor;function a(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=a(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const n=function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=a(e))&&(n&&(n+=" "),n+=t);return n},i=window.ReactJSXRuntime;function l({linkUrl:e,children:t,...r}){return e?(0,i.jsx)("a",{...r,href:e,target:"_blank",children:t}):(0,i.jsx)("div",{...r,children:t})}const o=window.wp.components,s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"gravatar/block-name","version":"0.5.0","title":"Name","description":"The Name block for the Gravatar block.","category":"layout","parent":[],"attributes":{"name":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"text":{"type":"string","default":""},"className":{"type":"string","default":""}},"supports":{"html":false,"inserter":false},"textdomain":"gravatar-enhanced","editorScript":"file:../../../block-name.js"}'),c={...s,icon:function(){return(0,i.jsx)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,i.jsx)(o.Path,{d:"M10 4.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm2.25 7.5v-1A2.75 2.75 0 0011 8.25H7A2.75 2.75 0 004.25 11v1h1.5v-1c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v1h1.5zM4 20h9v-1.5H4V20zm16-4H4v-1.5h16V16z","fill-rule":"evenodd","clip-rule":"evenodd"})})},title:(0,t.__)("Name","gravatar-enhanced"),description:(0,t.__)("The Name block for the Gravatar block.","gravatar-enhanced"),edit:function({attributes:e}){const{linkUrl:t,text:a,className:o}=e,s=(0,r.useBlockProps)();return(0,i.jsx)(l,{...s,className:n("gravatar-block__child","gravatar-block-name",s.className,o),linkUrl:t,children:(0,i.jsx)("h4",{className:"gravatar-block-name__text",children:a})})}};(0,e.registerBlockType)(s.name,c)})();;
(()=>{"use strict";let a=function(a){return a.AVATAR="avatar",a.DISPLAY_NAME="displayName",a.JOB="job",a.COMPANY="company",a.LOCATION="location",a.DESCRIPTION="description",a.GRAVATAR="gravatar",a.VIEW_PROFILE="viewProfile",a.HEADER="header",a.JOB_COMPANY_LOCATION_WRAPPER="jobCompanyLocationWrapper",a.JOB_COMPANY_WRAPPER="jobCompanyWrapper",a.FOOTER="footer",a.VERIFIED_ACCOUNTS="verifiedAccounts",a}({});const r=window.wp.blocks,e=window.wp.i18n,t=window.wp.blockEditor;function n(a){var r,e,t="";if("string"==typeof a||"number"==typeof a)t+=a;else if("object"==typeof a)if(Array.isArray(a)){var o=a.length;for(r=0;r<o;r++)a[r]&&(e=n(a[r]))&&(t&&(t+=" "),t+=e)}else for(e in a)a[e]&&(t&&(t+=" "),t+=e);return t}const o=function(){for(var a,r,e=0,t="",o=arguments.length;e<o;e++)(a=arguments[e])&&(r=n(a))&&(t&&(t+=" "),t+=r);return t},i=window.ReactJSXRuntime;function c({linkUrl:a,children:r,...e}){return a?(0,i.jsx)("a",{...e,href:a,target:"_blank",children:r}):(0,i.jsx)("div",{...e,children:r})}const s=window.wp.components,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"gravatar/block-paragraph","version":"0.5.0","title":"Paragraph","description":"The Paragraph block for the Gravatar block.","category":"layout","parent":[],"attributes":{"name":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"text":{"type":"string","default":""},"className":{"type":"string","default":""}},"supports":{"html":false,"inserter":false},"textdomain":"gravatar-enhanced","editorScript":"file:../../../block-paragraph.js"}'),p=(0,e.__)("Paragraph","gravatar-enhanced"),h={...l,icon:function(){return(0,i.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,i.jsx)(s.Path,{d:"m9.99609 14v-.2251l.00391.0001v6.225h1.5v-14.5h2.5v14.5h1.5v-14.5h3v-1.5h-8.50391c-2.76142 0-5 2.23858-5 5 0 2.7614 2.23858 5 5 5z"})})},__experimentalLabel:({name:r})=>{switch(r){case a.JOB:return(0,e.__)("Job Title","gravatar-enhanced");case a.COMPANY:return(0,e.__)("Company","gravatar-enhanced");case a.LOCATION:return(0,e.__)("Location","gravatar-enhanced");case a.DESCRIPTION:return(0,e.__)("About Me","gravatar-enhanced");default:return p}},title:p,description:(0,e.__)("The Paragraph block for the Gravatar block.","gravatar-enhanced"),edit:function({attributes:a}){const{linkUrl:r,text:e,className:n}=a,s=(0,t.useBlockProps)();return(0,i.jsx)(c,{...s,className:o("gravatar-block__child","gravatar-block-paragraph",s.className,n),linkUrl:r,children:(0,i.jsx)("p",{className:"gravatar-block-paragraph__text",children:e})})}};(0,r.registerBlockType)(l.name,h)})();;
(()=>{"use strict";let e=function(e){return e.AVATAR="avatar",e.DISPLAY_NAME="displayName",e.JOB="job",e.COMPANY="company",e.LOCATION="location",e.DESCRIPTION="description",e.GRAVATAR="gravatar",e.VIEW_PROFILE="viewProfile",e.HEADER="header",e.JOB_COMPANY_LOCATION_WRAPPER="jobCompanyLocationWrapper",e.JOB_COMPANY_WRAPPER="jobCompanyWrapper",e.FOOTER="footer",e.VERIFIED_ACCOUNTS="verifiedAccounts",e}({});const t=window.wp.blocks,a=window.wp.i18n,r=window.wp.blockEditor;function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}const i=function(){for(var e,t,a=0,r="",i=arguments.length;a<i;a++)(e=arguments[a])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r},o=window.ReactJSXRuntime,s=window.wp.components,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"gravatar/block-link","version":"0.5.0","title":"Link","description":"The Link block for the Gravatar block.","category":"layout","parent":[],"attributes":{"name":{"type":"string","default":""},"linkUrl":{"type":"string","default":""},"text":{"type":"string","default":""},"className":{"type":"string","default":""}},"supports":{"html":false,"inserter":false},"textdomain":"gravatar-enhanced","editorScript":"file:../../../block-link.js"}'),c=(0,a.__)("Link","gravatar-enhanced"),p={...l,icon:function(){return(0,o.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,o.jsx)(s.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})})},__experimentalLabel:({name:t})=>t===e.VIEW_PROFILE?(0,a.__)("Profile Link","gravatar-enhanced"):c,title:c,description:(0,a.__)("The Link block for the Gravatar block.","gravatar-enhanced"),edit:function({attributes:e}){const{linkUrl:t,text:a,className:n}=e,s=(0,r.useBlockProps)();return(0,o.jsx)("a",{...s,className:i("gravatar-block__child","gravatar-block-link",s.className,n),href:t,target:"_blank",children:a})}};(0,t.registerBlockType)(l.name,p)})();;
/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={1113:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(6087);const n=(0,o.forwardRef)((function({icon:e,size:t=24,...r},n){return(0,o.cloneElement)(e,{width:t,height:t,...r,ref:n})}))},7913:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(5573),n=r(790);const a=(0,n.jsx)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})})},3751:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(5573),n=r(790);const a=(0,n.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(o.Path,{d:"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM12.75 8V13H11.25V8H12.75ZM12.75 14.5V16H11.25V14.5H12.75Z"})})},3512:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(5573),n=r(790);const a=(0,n.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(o.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})})},5938:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(5573),n=r(790);const a=(0,n.jsx)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)(o.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})})},5855:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(5573),n=r(790);const a=(0,n.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(o.Path,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})})},7326:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(5573),n=r(790);const a=(0,n.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(o.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})})},6941:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let o=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(n=o))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(3212)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},3212:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,a,i=null;function s(...e){if(!s.enabled)return;const o=s,n=Number(new Date),a=n-(r||n);o.diff=a,o.prev=r,o.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,n)=>{if("%%"===r)return"%";i++;const a=t.formatters[n];if("function"==typeof a){const t=e[i];r=a.call(o,t),e.splice(i,1),i--}return r})),t.formatArgs.call(o,e);(o.log||t.log).apply(o,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=o,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,a=t.enabled(e)),a),set:e=>{i=e}}),"function"==typeof t.init&&t.init(s),s}function o(e,r){const o=t(this.namespace+(void 0===r?":":r)+e);return o.log=this.log,o}function n(e,t){let r=0,o=0,n=-1,a=0;for(;r<e.length;)if(o<t.length&&(t[o]===e[r]||"*"===t[o]))"*"===t[o]?(n=o,a=r,o++):(r++,o++);else{if(-1===n)return!1;o=n+1,a++,r=a}for(;o<t.length&&"*"===t[o];)o++;return o===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(n(e,r))return!1;for(const r of t.names)if(n(e,r))return!0;return!1},t.humanize=r(7378),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7560:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o={button:"zI5tJ_qhWE6Oe6Lk75GY","is-icon-button":"tuBt2DLqimiImoqVzPqo",small:"Na39I683LAaSA99REg14",normal:"ipS7tKy9GntCS4R3vekF",icon:"paGLQwtPEaJmtArCcmyK",regular:"lZAo6_oGfclXOO9CC6Rd","full-width":"xJDOiJxTt0R_wSl8Ipz_",loading:"q_tVWqMjl39RcY6WtQA6","external-icon":"CDuBjJp_8jxzx5j6Nept"}},2604:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o={"help-message":"MVuHtQ6MxijxzLoKaiAD"}},941:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o={"timestamp-control__controls-wrapper":"rcGUZgpe4CGD8uYmerUD","timestamp-range-control":"iZjYt7tDXuSRYGSpgL1y","timestamp-input-wrapper":"dx9xZVwTj45XWtgjLwf2","timestamp-control-input":"Uge3H06ePl7rnHIbnUgo","is-disabled":"AmMha5bHq6c3gHoP7k28","timestamp-control-divider":"aN3nKQFl5a3qMbO8CaVg"}},8766:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o={container:"ianknO6MB_ng2EieMQdE","play-icon":"no33D8j7N4nzdafpETZy","video-player-wrapper":"VFzg5w6i04b05mkee2SA","video-player-spinner-wrapper":"PHuqvGT1Z0IVZgjAtUZw",spinner:"xwBn5mUH0mhSBqas1dog",video:"k5rpcKdHL3HKU39CrUhe",range:"sgykjydBL76DT5yDw_ka"}},7378:e=>{var t=1e3,r=60*t,o=60*r,n=24*o,a=7*n,i=365.25*n;function s(e,t,r,o){var n=t>=1.5*r;return Math.round(e/r)+" "+o+(n?"s":"")}e.exports=function(e,c){c=c||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return c.long?function(e){var a=Math.abs(e);if(a>=n)return s(e,a,n,"day");if(a>=o)return s(e,a,o,"hour");if(a>=r)return s(e,a,r,"minute");if(a>=t)return s(e,a,t,"second");return e+" ms"}(e):function(e){var a=Math.abs(e);if(a>=n)return Math.round(e/n)+"d";if(a>=o)return Math.round(e/o)+"h";if(a>=r)return Math.round(e/r)+"m";if(a>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4588:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function n(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var o,a,i=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((o=e[a])||null!=o&&!isNaN(o)||(o=""),a=n(a),o=n(o),null===a||null===o)continue;i.push(a+"="+o)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var a=o(t[1]),i=o(t[2]);null===a||null===i||a in n||(n[a]=i)}return n}},6811:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},372:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(6941);const n=r.n(o)()("dops:analytics");let a,i;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;const s={initialize:function(e,t,r){s.setUser(e,t),s.setSuperProps(r),s.identifyUser()},setGoogleAnalyticsEnabled:function(e,t=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){i={ID:e,username:t}},setSuperProps:function(e){a=e},assignSuperProps:function(e){a=Object.assign(a||{},e)},mc:{bumpStat:function(e,t){const r=function(e,t){let r="";if("object"==typeof e){for(const t in e)r+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);n("Bumping stats %o",e)}else r="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),n('Bumping stat "%s" in group "%s"',t,e);return r}(e,t);s.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+r+"&t="+Math.random())},bumpStatWithPageView:function(e,t){const r=function(e,t){let r="";if("object"==typeof e){for(const t in e)r+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);n("Built stats %o",e)}else r="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),n('Built stat "%s" in group "%s"',t,e);return r}(e,t);s.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+r+"&t="+Math.random())}},pageView:{record:function(e,t){s.tracks.recordPageView(e),s.ga.recordPageView(e,t)}},purchase:{record:function(e,t,r,o,n,a,i){s.ga.recordPurchase(e,t,r,o,n,a,i)}},tracks:{recordEvent:function(e,t){t=t||{},0===e.indexOf("akismet_")||0===e.indexOf("jetpack_")?(a&&(n("- Super Props: %o",a),t=Object.assign(t,a)),n('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])):n('- Event name must be prefixed by "akismet_" or "jetpack_"')},recordJetpackClick:function(e){const t="object"==typeof e?e:{target:e};s.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){s.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){n("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};s.ga.initialized||(i&&(e={userId:"u-"+i.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),s.ga.initialized=!0)},recordPageView:function(e,t){s.ga.initialize(),n("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t}))},recordEvent:function(e,t,r,o){s.ga.initialize();let a="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";void 0!==r&&(a+=" [Option Label: "+r+"]"),void 0!==o&&(a+=" [Option Value: "+o+"]"),n(a),this.googleAnalyticsEnabled&&window.ga("send","event",e,t,r,o)},recordPurchase:function(e,t,r,o,n,a,i){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:o,currency:i}),window.ga("ecommerce:addItem",{id:e,name:t,sku:r,price:n,quantity:a}),window.ga("ecommerce:send")}},identifyUser:function(){i&&window._tkq.push(["identifyUser",i.ID,i.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},c=s},1112:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var o=r(6072),n=r.n(o),a=r(6427),i=r(7723),s=r(1113),c=r(3512),l=r(3022),u=r(1609),p=r.n(u),d=r(7560);const __=i.__,f=(0,u.forwardRef)(((e,t)=>{const{children:r,variant:o="primary",size:i="normal",weight:u="bold",icon:f,iconSize:m,disabled:h,isDestructive:v,isLoading:g,isExternalLink:y,className:b,text:k,fullWidth:w,..._}=e,E=(0,l.A)(d.A.button,b,{[d.A.normal]:"normal"===i,[d.A.small]:"small"===i,[d.A.icon]:Boolean(f),[d.A.loading]:g,[d.A.regular]:"regular"===u,[d.A["full-width"]]:w,[d.A["is-icon-button"]]:Boolean(f)&&!r});_.ref=t;const R="normal"===i?20:16,C=y&&p().createElement(p().Fragment,null,p().createElement(s.A,{size:R,icon:c.A,className:d.A["external-icon"]}),p().createElement(a.VisuallyHidden,{as:"span"},/* translators: accessibility text */
__("(opens in a new tab)","jetpack-videopress-pkg"))),S=y?"_blank":void 0,P=r?.[0]&&null!==r[0]&&"components-tooltip"!==r?.[0]?.props?.className;return p().createElement(a.Button,n()({target:S,variant:o,className:(0,l.A)(E,{"has-text":!!f&&P}),icon:y?void 0:f,iconSize:m,disabled:h,"aria-disabled":h,isDestructive:v,text:k},_),g&&p().createElement(a.Spinner,null),p().createElement("span",null,r),C)}));f.displayName="Button";const m=f},3924:(e,t,r)=>{"use strict";function o(e,t={}){const r={};let o;if("undefined"!=typeof window&&(o=window?.JP_CONNECTION_INITIAL_STATE?.calypsoEnv),0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,r.url=encodeURIComponent(e)}else r.source=encodeURIComponent(e);for(const e in t)r[e]=encodeURIComponent(t[e]);!Object.keys(r).includes("site")&&"undefined"!=typeof jetpack_redirects&&Object.hasOwn(jetpack_redirects,"currentSiteRawUrl")&&(r.site=jetpack_redirects.currentBlogID??jetpack_redirects.currentSiteRawUrl),o&&(r.calypso_env=o);return"https://jetpack.com/redirect/?"+Object.keys(r).map((e=>e+"="+r[e])).join("&")}r.d(t,{A:()=>o})},5985:(e,t,r)=>{"use strict";r.d(t,{Sy:()=>o.Sy,d9:()=>o.d9,st:()=>n.A});r(2810),r(4815),r(1409);var o=r(2634),n=(r(2034),r(5595),r(3265),r(3489));r(7119),r(8406),r(6923),r(335),r(8290),r(9061),r(5929),r(5765)},5765:(e,t,r)=>{"use strict";r(8490)},2810:(e,t,r)=>{"use strict";r(8377).T["Jetpack Green 40"]},335:(e,t,r)=>{"use strict";r(6087)},4815:(e,t,r)=>{"use strict";r(7999)},3489:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(372),n=r(9384),a=r(6087);const{tracks:i}=o.A,{recordEvent:s}=i,c=({pageViewEventName:e=null,pageViewNamespace:t="jetpack",pageViewSuffix:r="page_view",pageViewEventProperties:c={}}={})=>{const[l,u]=(0,a.useState)(!1),{isUserConnected:p,isRegistered:d,userConnectionData:f={}}=(0,n.useConnection)(),{wpcomUser:{login:m,ID:h}={},blogId:v}=f.currentUser||{},g=(0,a.useCallback)((async(e,t={})=>{p&&h&&m&&s(e,t)}),[p,h,m]);return(0,a.useEffect)((()=>{p&&h&&m&&v&&o.A.initialize(h,m,{blog_id:v})}),[v,h,m,p]),(0,a.useEffect)((()=>{const o=e?`${t}_${e}_${r}`:null;d&&o&&(l||(g(o,c),u(!0)))}),[l,t,e,r,d,c,g]),{recordEvent:g,tracks:i}}},7119:(e,t,r)=>{"use strict";r(7143),r(6087),r(8468)},6923:(e,t,r)=>{"use strict";r(7143),r(6087),r(8290)},8406:(e,t,r)=>{"use strict";r(6087)},5929:(e,t,r)=>{"use strict";r(7143),r(2619),r(3265),r(7119)},9520:(e,t,r)=>{"use strict";var o=r(6941),n=r.n(o);window,n()("shared-extension-utils:connection")},9061:(e,t,r)=>{"use strict";r(9520)},7105:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>p,E9:()=>u});var o=r(7143),n=r(2634),a=r(4478),i=r(8290);const s="SET_JETPACK_MODULES";function c(e){return u({isLoading:e})}function l(e,t){return{type:"SET_MODULE_UPDATING",name:e,isUpdating:t}}function u(e){return{type:s,options:e}}const p={updateJetpackModuleStatus:function*(e){try{yield l(e.name,!0),yield(0,a.sB)(e);const t=yield(0,a.wz)();return yield u({data:t}),!0}catch{const e=(0,o.select)(i.F).getJetpackModules();return yield u(e),!1}finally{yield l(e.name,!1)}},setJetpackModules:u,fetchModules:function*(){if((0,n.Sy)())return!0;try{yield c(!0);const e=yield(0,a.wz)();return yield u({data:e}),!0}catch{const e=(0,o.select)(i.F).getJetpackModules();return yield u(e),!1}finally{yield c(!1)}}}},4478:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,sB:()=>c,wz:()=>s});var o=r(1455),n=r.n(o);const a="FETCH_JETPACK_MODULES",i="UPDATE_JETPACK_MODULE_STATUS",s=()=>({type:a}),c=e=>({type:i,settings:e}),l={[a]:function(){return n()({path:"/jetpack/v4/module/all",method:"GET"})},[i]:function({settings:e}){return n()({path:`/jetpack/v4/module/${e.name}/active`,method:"POST",data:{active:e.active}})}}},8290:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var o=r(7143),n=r(7105),a=r(4478),i=r(8862),s=r(2701),c=r(1640);const l="jetpack-modules",u=(0,o.createReduxStore)(l,{reducer:i.A,actions:n.Ay,controls:a.Ay,resolvers:s.A,selectors:c.A});(0,o.register)(u);const p=window?.Initial_State?.getModules||window?.Jetpack_Editor_Initial_State?.modules||null;null!==p&&(0,o.dispatch)(l).setJetpackModules({data:{...p}})},8862:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const o={isLoading:!1,isUpdating:{},data:{}},n=(e=o,t)=>{switch(t.type){case"SET_JETPACK_MODULES":return{...e,...t.options};case"SET_MODULE_UPDATING":return{...e,isUpdating:{...e.isUpdating,[t.name]:t.isUpdating}}}return e}},2701:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(7105),n=r(4478);const a={getJetpackModules:function*(){try{const e=yield(0,n.wz)();if(e)return(0,o.E9)({data:e})}catch(e){console.error(e)}}}},1640:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(2634);const n={getJetpackModules:e=>e.data,isModuleActive:(e,t)=>(0,o.Sy)()||(e?.data?.[t]?.activated??!1),areModulesLoading:e=>e.isLoading??!1,isModuleUpdating:(e,t)=>e?.isUpdating?.[t]??!1}},3265:(e,t,r)=>{"use strict";var o=r(7723);r(3832),r(8468),r(4815);const __=o.__;__("Upgrade your plan to use video covers","jetpack-videopress-pkg"),__("Upgrade your plan to upload audio","jetpack-videopress-pkg")},2034:(e,t,r)=>{"use strict";r(2279)},1409:(e,t,r)=>{"use strict";r(7999)},2634:(e,t,r)=>{"use strict";function o(){return"object"==typeof window&&"string"==typeof window._currentSiteType?window._currentSiteType:null}function n(){return"simple"===o()}function a(){return"atomic"===o()}r.d(t,{Sy:()=>n,d9:()=>a})},5595:(e,t,r)=>{"use strict";r(6072),r(9491)},9079:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(6427),n=r(7723),a=r(9152);const __=n.__;function i({onConnect:e,isModuleActive:t,isConnected:r,isConnecting:n}){if(r&&t)return null;const i=r&&!t;let s=__("Connect Jetpack","jetpack-videopress-pkg");n&&(s=__("Redirecting","jetpack-videopress-pkg"));let c=__("Activate VideoPress","jetpack-videopress-pkg");n&&(c=__("Activating","jetpack-videopress-pkg"));const l=__("Connect your account to continue using VideoPress","jetpack-videopress-pkg"),u=__("Enable Jetpack module to continue using VideoPress","jetpack-videopress-pkg");return React.createElement(a.A,{action:React.createElement(o.Button,{variant:"primary",onClick:e,disabled:n,isBusy:n},i?c:s),icon:""},i?u:l)}},9152:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(6427),n=r(3751),a=r(1113);function i({icon:e=n.A,action:t,children:r,isLoading:i}){return React.createElement("div",{className:"block-banner"},e&&React.createElement(a.A,{icon:e}),React.createElement("div",{className:"block-banner__content"},r),i&&React.createElement(o.Spinner,null),t&&React.createElement("div",{className:"block-banner__action"},t))}},8226:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(4715),n=r(6427),a=r(9491),i=r(6087),s=r(7723),c=r(8770),l=r(8894);const __=s.__;function u({clientId:e,attributes:t,setAttributes:r}){const{useAverageColor:s,seekbarColor:u,seekbarLoadingColor:p,seekbarPlayedColor:d}=t,f={seekbarPlayedColor:d,seekbarLoadingColor:p,seekbarColor:u},[m,h]=(0,i.useState)(f),v=(0,a.useDebounce)((e=>{r(e)}),2e3),g=(0,i.useCallback)((e=>{h((t=>({...t,...e}))),v(e)}),[]),y=(0,i.useCallback)((()=>{h({}),r({useAverageColor:!0,seekbarColor:"",seekbarLoadingColor:"",seekbarPlayedColor:""})}),[]);return React.createElement(n.__experimentalToolsPanelItem,{className:"videopress-playback-bar-colors-panel-item",hasValue:()=>!s,label:__("Dynamic color","jetpack-videopress-pkg"),resetAllFilter:y,isShownByDefault:!0,panelId:e,onDeselect:y},React.createElement(n.PanelRow,{className:"videopress-color-panel__title"},__("Playback bar colors","jetpack-videopress-pkg")),React.createElement(n.ToggleControl,{label:__("Dynamic color","jetpack-videopress-pkg"),help:React.createElement(React.Fragment,null,__("Playback bar colors adapt to the video as it plays.","jetpack-videopress-pkg"),React.createElement("img",{className:"videopress-dynamic-color-example",src:(0,c.A)(l),alt:__("Dynamic colors example","jetpack-videopress-pkg")})),onChange:e=>r({useAverageColor:e}),checked:s,__nextHasNoMarginBottom:!0}),!s&&React.createElement(o.PanelColorSettings,{className:"videopress-color-panel",opened:!s,showTitle:!1,colorSettings:[{label:__("Main","jetpack-videopress-pkg"),showTitle:!0,value:m.seekbarColor,onChange:e=>g({seekbarColor:e})},{label:__("Loaded","jetpack-videopress-pkg"),showTitle:!0,value:m.seekbarLoadingColor,onChange:e=>g({seekbarLoadingColor:e})},{label:__("Progress","jetpack-videopress-pkg"),showTitle:!0,value:m.seekbarPlayedColor,onChange:e=>g({seekbarPlayedColor:e})}]}))}},917:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(6427),n=r(6087),a=r(7723),i=r(6151),s=r(2843),c=r(2439);const __=a.__,l=31;function u({filename:e,chapter:t,isAutoGeneratedChapter:r,attributes:a,setAttributes:u,isRequestingVideoData:p,updateError:d,videoBelongToSite:f}){const{title:m,description:h}=a,{hasIncompleteChapters:v}=(0,c.A)(h),g=h?.length?h.split("\n").map((e=>Math.ceil(e.length/l)||1)).reduce(((e,t)=>e+t),0):4,y=Math.min(12,Math.max(g,4)),b=v?null:React.createElement(i.A,null),k=!!t&&!r;return React.createElement(o.PanelBody,{title:__("Details","jetpack-videopress-pkg")},!f&&React.createElement(o.Notice,{status:"warning",isDismissible:!1,className:"not-belong-to-site-notice"},__("This video is not owned by this site. You can still embed it and customize the player, but you wont be able to edit the video.","jetpack-videopress-pkg")),React.createElement(o.TextControl,{label:__("Title","jetpack-videopress-pkg"),value:m,placeholder:e?.length?`${e} video`:__("Video title","jetpack-videopress-pkg"),onChange:e=>u({title:e}),disabled:p||!!d||!f,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement(o.TextareaControl,{label:__("Description","jetpack-videopress-pkg"),value:h,placeholder:__("Video description","jetpack-videopress-pkg"),onChange:e=>u({description:e}),rows:y,disabled:p||!!d||!f,help:b,__nextHasNoMarginBottom:!0}),!k&&v&&React.createElement(s.A,{className:"incomplete-chapters-notice"}),k&&React.createElement(o.Notice,{status:"success",className:"learn-how-notice",isDismissible:!1},React.createElement("p",{className:"learn-how-notice__message"},(0,n.createInterpolateElement)(__("You already have chapter information on an attached VTT file, so adding chapters to the description will not change the original ones. <link>Learn more</link>","jetpack-videopress-pkg"),{link:React.createElement(o.ExternalLink,{href:"https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video"})}))),!!d&&React.createElement(o.Notice,{status:"error",className:"details-panel__error",isDismissible:!1},__("Error updating the video details.","jetpack-videopress-pkg")))}},6592:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(6427),n=r(7723);const __=n.__;function a({isOpen:e,onClose:t}){return e?React.createElement(o.Modal,{title:__("Chapters in VideoPress","jetpack-videopress-pkg"),isDismissible:!1,className:"learn-how-modal",onRequestClose:t},React.createElement("p",null,__("Chapters are a great way to split up longer videos and organize them into different sections.","jetpack-videopress-pkg")),React.createElement("p",null,__("They allow your visitors to see what each section is about and skip to their favorite parts.","jetpack-videopress-pkg")),React.createElement("p",{className:"learn-how-modal__heading"},__("How to add Chapters to your VideoPress videos","jetpack-videopress-pkg")),React.createElement("ol",null,React.createElement("li",null,__("In the Description, add a list of timestamps and titles.","jetpack-videopress-pkg")),React.createElement("li",null,__("Make sure that the first timestamp starts with 00:00.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add at least three chapters entries and as many as you need.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add your chapters entries in consecutive order, with at least 10-second intervals between each.","jetpack-videopress-pkg"))),React.createElement("p",{className:"learn-how-modal__heading"},__("Example","jetpack-videopress-pkg")),React.createElement("p",null,__("00:00 Intro","jetpack-videopress-pkg")),React.createElement("p",null,__("00:24 Mountains arise","jetpack-videopress-pkg")),React.createElement("p",null,__("02:38 Coming back home","jetpack-videopress-pkg")),React.createElement("p",null,__("03:04 Credits","jetpack-videopress-pkg")),React.createElement("div",{className:"learn-how-modal__buttons"},React.createElement(o.Button,{className:"learn-how-modal__button",onClick:t,variant:"primary"},__("Got it, thanks","jetpack-videopress-pkg")))):null}},3534:(e,t,r)=>{"use strict";r.d(t,{K:()=>n,a:()=>a});var o=r(6427);const n=React.createElement(o.SVG,{width:"29",height:"21",viewBox:"0 0 29 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},React.createElement(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M2.79037 0.59375C4.0363 0.59375 5.13102 1.41658 5.47215 2.60947L8.8452 14.4044C8.8486 14.4164 8.85411 14.4273 8.86124 14.4368L12.8572 0.59375H15.0927H21.2721C25.6033 0.59375 28.5066 3.39892 28.5066 7.64565C28.5066 11.9411 25.5272 14.6196 21.0818 14.6196H18.1499H14.3719L13.6379 16.8813C12.9796 18.9095 11.0827 20.2839 8.94152 20.2839C6.80035 20.2839 4.90341 18.9095 4.24517 16.8813L0.137069 4.22276C-0.444671 2.43022 0.898038 0.59375 2.79037 0.59375ZM15.7374 10.4119H20.0156C21.8718 10.4119 22.9856 9.35018 22.9856 7.64565C22.9856 5.93137 21.8718 4.91839 20.0156 4.91839H17.5202L15.7374 10.4119Z"})),a=React.createElement(o.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},React.createElement(o.Path,{d:"M7 15.5H17V17H7V15.5Z"}),React.createElement(o.Path,{d:"M17 12.5H7V14H17V12.5Z"}),React.createElement(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7 3H5.3C4 3 3 4 3 5.3V18.7C3 20 4 21 5.3 21H18.7C20 21 21 20 21 18.7V5.3C21 4 20 3 18.7 3ZM19.5 18.7C19.5 19.1 19.1 19.5 18.7 19.5H5.3C4.9 19.5 4.5 19.1 4.5 18.7V5.3C4.5 4.9 4.9 4.5 5.3 4.5H18.7C19.1 4.5 19.5 4.9 19.5 5.3V18.7Z"}))},396:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(6427),n=r(6087),a=r(7723),i=r(2604);const __=a.__;function s({attributes:e,setAttributes:t}){const{autoplay:r,loop:a,muted:s,controls:c,playsinline:l,preload:u,posterData:p}=e,d=p?.previewOnHover,f=(0,n.useCallback)(((e,r)=>o=>{t({[e]:r??o})}),[t]),m=()=>d?React.createElement("span",{className:i.A["help-message"]},__("Autoplay is turned off as the preview on hover is active.","jetpack-videopress-pkg")):React.createElement(React.Fragment,null,React.createElement("span",{className:i.A["help-message"]},__("Start playing the video as soon as the page loads.","jetpack-videopress-pkg")),r&&React.createElement("span",{className:i.A["help-message"]},__("Note: Autoplaying videos may cause usability issues for some visitors.","jetpack-videopress-pkg")));return React.createElement(o.PanelBody,{title:__("Playback","jetpack-videopress-pkg")},React.createElement(o.ToggleControl,{label:__("Autoplay","jetpack-videopress-pkg"),onChange:f("autoplay"),checked:r&&!d,disabled:d,help:React.createElement(m,null),__nextHasNoMarginBottom:!0}),React.createElement(o.ToggleControl,{label:__("Loop","jetpack-videopress-pkg"),onChange:f("loop"),checked:a,help:__("Restarts the video when it reaches the end.","jetpack-videopress-pkg"),__nextHasNoMarginBottom:!0}),React.createElement(o.ToggleControl,{label:__("Muted","jetpack-videopress-pkg"),onChange:f("muted"),checked:s,__nextHasNoMarginBottom:!0}),React.createElement(o.ToggleControl,{label:__("Show Controls","jetpack-videopress-pkg"),onChange:f("controls"),checked:c,help:__("Display the video playback controls.","jetpack-videopress-pkg"),__nextHasNoMarginBottom:!0}),React.createElement(o.ToggleControl,{label:__("Play Inline","jetpack-videopress-pkg"),onChange:f("playsinline"),checked:l,help:__("Play the video inline instead of full-screen on mobile devices.","jetpack-videopress-pkg"),__nextHasNoMarginBottom:!0}),React.createElement(o.ToggleControl,{label:__("Preload Metadata","jetpack-videopress-pkg"),onChange:f("preload","metadata"===u?"none":"metadata"),checked:"metadata"===u,help:__("Preload the video metadata when the page is loaded.","jetpack-videopress-pkg"),__nextHasNoMarginBottom:!0}),(0,n.createInterpolateElement)(__("Send us your <a>VideoPress feedback</a>","jetpack-videopress-pkg"),{a:React.createElement(o.ExternalLink,{href:"https://automattic.survey.fm/videopress-feedback"})}))}},7137:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(4715),n=r(6427),a=r(6087),i=r(7723),s=r(4954);const __=i.__,c=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify({...window.videopressAjax,context:"sandbox"})};`],{type:"text/javascript"});c.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}function l({showCaption:e,html:t,isSelected:r,attributes:i,setAttributes:l,preview:u,isRequestingEmbedPreview:p}){const d=(0,a.useRef)(),f=(0,a.useRef)(),{maxWidth:m,caption:h,videoRatio:v,align:g}=i,[y,b]=(0,a.useState)(400);function k(){b(f.current.offsetWidth*v/100+12)}const[w,_]=(0,a.useState)(!1);(0,a.useEffect)((()=>{f?.current&&(u.html?setTimeout((()=>{b("auto")}),250):v&&(k(),setTimeout((()=>{k()}),0),_(!1)))}),[f,v,u]),(0,a.useEffect)((()=>{_(!!t)}),[t]);const E=(0,a.useCallback)((e=>{const{data:t}=e||{},{event:r}=t;"videopress_loading_state"===r&&_("loaded"===t?.state)}),[]);(0,a.useEffect)((()=>{const e=(0,s.Q)(f);if(e&&!p)return e.addEventListener("message",E),()=>e?.removeEventListener("message",E)}),[f,p]);const{atTime:R,previewOnHover:C,previewAtTime:S,previewLoopDuration:P,type:A}=i.posterData;let x;x="video-frame"===A&&C?S:R,(0,s.A)(f,p,{initialTimePosition:x,autoplay:i.autoplay,wrapperElement:d?.current,previewOnHover:C?{atTime:S,duration:P}:void 0}),(0,a.useEffect)((()=>{p&&k()}),[w,p]);const j=(0,a.useCallback)(((e,t,r)=>{let o=getComputedStyle(r).width;if(null!==r.parentElement){o===getComputedStyle(r.parentElement).width&&(o="100%")}b("auto"),l({maxWidth:o})}),[l]),T={},U=(0,a.useCallback)((e=>{e&&!h&&e.focus()}),[h]);"auto"!==y&&(T.height=y||200,T.paddingBottom=y?12:0);let N={marginRight:"auto"};"center"===g&&(N={...N,marginLeft:"auto"});return React.createElement("figure",{ref:d,className:"jetpack-videopress-player"},React.createElement(n.ResizableBox,{enable:{top:!1,bottom:!1,left:!1,right:!0},maxWidth:"100%",size:{width:m,height:"auto"},style:N,onResizeStop:j,onResizeStart:()=>b("auto")},!r&&React.createElement("div",{className:"jetpack-videopress-player__overlay"}),React.createElement("div",{className:"jetpack-videopress-player__wrapper",ref:f,style:T},React.createElement(React.Fragment,null,!p&&React.createElement(n.SandBox,{html:t,scripts:c,styles:["\n\t\tbody {\n\t\t\tline-height: 0;\n\t\t}\n\t"]}),!w&&React.createElement("div",{className:"jetpack-videopress-player__loading"},__("Loading","jetpack-videopress-pkg"))))),e&&(!o.RichText.isEmpty(h)||r)&&React.createElement(o.RichText,{identifier:"caption",tagName:"figcaption","aria-label":__("Video caption text","jetpack-videopress-pkg"),placeholder:__("Add caption","jetpack-videopress-pkg"),value:h,onChange:e=>l({caption:e}),inlineToolbar:!0,ref:U}))}window?.videoPressEditorState?.playerBridgeUrl&&c.push(window.videoPressEditorState.playerBridgeUrl)},4749:(e,t,r)=>{"use strict";r.d(t,{A:()=>p,z:()=>u});var o=r(4715),n=r(6427),a=r(6087),i=r(7723),s=r(5938),c=r(5855),l=r(9069);const __=i.__;function u({poster:e,className:t}){const r=(0,a.createInterpolateElement)(__("No custom Poster image selected.<help>You can upload or select an image from your media library to override the default video image.</help>","jetpack-videopress-pkg"),{help:React.createElement("p",{className:"poster-panel-control__help"})}),o=(0,a.createInterpolateElement)(__("You are currently overriding the default Poster image.<help>Remove it if you want to use the default image generated by VideoPress.</help>","jetpack-videopress-pkg"),{help:React.createElement("p",{className:"poster-panel-control__help"})});return React.createElement("div",{className:t},e?o:r)}function p({attributes:e,setAttributes:t,clientId:r}){const{poster:a}=e;return React.createElement(n.Dropdown,{contentClassName:"dropdown-content",renderToggle:({isOpen:e,onToggle:t})=>React.createElement(n.ToolbarButton,{label:__("Poster image","jetpack-videopress-pkg"),showTooltip:!0,"aria-expanded":e,"aria-haspopup":"true",onClick:t,icon:s.A}),renderContent:({onClose:e})=>{const p=`video-block__poster-image-description-${r}`;return React.createElement(React.Fragment,null,React.createElement(n.NavigableMenu,{className:"poster-image-block-control__wrapper"},React.createElement(o.MediaUploadCheck,null,React.createElement(o.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r=>{(e=>{t({poster:e.url})})(r),e()},allowedTypes:l.o,render:({open:e})=>React.createElement(n.MenuItem,{icon:s.A,onClick:e,"aria-describedby":p},__("Open Media Library","jetpack-videopress-pkg"),React.createElement("p",{id:p,hidden:!0},a?(0,i.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),a):__("There is no poster image currently selected","jetpack-videopress-pkg")))})),React.createElement(u,{poster:a,className:"current-media"}),!!a&&React.createElement(n.MenuItem,{className:"poster-image-block-control__remove-button",variant:"tertiary",isDestructive:!0,onClick:()=>{t({poster:""}),e()},icon:c.A},__("Remove and use default","jetpack-videopress-pkg"))))}})}},8864:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>S,ZC:()=>k});var o=r(4715),n=r(6427),a=r(6087),i=r(7723),s=r(5938),c=r(5855),l=r(3022),u=r(3685),p=r(9689),d=r(6302),f=r(4967),m=r(4954),h=r(9069),v=r(4749);const __=i.__,g=3e3,y=1e4,b=5e3,k=()=>!!window?.Jetpack_Editor_Initial_State?.available_blocks?.["v6-video-frame-poster"],w=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify({...window.videopressAjax,context:"sandbox"})};`],{type:"text/javascript"});w.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}function _({clientId:e,attributes:t,setAttributes:r}){const c=`video-block__poster-image-description-${e}`,{poster:l}=t,u=(0,a.useCallback)((e=>{r({poster:e.url,posterData:{...t.posterData,type:"media-library",id:e.id,url:e.url}})}),[t]),p=__("Select Poster Image","jetpack-videopress-pkg"),d=__("Replace Poster Image","jetpack-videopress-pkg"),f=(0,a.useRef)(null),m=Number(t?.videoRatio)/100||9/16,[v,g]=(0,a.useState)(140);return(0,a.useEffect)((()=>{if(!l||!f?.current)return;const{current:e}=f,t=e?.offsetWidth;t&&g(t*m)}),[l,f,m]),React.createElement(n.Dropdown,{contentClassName:"poster-panel__dropdown",placement:"top left",renderToggle:({isOpen:e,onToggle:t})=>React.createElement(n.Button,{ref:f,style:{backgroundImage:l?`url(${l})`:void 0,height:v,minHeight:v},className:"poster-panel__button "+(l?"has-poster":""),variant:"secondary",onClick:t,"aria-expanded":e},React.createElement("span",null,l?d:p)),renderContent:({onClose:e})=>React.createElement(n.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu"},React.createElement(o.MediaUploadCheck,null,React.createElement(o.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:t=>{u(t),e()},allowedTypes:h.o,render:({open:e})=>React.createElement(n.MenuItem,{icon:s.A,onClick:e,"aria-describedby":c},__("Open Media Library","jetpack-videopress-pkg"),React.createElement("p",{id:c,hidden:!0},l?(0,i.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),l):__("There is no poster image currently selected","jetpack-videopress-pkg")))})))})}window?.videoPressEditorState?.playerBridgeUrl&&w.push(window.videoPressEditorState.playerBridgeUrl);const E=e=>{const t=e?.current?.querySelector("iframe.components-sandbox");return t?.contentWindow};function R({guid:e,isGeneratingPoster:t,atTime:r=.1,onVideoFrameSelect:o,duration:i}){const[s,c]=(0,a.useState)(r),d=(0,a.useRef)(null),h=(0,p.ep)(e,{autoplay:!0,muted:!0,controls:!1,loop:!1}),{preview:v={html:null},isRequestingEmbedPreview:g}=(0,f.g)(h),{html:y}=v,{playerIsReady:b,pause:k}=(0,m.A)(d,g,{initialTimePosition:r});(0,a.useEffect)((()=>{b&&k()}),[b,k]);const _=(0,a.useCallback)((e=>{const t=E(d);t?.postMessage({event:"videopress_action_set_currenttime",currentTime:e/1e3}),o(e)}),[E,o]);return React.createElement("div",{className:"poster-panel__frame-picker"},React.createElement("div",{ref:d,className:(0,l.A)("poster-panel__frame-picker__sandbox-wrapper",{"is-player-ready":b,"is-generating-poster":t})},(!b||t)&&React.createElement(n.Spinner,null),React.createElement(n.SandBox,{html:y,scripts:w})),t&&React.createElement(n.Notice,{status:"info",className:"poster-panel__notice",isDismissible:!1},__("Generating video poster image. It may take a few seconds.","jetpack-videopress-pkg")),React.createElement(u.Ay,{label:__("Video frame","jetpack-videopress-pkg"),help:__("Select the frame you want to use as poster image","jetpack-videopress-pkg"),disabled:g||t,max:i,value:s,wait:250,fineAdjustment:50,onChange:c,onDebounceChange:_}))}function C({previewOnHover:e=!1,previewAtTime:t=0,loopDuration:r=b,videoDuration:o,onPreviewOnHoverChange:s,onPreviewAtTimeChange:c,onLoopDurationChange:l}){const p=!o,f=Math.max(o-g,0),[m,h]=(0,a.useState)(Math.min(y,o-t)),v=Math.floor(m/10)/100,k=(0,a.createInterpolateElement)((0,i.sprintf)(/* translators: placeholder is video duration */
__("Video duration: <em>%s</em>.","jetpack-videopress-pkg"),(0,d.ZO)(o)),{em:React.createElement("em",null)}),w=(0,a.createInterpolateElement)((0,i.sprintf)(/* translators: placeholders are the minimum and maximum lapse duration for the previewOnHover, in seconds */
__("Minimum: <em>%1$ss</em>. Maximum: <em>%2$ss</em>.","jetpack-videopress-pkg"),Math.min(g/1e3,v),v),{em:React.createElement("em",null)}),_=0===f,E=m<=g,R=(0,a.useCallback)((e=>{c(e);const t=Math.min(y,o-e);h(t),r>t&&l(t)}),[c,o,r,l]);return React.createElement(React.Fragment,null,React.createElement(n.ToggleControl,{className:"poster-panel__preview-toggle",label:__("Video preview on hover","jetpack-videopress-pkg"),checked:e,onChange:s,disabled:!e&&p,__nextHasNoMarginBottom:!0}),e&&React.createElement(React.Fragment,null,React.createElement(u.Ay,{label:__("Starting point","jetpack-videopress-pkg"),max:f,fineAdjustment:50,value:t,onDebounceChange:R,wait:300,disabled:p||_,help:k}),React.createElement(u.Ay,{max:m,min:g,fineAdjustment:50,label:__("Loop duration","jetpack-videopress-pkg"),value:r,onDebounceChange:l,wait:300,help:w,disabled:p||E,marksEvery:1e3})))}function S({attributes:e,setAttributes:t,isGeneratingPoster:r,videoBelongToSite:o}){const{poster:i,posterData:s}=e,u=e?.duration,p="video-frame"===s?.type,d=s?.previewOnHover||!1,f=s?.previewAtTime??s?.atTime??0;let m=s?.previewLoopDuration??b;m>u-f&&(m=u-f);const h=(0,a.useCallback)((r=>{t({posterData:{...e.posterData,type:r?"video-frame":"media-library"},poster:r?"":e.posterData.url||""})}),[e]),g=(0,a.useCallback)((r=>{let o={...e.posterData,previewOnHover:r};r&&(o={previewAtTime:f,previewLoopDuration:m,...o}),t({posterData:o,controls:!r&&e.controls})}),[e]),y=(0,a.useCallback)((r=>{t({posterData:{...e.posterData,previewAtTime:r}})}),[e]),w=(0,a.useCallback)((r=>{let o=f;f+r>u&&(o=u-r),t({posterData:{...e.posterData,previewLoopDuration:r,previewAtTime:o}})}),[e]),E=k()?__("Poster and preview","jetpack-videopress-pkg"):__("Poster","jetpack-videopress-pkg");return React.createElement(n.PanelBody,{title:E,className:"poster-panel",initialOpen:!1},React.createElement(n.ToggleControl,{label:__("Pick from video frame","jetpack-videopress-pkg"),checked:p&&o,onChange:h,disabled:!o,__nextHasNoMarginBottom:!0}),React.createElement("div",{className:(0,l.A)("poster-panel__frame-wrapper",{"is-selected":p})},React.createElement(R,{isGeneratingPoster:r,guid:e?.guid,atTime:s?.atTime,duration:u,onVideoFrameSelect:r=>{t({posterData:{...e.posterData,type:"video-frame",atTime:r},poster:""})}})),React.createElement("div",{className:(0,l.A)("poster-panel__image-wrapper",{"is-selected":!p})},React.createElement(_,{attributes:e,setAttributes:t}),React.createElement(v.z,{poster:i,className:"poster-panel-card"}),i&&React.createElement(n.MenuItem,{onClick:()=>{t({poster:"",posterData:{...e.posterData,url:""}})},icon:c.A,isDestructive:!0,variant:"tertiary"},__("Remove and use default","jetpack-videopress-pkg"))),k()&&React.createElement(C,{previewOnHover:d,previewAtTime:f,loopDuration:m,videoDuration:u,onPreviewOnHoverChange:g,onPreviewAtTimeChange:y,onLoopDurationChange:w}))}},9573:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(3829);function n({attributes:e,setAttributes:t,privateEnabledForSite:r,videoBelongToSite:n}){return React.createElement(o.A,{attributes:e,setAttributes:t,privateEnabledForSite:r,videoBelongToSite:n})}},3829:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(6427),n=r(7723),a=r(8962);const __=n.__,_x=n._x;function i({attributes:e,setAttributes:t,privateEnabledForSite:r,videoBelongToSite:n}){const{privacySetting:i,rating:s,allowDownload:c,displayEmbed:l}=e,u={private:_x("Site Default (Private)","VideoPress privacy setting","jetpack-videopress-pkg"),public:_x("Site Default (Public)","VideoPress privacy setting","jetpack-videopress-pkg")},p={value:String(a.zG.indexOf(a.CR)),label:r?u.private:u.public},d={value:String(a.zG.indexOf(a.az)),label:_x("Public","VideoPress privacy setting","jetpack-videopress-pkg")},f={value:String(a.zG.indexOf(a.o0)),label:_x("Private","VideoPress privacy setting","jetpack-videopress-pkg")};return React.createElement(o.PanelBody,{title:__("Privacy and rating","jetpack-videopress-pkg"),initialOpen:!1},React.createElement(o.SelectControl,{label:_x("Rating","The age rating for this video.","jetpack-videopress-pkg"),value:s??"",options:[{label:_x("G",'Video rating for "General Audiences".',"jetpack-videopress-pkg"),value:a.ko},{label:_x("PG-13",'Video rating for "Parental Guidance", unsuitable for children under 13.',"jetpack-videopress-pkg"),value:a.z7},{label:_x("R",'Video rating for "Restricted", not recommended for children under 17.',"jetpack-videopress-pkg"),value:a.iL}],onChange:e=>{t({rating:e})},disabled:!n,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement(o.SelectControl,{label:__("Privacy","jetpack-videopress-pkg"),onChange:e=>{const o={};o.isPrivate=e!==p.value?e===f.value:r,o.privacySetting=Number(e),t(o)},value:String(i),options:[p,d,f],disabled:!n,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement(o.ToggleControl,{label:__("Allow download","jetpack-videopress-pkg"),checked:c,onChange:e=>{t({allowDownload:e})},disabled:!n,__nextHasNoMarginBottom:!0}),React.createElement(o.ToggleControl,{label:__("Show video sharing menu","jetpack-videopress-pkg"),checked:l,onChange:e=>{t({displayEmbed:e})},help:__("Gives viewers the option to share the video link and HTML embed code","jetpack-videopress-pkg"),disabled:!n,__nextHasNoMarginBottom:!0}))}},9454:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(4715),n=r(9069);const a=({attributes:e,onUploadFileStart:t,onSelectVideoFromLibrary:r,onSelectURL:a})=>{const i=e.isPrivate?"https://video.wordpress.com/v":"https://videopress.com/v";return React.createElement(o.MediaReplaceFlow,{mediaId:e.id,handleUpload:!1,accept:"video/*",allowedTypes:n.N,onSelect:function(e){e?.[0]?.name&&e?.[0]?.size&&e?.[0]?.type?t(e[0]):r(e)},mediaURL:`${i}/${e.guid}`,onSelectURL:a})}},4554:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var o=r(6427),n=r(3582),a=r(7143),i=r(6087),s=r(7723),c=r(7326),l=r(6941),u=r.n(l),p=r(9689),d=r(8634),f=r(3534),m=r(3348);const __=s.__,h=u()("videopress:tracks:tracks-control");function v({track:e,guid:t,onDelete:r}){const[n,a]=(0,i.useState)(!1),{kind:s,label:c,srcLang:l}=e;return React.createElement("div",{className:"video-tracks-control__track-item "+(n?"is-deleting":"")},React.createElement("div",{className:"video-tracks-control__track-item-label"},React.createElement("strong",null,c),React.createElement("span",{className:"video-tracks-control__track-item-kind"},s,l?.length?` [${l}]`:"")),React.createElement(o.Button,{variant:"link",isDestructive:!0,onClick:()=>{a(!0),(0,d.Dr)(e,t).then((()=>{a(!1),r?.(e)}))},disabled:n},__("Delete","jetpack-videopress-pkg")))}function g({tracks:e,guid:t,onTrackListUpdate:r}){if(!e?.length)return React.createElement(o.MenuGroup,null,React.createElement("div",{className:"video-tracks-control__track_list__no-tracks"},__("Tracks can be subtitles, captions, chapters, or descriptions. They help make your content more accessible to a wider range of users.","jetpack-videopress-pkg")));const n=(0,i.useCallback)((t=>{const o=[...e].filter((e=>e!==t));r(o)}),[e]);return React.createElement(o.MenuGroup,{className:"video-tracks-control__track_list",label:__("Text tracks","jetpack-videopress-pkg")},e.map(((e,r)=>React.createElement(v,{key:`${e.kind}-${r}`,track:e,guid:t,onDelete:n}))))}function y({attributes:e,setAttributes:t}){const{tracks:r,guid:s}=e,[l,u]=(0,i.useState)(!1),[v,y]=(0,i.useState)(""),b=(0,a.useDispatch)(n.store).invalidateResolution,k=(0,p.ep)(s,e),w=(0,i.useCallback)((e=>{(0,d.n)(e,s).then((o=>{if(o?.error)return h("catch at regular response",o),void y(`Track error: ${o?.message||o.error}`);const n={...e,src:o};delete n.tmpFile;const a=r.findIndex((e=>e.kind===n.kind&&e.srcLang===n.srcLang)),i=[...r];a>-1?(h("new track already exists, replacing it"),i[a]=n):(h("new track does not exist, adding it"),i.push(n)),t({tracks:i}),u(!1),b("getEmbedPreview",[k])})).catch((e=>{h("catch at catch"),y(`Track error: ${e?.message||e.error}`)}))}),[r]),_=(0,i.useCallback)((e=>{t({tracks:e}),b("getEmbedPreview",[k])}),[r]),E=(0,i.useCallback)((()=>{y(""),u(!0)}),[]);return React.createElement(o.ToolbarDropdownMenu,{icon:f.a,label:__("Text tracks","jetpack-videopress-pkg"),popoverProps:{variant:"toolbar"}},(()=>l?React.createElement(m.A,{onCancel:()=>{u(!1)},onSave:w,tracks:r,errorMessage:v}):React.createElement(React.Fragment,null,React.createElement(g,{tracks:r,guid:s,onTrackListUpdate:_}),React.createElement(o.MenuGroup,{label:__("Add tracks","jetpack-videopress-pkg"),className:"video-tracks-control"},React.createElement(o.MenuItem,{icon:c.A,onClick:E},__("Upload track","jetpack-videopress-pkg"))))))}},3348:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var o=r(4715),n=r(6427),a=r(7143),i=r(6087),s=r(7723),c=r(6941),l=r.n(c);const __=s.__,u="subtitles",p=".vtt,text/vtt",d=[{label:__("Subtitles","jetpack-videopress-pkg"),value:"subtitles"},{label:__("Captions","jetpack-videopress-pkg"),value:"captions"},{label:__("Descriptions","jetpack-videopress-pkg"),value:"descriptions"},{label:__("Chapters","jetpack-videopress-pkg"),value:"chapters"},{label:__("Metadata","jetpack-videopress-pkg"),value:"metadata"}],f=l()("videopress:tracks:track-form");function m({onCancel:e,onSave:t,tracks:r,errorMessage:c}){const[l,m]=(0,i.useState)(!1),[h,v]=(0,i.useState)(!1),[g,y]=(0,i.useState)(""),[b,k]=(0,i.useState)(!1),[w,_]=(0,i.useState)({kind:u,srcLang:"",label:"",tmpFile:null});f("props.errorMessage",c);const E=(0,i.useCallback)(((e,t)=>{f("updateTrack",e,t),"tmpFile"===e&&y(""),_((r=>({...r,[e]:t})))}),[w]);(0,i.useEffect)((()=>{const e=r.some((e=>e.srcLang===w.srcLang&&e.kind===w.kind));v(e)}),[w,r]),(0,i.useEffect)((()=>{y(c),c&&m(!1)}),[c]);const R=w.tmpFile?.name,C=(0,a.useSelect)((e=>e(o.store).getSettings().mediaUpload),[]),S=(0,i.useCallback)((()=>{m(!0),y(""),t(w)}),[w]),P=(0,i.useCallback)((e=>{if(E("srcLang",e),e?.length>5)return y(__("Language must be five characters or less.","jetpack-videopress-pkg"));y(c||"")}),[c]);if(!C)return null;const A=(0,s.sprintf)(/* translators: %s: The allowed file types to be uploaded as a video text track." */
__("Add a new text track to the video. Allowed formats: %s","jetpack-videopress-pkg"),p);return f("error",g),React.createElement(n.MenuGroup,{className:"video-tracks-control__track-form",label:__("Upload track","jetpack-videopress-pkg")},React.createElement("div",{className:"video-tracks-control__track-form-container"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file-label"},React.createElement("span",null,__("File","jetpack-videopress-pkg"),":"),R&&React.createElement("strong",null,R),React.createElement(o.MediaUploadCheck,null,React.createElement(n.FormFileUpload,{onChange:e=>{const t=e.target.files;t?.length&&E("tmpFile",t[0])},accept:p,render:({openFileDialog:e})=>React.createElement(n.Button,{variant:"link",onClick:()=>{e()}},__("Select track","jetpack-videopress-pkg")),__next40pxDefaultSize:!0}))),React.createElement("div",{className:"video-tracks-control__track-form-upload-file-help"},A)),React.createElement("div",{className:"video-tracks-control__track-form-label-language"},React.createElement(n.TextControl,{onChange:e=>E("label",e),label:__("Label","jetpack-videopress-pkg"),value:w.label,help:__("Title of track","jetpack-videopress-pkg"),disabled:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement(n.TextControl,{className:"video-tracks-control__track-form-language-tag",label:__("Source language","jetpack-videopress-pkg"),value:w.srcLang,onChange:P,help:__("Language (en, fr, etc.)","jetpack-videopress-pkg"),disabled:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})),React.createElement(n.SelectControl,{options:d,value:w.kind,label:/* translators: %s: The kind of video text track e.g: "Subtitles, Captions" */
__("Kind","jetpack-videopress-pkg"),onChange:e=>E("kind",e),disabled:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),g&&React.createElement(n.Notice,{status:"error",isDismissible:!1},g),React.createElement("div",{className:"video-tracks-control__track-form-buttons-container "+(h?" track-exists":"")},h&&React.createElement(n.ToggleControl,{className:"video-tracks-control__track-form-toggle",label:__("Track exists. Replace?","jetpack-videopress-pkg"),checked:b,onChange:k,__nextHasNoMarginBottom:!0}),React.createElement(n.Button,{isBusy:l,variant:"secondary",disabled:!w.tmpFile||l||h&&!b||!!g,onClick:S},__("Save","jetpack-videopress-pkg")),React.createElement(n.Button,{variant:"link",onClick:e},__("Cancel","jetpack-videopress-pkg")))))}},3339:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var o=r(3924),n=r(1455),a=r.n(n),i=r(4715),s=r(6427),c=r(6087),l=r(7723),u=r(7430),p=r(560),d=r(9448),f=r(9689),m=r(9069),h=r(3898),v=r(3534),g=r(6466),y=r(4217);const __=l.__,b=(0,s.withNotices)((({attributes:e,setAttributes:t,noticeUI:r,noticeOperations:n,handleDoneUpload:l,fileToUpload:b,isReplacing:k,onReplaceCancel:w,isActive:_})=>{const[E,R]=(0,c.useState)(!1),[C,S]=(0,c.useState)(!1),[P,A]=(0,c.useState)(!1),[x,j]=(0,c.useState)(!1),T=(0,d.xI)();(0,c.useEffect)((()=>{b&&G(b)}),[b]);const[U,N]=(0,c.useState)(null),[O,B]=(0,c.useState)([]),D=(0,c.useCallback)((function(...e){B(e)}),[]),[L,I]=(0,c.useState)(null),F=(0,c.useCallback)((function(e){if(e?.originalResponse)try{const t=e?.originalResponse?.getBody?.(),r=JSON.parse(t);return void I(r)}catch{}I(e)}),[]),{uploadHandler:M,resumeHandler:H,error:z}=(0,u.A)({onError:F,onProgress:D,onSuccess:S});function V(e,t){const{guid:r,url:o}=(0,f.kK)(e),n=__("Invalid VideoPress URL","jetpack-videopress-pkg");if(r){const e=(0,f.qh)(o);l({...e,guid:r,id:t})}else{const r=(0,f.up)(e);r?(0,f.i2)(r).then((e=>{e?l({...e,id:t}):I({data:{message:n}})})):I({data:{message:n}})}}const G=e=>{L&&F(null),N(e),D(0,e.size),A(!0),M(e)},q=()=>{if(!H)return;H[E?"start":"abort"](),R(!E)},$=function(){H.abort(),w()};if("owner_not_connected"===z?.code){const e=(0,c.createInterpolateElement)(__("<connectLink>Connect</connectLink> your site to use the <moreAboutVideoPressLink>VideoPress</moreAboutVideoPressLink> video block.","jetpack-videopress-pkg"),{connectLink:React.createElement("a",{href:z?.data?.connect_url,rel:"noreferrer noopener"}),moreAboutVideoPressLink:React.createElement(s.ExternalLink,{href:(0,o.A)("jetpack-videopress")})});return React.createElement(h.P,{errorMessage:e},React.createElement(s.Button,{key:"videopress-connect-user",variant:"primary",href:z?.data?.connect_url},__("Connect","jetpack-videopress-pkg")))}if(L){const e=()=>{G(U)},t=()=>{N(null),D([]),F(null),A(!1)};return React.createElement(g.A,{onRetry:e,onCancel:t,errorData:L})}if(P){const r=O[0]/O[1]*100;return React.createElement(y.A,{attributes:e,setAttributes:t,file:U,progress:r,paused:E,uploadedVideoData:C,onPauseOrResume:q,onReplaceCancel:$,isReplacing:k,onDone:l,supportPauseOrResume:!!H})}if(x)return React.createElement(h.P,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(s.Spinner,null),React.createElement("span",null,__("Loading","jetpack-videopress-pkg"))));if(!_){const e=__("Connect your WordPress.com account to enable high-quality, ad-free video.","jetpack-videopress-pkg"),t=__("Activate the VideoPress module to enable high-quality, ad-free video.","jetpack-videopress-pkg");return React.createElement(h.P,{disableInstructions:!0,className:"disabled"},React.createElement("span",null,T?t:e))}return React.createElement(i.MediaPlaceholder,{handleUpload:!1,className:"is-videopress-placeholder",icon:React.createElement(i.BlockIcon,{icon:v.K}),labels:{title:__("VideoPress","jetpack-videopress-pkg"),instructions:__("Embed a video from your media library or upload a new one with VideoPress.","jetpack-videopress-pkg")},onSelect:function(e){if(e=e?.[0]?e[0]:e,e?.name&&e?.size&&e?.type)G(e);else if(e.videopress_guid){V(Array.isArray(e.videopress_guid)?e.videopress_guid[0]:e.videopress_guid,e?.id)}else{if(e.id){const t=`videopress/v1/upload/${e.id}`;return j(!0),void a()({path:t,method:"GET"}).then((t=>{var r;j(!1),"new"===t.status||"resume"===t.status?(N(e),D(t.file_size,t.file_size),A(!0),r=e.id,(0,p.NP)(r).then((e=>{S(e)})).catch((e=>{I(e)}))):"uploaded"===t.status?V(t.uploaded_video_guid):I({data:{message:t.message?t.message:__("Error selecting video. Please try again.","jetpack-videopress-pkg")}})})).catch((e=>{j(!1),I({data:{message:e.message}})}))}I({data:{message:__("Please select a video from Library or upload a new one","jetpack-videopress-pkg")}})}},onSelectURL:V,accept:"video/*",allowedTypes:m.N,value:e,notices:r,onError:function(e){n.removeAllNotices(),n.createErrorNotice(e)}})}))},9863:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var o=r(4715),n=r(6427),a=r(6087),i=r(7723),s=r(1113),c=r(3022),l=r(7975),u=r(6720);const __=i.__,p=["image"],d=({videoPosterImageUrl:e})=>React.createElement("div",{className:"uploading-editor__poster-image"},e?React.createElement("img",{src:e,alt:"Poster"}):React.createElement("span",null,"No Poster Selected")),f=({file:e,videoPosterImageData:t,onVideoFrameSelected:r})=>{const o=Boolean(t?.url),n=(0,a.useRef)(e?.url??URL.createObjectURL(e));return React.createElement("div",{className:(0,c.A)("uploading-editor__poster-container")},React.createElement(u.A,{src:n?.current,onVideoFrameSelected:r,className:(0,c.A)({"uploading-editor__hide":o})}),o&&React.createElement(React.Fragment,null,React.createElement(d,{videoPosterImageUrl:t?.url}),React.createElement(s.A,{className:"uploading-editor__play-icon",icon:l.A})))},m=({hasPoster:e,onSelectPoster:t,onRemovePoster:r})=>e?React.createElement(o.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:t,allowedTypes:p,render:({open:e})=>React.createElement("div",{className:"uploading-editor__poster-buttons"},React.createElement(n.Button,{onClick:r,variant:"secondary",isDestructive:!0},__("Remove Poster Image","jetpack-videopress-pkg")),React.createElement(n.Button,{variant:"secondary",onClick:e},__("Select Poster Image","jetpack-videopress-pkg")))}):React.createElement("span",{className:"uploading-editor__scrubber-help"},__("This is how the video will look. Use the slider to choose a poster image or change it from the block settings.","jetpack-videopress-pkg")),h=e=>{const{file:t,onSelectPoster:r,onRemovePoster:o,videoPosterImageData:a,onVideoFrameSelected:i}=e;return React.createElement("div",{className:"uploading-editor"},React.createElement(n.BaseControl,{__nextHasNoMarginBottom:!0},React.createElement(n.BaseControl.VisualLabel,null,__("Video poster (optional)","jetpack-videopress-pkg")),React.createElement(f,{file:t,videoPosterImageData:a,onVideoFrameSelected:i}),React.createElement(m,{hasPoster:Boolean(a),onSelectPoster:r,onRemovePoster:o})))}},6466:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(6427),n=r(7723),a=r(3898);const __=n.__,i=({errorData:e,onRetry:t,onCancel:r})=>{const n=(e=>{if(!e)return"";let t=e?.data?.message||__("Failed to upload your video. Please try again.","jetpack-videopress-pkg");return"Invalid Mime"===t&&(t=React.createElement(React.Fragment,null,__("The format of the video you uploaded is not supported.","jetpack-videopress-pkg"),"",React.createElement(o.ExternalLink,{href:"https://wordpress.com/support/videopress/recommended-video-settings/",target:"_blank",rel:"noreferrer"},__("Check the recommended video settings.","jetpack-videopress-pkg")))),t})(e);return React.createElement(a.P,{errorMessage:n,onNoticeRemove:r},React.createElement("div",{className:"videopress-uploader-progress__error-actions"},React.createElement(o.Button,{variant:"primary",onClick:t},__("Try again","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"secondary",onClick:r},__("Cancel","jetpack-videopress-pkg"))))}},4217:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var o=r(1455),n=r.n(o),a=r(6427),i=r(9491),s=r(6087),c=r(9877),l=r(7723),u=r(6941),p=r.n(u),d=r(7578),f=r(2185),m=r(295),h=r(9697),v=r(9689),g=r(3898),y=r(9863);const __=l.__,b=p()("videopress:block:uploader"),k=({setAttributes:e,videoData:t,onDone:r})=>{const[o,a]=(0,s.useState)(!1),[c,l]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),{title:d}=t,v=t?.guid,g=(0,h.A)(v),y=(0,m.A)(v),b=(0,f.A)(t?.id),k=({data:t})=>{t?.generating?setTimeout((()=>{new Promise(((e,t)=>{y(v).then((t=>e(t))).catch((()=>{n()({path:`/videos/${v}/poster`,apiNamespace:"rest/v1.1",global:!0,method:"GET"}).then((t=>e(t))).catch((e=>t(e)))}))})).then((e=>k(e)))}),2e3):t?.poster&&e({poster:t?.poster})},w=(0,i.useDebounce)((e=>{var t;t=e,new Promise(((e,r)=>{g(t).then((t=>{k(t),e()})).catch((()=>{n()({path:`/videos/${v}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:t}).then((()=>{e()})).catch((e=>{r(e)}))}))}))}),1e3);return(0,s.useEffect)((()=>{if(v)return u?w({poster_attachment_id:u?.id}):void(null!=c&&w({at_time:c,is_millisec:!0}))}),[u,c,v]),[e=>{l(e),p(null)},e=>{p(e)},()=>{p(null)},()=>{a(!0);const e=[];d&&e.push(b({title:d})),Promise.allSettled(e).then((()=>{a(!1),r(t)}))},u,o]},w=({attributes:e,setAttributes:t,progress:r,file:o,paused:n,uploadedVideoData:i,onPauseOrResume:u,onDone:p,supportPauseOrResume:f,isReplacing:m,onReplaceCancel:h})=>{const[w,_,E,R,C,S]=k({setAttributes:t,videoData:{...i,title:e.title},onDone:p}),[P,A]=(0,s.useState)(!0);(0,s.useEffect)((()=>{i&&!S&&P&&(b("Waiting for some time before enabling the DONE button..."),setTimeout((()=>{b("Done, enabling the DONE button now..."),A(!1)}),2500))}),[i,S]);const x=Math.round(r),j={width:`${x}%`},T=__("Resume","jetpack-videopress-pkg"),U=__("Pause","jetpack-videopress-pkg"),N=o?.filesizeHumanReadable??(0,d.O)(o?.size),{title:O}=e,B=(0,v.T3)((0,c.escapeHTML)(o?.name));return React.createElement(g.P,{disableInstructions:!0},React.createElement(a.TextControl,{label:__("Video title","jetpack-videopress-pkg"),className:"uploading-editor__title",onChange:e=>t({title:e}),value:O,placeholder:B,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement(y.A,{file:o,onSelectPoster:_,onRemovePoster:E,onVideoFrameSelected:w,videoPosterImageData:C}),React.createElement("div",{className:"videopress-uploader-progress"},x<100?React.createElement(React.Fragment,null,React.createElement("div",{className:"videopress-uploader-progress__file-info"},React.createElement("div",{className:"videopress-uploader-progress__progress"},React.createElement("div",{className:"videopress-uploader-progress__progress-loaded",style:j})),React.createElement("div",{className:"videopress-upload__percent-complete"},(0,l.sprintf)(/* translators: Placeholder is an upload progress percenatage number, from 0-100. */
__("Uploading (%1$s%%)","jetpack-videopress-pkg"),x)),React.createElement("div",{className:"videopress-uploader-progress__file-size"},N)),m&&React.createElement("div",{className:"videopress-uploader-progress__actions"},React.createElement(a.Button,{onClick:h,variant:"tertiary",isDestructive:!0},__("Cancel","jetpack-videopress-pkg"))),React.createElement("div",{className:"videopress-uploader-progress__actions"},x<100&&React.createElement(a.Button,{variant:"tertiary",onClick:u,disabled:!f},n?T:U))):React.createElement(React.Fragment,null,P?React.createElement("span",null,__("Finishing up ","jetpack-videopress-pkg")," "):React.createElement("span",null,__("Upload Complete!","jetpack-videopress-pkg")," "),React.createElement(a.Button,{variant:"primary",onClick:R,disabled:P,isBusy:P},__("Done","jetpack-videopress-pkg")))))}},9069:(e,t,r)=>{"use strict";r.d(t,{N:()=>o,o:()=>n});const o=["video"],n=["image"]},5980:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(6072),n=r.n(o),a=r(4715),i=r(3022),s=r(9689),c=r(8864);const l=[{attributes:{autoplay:{type:"boolean"},title:{type:"string"},description:{type:"string"},caption:{type:"string",source:"html",selector:"figcaption"},controls:{type:"boolean",default:!0},loop:{type:"boolean"},maxWidth:{type:"string",default:"100%"},muted:{type:"boolean"},playsinline:{type:"boolean"},preload:{type:"string",default:"metadata"},seekbarPlayedColor:{type:"string",default:""},seekbarLoadingColor:{type:"string",default:""},seekbarColor:{type:"string",default:""},useAverageColor:{type:"boolean",default:!0},id:{type:"number"},guid:{type:"string"},src:{type:"string"},cacheHtml:{type:"string",default:""},poster:{type:"string"},posterData:{type:"object",default:{}},videoRatio:{type:"number"},tracks:{type:"array",items:{type:"object"},default:[]},privacySetting:{type:"number",default:1},allowDownload:{type:"boolean",default:!0},displayEmbed:{type:"boolean",default:!0},rating:{type:"string"},isPrivate:{type:"boolean"},isExample:{type:"boolean",default:!1},duration:{type:"number"}},supports:{align:!0,anchor:!0},save:function({attributes:e}){const{align:t,autoplay:r,caption:o,loop:l,muted:u,controls:p,playsinline:d,preload:f,useAverageColor:m,seekbarColor:h,seekbarLoadingColor:v,seekbarPlayedColor:g,guid:y,maxWidth:b,poster:k,posterData:w}=e,_=a.useBlockProps.save({className:(0,i.A)("wp-block-jetpack-videopress","jetpack-videopress-player",{[`align${t}`]:t})}),E=(0,c.ZC)(),R=E?r||w.previewOnHover:r,C=E?u||w.previewOnHover:u,S=(0,s.ep)(y,{autoplay:R,controls:p,loop:l,muted:C,playsinline:d,preload:f,seekbarColor:h,seekbarLoadingColor:v,seekbarPlayedColor:g,useAverageColor:m,poster:k}),P={};return b&&b.length>0&&"100%"!==b&&(P.maxWidth=b,P.margin="auto"),React.createElement("figure",n()({},_,{style:P}),S&&React.createElement("div",{className:"jetpack-videopress-player__wrapper"},`\n${S}\n`),!a.RichText.isEmpty(o)&&React.createElement(a.RichText.Content,{tagName:"figcaption",value:o}))}}]},3898:(e,t,r)=>{"use strict";r.d(t,{A:()=>G,P:()=>V});var o=r(6072),n=r.n(o),a=r(5985),i=r(3162),s=r(4715),c=r(4997),l=r(6427),u=r(3582),p=r(7143),d=r(6087),f=r(7723),m=r(7913),h=r(3022),v=r(6941),g=r.n(v),y=r(9448),b=r(9689),k=r(4967),w=r(5007),_=r(8228),E=r(9079),R=r(8226),C=r(917),S=r(3534),P=r(396),A=r(7137),x=r(4749),j=r(8864),T=r(9573),U=r(9454),N=r(4554),O=r(3339),B=r(1200);const __=f.__,D=g()("videopress:video:edit"),{myJetpackConnectUrl:L,jetpackVideoPressSettingUrl:I}=window?.videoPressEditorState||{},F=(0,y.ie)(),M=(0,y.b5)(),H=(0,y.Lv)(),z=10,V=(0,l.withNotices)((function({children:e,errorMessage:t,noticeUI:r,noticeOperations:o,instructions:n=B.h_,disableInstructions:a,className:i}){return(0,d.useEffect)((()=>{t&&(o.removeAllNotices(),o.createErrorNotice(t))}),[t,o]),React.createElement(l.Placeholder,{icon:React.createElement(s.BlockIcon,{icon:S.K}),label:B.DD,instructions:a?null:n,notices:r,className:i},e)}));function G({attributes:e,setAttributes:t,isSelected:r,clientId:o}){const{autoplay:f,loop:v,muted:g,controls:S,playsinline:B,preload:G,useAverageColor:q,seekbarColor:$,seekbarLoadingColor:J,seekbarPlayedColor:W,guid:Z,cacheHtml:K,poster:Y,posterData:X,align:Q,videoRatio:ee,tracks:te,src:re,caption:oe,isExample:ne}=e,ae=(0,b.ep)(Z,{autoplay:f||X.previewOnHover,controls:S,loop:v,muted:g||X.previewOnHover,playsinline:B,preload:G,seekbarColor:$,seekbarLoadingColor:J,seekbarPlayedColor:W,useAverageColor:q,poster:Y}),[ie,se]=(0,d.useState)(!1),ce=(0,y.xI)(),{tracks:le}=(0,a.st)(),ue=te?.filter((e=>"chapters"===e.kind))?.[0],[pe,de]=(0,d.useState)(!!oe),{replaceBlock:fe,__unstableMarkNextChangeAsNotPersistent:me}=(0,p.useDispatch)(s.store),{videoData:he,isRequestingVideoData:ve,error:ge,isOverwriteChapterAllowed:ye,isGeneratingPoster:be,videoBelongToSite:ke}=(0,w.n)(e,t),{filename:we,private_enabled_for_site:_e}=he,{preview:Ee,isRequestingEmbedPreview:Re}=(0,k.g)(ae),{html:Ce,width:Se,height:Pe}=Ee;(0,d.useEffect)((()=>{Ce&&Ce!==K&&(me(),t({cacheHtml:Ce}))}),[Ce,K,t]);const Ae=Ce||K;(0,d.useEffect)((()=>{if(!Se||!Pe)return;const e=Pe/Se*100;e!==ee&&(me(),t({videoRatio:e}))}),[ee,Se,Pe,t]);const xe=(0,p.useDispatch)(u.store).invalidateResolution,je=(0,d.useCallback)((()=>{xe("getEmbedPreview",[ae])}),[ae,xe]),[Te,Ue]=(0,d.useState)(0),Ne=(0,d.useRef)();function Oe(){Ne?.current&&(Ne.current=clearInterval(Ne.current))}(0,d.useEffect)((()=>Te>=z?(D("Generating preview  attempts number reached out ",Te),Oe()):ae?Re?(D("Generating preview  Requesting "),Oe()):Ee.html?(D("Generating preview  Preview achieved  %o",Ee),Oe()):Ne?.current?void D("Generating preview  Process already requested "):(Ne.current=setTimeout((()=>{if(Ee.html)return D("Generating preview  Preview already achieved  %o",Ee),void Ue(0);Ue((e=>e+1)),D("Generating preview  Not achieved so far. Start attempt %o ",Te+1),je()}),2e3),Oe):(D("Generating preview  No URL Provided "),Oe())),[Te,Ne,je,Ee,ae,Re]);const{className:Be,...De}=(0,s.useBlockProps)({className:"wp-block-jetpack-videopress"}),[Le,Ie]=(0,d.useState)(!Z),[Fe,Me]=(0,d.useState)(null);(0,d.useEffect)((()=>{if(!re)return;if(!(0,i.isBlobURL)(re))return;const e=(0,i.getBlobByURL)(re);e&&(0,_.A)(e)&&(me(),t({src:void 0}),Ie(!0),Me(e))}),[re]);const[He,ze]=(0,d.useState)({isReplacing:!1,prevAttrs:{}}),Ve=()=>{t(He.prevAttrs),ze({isReplacing:!1,prevAttrs:{}}),Ie(!1)};if(ne)return React.createElement("img",{style:{width:"100%",height:"auto",backgroundSize:"cover"},className:"wp-block-jetpack-videopress__example",src:re,alt:oe});if(Le){const r=r=>{if(Ie(!1),He.isReplacing){const t={...e,...r};return delete t.poster,ze({isReplacing:!1,prevAttrs:{}}),void fe(o,(0,c.createBlock)("videopress/video",t))}me(),t(r)};return React.createElement("div",n()({},De,{className:Be}),React.createElement(React.Fragment,null,React.createElement(E.A,{isConnected:ce,isModuleActive:H||F,isConnecting:ie,onConnect:()=>{if(se(!0),!ce)return le.recordEvent("jetpack_editor_connect_banner_click",{block:"VideoPress"}),window.location.href=L;le.recordEvent("jetpack_editor_activate_banner_click",{block:"VideoPress"}),window.location.href=I}}),React.createElement(O.A,{setAttributes:t,attributes:e,handleDoneUpload:r,fileToUpload:Fe,isReplacing:He?.isReplacing,onReplaceCancel:Ve,isActive:M})))}if((Re||!Ee.html)&&Te>0&&Te<z)return React.createElement("div",n()({},De,{className:Be}),React.createElement(V,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(l.Spinner,null),__("Generating preview","jetpack-videopress-pkg"),React.createElement("strong",null," ",Te))));if(Te>=z&&!Ee.html)return React.createElement("div",n()({},De,{className:Be}),React.createElement(V,{errorMessage:__("Impossible to get a video preview after ten attempts.","jetpack-videopress-pkg"),onNoticeRemove:xe},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(l.Button,{variant:"primary",onClick:xe},__("Try again","jetpack-videopress-pkg")),React.createElement(l.Button,{variant:"secondary",onClick:()=>{t({src:void 0,id:void 0,guid:void 0})}},__("Cancel","jetpack-videopress-pkg")))));const Ge=__("Remove caption","jetpack-videopress-pkg"),qe=__("Add caption","jetpack-videopress-pkg");return React.createElement("div",n()({},De,{className:(0,h.A)(Be,{[`align${Q}`]:Q,"is-updating-preview":!Ce})}),React.createElement(s.BlockControls,{group:"block"},React.createElement(l.ToolbarButton,{onClick:()=>{de(!pe),pe&&oe&&t({caption:void 0})},icon:m.A,"aria-pressed":pe,label:pe?Ge:qe}),React.createElement(x.A,{attributes:e,setAttributes:t,clientId:o}),React.createElement(N.A,{attributes:e,setAttributes:t})),React.createElement(s.BlockControls,{group:"other"},React.createElement(U.A,{setAttributes:t,attributes:e,onUploadFileStart:r=>{ze({isReplacing:!0,prevAttrs:e}),Ie(!0),t({id:null,guid:null,cacheHtml:"",videoRatio:null}),Me(r)},onSelectVideoFromLibrary:e=>{const r=Array.isArray(e.videopress_guid)?e.videopress_guid[0]:e.videopress_guid;r?t({guid:r,id:e.id,src:e.url,title:e.title,description:e.description}):D("No media guid provided")},onSelectURL:e=>{const{guid:r,url:o}=(0,b.kK)(e);r?t({guid:r,src:o}):D("Invalid URL. No video GUID  provided")}})),React.createElement(s.InspectorControls,null,React.createElement(C.A,{filename:we,chapter:ue,isAutoGeneratedChapter:ye,updateError:ge,isRequestingVideoData:ve,videoBelongToSite:ke,attributes:e,setAttributes:t}),React.createElement(P.A,{attributes:e,setAttributes:t,isRequestingVideoData:ve}),React.createElement(j.Ay,{clientId:o,attributes:e,setAttributes:t,isGeneratingPoster:be,videoBelongToSite:ke}),React.createElement(T.A,{attributes:e,setAttributes:t,isRequestingVideoData:ve,privateEnabledForSite:_e,videoBelongToSite:ke})),React.createElement(s.InspectorControls,{group:"color"},React.createElement(R.A,{clientId:o,attributes:e,setAttributes:t,isRequestingVideoData:ve})),React.createElement(E.A,{isModuleActive:H||F,isConnected:ce,isConnecting:ie,onConnect:()=>{if(se(!0),!ce)return le.recordEvent("jetpack_editor_connect_banner_click",{block:"VideoPress"}),window.location.href=L;le.recordEvent("jetpack_editor_activate_banner_click",{block:"VideoPress"}),window.location.href=I}}),React.createElement(A.A,{showCaption:pe,html:Ae,isRequestingEmbedPreview:Re,attributes:e,setAttributes:t,isSelected:r,preview:Ee}))}},1200:(e,t,r)=>{"use strict";r.d(t,{DD:()=>d,h_:()=>f});var o=r(4997),n=r(8770),a=r(5015),i=r(3534),s=r(5980),c=r(3898),l=r(4356),u=r(4071);r(2130);const{UU:p,DD:d,h_:f,uK:m}=a;(0,o.registerBlockType)(p,{edit:c.A,title:d,save:()=>null,icon:i.K,attributes:m,example:{attributes:{src:(0,n.A)(u),isExample:!0}},transforms:l.A,deprecated:s.A})},4356:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(3162),n=r(4715),a=r(4997),i=r(7143),s=r(3022),c=r(9689),l=r(8228);const u={from:[{type:"files",isMatch:e=>!(!e||!e.length)&&e.some(l.A),priority:8,transform:e=>{const t=(0,a.getBlockTransforms)("from");return e.flatMap((e=>{if((0,l.A)(e))return(0,a.createBlock)("videopress/video",{src:(0,o.createBlobURL)(e)});const r=(0,a.findTransform)(t,(t=>"files"===t.type&&t.isMatch([e])));return r?r.transform([e]):[]}))}},{type:"block",blocks:["core/embed"],isMatch:e=>"videopress"===e.providerNameSlug&&(0,c.QW)(e?.url),transform:e=>{const{url:t,providerNameSlug:r}=e,o=(0,c.QW)(t);if(!("videopress"===r&&!!o))return(0,a.createBlock)("core/embed",e);return e.className=e.className?.replace(/(wp-embed-aspect-\d+-\d+)|(wp-has-aspect-ratio)/g,"").trim(),(0,a.createBlock)("videopress/video",{guid:o,src:t})}},{type:"raw",isMatch:e=>{const{textContent:t}=e;return!!t&&(0,c.eS)(t.trim())},transform:e=>{const{textContent:t}=e;if(!t)return!1;const r=t.trim(),o=(0,c.QW)(r);if(!o)return!1;const n=(0,c.qh)(r);return(0,a.createBlock)("videopress/video",{guid:o,...n})}}],to:[{type:"block",blocks:["core/embed"],isMatch:e=>e?.src||e?.guid,transform:e=>{const{guid:t,src:r,className:o}=e,{url:l}=(0,c.kK)(t);if(!(r||l))return(0,a.createBlock)("core/embed");const{updateBlockAttributes:u}=(0,i.dispatch)(n.store),{getBlockAttributes:p}=(0,i.select)(n.store),d=(0,a.createBlock)("core/embed",{allowResponsive:!0,providerNameSlug:"videopress",responsive:!0,type:"video",url:l}),{clientId:f}=d;return setTimeout((()=>{const{className:e}=p(f)||{},t=(0,s.A)(o,e);u(f,{className:t})}),100),d}}]}},2130:(e,t,r)=>{"use strict";var o=r(4997),n=r(2619);(0,n.addFilter)("blocks.registerBlockType","videopress/core-embed/handle-representation",((e,t)=>("core/embed"!==t||(e=>{"variations"in e&&"object"==typeof e.variations&&(0,o.getBlockType)("videopress/video")&&e.variations.some((e=>"videopress"===e.name&&(e.scope=[],!0)))})(e),e)))},4967:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var o=r(3582),n=r(7143);const a={html:null,width:null,height:null,thumbnail_height:null,thumbnail_width:null,title:null,version:"1.0",type:"video",provider_name:"VideoPress",provider_url:"https://videopress.com"},i=e=>(0,n.useSelect)((t=>e?{preview:t(o.store).getEmbedPreview(e)||a,isRequestingEmbedPreview:t(o.store).isRequestingEmbedPreview(e)||!1}:{preview:a,isRequestingEmbedPreview:!1}),[e])},5007:(e,t,r)=>{"use strict";r.d(t,{n:()=>C});var o=r(4715),n=r(9491),a=r(3582),i=r(7143),s=r(3656),c=r(6087),l=r(7723),u=r(6941),p=r.n(u),d=r(9689),f=r(8634),m=r(4523),h=r(9799),v=r(6302),g=r(2066),y=r(3531),b=r(7871),k=r(4745);const __=l.__,w=p()("videopress:video:use-sync-media"),_=["post_id","title","description","privacy_setting","rating","allow_download","display_embed","is_private","duration"],E={privacy_setting:"privacySetting",allow_download:"allowDownload",display_embed:"displayEmbed",is_private:"isPrivate",post_id:"id"},R=["title","privacy_setting","is_private","allow_download","display_embed"];function C(e,t){const{id:r,guid:l,isPrivate:u}=e,{videoData:p,isRequestingVideoData:C,videoBelongToSite:S}=(0,y.A)({id:r,guid:l,skipRatingControl:!0,maybeIsPrivate:u}),[P,A]=(0,c.useState)(!1),x=(0,i.useSelect)((e=>e(s.store).isSavingPost()),[]),j=(0,n.usePrevious)(x),T=(0,i.useDispatch)(a.store).invalidateResolution,{__unstableMarkNextChangeAsNotPersistent:U}=(0,i.useDispatch)(o.store),[N,O]=(0,c.useState)({}),[B,D]=(0,c.useState)(null),L=(0,c.useCallback)((e=>{O((t=>({...t,...e})))}),[]);(0,c.useEffect)((()=>{if(C)return;if(!p||0===Object.keys(p).filter((e=>_.includes(e))).length)return;const r={},o=_.reduce(((t,o)=>{if(void 0===p[o])return t;let n=p[o];"privacy_setting"===o&&(n=Number(n)),t[o]=n;const a=E[o]||(0,m.s)(o);return n!==e[a]&&(w("%o is out of sync. Updating %o attr from %o to %o ",o,a,e[a],n),r[a]=n),t}),{});if(L(o),w("Initial state: ",o),!Object.keys(o).length)return;const[n,a]=function(e,t){if(!e?.tracks)return[[],!1];const r=[];let o=!1;return Object.keys(e.tracks).forEach((n=>{for(const a in e.tracks[n]){const i=e.tracks[n][a];t.tracks.find((e=>e.kind===n&&e.srcLang===a&&e.src===i.src&&e.label===i.label))||(w("Track %o is out of sync. Set tracks attr",i.src),o=!0),r.push({src:i.src,kind:n,srcLang:a,label:i.label})}})),t.tracks.forEach((t=>{const r=e.tracks[t.kind]?.[t.srcLang];r&&r.src===t.src&&r.label===t.label||(w("Block track %o is out of sync and will be removed",t.src),o=!0)})),[r,o]}(p,e);a&&(r.tracks=n),Object.keys(r).length&&(w("Updating attributes: ",r),U(),t(r))}),[p,C]);const I=e.tracks.filter((e=>"chapters"===e.kind&&"en"===e.srcLang))[0]?.src;(0,c.useEffect)((()=>{(async()=>{if(I){const e="https://videos.files.wordpress.com/"+l+"/"+I,t=await(0,f.Cr)(e,{guid:l,isPrivate:u});w("Chapter %o detected. Overwritable: %o",I,t?"yes":"no"),A(t)}else w("Allow overwrite chapter: File does not exist"),A(!0)})()}),[I]);const F=(0,b.A)(r),M=!(!j||x),{isGeneratingPoster:H}=(0,k.u)(e);return(0,c.useEffect)((()=>{if(!M)return;if(w("%o Post has been just saved. Syncing...",e?.guid),!e?.id)return void w("%o No media ID found. Impossible to sync. Bail early",e?.guid);const r=_.reduce(((t,r)=>{const o=E[r]||r,n=N[r],a=e[o];return N[r]!==e[o]&&(w("Field to sync %o: %o => %o: %o",r,n,o,a),t[r]=e[o]),t}),{});if(!Object.keys(r).length)return w("No data to sync. Bail early");w("Syncing data: ",r),F(r).then((()=>{if(L(r),r.privacy_setting){const e=2!==r.privacy_setting?1===r.privacy_setting:p.private_enabled_for_site;w("Updating isPrivate attribute: %o",e),t({isPrivate:e})}const o=(0,h.Ay)(r?.description);if(P&&e?.guid&&r?.description?.length&&(0,g.A)(o)){w("Autogenerated chapter detected. Processing...");const o={label:__("English (auto-generated)","jetpack-videopress-pkg"),srcLang:"en",kind:"chapters",tmpFile:(0,v.Ay)(r.description)};w("Autogenerated track: %o",o),(0,f.n)(o,e.guid).then((r=>{const n=e.tracks.findIndex((e=>"chapters"===e.kind&&"en"===e.srcLang)),a={...o,src:r},i=[...e.tracks];n>-1?(w("Updating %o auto-generated track",a.src),i[n]=a):(w("Adding auto-generated %o track",a.src),i.push(a)),t({tracks:i});const s=(0,d.ep)(e.guid,e);T("getEmbedPreview",[s])}))}else{const t=Object.keys(r).filter((e=>R.includes(e)));if(t?.length){w("Invalidate resolution because of %o",t.join(", "));const r=(0,d.ep)(e.guid,e);T("getEmbedPreview",[r])}}})).catch((t=>{w("%o Error while syncing data: %o",e?.guid,t),D(t)}))}),[M,F,L,e,N,T,_]),{forceInitialState:L,videoData:p,isRequestingVideoData:C,videoBelongToSite:S,error:B,isOverwriteChapterAllowed:P,isGeneratingPoster:H}}},7871:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(1455),n=r.n(o);function a(e){return t=>new Promise(((r,o)=>{n()({path:"/wpcom/v2/videopress/meta",method:"POST",data:{id:e,...t}}).then((e=>{if(200!==e?.data)return o(e);r(e)})).catch(o)}))}},3531:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var o=r(1455),n=r.n(o),a=r(6087),i=r(8537),s=r(6941),c=r.n(s),l=r(9448),u=r(1370);const p=a.Platform.isNative,d=c()("videopress:video:use-video-data"),f=(0,l.xI)();function m({id:e,guid:t,skipRatingControl:r=!1,maybeIsPrivate:o=!1}){const[s,c]=(0,a.useState)({}),[l,m]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{f||p?t&&(m(!0),async function(e=null){try{let a;for(let n=0;n<5;n++){if(a=await(0,u.X)({guid:t,isPrivate:o,token:e,skipRatingControl:r}),a.duration){d(`video duration available: ${a.duration}, retried ${n} times`,a);break}d(`video duration not yet available, retrying (${n+1})`,a),await new Promise((e=>setTimeout(e,1500)))}m(!1);const s=a.original?.split("/")?.at(-1);c({duration:a.duration,allow_download:a.allow_download,post_id:a.post_id,guid:a.guid,title:(0,i.decodeEntities)(a.title),description:(0,i.decodeEntities)(a.description),display_embed:a.display_embed,privacy_setting:a.privacy_setting,rating:a.rating,filename:s,tracks:a.tracks,is_private:a.is_private,private_enabled_for_site:a.private_enabled_for_site});try{const e=await n()({path:`/wpcom/v2/videopress/${t}/check-ownership/${a.post_id}`,method:"GET"});v("boolean"==typeof e?.["video-belong-to-site"]?e["video-belong-to-site"]:!!e?.body?.["video-belong-to-site"])}catch(e){d("Error checking if video belongs to site",e)}}catch(e){throw m(!1),new Error(e?.message??e)}}()):d("User is not connected")}),[e,t]),{videoData:s,isRequestingVideoData:l,videoBelongToSite:h}}},4954:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,Q:()=>c});var o=r(9491),n=r(6941),a=r.n(n),i=r(1609);const s=a()("videopress:use-video-player"),c=e=>{const t=e?.current?.querySelector("iframe.components-sandbox");return t?.contentWindow},l=(e,t,{initialTimePosition:r,wrapperElement:n,previewOnHover:a})=>{const[l,u]=(0,i.useState)(!1),p=(0,i.useRef)("not-rendered");function d(e){const{data:t={},source:o}=e,{event:n}=e?.data||{};if("videopress_loading_state"===n&&"loaded"===t.state&&(s("state: loaded"),p.current="loaded"),"videopress_playing"===n&&"loaded"===p.current&&(p.current="first-play",s("state: first-play detected"),a&&(s("pause video"),o.postMessage({event:"videopress_action_pause"},{targetOrigin:"*"}),void 0!==r&&(s("set position at time %o ",r),o.postMessage({event:"videopress_action_set_currenttime",currentTime:r/1e3},{targetOrigin:"*"}))),u(!0),p.current="ready"),"videopress_timeupdate"===n&&a){const e=t.currentTimeMs,r=a.atTime,n=a.atTime+a.duration;(e<r||e>n)&&o.postMessage({event:"videopress_action_set_currenttime",currentTime:r/1e3},{targetOrigin:"*"})}}const f=!!a,m=(0,o.usePrevious)(f),h=f&&!m,v=c(e);(0,i.useEffect)((()=>{const r=c(e);if(r&&!t)return s("player is ready to listen events"),r.addEventListener("message",d),()=>{r.removeEventListener("message",d)}}),[e,t,h,a]);const g=(0,i.useCallback)((()=>{v&&l&&v.postMessage({event:"videopress_action_play"},"*")}),[e,l,v]),y=(0,i.useCallback)((()=>{v&&l&&v.postMessage({event:"videopress_action_pause"},"*")}),[e,l,v]);return(0,i.useEffect)((()=>{if(n&&f)return n.addEventListener("mouseenter",g),n.addEventListener("mouseleave",y),()=>{n.removeEventListener("mouseenter",g),n.removeEventListener("mouseleave",y)}}),[f,n,l]),(0,i.useEffect)((()=>{l&&a&&v&&v.postMessage({event:"videopress_action_set_currenttime",currentTime:a.atTime/1e3},{targetOrigin:"*"})}),[a?.atTime,l,v]),(0,i.useEffect)((()=>{l&&a&&v&&v.postMessage({event:"videopress_action_set_currenttime",currentTime:(a.atTime+a.duration)/1e3},{targetOrigin:"*"})}),[a?.duration,l,v]),{playerIsReady:l,play:g,pause:y}}},4745:(e,t,r)=>{"use strict";r.d(t,{u:()=>f});var o=r(9491),n=r(3582),a=r(7143),i=r(3656),s=r(6087),c=r(6941),l=r.n(c),u=r(1649),p=r(9689);const d=l()("videopress:video:use-sync-media");function f(e){const t=(0,a.useSelect)((e=>e(i.store).isSavingPost()),[]),r=!(!(0,o.usePrevious)(t)||t),c=(0,a.useDispatch)(n.store).invalidateResolution,l=(0,s.useRef)(),[f,m]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{r&&l.current?"video-frame"===e?.posterData?.type&&e?.posterData?.atTime!==l.current?.posterData?.atTime&&(d("(*) %o Poster image needs to be generated %s => %s",e?.guid,l.current?.posterData?.atTime,e?.posterData?.atTime),l.current=e,(0,u.TE)(e?.guid,e.posterData.atTime),d("(*) %o Requesting poster image generation",e?.guid),m(!0)):l.current||(l.current=e)}),[r]),(0,s.useEffect)((()=>{f&&(async()=>{if(await(0,u.qb)(e?.guid)){d("(*) %o Poster image has been generated",e?.guid),m(!1);const t=(0,p.ep)(e.guid,e);c("getEmbedPreview",[t])}})()}),[f]),{isGeneratingPoster:f}}},8770:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(3832);const{imagesURLBase:n=""}=window?.videoPressEditorState||{};function a(e){const t=(0,o.getFilename)(e);return n?`${n}${t}`:e}},8228:(e,t,r)=>{"use strict";function o(e){return!!e?.type&&e.type.startsWith("video/")}r.d(t,{A:()=>o})},6151:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(1112),n=r(6087),a=r(7723),i=r(1609),s=r(6592);const __=a.__,c=()=>{const[e,t]=(0,i.useState)(!1);return React.createElement(React.Fragment,null,(0,n.createInterpolateElement)(__("Did you know you can now add Chapters to your videos? <link>Learn how</link>","jetpack-videopress-pkg"),{link:React.createElement(o.A,{variant:"link",size:"small",onClick:()=>t(!0)})}),React.createElement(s.A,{onClose:()=>t(!1),isOpen:e}))}},7975:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(6427);const n=React.createElement(o.SVG,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(o.Path,{d:"M4.75725 2.075C4.60279 1.97745 4.41041 1.97489 4.25365 2.06832C4.09689 2.16174 4 2.3367 4 2.52632V21.4737C4 21.6633 4.09689 21.8383 4.25365 21.9317C4.41041 22.0251 4.60279 22.0226 4.75725 21.925L19.7573 12.4513C19.9079 12.3562 20 12.1849 20 12C20 11.8151 19.9079 11.6438 19.7573 11.5487L4.75725 2.075Z",fill:"white"}))},2843:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(1112),n=r(6427),a=r(6087),i=r(7723),s=r(1609),c=r(6592);const __=i.__,l=({className:e})=>{const[t,r]=(0,s.useState)(!1);return React.createElement(React.Fragment,null,React.createElement(n.Notice,{status:"warning",className:e,isDismissible:!1},(0,a.createInterpolateElement)(__("It seems there are some chapters, but they are incomplete. Check out the <link>format</link> and try again.","jetpack-videopress-pkg"),{link:React.createElement(o.A,{variant:"link",size:"small",onClick:()=>r(!0)})})),React.createElement(c.A,{onClose:()=>r(!1),isOpen:t}))}},3685:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>g});var o=r(6072),n=r.n(o),a=r(6427),i=r(9491),s=r(6087),c=r(3022),l=r(3239),u=r(941);const p=a.useBaseControlProps||function(e){const{help:t,id:r,...o}=e,n=(0,i.useInstanceId)(a.BaseControl,"wp-components-base-control",r),s="string"==typeof t?"aria-describedby":"aria-details";return{baseControlProps:{id:n,help:t,...o},controlProps:{id:n,...t?{[s]:`${n}__help`}:{}}}},d=e=>{if(a.__experimentalNumberControl)return React.createElement(a.__experimentalNumberControl,e);const t={...e};return["spinControls","isPressEnterToChange","isDragEnabled","isShiftStepEnabled","__unstableStateReducer"].forEach((e=>delete t[e])),React.createElement(a.TextControl,t)},f=({char:e=":"})=>React.createElement("span",{className:u.A["timestamp-control-divider"]},e),m=e=>(t,r)=>{const o={...t};return"COMMIT"!==r.type&&"PRESS_UP"!==r.type&&"PRESS_DOWN"!==r.type&&"CHANGE"!==r.type||void 0!==o.value&&(o.value=o.value.toString().padStart(e,"0")),o};function h(e,t,r){e>r&&(e=r);const o=Number.isNaN(e),n=o||void 0===t?0:Math.floor(e%1e3/Number("1e"+(3-t)));return{hh:o?0:Math.floor(e/36e5%24),mm:o?0:Math.floor(e/6e4%60),ss:o?0:Math.floor(e/1e3%60),decimal:n}}const v=({onChange:e,disabled:t,value:r,max:o,autoHideTimeInput:n=!0,decimalPlaces:a})=>{const i={value:h(r,a,o)},s=o>36e5,l=o>6e4,p=t=>n=>{if("string"!=typeof n||isNaN(parseInt(n,10))||(n=parseInt(n,10)),"hh"===t&&n>99||("mm"===t||"ss"===t)&&n>59||"decimal"===t&&n>Number(`1e${a}`)-1)return;if("string"==typeof n)return;i.value={...h(r,a,o),[t]:n};const s=i.value.decimal?i.value.decimal*Number("1e"+(3-a)):0;e?.(1e3*(3600*i.value.hh+60*i.value.mm+i.value.ss)+s)};return React.createElement("div",{className:(0,c.A)(u.A["timestamp-input-wrapper"],{[u.A["is-disabled"]]:t})},(s||!n)&&React.createElement(React.Fragment,null,React.createElement(d,{className:u.A["timestamp-control-input"],disabled:t,min:0,max:99,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(2),value:String(i.value.hh).padStart(2,"0"),onChange:p("hh"),__next40pxDefaultSize:!0}),React.createElement(f,null)),(l||!n)&&React.createElement(React.Fragment,null,React.createElement(d,{className:u.A["timestamp-control-input"],disabled:t,min:0,max:59,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(2),value:String(i.value.mm).padStart(2,"0"),onChange:p("mm"),__next40pxDefaultSize:!0}),React.createElement(f,null)),React.createElement(d,{className:u.A["timestamp-control-input"],disabled:t,min:0,max:59,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(2),value:String(i.value.ss).padStart(2,"0"),onChange:p("ss"),__next40pxDefaultSize:!0}),a&&React.createElement(React.Fragment,null,React.createElement(f,{char:"."}),React.createElement(d,{className:u.A["timestamp-control-input"],style:{"--input-width":12*a+"px"},disabled:t,min:0,max:Number("9".repeat(a)),step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"0".repeat(a),isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(a),value:String(i.value.decimal).padStart(a,"0"),onChange:p("decimal"),__next40pxDefaultSize:!0})))},g=e=>{const{disabled:t=!1,min:r=0,max:o=Number.MAX_SAFE_INTEGER,value:i,onChange:c,onDebounceChange:f,wait:m=1e3,fineAdjustment:h=50,autoHideTimeInput:g=!0,decimalPlaces:y,marksEvery:b,renderTooltip:k}=e,w=(0,s.useRef)(),[_,E]=(0,s.useState)(i);(0,s.useEffect)((()=>{E(i)}),[i]);const{baseControlProps:R}=p?.(e)||{},C=(0,s.useCallback)((e=>{clearTimeout(w?.current),e>o&&(e=o),e<r&&(e=r),E(e),c?.(e),w.current=setTimeout(f?.bind(null,e),m)}),[f,c,o,r,m]),S=[];if(b)for(let e=r;e<=o;e+=b)S.push({value:e,label:null});const P="function"==typeof k?k:e=>(0,l.f)(e);return React.createElement(a.BaseControl,n()({},R,{__nextHasNoMarginBottom:!0}),React.createElement("div",{className:u.A["timestamp-control__controls-wrapper"]},d&&React.createElement(v,{disabled:t,max:o,value:_,onChange:C,autoHideTimeInput:g,decimalPlaces:y}),React.createElement(a.RangeControl,n()({disabled:t,className:u.A["timestamp-range-control"],min:r,step:h,initialPosition:_,value:_,max:o,withInputField:!1,onChange:C,marks:b?S:void 0,renderTooltipContent:P},!1===k?{showTooltip:!1}:{},{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))))}},6720:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(6427),n=r(6087),a=r(1113),i=r(3022),s=r(7975),c=r(8766);const l=({src:e,setMaxDuration:t=null,currentTime:r})=>{const a=(0,n.useRef)(null),[i,s]=(0,n.useState)(!0);(0,n.useEffect)((()=>{a.current.src=e}),[e]),(0,n.useEffect)((()=>{a.current&&Number.isFinite(r)&&(a.current.currentTime=r)}),[r]);return React.createElement("div",{className:c.A["video-player-wrapper"]},i&&React.createElement("div",{className:c.A["video-player-spinner-wrapper"]},React.createElement(o.Spinner,{className:c.A.spinner})),React.createElement("video",{onLoadedData:()=>s(!1),ref:a,muted:!0,className:c.A.video,onDurationChange:e=>{const o=e.target.duration;if(t?.(o),a.current){const e=Number.isFinite(r)?r:o/2;a.current.currentTime=e}}}))},u=({src:e="",onVideoFrameSelected:t,className:r="",initialCurrentTime:u=null})=>{const[p,d]=(0,n.useState)(0),[f,m]=(0,n.useState)(Number.isFinite(u)?u:null);return React.createElement("div",{className:(0,i.A)(c.A.container,r)},React.createElement(a.A,{className:c.A["play-icon"],icon:s.A}),React.createElement(l,{src:e,setMaxDuration:d,currentTime:f}),React.createElement(o.RangeControl,{className:c.A.range,min:0,step:.1,initialPosition:f,max:p,showTooltip:!1,withInputField:!1,onChange:e=>{m(e),t?.(1e3*e)},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))}},2439:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(9491),n=r(1609),a=r(9799),i=r(2066);const s=e=>{const[t,r]=(0,n.useState)(!1),s=(0,n.useCallback)((()=>{const t=(0,a.Ay)(e);0===t.length?r(!1):r(!(0,i.A)(t))}),[e]),c=(0,o.useDebounce)(s,3e3);return(0,n.useEffect)((()=>{c()}),[e]),(0,n.useEffect)(s,[]),{hasIncompleteChapters:t}}},2185:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(1455),n=r.n(o);const a=e=>{const t={allowDownload:"allow_download",displayEmbed:"display_embed"};return r=>new Promise(((o,a)=>{const i=(s=Object.assign({id:e},r),Object.keys(s).reduce(((e,r)=>(e[t[r]||r]=s[r],e)),{}));var s;n()({path:"/wpcom/v2/videopress/meta",method:"POST",data:i}).then((e=>{"success"!==e?.code&&a()})).catch((e=>a(e))).finally((()=>{o()}))}))}},295:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(1455),n=r.n(o);const a=e=>()=>new Promise((function(t,r){n()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},9697:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(1455),n=r.n(o);const a=e=>function(t){return new Promise((function(r,o){n()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:t}).then((function(e){r(e)})).catch((function(e){o(e)}))}))}},7430:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(6087),n=r(6941),a=r.n(n),i=r(8025),s=r(5778);const c=a()("videopress:use-resumable-uploader"),l=({onProgress:e,onSuccess:t,onError:r})=>{const[n,a]=(0,o.useState)({bytesSent:0,bytesTotal:0,percent:0,status:"idle"}),[l,u]=(0,o.useState)(),[p,d]=(0,o.useState)(null),[f,m]=(0,o.useState)();async function h(o){const c=await(0,i.A)("upload-jwt");if(!c.token)return r("No token provided");"idle"===n.status&&a((e=>({...e,status:"uploading"})));let l=!1;const p=(0,s.A)({file:o,tokenData:c,onProgress:(t,r)=>{if(l)return;const o=Math.round(t/r*100);a({bytesSent:t,bytesTotal:r,percent:o,status:"uploading"}),e(t,r)},onSuccess:e=>{l=!0,a((e=>({...e,status:"done"}))),u(e),t(e)},onError:e=>{a((e=>({...e,status:"error"}))),d(e),r(e)}});m({start:()=>{a((e=>({...e,status:"uploading"}))),p.start()},abort:()=>{a((e=>({...e,status:"aborted"}))),p.abort()}})}return{onUploadHandler:function(e){const t=e.target.files[0];t?h(t):c("No file selected. Bail early")},uploadHandler:h,resumeHandler:f,uploadingData:n,media:l,error:p}}},560:(e,t,r)=>{"use strict";r.d(t,{NP:()=>i});var o=r(1455),n=r.n(o),a=(r(6087),r(7723));r(781);const __=a.__,i=e=>{const t=`videopress/v1/upload/${e}`;return new Promise(((r,o)=>{n()({path:t,method:"POST"}).then((t=>{"uploading"===t.status||"new"===t.status||"resume"===t.status?i(e).then(r).catch(o):"complete"===t.status?r({guid:t.uploaded_details.guid,id:t.uploaded_details.media_id,src:t.uploaded_details.upload_src}):"error"===t.status?o({data:{message:t.error}}):o({data:{message:__("Unexpected error uploading video.","jetpack-videopress-pkg")}})})).catch((e=>{o({data:{message:e?.message}})}))}))}},9448:(e,t,r)=>{"use strict";r.d(t,{Lv:()=>l,b5:()=>u,ie:()=>p,xI:()=>c});var o=r(5985),n=r(6941),a=r.n(n);const i=window?.JP_CONNECTION_INITIAL_STATE,s=a()("videopress:connection");function c(){return(0,o.Sy)()?(s("Simple site connected "),!0):(0,o.d9)()?(s("Atomic site connected "),!0):i?.connectionStatus?.isUserConnected?(s("Jetpack user is connected "),!0):(s("User is not connected "),!1)}function l(){return"1"===window?.videoPressEditorState?.isVideoPressModuleActive}function u(){return!!c()&&(l()||p())}function p(){return"1"===window?.videoPressEditorState?.isStandaloneActive}},1370:(e,t,r)=>{"use strict";r.d(t,{X:()=>p});var o=r(1455),n=r.n(o),a=r(6087),i=r(6941),s=r.n(i),c=r(8025);const l=a.Platform.isNative,u=s()("videopress:lib:fetch-video-item");async function p({guid:e,isPrivate:t,token:r=null,skipRatingControl:o=!1,retries:a=0}){try{const a=o?{}:{birth_day:"1",birth_month:"1",birth_year:"2000"};let i;t&&!r&&(i=await(0,c.A)("playback",{guid:e})),(r||i?.token)&&(a.metadata_token=r||i.token);const s=Object.keys(a).length?`?${new URLSearchParams(a).toString()}`:"",u=l?{path:`/rest/v1.1/videos/${e}${s}`}:{url:`https://public-api.wordpress.com/rest/v1.1/videos/${e}${s}`};return await n()({...u,credentials:"omit",global:!0})}catch(t){u("updating retry from",a,"to",a+1);const r=a+1;if(r>2)throw u("Too many attempts to get video. Aborting."),new Error(t?.message??t);if("auth"===t?.error)return u("Authentication error. Reattempt %o",r+"/3"),p({guid:e,isPrivate:!0,token:null,skipRatingControl:o,retries:r});if("Please supply the birthdate parameters."===t?.message)return u("Rating error. Reattempt %o",r+"/3"),p({guid:e,isPrivate:!0,token:null,skipRatingControl:!1,retries:r});throw new Error(t?.message??t)}}},8025:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(6941),n=r.n(o),a=r(5468);const i=n()("videopress:get-media-token");const s=async function(e,t={}){const{id:r=0,guid:o=0,flushToken:n}=t,s=`vpc-${e}-${r}-${o}`,c=window?.videopressAjax?.context||"main";let l;const u=localStorage.getItem(s);if(n)i("(%s) Flushing %o token",c,s),localStorage.removeItem(s);else try{if(u){if(l=await JSON.parse(u),l&&l.expire>Date.now())return i("(%s) Providing %o token from the store",c,s),l.data;i("(%s) Token %o expired. Clean.",c,s),localStorage.removeItem(s)}}catch{i("Invalid token in the localStore")}const p=await function(e,t={}){const{id:r=0,guid:o,subscriptionPlanId:n=0,adminAjaxAPI:i,filename:s}=t;return new Promise((function(t,c){const l=i||window.videopressAjax?.ajaxUrl||window?.ajaxurl||"/wp-admin/admin-ajax.php";if(!a.p.includes(e))return c("Invalid scope");const u={action:"videopress-get-playback-jwt"};switch(e){case"upload":u.action="videopress-get-upload-token",s&&(u.filename=s);break;case"upload-jwt":u.action="videopress-get-upload-jwt";break;case"playback":u.action="videopress-get-playback-jwt",u.guid=o,u.post_id=String(r),u.subscription_plan_id=n}fetch(l,{method:"POST",credentials:"same-origin",body:new URLSearchParams(u)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((r=>{if(!r.success)throw new Error("Token is not achievable");switch(e){case"upload":case"upload-jwt":t({token:r.data.upload_token,blogId:r.data.upload_blog_id,url:r.data.upload_action_url});break;case"playback":t({token:r.data.jwt})}})).catch((()=>{console.warn("Token is not achievable"),t({token:null})}))}))}(e,t);return"playback"===e&&p?.token&&(i("(%s) Storing %o token",c,s),localStorage.setItem(s,JSON.stringify({data:p,expire:Date.now()+864e5}))),i("(%s) Providing %o token from request/response",c,s),p}},5468:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});const o=["upload","playback","upload-jwt"]},1649:(e,t,r)=>{"use strict";r.d(t,{TE:()=>i,qb:()=>c});var o=r(5985),n=r(1455),a=r.n(n);const i=function(e,t){const r={at_time:t,is_millisec:!0};return(0,o.Sy)()?a()({path:`/videos/${e}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:r}):a()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:r})},s=async function(e){const t=await function(e){return a()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"})}(e);return!t.data?.generating};async function c(e,{wait:t=3e3,attemps:r=10,initialWait:o=!0}={}){for(o&&await new Promise((e=>setTimeout(e,t)));!await s(e);){if(0==r--)throw new Error("Poster generation timed out");await new Promise((e=>setTimeout(e,t)))}return!0}},5778:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(6941),n=r.n(o),a=r(781),i=r(8025);const s=n()("videopress:resumable-file-uploader"),c={},l=({file:e,tokenData:t,onProgress:r,onSuccess:o,onError:n})=>{const l=new a._O(e,{onError:n,onProgress:r,endpoint:t.url,removeFingerprintOnSuccess:!0,overridePatchMethod:!1,chunkSize:1e7,metadata:{filename:e.name,filetype:e.type},retryDelays:[0,1e3,3e3,5e3,1e4],onShouldRetry:function(e){return 400!==(e.originalResponse?e.originalResponse.getStatus():0)||(s("cleanup retry due to 400 error"),localStorage.removeItem(l._urlStorageKey),!1)},onBeforeRequest:async function(e){const r=e._method;if(["HEAD","OPTIONS"].indexOf(r)>=0&&(e._method="GET",e.setHeader("X-HTTP-Method-Override",r)),["DELETE","PUT","PATCH"].indexOf(r)>=0&&(e._method="POST",e.setHeader("X-HTTP-Method-Override",r)),e._xhr.open(e._method,e._url,!0),Object.keys(e._headers).forEach((function(t){e.setHeader(t,e._headers[t])})),"POST"===r){if(!!!t.token)throw"should never happen";e.setHeader("x-videopress-upload-token",t.token)}if(["OPTIONS","GET","HEAD","DELETE","PUT","PATCH"].indexOf(r)>=0){const t=(o=e._url,new URL(o).pathname.split("/").pop());if(c[t])e.setHeader("x-videopress-upload-token",c[t]);else if("HEAD"===r){const r=await(0,i.A)("upload-jwt");r?.token&&(c[t]=r.token,e.setHeader("x-videopress-upload-token",r.token))}}var o},onAfterResponse:async function(t,r){if(r.getStatus()>=400)return void s("upload error");const n=r.getHeader("x-videopress-upload-guid"),a=r.getHeader("x-videopress-upload-media-id"),i=r.getHeader("x-videopress-upload-src-url");if(n&&a&&i)return void(o&&o({id:Number(a),guid:n,src:i},e));const l={"x-videopress-upload-key-token":"token","x-videopress-upload-key":"key"},u={};Object.keys(l).forEach((function(e){const t=r.getHeader(e);t&&(u[l[e]]=t)})),u.key&&u.token&&(c[u.key]=u.token)}});return l.findPreviousUploads().then((function(e){e.length&&l.resumeFromPreviousUpload(e[0]),l.start()})),l}},9689:(e,t,r)=>{"use strict";r.d(t,{QW:()=>l,T3:()=>d,eS:()=>m,ep:()=>c,i2:()=>p,kK:()=>u,qh:()=>h,up:()=>f});var o=r(1455),n=r.n(o),a=r(3832);const i=["autoPlay","cover","controls","hd","loop","muted","persistVolume","playsinline","posterUrl","preloadContent","sbc","sbpc","sblc","resizeToParent","useAverageColor"],s={autoPlay:"autoplay",cover:"cover",controls:"controls",hd:"hd",loop:"loop",muted:"muted",persistVolume:"persistVolume",playsinline:"playsinline",posterUrl:"poster",preloadContent:"preload",sbc:"seekbarColor",sbpc:"seekbarPlayedColor",sblc:"seekbarLoadingColor",resizeToParent:"resizeToParent",useAverageColor:"useAverageColor"},c=(e,{autoplay:t,controls:r,loop:o,muted:n,playsinline:i,poster:s,preload:c,seekbarColor:l,seekbarPlayedColor:u,seekbarLoadingColor:p,useAverageColor:d})=>{if(!e)return null;const f={resizeToParent:!0,cover:!0,...t&&{autoPlay:!0},...!r&&{controls:!1},...o&&{loop:!0},...n&&{muted:!0,persistVolume:!1},...i&&{playsinline:!0},...s&&{posterUrl:s},...""!==c&&{preloadContent:c},...""!==l&&{sbc:l},...""!==u&&{sbpc:u},...""!==p&&{sblc:p},...d&&{useAverageColor:!0}};return(0,a.addQueryArgs)(`https://videopress.com/v/${e}`,f)},l=e=>{if(!e||"string"!=typeof e)return null;const t=e.match(/^https?:\/\/(?<host>video(?:\.word|s\.files\.word)?press\.com)(?:\/v|\/embed)?\/(?<guid>[a-zA-Z\d]{8})/);return t?.groups?.guid?t.groups.guid:null};function u(e,t){const r=function(e){const t=e.match(/^[a-zA-Z\d]{8}$/);return!!t&&t[0]}(e);if(r)return t?{url:c(e,t),guid:e}:{url:`https://videopress.com/v/${e}`,guid:e};const o=l(e);return o?{url:e,guid:o}:{}}async function p(e,t={}){try{const r=(await n()({path:`/wp/v2/media?mime_type=video&search=${encodeURIComponent(e)}`})).find((e=>e.jetpack_videopress_guid));return r?.jetpack_videopress_guid?{url:c(r.jetpack_videopress_guid,t),guid:r.jetpack_videopress_guid}:null}catch{return null}}const d=e=>e.replace(/\.[^/.]+$/,"");function f(e){try{const t=new URL(e).pathname.split("/");return t[t.length-1]||""}catch{return""}}function m(e){return/^https?:\/\/(?:(?:v(?:ideo)?\.wordpress\.com|videopress\.com)\/(?:v|embed)|v\.wordpress\.com)\/([a-z\d]{8})(\/|\b)/i.test(e)}function h(e){let t;try{t=new URLSearchParams(new URL(e).search)}catch{return{}}return i.reduce(((e,r)=>{const o=t.get(r);if(null!==o){e[s[r]]=["autoPlay","cover","controls","hd","loop","muted","persistVolume","playsinline","resizeToParent","useAverageColor"].includes(r)?(e=>"1"===e||"true"===e||"0"!==e&&"false"!==e&&null)(o):o}return e}),{})}},8634:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>p,Dr:()=>f,n:()=>d});var o=r(1455),n=r.n(o),a=r(6941),i=r.n(a),s=r(8025);const{siteType:c=""}=window?.videoPressEditorState||{},l="simple"!==c,u=i()("videopress:tracks:lib:video-tracks");async function p(e,t){if(!e)return!1;let r,o="";t.isPrivate&&(r=await(0,s.A)("playback",{guid:t.guid}),o="?"+new URLSearchParams({metadata_token:r?.token}).toString());let n=await fetch(e+o);if(!n.ok&&403===n.status&&t.guid&&(r=await(0,s.A)("playback",{guid:t.guid}),o="?"+new URLSearchParams({metadata_token:r?.token}).toString(),n=await fetch(e+o)),!n.ok)return!1;const a=await n.text();return/videopress-chapters-auto-generated/.test(a)}const d=(e,t)=>{const{kind:r,srcLang:o,label:a,tmpFile:i}=e;return l?function(e,t){return u("using jetpack api fetch"),new Promise((function(r,o){const{kind:n,srcLang:a,label:i,tmpFile:c}=e;(0,s.A)("upload",{filename:c.name}).then((({token:e,blogId:s})=>{const l=new FormData;l.append("kind",n),l.append("srclang",a),l.append("label",i),l.append("vtt",c),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${t}/tracks`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${e}" blog_id="${s}"`},method:"POST",body:l}).then((e=>{try{const t=e.json();return u("data",e),u("json",t),r(t)}catch(e){return u("error",e),o(e)}})).catch(o)}))}))}({kind:r,srcLang:o,label:a,tmpFile:i},t):(u("using wpcom api fetch"),new Promise((function(e,s){return n()({method:"POST",path:`/videos/${t}/tracks`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",o],["label",a],["vtt",i]]}).then((t=>{try{const r=t.json();return u("data",t),u("json",r),e(r)}catch(e){return u("error",e),s(e)}})).catch(s)})))},f=(e,t)=>{const{kind:r,srcLang:o}=e;if(l)return function({kind:e,srcLang:t},r){return new Promise((function(o,n){(0,s.A)("upload").then((({token:a,blogId:i})=>{const s=new FormData;s.append("kind",e),s.append("srclang",t),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${r}/tracks/delete`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${a}" blog_id="${i}"`},method:"POST",body:s}).then((e=>{try{return o(e.json())}catch(e){return n(e)}})).catch(n)}))}))}({kind:r,srcLang:o},t);const a={method:"POST",path:`/videos/${t}/tracks/delete`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",o]]};return n()(a)}},8962:(e,t,r)=>{"use strict";r.d(t,{CR:()=>a,az:()=>o,iL:()=>l,ko:()=>s,o0:()=>n,z7:()=>c,zG:()=>i});const o="public",n="private",a="site-default",i=[o,n,a],s="G",c="PG-13",l="R-17"},4523:(e,t,r)=>{"use strict";function o(e){return e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace("_","")))}r.d(t,{s:()=>o})},3239:(e,t,r)=>{"use strict";function o(e){const t=Math.floor(e/36e5),r=Math.floor(e/6e4)%60,o=Math.floor(e/1e3)%60,n=Math.floor(e/10)%100;return[t>0?t.toString().padStart(2,"0")+":":"",t>0||r>0?r.toString().padStart(2,"0")+":":"",o.toString().padStart(2,"0"),"."+n.toString().padStart(2,"0")].join("")}r.d(t,{f:()=>o})},9799:(e,t,r)=>{"use strict";function o(e){if(!e)return[];return e.split("\n").map((e=>function(e){const t=/(?<timeBlock>\(?(?<time>\d{1,2}:\d{2}:\d{2}|\d{1,2}:\d{2})\)?)/.exec(e);if(null==t||null==t.groups)return null;const{groups:{timeBlock:r,time:o}}=t,n=e.indexOf(r),a=(n<(e.length-r.length)/2?e.substring(n+r.length,e.length):e.substring(0,n)).trim().replace(/(\s-$)|(^-\s)/,""),i=o.split(":");return 1===i[0].length&&(i[0]=`0${i[0]}`),2===i.length&&i.unshift("00"),{startAt:i.join(":"),title:a}}(e))).filter((e=>null!==e)).sort(((e,t)=>e.startAt.localeCompare(t.startAt)))}r.d(t,{$k:()=>o,Ay:()=>o})},6302:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,ZO:()=>n});var o=r(9799);function n(e){const t=Math.floor(e/36e5);let r=e-36e5*t;const o=Math.floor(r/6e4);r-=6e4*o;return[t,o,Math.floor(r/1e3)].map((e=>e<10?`0${e}`:e)).join(":")}const a="videopress-chapters-auto-generated";function i(e,t){const r=function(e,t=3599999e3){const r=(0,o.$k)(e);if(0===r.length)return null;let i="WEBVTT\n";i+="\n",i+="NOTE\n",i+=`${a}\n`,i+="This file was auto-generated based on Video description.\n",i+="For more information, see https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video\n";let s=1;for(const[e,o]of r.entries()){const a=0===e?"000":"001",c=e<r.length-1?r[e+1].startAt:n(t);i+=`\n${s++}\n${o.startAt}.${a} --\x3e ${c}.000\n${o.title}\n`}return i}(e,t);return r?new File([r],"chapters.vtt",{type:"text/vtt"}):null}},2066:(e,t,r)=>{"use strict";function o(e){const t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2])}function n(e){if(!e||0===e.length)return!1;if("00:00:00"!==e[0].startAt)return!1;if(e.length<3)return!1;if(e.some((e=>!e.title)))return!1;for(let t=0;t<e.length-1;t++){const r=e[t];if(o(e[t+1].startAt)-o(r.startAt)<10)return!1}return!0}r.d(t,{A:()=>n})},1016:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(4085),n=r(5217),a=r(3569),i=r(615);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(){c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function d(e,t,r,o){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),s=new U(o||[]);return n(i,"_invoke",{value:A(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",v="executing",g="completed",y={};function b(){}function k(){}function w(){}var _={};p(_,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(N([])));R&&R!==r&&o.call(R,i)&&(_=R);var C=w.prototype=b.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(n,a,i,c){var l=f(e[n],e,a);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==s(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function A(t,r,o){var n=m;return function(a,i){if(n===v)throw Error("Generator is already running");if(n===g){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var s=o.delegate;if(s){var c=x(s,o);if(c){if(c===y)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===m)throw n=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=v;var l=f(t,r,o);if("normal"===l.type){if(n=o.done?g:h,l.arg===y)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=g,o.method="throw",o.arg=l.arg)}}}function x(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return k.prototype=w,n(C,"constructor",{value:w,configurable:!0}),n(w,"constructor",{value:k,configurable:!0}),k.displayName=p(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(P.prototype),p(P.prototype,l,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new P(d(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(C),p(C,u,"Generator"),p(C,i,(function(){return this})),p(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return s.type="throw",s.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:N(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),y}},t}function l(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,p(o.key),o)}}function p(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"openFile",value:(s=c().mark((function e(t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.A)()||!t||void 0===t.uri){e.next=11;break}return e.prev=1,e.next=4,(0,n.A)(t.uri);case 4:return s=e.sent,e.abrupt("return",new a.A(s));case 8:throw e.prev=8,e.t0=e.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e.t0));case 11:if("function"!=typeof t.slice||void 0===t.size){e.next=13;break}return e.abrupt("return",Promise.resolve(new a.A(t)));case 13:if("function"!=typeof t.read){e.next=18;break}if(r=Number(r),Number.isFinite(r)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return e.abrupt("return",Promise.resolve(new i.A(t,r)));case 18:return e.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return e.stop()}}),e,null,[[1,8]])})),p=function(){var e=this,t=arguments;return new Promise((function(r,o){var n=s.apply(e,t);function a(e){l(n,r,o,a,i,"next",e)}function i(e){l(n,r,o,a,i,"throw",e)}a(void 0)}))},function(_x,e){return p.apply(this,arguments)})}],t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,s,p}()},3765:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(4085);function n(e,t){return(0,o.A)()?Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}},5369:(e,t,r)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}r.d(t,{A:()=>c});var c=function(){return i((function e(){n(this,e)}),[{key:"createRequest",value:function(e,t){return new l(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}])}(),l=function(){return i((function e(t,r){n(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}),[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,o){e._xhr.onload=function(){r(new u(e._xhr))},e._xhr.onerror=function(e){o(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}(),u=function(){return i((function e(t){n(this,e),this._xhr=t}),[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}()},781:(e,t,r)=>{"use strict";r.d(t,{_O:()=>k});var o=r(2494),n=r(5082),a=r(1016),i=r(3765),s=r(5369),c=r(851);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,y(o.key),o)}}function p(e,t,r){return t=f(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var b=v(v({},n.A.defaultOptions),{},{httpStack:new s.A,fileReader:new a.A,urlStorage:c.o?new c.Y:new o.A,fingerprint:i.A}),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,t,[e,r=v(v({},b),r)])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,a=[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=v(v({},b),t),n.A.terminate(e,t)}}],(o=null)&&u(r.prototype,o),a&&u(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.A);"function"==typeof XMLHttpRequest&&"function"==typeof Blob&&Blob.prototype.slice},4085:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},3569:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(3716),n=r(9427);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size},(t=[{key:"slice",value:function(e,t){if((0,o.A)())return(0,n.A)(this._file.slice(e,t));var r=this._file.slice(e,t),a=t>=this.size;return Promise.resolve({value:r,done:a})}},{key:"close",value:function(){}}])&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},615:(e,t,r)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function i(e){return void 0===e?0:void 0!==e.size?e.size:e.length}r.d(t,{A:()=>s});var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1},(t=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,o=t<=this._bufferOffset+i(this._buffer);if(this._done||o){var n=this._getDataFromBuffer(e,t),a=null==n&&this._done;return Promise.resolve({value:n,done:a})}return this._reader.read().then((function(o){var n=o.value;return o.done?r._done=!0:void 0===r._buffer?r._buffer=n:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,n),r._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===i(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},3716:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},9427:(e,t,r)=>{"use strict";function o(e){return new Promise((function(t,r){var o=new FileReader;o.onload=function(){var e=new Uint8Array(o.result);t({value:e})},o.onerror=function(e){r(e)},o.readAsArrayBuffer(e)}))}r.d(t,{A:()=>o})},5217:(e,t,r)=>{"use strict";function o(e){return new Promise((function(t,r){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var e=o.response;t(e)},o.onerror=function(e){r(e)},o.open("GET",e),o.send()}))}r.d(t,{A:()=>o})},851:(e,t,r)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}r.d(t,{Y:()=>u,o:()=>l});var i=!1;try{i="localStorage"in window;var s="tusSupport",c=localStorage.getItem(s);localStorage.setItem(s,c),null===c&&localStorage.removeItem(s)}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;i=!1}var l=i,u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),o="tus::".concat(e,"::").concat(r);return localStorage.setItem(o,JSON.stringify(t)),Promise.resolve(o)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var o=localStorage.key(r);if(0===o.indexOf(e))try{var n=JSON.parse(localStorage.getItem(o));n.urlStorageKey=o,t.push(n)}catch(e){}}return t}}],t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},3004:(e,t,r)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function i(e,t,r){return t=u(t),function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r))}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(c())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var n=new(e.bind.apply(e,o));return r&&l(n,r.prototype),n}(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)},s(e)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}r.d(t,{A:()=>p});const p=function(e){function t(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,t,[e])).originalRequest=n,r.originalResponse=a,r.causingError=o,null!=o&&(e+=", caused by ".concat(o.toString())),null!=n){var s=n.getHeader("X-Request-ID")||"n/a",c=n.getMethod(),l=n.getURL(),u=a?a.getStatus():"n/a",p=a?a.getBody()||"":"n/a";e+=", originated from request (method: ".concat(c,", url: ").concat(l,", response code: ").concat(u,", response text: ").concat(p,", request id: ").concat(s,")")}return r.message=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),r=t,o&&n(r.prototype,o),a&&n(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(s(Error))},2380:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var o=!1;function n(e){o&&console.log(e)}},2494:(e,t,r)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}r.d(t,{A:()=>i});var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},5082:(e,t,r)=>{"use strict";r.d(t,{A:()=>U});var o=r(9535),n=r(6580),a=r.n(n),i=r(3004),s=r(2380),c=r(7291);function l(){l=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function p(e,t,r,o){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),s=new U(o||[]);return n(i,"_invoke",{value:A(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",v="executing",g="completed",y={};function b(){}function k(){}function w(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(N([])));R&&R!==r&&o.call(R,i)&&(_=R);var C=w.prototype=b.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(n,a,i,s){var c=f(e[n],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==d(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function A(t,r,o){var n=m;return function(a,i){if(n===v)throw Error("Generator is already running");if(n===g){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var s=o.delegate;if(s){var c=x(s,o);if(c){if(c===y)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===m)throw n=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=v;var l=f(t,r,o);if("normal"===l.type){if(n=o.done?g:h,l.arg===y)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=g,o.method="throw",o.arg=l.arg)}}}function x(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(d(t)+" is not iterable")}return k.prototype=w,n(C,"constructor",{value:w,configurable:!0}),n(w,"constructor",{value:k,configurable:!0}),k.displayName=u(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(P.prototype),u(P.prototype,s,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new P(p(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(C),u(C,c,"Generator"),u(C,i,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return s.type="throw",s.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:N(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),y}},t}function u(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw n}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function b(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var k="tus-v1",w="ietf-draft-03",_={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:j,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:k},E=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return t=e,r=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if([k,w].includes(this.options.protocol))if(this.options.endpoint||this.options.uploadUrl||this.url){var r=this.options.retryDelays;if(null==r||"[object Array]"===Object.prototype.toString.call(r)){if(this.options.parallelUploads>1)for(var o=0,n=["uploadUrl","uploadSize","uploadLengthDeferred"];o<n.length;o++){var a=n[o];if(this.options[a])return void this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then((function(r){return null==r?(0,s.R)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):(0,s.R)("Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,r=this,o=this._size,n=0;this._parallelUploads=[];var a=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,i=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var r=Math.floor(e/t),o=[],n=0;n<t;n++)o.push({start:r*n,end:r*(n+1)});return o[t-1].end=e,o}(this._source.size,a);this._parallelUploadUrls&&i.forEach((function(e,t){e.uploadUrl=r._parallelUploadUrls[t]||null})),this._parallelUploadUrls=new Array(i.length);var c,l=i.map((function(t,a){var s=0;return r._source.slice(t.start,t.end).then((function(c){var l=c.value;return new Promise((function(c,u){var p=v(v({},r.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:r.options.metadataForPartialUploads,headers:v(v({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:c,onError:u,onProgress:function(e){n=n-s+e,s=e,r._emitProgress(n,o)},onUploadUrlAvailable:function(){r._parallelUploadUrls[a]=d.url,r._parallelUploadUrls.filter((function(e){return Boolean(e)})).length===i.length&&r._saveUploadInUrlStorage()}}),d=new e(l,p);d.start(),r._parallelUploads.push(d)}))}))}));Promise.all(l).then((function(){(c=r._openRequest("POST",r.options.endpoint)).setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var e=R(r.options.metadata);return""!==e&&c.setHeader("Upload-Metadata",e),r._sendRequest(c,null)})).then((function(e){if(C(e.getStatus(),200)){var t=e.getHeader("Location");null!=t?(r.url=T(r.options.endpoint,t),(0,s.R)("Created upload at ".concat(r.url)),r._emitSuccess(e)):r._emitHttpError(c,e,"tus: invalid or missing Location header")}else r._emitHttpError(c,e,"tus: unexpected response while creating upload")})).catch((function(e){r._emitError(e)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?((0,s.R)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?((0,s.R)("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):((0,s.R)("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var r=this;if(null!=this._parallelUploads){var o,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(this._parallelUploads);try{for(n.s();!(o=n.n()).done;)o.value.abort(t)}catch(e){n.e(e)}finally{n.f()}}return null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,r,o){this._emitError(new i.A(r,o,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),x(e,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(e){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess({lastResponse:e})}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length","1"):t.setHeader("Upload-Length","".concat(this._size));var r,o=R(this.options.metadata);""!==o&&t.setHeader("Upload-Metadata",o),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):(this.options.protocol===w&&t.setHeader("Upload-Complete","?0"),r=this._sendRequest(t,null)),r.then((function(r){if(C(r.getStatus(),200)){var o=r.getHeader("Location");if(null!=o){if(e.url=T(e.options.endpoint,o),(0,s.R)("Created upload at ".concat(e.url)),"function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size)return e._emitSuccess(r),void e._source.close();e._saveUploadInUrlStorage().then((function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}))}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(r){var o=r.getStatus();if(!C(o,200))return 423===o?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):(C(o,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var n=Number.parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(n))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var a=Number.parseInt(r.getHeader("Upload-Length"),10);!Number.isNaN(a)||e.options.uploadLengthDeferred||e.options.protocol!==k?("function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),e._saveUploadInUrlStorage().then((function(){if(n===a)return e._emitProgress(a,a),void e._emitSuccess(r);e._offset=n,e._performUpload()}))):e._emitHttpError(t,r,"tus: invalid or missing length value")}})).catch((function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset","".concat(this._offset)),this._addChunkToRequest(e).then((function(r){C(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")})).catch((function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),r)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,o=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(r+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(o===Number.POSITIVE_INFINITY||o>this._size)&&!this.options.uploadLengthDeferred&&(o=this._size),this._source.slice(r,o).then((function(r){var o=r.value,n=r.done,a=null!=o&&o.size?o.size:0;t.options.uploadLengthDeferred&&n&&(t._size=t._offset+a,e.setHeader("Upload-Length","".concat(t._size)));var i=t._offset+a;return!t.options.uploadLengthDeferred&&n&&i!==t._size?Promise.reject(new Error("upload was configured with a size of ".concat(t._size," bytes, but the source is done after ").concat(i," bytes"))):null===o?t._sendRequest(e):(t.options.protocol===w&&e.setHeader("Upload-Complete",n?"?1":"?0"),t._emitProgress(t._offset,t._size),t._sendRequest(e,o))}))}},{key:"_handleUploadResponse",value:function(e,t){var r=Number.parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size)return this._emitSuccess(t),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=S(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){e._urlStorageKey=t}))}},{key:"_sendRequest",value:function(e){return P(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],o=[{key:"terminate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=S("DELETE",t,r);return P(o,null,r).then((function(e){if(204!==e.getStatus())throw new i.A("tus: unexpected response while terminating upload",null,o,e)})).catch((function(n){if(n instanceof i.A||(n=new i.A("tus: failed to terminate upload",n,o,null)),!x(n,0,r))throw n;var a=r.retryDelays[0],s=r.retryDelays.slice(1),c=v(v({},r),{},{retryDelays:s});return new Promise((function(e){return setTimeout(e,a)})).then((function(){return e.terminate(t,c)}))}))}}],r&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o}();function R(e){return Object.entries(e).map((function(e){var t=p(e,2),r=t[0],n=t[1];return"".concat(r," ").concat(o.o4.encode(String(n)))})).join(",")}function C(e,t){return e>=t&&e<t+100}function S(e,t,r){var o=r.httpStack.createRequest(e,t);r.protocol===w?o.setHeader("Upload-Draft-Interop-Version","5"):o.setHeader("Tus-Resumable","1.0.0");for(var n=r.headers||{},a=0,i=Object.entries(n);a<i.length;a++){var s=p(i[a],2),l=s[0],u=s[1];o.setHeader(l,u)}if(r.addRequestId){var d=(0,c.A)();o.setHeader("X-Request-ID",d)}return o}function P(_x,e,t){return A.apply(this,arguments)}function A(){var e;return e=l().mark((function e(t,r,o){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof o.onBeforeRequest){e.next=3;break}return e.next=3,o.onBeforeRequest(t);case 3:return e.next=5,t.send(r);case 5:if(n=e.sent,"function"!=typeof o.onAfterResponse){e.next=9;break}return e.next=9,o.onAfterResponse(t,n);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})),A=function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function i(e){u(a,o,n,i,s,"next",e)}function s(e){u(a,o,n,i,s,"throw",e)}i(void 0)}))},A.apply(this,arguments)}function x(e,t,r){return!(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)&&(r&&"function"==typeof r.onShouldRetry?r.onShouldRetry(e,t,r):j(e))}function j(e){var t,r=e.originalResponse?e.originalResponse.getStatus():0;return(!C(r,400)||409===r||423===r)&&(t=!0,"undefined"!=typeof navigator&&!1===navigator.onLine&&(t=!1),t)}function T(e,t){return new(a())(t,e).toString()}E.defaultOptions=_;const U=E},7291:(e,t,r)=>{"use strict";function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}r.d(t,{A:()=>o})},6580:(e,t,r)=>{"use strict";var o=r(6811),n=r(4588),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(a,"")}var d=[["#","hash"],["?","query"],function(e,t){return h(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(e){var t,r=("undefined"!=typeof window||"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).location||{},o={},n=typeof(e=e||r);if("blob:"===e.protocol)o=new g(unescape(e.pathname),{});else if("string"===n)for(t in o=new g(e,{}),f)delete o[t];else if("object"===n){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function h(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function v(e,t){e=(e=p(e)).replace(i,""),t=t||{};var r,o=l.exec(e),n=o[1]?o[1].toLowerCase():"",a=!!o[2],s=!!o[3],c=0;return a?s?(r=o[2]+o[3]+o[4],c=o[2].length+o[3].length):(r=o[2]+o[4],c=o[2].length):s?(r=o[3]+o[4],c=o[3].length):r=o[4],"file:"===n?c>=2&&(r=r.slice(2)):h(n)?r=o[4]:n?a&&(r=r.slice(2)):c>=2&&h(t.protocol)&&(r=o[4]),{protocol:n,slashes:a||h(n),slashesCount:c,rest:r}}function g(e,t,r){if(e=(e=p(e)).replace(i,""),!(this instanceof g))return new g(e,t,r);var a,s,c,l,f,y,b=d.slice(),k=typeof t,w=this,_=0;for("object"!==k&&"string"!==k&&(r=t,t=null),r&&"function"!=typeof r&&(r=n.parse),a=!(s=v(e||"",t=m(t))).protocol&&!s.slashes,w.slashes=s.slashes||a&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!h(w.protocol)))&&(b[3]=[/(.*)/,"pathname"]);_<b.length;_++)"function"!=typeof(l=b[_])?(c=l[0],y=l[1],c!=c?w[y]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(w[y]=e.slice(0,f),e=e.slice(f+l[2])):(w[y]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(w[y]=f[1],e=e.slice(0,f.index)),w[y]=w[y]||a&&l[3]&&t[y]||"",l[4]&&(w[y]=w[y].toLowerCase())):e=l(e,w);r&&(w.query=r(w.query)),a&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=r.length,n=r[o-1],a=!1,i=0;o--;)"."===r[o]?r.splice(o,1):".."===r[o]?(r.splice(o,1),i++):i&&(0===o&&(a=!0),r.splice(o,1),i--);return a&&r.unshift(""),"."!==n&&".."!==n||r.push(""),r.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&h(w.protocol)&&(w.pathname="/"+w.pathname),o(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(f=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&h(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}g.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||n.parse)(t)),a[e]=t;break;case"port":a[e]=t,o(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,c.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";a[e]=t.charAt(0)!==i?i+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<d.length;l++){var u=d[l];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&h(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=n.stringify);var t,r=this,o=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(r.protocol&&r.slashes||h(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&h(r.protocol)&&!o&&"/"!==r.pathname&&(i+="@"),(":"===o[o.length-1]||c.test(r.hostname)&&!r.port)&&(o+=":"),i+=o+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},g.extractProtocol=v,g.location=m,g.trimLeft=p,g.qs=n,e.exports=g},8894:(e,t,r)=>{"use strict";e.exports=r.p+"images/dynamic-colors-34cf384d91fb0fd3a9d5.png"},4071:(e,t,r)=>{"use strict";e.exports=r.p+"images/videopress-block-example-image-d7dd9fae6ff49181bfca.jpg"},9384:e=>{"use strict";e.exports=window.JetpackConnection},7999:e=>{"use strict";e.exports=window.JetpackScriptDataModule},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},8468:e=>{"use strict";e.exports=window.lodash},1455:e=>{"use strict";e.exports=window.wp.apiFetch},3162:e=>{"use strict";e.exports=window.wp.blob},4715:e=>{"use strict";e.exports=window.wp.blockEditor},4997:e=>{"use strict";e.exports=window.wp.blocks},6427:e=>{"use strict";e.exports=window.wp.components},9491:e=>{"use strict";e.exports=window.wp.compose},3582:e=>{"use strict";e.exports=window.wp.coreData},7143:e=>{"use strict";e.exports=window.wp.data},8490:e=>{"use strict";e.exports=window.wp.domReady},3656:e=>{"use strict";e.exports=window.wp.editor},6087:e=>{"use strict";e.exports=window.wp.element},9877:e=>{"use strict";e.exports=window.wp.escapeHtml},2619:e=>{"use strict";e.exports=window.wp.hooks},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},7723:e=>{"use strict";e.exports=window.wp.i18n},2279:e=>{"use strict";e.exports=window.wp.plugins},5573:e=>{"use strict";e.exports=window.wp.primitives},3832:e=>{"use strict";e.exports=window.wp.url},6072:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3022:(e,t,r)=>{"use strict";function o(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=o(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}r.d(t,{A:()=>n});const n=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=o(e))&&(n&&(n+=" "),n+=t);return n}},7578:(e,t,r)=>{"use strict";r.d(t,{O:()=>S});const o="array",n="bit",a="bits",i="byte",s="bytes",c="",l="exponent",u="function",p="iec",d="Invalid number",f="Invalid rounding method",m="jedec",h="object",v=".",g="round",y="s",b="si",k="kbit",w="kB",_=" ",E="string",R="0",C={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function S(e,{bits:t=!1,pad:r=!1,base:S=-1,round:P=2,locale:A=c,localeOptions:x={},separator:j=c,spacer:T=_,symbols:U={},standard:N=c,output:O=E,fullform:B=!1,fullforms:D=[],exponent:L=-1,roundingMethod:I=g,precision:F=0}={}){let M=L,H=Number(e),z=[],V=0,G=c;N===b?(S=10,N=m):N===p||N===m?S=2:2===S?N=p:(S=10,N=m);const q=10===S?1e3:1024,$=!0===B,J=H<0,W=Math[I];if("bigint"!=typeof e&&isNaN(e))throw new TypeError(d);if(typeof W!==u)throw new TypeError(f);if(J&&(H=-H),(-1===M||isNaN(M))&&(M=Math.floor(Math.log(H)/Math.log(q)),M<0&&(M=0)),M>8&&(F>0&&(F+=8-M),M=8),O===l)return M;if(0===H)z[0]=0,G=z[1]=C.symbol[N][t?a:s][M];else{V=H/(2===S?Math.pow(2,10*M):Math.pow(1e3,M)),t&&(V*=8,V>=q&&M<8&&(V/=q,M++));const e=Math.pow(10,M>0?P:0);z[0]=W(V*e)/e,z[0]===q&&M<8&&-1===L&&(z[0]=1,M++),G=z[1]=10===S&&1===M?t?k:w:C.symbol[N][t?a:s][M]}if(J&&(z[0]=-z[0]),F>0&&(z[0]=z[0].toPrecision(F)),z[1]=U[z[1]]||z[1],!0===A?z[0]=z[0].toLocaleString():A.length>0?z[0]=z[0].toLocaleString(A,x):j.length>0&&(z[0]=z[0].toString().replace(v,j)),r&&P>0){const e=z[0].toString(),t=j||(e.match(/(\D)/g)||[]).pop()||v,r=e.toString().split(t),o=r[1]||c,n=o.length,a=P-n;z[0]=`${r[0]}${t}${o.padEnd(n+a,R)}`}return $&&(z[1]=D[M]?D[M]:C.fullform[N][M]+(t?n:i)+(1===z[0]?c:y)),O===o?z:O===h?{value:z[0],symbol:z[1],exponent:M,unit:G}:z.join(T)}},9535:(e,t,r)=>{"use strict";r.d(t,{o4:()=>I});const o="3.7.7",n=o,a="function"==typeof Buffer,i="function"==typeof TextDecoder?new TextDecoder:void 0,s="function"==typeof TextEncoder?new TextEncoder:void 0,c=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),l=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(c),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),d="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),f=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),m=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),h=e=>{let t,r,o,n,a="";const i=e.length%3;for(let i=0;i<e.length;){if((r=e.charCodeAt(i++))>255||(o=e.charCodeAt(i++))>255||(n=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|n,a+=c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}return i?a.slice(0,i-3)+"===".substring(i):a},v="function"==typeof btoa?e=>btoa(e):a?e=>Buffer.from(e,"binary").toString("base64"):h,g=a?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,o=e.length;r<o;r+=4096)t.push(p.apply(null,e.subarray(r,r+4096)));return v(t.join(""))},y=(e,t=!1)=>t?f(g(e)):g(e),b=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t)},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=e=>e.replace(k,b),_=a?e=>Buffer.from(e,"utf8").toString("base64"):s?e=>g(s.encode(e)):e=>v(w(e)),E=(e,t=!1)=>t?f(_(e)):_(e),R=e=>E(e,!0),C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,S=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},P=e=>e.replace(C,S),A=e=>{if(e=e.replace(/\s+/g,""),!u.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,o,n="";for(let a=0;a<e.length;)t=l[e.charAt(a++)]<<18|l[e.charAt(a++)]<<12|(r=l[e.charAt(a++)])<<6|(o=l[e.charAt(a++)]),n+=64===r?p(t>>16&255):64===o?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return n},x="function"==typeof atob?e=>atob(m(e)):a?e=>Buffer.from(e,"base64").toString("binary"):A,j=a?e=>d(Buffer.from(e,"base64")):e=>d(x(e).split("").map((e=>e.charCodeAt(0)))),T=e=>j(N(e)),U=a?e=>Buffer.from(e,"base64").toString("utf8"):i?e=>i.decode(j(e)):e=>P(x(e)),N=e=>m(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),O=e=>U(N(e)),B=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),D=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,B(t));e("fromBase64",(function(){return O(this)})),e("toBase64",(function(e){return E(this,e)})),e("toBase64URI",(function(){return E(this,!0)})),e("toBase64URL",(function(){return E(this,!0)})),e("toUint8Array",(function(){return T(this)}))},L=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,B(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},I={version:o,VERSION:n,atob:x,atobPolyfill:A,btoa:v,btoaPolyfill:h,fromBase64:O,toBase64:E,encode:E,encodeURI:R,encodeURL:R,utob:w,btou:P,decode:O,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:y,toUint8Array:T,extendString:D,extendUint8Array:L,extendBuiltins:()=>{D(),L()}}},8377:e=>{"use strict";e.exports=JSON.parse('{"T":{"White":"#fff","Black":"#000","Gray 0":"#f6f7f7","Gray 5":"#dcdcde","Gray 10":"#c3c4c7","Gray 20":"#a7aaad","Gray 30":"#8c8f94","Gray 40":"#787c82","Gray 50":"#646970","Gray 60":"#50575e","Gray 70":"#3c434a","Gray 80":"#2c3338","Gray 90":"#1d2327","Gray 100":"#101517","Gray":"#646970","Blue 0":"#fbfcfe","Blue 5":"#f7f8fe","Blue 10":"#d6ddf9","Blue 20":"#adbaf3","Blue 30":"#7b90ff","Blue 40":"#546ff3","Blue 50":"#3858e9","Blue 60":"#2a46ce","Blue 70":"#1d35b4","Blue 80":"#1f3286","Blue 90":"#14215a","Blue 100":"#0a112d","Blue":"#3858e9","WordPress Blue 0":"#fbfcfe","WordPress Blue 5":"#f7f8fe","WordPress Blue 10":"#d6ddf9","WordPress Blue 20":"#adbaf3","WordPress Blue 30":"#7b90ff","WordPress Blue 40":"#546ff3","WordPress Blue 50":"#3858e9","WordPress Blue 60":"#2a46ce","WordPress Blue 70":"#1d35b4","WordPress Blue 80":"#1f3286","WordPress Blue 90":"#14215a","WordPress Blue 100":"#0a112d","WordPress Blue":"#3858e9","Purple 0":"#f2e9ed","Purple 5":"#ebcee0","Purple 10":"#e3afd5","Purple 20":"#d48fc8","Purple 30":"#c475bd","Purple 40":"#b35eb1","Purple 50":"#984a9c","Purple 60":"#7c3982","Purple 70":"#662c6e","Purple 80":"#4d2054","Purple 90":"#35163b","Purple 100":"#1e0c21","Purple":"#984a9c","Pink 0":"#f5e9ed","Pink 5":"#f2ceda","Pink 10":"#f7a8c3","Pink 20":"#f283aa","Pink 30":"#eb6594","Pink 40":"#e34c84","Pink 50":"#c9356e","Pink 60":"#ab235a","Pink 70":"#8c1749","Pink 80":"#700f3b","Pink 90":"#4f092a","Pink 100":"#260415","Pink":"#c9356e","Red 0":"#f7ebec","Red 5":"#facfd2","Red 10":"#ffabaf","Red 20":"#ff8085","Red 30":"#f86368","Red 40":"#e65054","Red 50":"#d63638","Red 60":"#b32d2e","Red 70":"#8a2424","Red 80":"#691c1c","Red 90":"#451313","Red 100":"#240a0a","Red":"#d63638","Orange 0":"#f5ece6","Orange 5":"#f7dcc6","Orange 10":"#ffbf86","Orange 20":"#faa754","Orange 30":"#e68b28","Orange 40":"#d67709","Orange 50":"#b26200","Orange 60":"#8a4d00","Orange 70":"#704000","Orange 80":"#543100","Orange 90":"#361f00","Orange 100":"#1f1200","Orange":"#b26200","Yellow 0":"#f5f1e1","Yellow 5":"#f5e6b3","Yellow 10":"#f2d76b","Yellow 20":"#f0c930","Yellow 30":"#deb100","Yellow 40":"#c08c00","Yellow 50":"#9d6e00","Yellow 60":"#7d5600","Yellow 70":"#674600","Yellow 80":"#4f3500","Yellow 90":"#320","Yellow 100":"#1c1300","Yellow":"#9d6e00","Green 0":"#e6f2e8","Green 5":"#b8e6bf","Green 10":"#68de86","Green 20":"#1ed15a","Green 30":"#00ba37","Green 40":"#00a32a","Green 50":"#008a20","Green 60":"#007017","Green 70":"#005c12","Green 80":"#00450c","Green 90":"#003008","Green 100":"#001c05","Green":"#008a20","Celadon 0":"#e4f2ed","Celadon 5":"#a7e8d3","Celadon 10":"#66deb9","Celadon 20":"#31cc9f","Celadon 30":"#09b585","Celadon 40":"#009e73","Celadon 50":"#008763","Celadon 60":"#007053","Celadon 70":"#005c44","Celadon 80":"#004533","Celadon 90":"#003024","Celadon 100":"#001c15","Celadon":"#008763","Automattic Blue 0":"#ebf4fa","Automattic Blue 5":"#c4e2f5","Automattic Blue 10":"#88ccf2","Automattic Blue 20":"#5ab7e8","Automattic Blue 30":"#24a3e0","Automattic Blue 40":"#1490c7","Automattic Blue 50":"#0277a8","Automattic Blue 60":"#036085","Automattic Blue 70":"#02506e","Automattic Blue 80":"#02384d","Automattic Blue 90":"#022836","Automattic Blue 100":"#021b24","Automattic Blue":"#24a3e0","Simplenote Blue 0":"#e9ecf5","Simplenote Blue 5":"#ced9f2","Simplenote Blue 10":"#abc1f5","Simplenote Blue 20":"#84a4f0","Simplenote Blue 30":"#618df2","Simplenote Blue 40":"#4678eb","Simplenote Blue 50":"#3361cc","Simplenote Blue 60":"#1d4fc4","Simplenote Blue 70":"#113ead","Simplenote Blue 80":"#0d2f85","Simplenote Blue 90":"#09205c","Simplenote Blue 100":"#05102e","Simplenote Blue":"#3361cc","WooCommerce Purple 0":"#f2edff","WooCommerce Purple 5":"#e1d7ff","WooCommerce Purple 10":"#d1c1ff","WooCommerce Purple 20":"#b999ff","WooCommerce Purple 30":"#a77eff","WooCommerce Purple 40":"#873eff","WooCommerce Purple 50":"#720eec","WooCommerce Purple 60":"#6108ce","WooCommerce Purple 70":"#5007aa","WooCommerce Purple 80":"#3c087e","WooCommerce Purple 90":"#2c045d","WooCommerce Purple 100":"#1f0342","WooCommerce Purple":"#720eec","Jetpack Green 0":"#f0f2eb","Jetpack Green 5":"#d0e6b8","Jetpack Green 10":"#9dd977","Jetpack Green 20":"#64ca43","Jetpack Green 30":"#2fb41f","Jetpack Green 40":"#069e08","Jetpack Green 50":"#008710","Jetpack Green 60":"#007117","Jetpack Green 70":"#005b18","Jetpack Green 80":"#004515","Jetpack Green 90":"#003010","Jetpack Green 100":"#001c09","Jetpack Green":"#069e08"}}')},5015:e=>{"use strict";e.exports=JSON.parse('{"UU":"videopress/video","DD":"VideoPress","h_":"Embed a video from your media library or upload a new one with VideoPress.","uK":{"autoplay":{"type":"boolean"},"anchor":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"caption":{"type":"string"},"controls":{"type":"boolean","default":true},"loop":{"type":"boolean"},"maxWidth":{"type":"string","default":"100%"},"muted":{"type":"boolean"},"playsinline":{"type":"boolean"},"preload":{"type":"string","default":"metadata"},"seekbarPlayedColor":{"type":"string","default":""},"seekbarLoadingColor":{"type":"string","default":""},"seekbarColor":{"type":"string","default":""},"useAverageColor":{"type":"boolean","default":true},"id":{"type":"number"},"guid":{"type":"string"},"src":{"type":"string"},"cacheHtml":{"type":"string","default":""},"poster":{"type":"string"},"posterData":{"type":"object","default":{}},"videoRatio":{"type":"number"},"tracks":{"type":"array","items":{"type":"object"},"default":[]},"privacySetting":{"type":"number","default":1},"allowDownload":{"type":"boolean","default":true},"displayEmbed":{"type":"boolean","default":true},"rating":{"type":"string"},"isPrivate":{"type":"boolean"},"isExample":{"type":"boolean","default":false},"duration":{"type":"number"}}}')}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../../../"})();r(1200)})();;
window.videoPressResumableEnabled = true;
;
(()=>{var e,t,n,o,i,a={52:function(e){var t;t=()=>(()=>{"use strict";var e=[,(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var o,i=(o="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,n,i=e;function a(){function e(e){const a=o;n=t=0,o=new Map,a.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),this.ob(),i&&i.Tb()}let t=0,n=0,o=new Map,i=null,a=null;this.requestAnimationFrame=function(i){t||(t=requestAnimationFrame(e.bind(this)));const a=++n;return o.set(a,i),a},this.cancelAnimationFrame=function(e){o.delete(e),t&&0==o.size&&(cancelAnimationFrame(t),t=0)},this.Rb=function(e){a&&(document.body.remove(a),a=null),e||(a=document.createElement("div"),a.style.backgroundColor="black",a.style.position="fixed",a.style.right=0,a.style.top=0,a.style.color="white",a.style.padding="4px",a.innerHTML="RIVE FPS",e=function(e){a.innerHTML="RIVE FPS "+e.toFixed(1)},document.body.appendChild(a)),i=new function(){let t=0,n=0;this.Tb=function(){var o=performance.now();n?(++t,1e3<(o-=n)&&(e(1e3*t/o),t=n=0)):(n=o,t=0)}}},this.Ob=function(){a&&(document.body.remove(a),a=null),i=null},this.ob=function(){}}function r(e){console.assert(!0);const t=new Map;let n=-1/0;this.push=function(o){return o=o+((1<<e)-1)>>e,t.has(o)&&clearTimeout(t.get(o)),t.set(o,setTimeout((function(){t.delete(o),0==t.length?n=-1/0:o==n&&(n=Math.max(...t.keys()),console.assert(n<o))}),1e3)),n=Math.max(o,n),n<<e}}i.ready=new Promise(((e,o)=>{t=e,n=o}));const s=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){s&&s();let e=i.decodeAudio;i.decodeAudio=function(t,n){n(t=e(t))};let t=i.decodeFont;i.decodeFont=function(e,n){n(e=t(e))};const n=i.FileAssetLoader;i.ptrToAsset=e=>{let t=i.ptrToFileAsset(e);return t.isImage?i.ptrToImageAsset(e):t.isFont?i.ptrToFontAsset(e):t.isAudio?i.ptrToAudioAsset(e):t},i.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:e}){this.__parent.__construct.call(this),this.Gb=e},loadContents:function(e,t){return e=i.ptrToAsset(e),this.Gb(e,t)}}),i.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(e){let t=i.ptrToAsset(e);return""!==(e=t.cdnUuid)&&(n=t.cdnBaseUrl+"/"+e,(o=new XMLHttpRequest).responseType="arraybuffer",o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(e=>{t.decode(new Uint8Array(e.response))})(o)},o.open("GET",n,!0),o.send(null),!0);var n,o}}),i.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(e){this.kb.push(e)},loadContents:function(e,t){for(let n of this.kb)if(n.loadContents(e,t))return!0;return!1}})};const c="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),l=new function(){function e(){if(!t){var e=document.createElement("canvas"),r={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let s;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(s=e.getContext("webgl",r),n=1,!s)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(s=e.getContext("webgl2",r))n=2;else{if(!(s=e.getContext("webgl",r)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;n=1}function c(e,t,n){if(t=s.createShader(t),s.shaderSource(t,n),s.compileShader(t),0<((n=s.getShaderInfoLog(t))||"").length)throw n;s.attachShader(e,t)}if(s=new Proxy(s,{get:(e,t)=>e.isContextLost()?(l||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",t),l=!0),"function"==typeof e[t]?function(){}:void 0):"function"==typeof e[t]?function(...n){return e[t].apply(e,n)}:e[t],set(e,t,n){if(!e.isContextLost())return e[t]=n,!0;l||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+t),l=!0)}}),o=Math.min(s.getParameter(s.MAX_RENDERBUFFER_SIZE),s.getParameter(s.MAX_TEXTURE_SIZE)),c(e=s.createProgram(),s.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),c(e,s.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),s.bindAttribLocation(e,0,"vertex"),s.bindAttribLocation(e,1,"uv"),s.linkProgram(e),0<((r=s.getProgramInfoLog(e))||"").trim().length)throw r;i=s.getUniformLocation(e,"mat"),a=s.getUniformLocation(e,"translate"),s.useProgram(e),s.bindBuffer(s.ARRAY_BUFFER,s.createBuffer()),s.enableVertexAttribArray(0),s.enableVertexAttribArray(1),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,s.createBuffer()),s.uniform1i(s.getUniformLocation(e,"image"),0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=s}return!0}let t=null,n=0,o=0,i=null,a=null,s=0,c=0,l=!1;e(),this.hc=function(){return e(),o},this.Mb=function(e){t.deleteTexture&&t.deleteTexture(e)},this.Lb=function(o){if(!e())return null;const i=t.createTexture();return i?(t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),2==n?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),i):null};const u=new r(8),d=new r(8),p=new r(10),g=new r(10);this.Qb=function(n,o,r,l,h){if(e()){var f=u.push(n),m=d.push(o);if(t.canvas){for(var y of(t.canvas.width==f&&t.canvas.height==m||(t.canvas.width=f,t.canvas.height=m),t.viewport(0,m-o,n,o),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),r.sort(((e,t)=>t.wb-e.wb)),f=p.push(l),s!=f&&(t.bufferData(t.ARRAY_BUFFER,8*f,t.DYNAMIC_DRAW),s=f),f=0,r))t.bufferSubData(t.ARRAY_BUFFER,f,y.Ta),f+=4*y.Ta.length;for(var b of(console.assert(f==4*l),r))t.bufferSubData(t.ARRAY_BUFFER,f,b.Db),f+=4*b.Db.length;for(var w of(console.assert(f==8*l),f=g.push(h),c!=f&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*f,t.DYNAMIC_DRAW),c=f),y=0,r))t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,y,w.indices),y+=2*w.indices.length;console.assert(y==2*h),w=0,b=!0,f=y=0;for(const e of r){e.image.Ka!=w&&(t.bindTexture(t.TEXTURE_2D,e.image.Ja||null),w=e.image.Ka),e.mc?(t.scissor(e.Ya,m-e.Za-e.jb,e.Ac,e.jb),b=!0):b&&(t.scissor(0,m-o,n,o),b=!1),r=2/n;const s=-2/o;t.uniform4f(i,e.ha[0]*r*e.Ba,e.ha[1]*s*e.Ca,e.ha[2]*r*e.Ba,e.ha[3]*s*e.Ca),t.uniform2f(a,e.ha[4]*r*e.Ba+r*(e.Ya-e.ic*e.Ba)-1,e.ha[5]*s*e.Ca+s*(e.Za-e.jc*e.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,f),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,f+4*l),t.drawElements(t.TRIANGLES,e.indices.length,t.UNSIGNED_SHORT,y),f+=4*e.Ta.length,y+=2*e.indices.length}console.assert(f==4*l),console.assert(y==2*h)}}},this.canvas=function(){return e()&&t.canvas}},u=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){function e(e){switch(e){case h.srcOver:return"source-over";case h.screen:return"screen";case h.overlay:return"overlay";case h.darken:return"darken";case h.lighten:return"lighten";case h.colorDodge:return"color-dodge";case h.colorBurn:return"color-burn";case h.hardLight:return"hard-light";case h.softLight:return"soft-light";case h.difference:return"difference";case h.exclusion:return"exclusion";case h.multiply:return"multiply";case h.hue:return"hue";case h.saturation:return"saturation";case h.color:return"color";case h.luminosity:return"luminosity"}}function t(e){return"rgba("+((16711680&e)>>>16)+","+((65280&e)>>>8)+","+((255&e)>>>0)+","+((4278190080&e)>>>24)/255+")"}function n(){0<C.length&&(l.Qb(x.drawWidth(),x.drawHeight(),C,S,E),C=[],E=S=0,x.reset(512,512));for(const e of _){for(const t of e.H)t();e.H=[]}_.clear()}u&&u();var o=i.RenderPaintStyle;const r=i.RenderPath,s=i.RenderPaint,d=i.Renderer,p=i.StrokeCap,g=i.StrokeJoin,h=i.BlendMode,f=o.fill,m=o.stroke,y=i.FillRule.evenOdd;let b=1;var w=i.RenderImage.extend("CanvasRenderImage",{__construct:function({la:e,xa:t}={}){this.__parent.__construct.call(this),this.Ka=b,b=b+1&2147483647||1,this.la=e,this.xa=t},__destruct:function(){this.Ja&&(l.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(e){var t=this;t.xa&&t.xa(t);var n=new Image;t.Wa=URL.createObjectURL(new Blob([e],{type:"image/png"})),n.onload=function(){t.Fb=n,t.Ja=l.Lb(n),t.size(n.width,n.height),t.la&&t.la(t)},n.src=t.Wa}}),v=r.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(e,t,n,o,i,a,r){var s=this.T,c=s.addPath;e=e.T;const l=new DOMMatrix;l.a=t,l.b=n,l.c=o,l.d=i,l.e=a,l.f=r,c.call(s,e,l)},fillRule:function(e){this.Va=e},moveTo:function(e,t){this.T.moveTo(e,t)},lineTo:function(e,t){this.T.lineTo(e,t)},cubicTo:function(e,t,n,o,i,a){this.T.bezierCurveTo(e,t,n,o,i,a)},close:function(){this.T.closePath()}}),k=s.extend("CanvasRenderPaint",{color:function(e){this.Xa=t(e)},thickness:function(e){this.Ib=e},join:function(e){switch(e){case g.miter:this.Ia="miter";break;case g.round:this.Ia="round";break;case g.bevel:this.Ia="bevel"}},cap:function(e){switch(e){case p.butt:this.Ha="butt";break;case p.round:this.Ha="round";break;case p.square:this.Ha="square"}},style:function(e){this.Hb=e},blendMode:function(t){this.Eb=e(t)},clearGradient:function(){this.ja=null},linearGradient:function(e,t,n,o){this.ja={yb:e,zb:t,bb:n,cb:o,Ra:[]}},radialGradient:function(e,t,n,o){this.ja={yb:e,zb:t,bb:n,cb:o,Ra:[],ec:!0}},addStop:function(e,t){this.ja.Ra.push({color:e,stop:t})},completeGradient:function(){},draw:function(e,n,o){let i=this.Hb;var a=this.Xa,r=this.ja;if(e.globalCompositeOperation=this.Eb,null!=r){a=r.yb;var s=r.zb;const n=r.bb;var c=r.cb;const o=r.Ra;r.ec?(r=n-a,c-=s,a=e.createRadialGradient(a,s,0,a,s,Math.sqrt(r*r+c*c))):a=e.createLinearGradient(a,s,n,c);for(let e=0,n=o.length;e<n;e++)s=o[e],a.addColorStop(s.stop,t(s.color));this.Xa=a,this.ja=null}switch(i){case m:e.strokeStyle=a,e.lineWidth=this.Ib,e.lineCap=this.Ha,e.lineJoin=this.Ia,e.stroke(n);break;case f:e.fillStyle=a,e.fill(n,o)}}});const _=new Set;let x=null,C=[],S=0,E=0;var T=i.CanvasRenderer=d.extend("Renderer",{__construct:function(e){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=e.getContext("2d"),this.Ua=e,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const e=this.S.length-6;if(6>e)throw"restore() called without matching save().";this.S.splice(e),this.H.push(this.C.restore.bind(this.C))},transform:function(e,t,n,o,i,a){const r=this.S,s=r.length-6;r.splice(s,6,r[s]*e+r[s+2]*t,r[s+1]*e+r[s+3]*t,r[s]*n+r[s+2]*o,r[s+1]*n+r[s+3]*o,r[s]*i+r[s+2]*a+r[s+4],r[s+1]*i+r[s+3]*a+r[s+5]),this.H.push(this.C.transform.bind(this.C,e,t,n,o,i,a))},rotate:function(e){const t=Math.sin(e);e=Math.cos(e),this.transform(e,t,-t,e,0,0)},_drawPath:function(e,t){this.H.push(t.draw.bind(t,this.C,e.T,e.Va===y?"evenodd":"nonzero"))},_drawRiveImage:function(t,n,o){var i=t.Fb;if(i){var a=this.C,r=e(n);this.H.push((function(){a.globalCompositeOperation=r,a.globalAlpha=o,a.drawImage(i,0,0),a.globalAlpha=1}))}},_getMatrix:function(e){const t=this.S,n=t.length-6;for(let o=0;6>o;++o)e[o]=t[n+o]},_drawImageMesh:function(t,o,a,r,s,c,u,d,p,g){var h=this.C.canvas.width,f=this.C.canvas.height;const m=p-u,y=g-d;u=Math.max(u,0),d=Math.max(d,0),p=Math.min(p,h),g=Math.min(g,f);const b=p-u,w=g-d;if(console.assert(b<=Math.min(m,h)),console.assert(w<=Math.min(y,f)),!(0>=b||0>=w)){p=b<m||w<y,h=g=1;var v=Math.ceil(b*g),k=Math.ceil(w*h);f=l.hc(),v>f&&(g*=f/v,v=f),k>f&&(h*=f/k,k=f),x||(x=new i.DynamicRectanizer(f),x.reset(512,512)),0>(f=x.addRect(v,k))&&(n(),_.add(this),f=x.addRect(v,k),console.assert(0<=f));var T=65535&f,I=f>>16;C.push({ha:this.S.slice(this.S.length-6),image:t,Ya:T,Za:I,ic:u,jc:d,Ac:v,jb:k,Ba:g,Ca:h,Ta:new Float32Array(r),Db:new Float32Array(s),indices:new Uint16Array(c),mc:p,wb:t.Ka<<1|(p?1:0)}),S+=r.length,E+=c.length;var A=this.C,P=e(o);this.H.push((function(){A.save(),A.resetTransform(),A.globalCompositeOperation=P,A.globalAlpha=a;const e=l.canvas();e&&A.drawImage(e,T,I,v,k,u,d,b,w),A.restore()}))}},_clipPath:function(e){this.H.push(this.C.clip.bind(this.C,e.T,e.Va===y?"evenodd":"nonzero"))},clear:function(){_.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(e,t){this.transform(1,0,0,1,e,t)}});i.makeRenderer=function(e){const t=new T(e),n=t.C;return new Proxy(t,{get(e,o){if("function"==typeof e[o])return function(...t){return e[o].apply(e,t)};if("function"==typeof n[o]){if(-1<c.indexOf(o))throw Error("RiveException: Method call to '"+o+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...e){t.H.push(n[o].bind(n,...e))}}return e[o]},set(e,o,i){if(o in n)return t.H.push((()=>{n[o]=i})),!0}})},i.decodeImage=function(e,t){new w({la:t}).decode(e)},i.renderFactory={makeRenderPaint:function(){return new k},makeRenderPath:function(){return new v},makeRenderImage:function(){let e=A;return new w({xa:()=>{e.total++},la:()=>{if(e.loaded++,e.loaded===e.total){const t=e.ready;t&&(t(),e.ready=null)}}})}};let I=i.load,A=null;i.load=function(e,t,n=!0){const o=new i.FallbackFileAssetLoader;return void 0!==t&&o.addLoader(t),n&&(t=new i.CDNFileAssetLoader,o.addLoader(t)),new Promise((function(t){let n=null;A={total:0,loaded:0,ready:function(){t(n)}},n=I(e,o),0==A.total&&t(n)}))},o=new a,i.requestAnimationFrame=o.requestAnimationFrame.bind(o),i.cancelAnimationFrame=o.cancelAnimationFrame.bind(o),i.enableFPSCounter=o.Rb.bind(o),i.disableFPSCounter=o.Ob,o.ob=n,i.resolveAnimationFrame=n,i.cleanup=function(){x&&x.delete()}};var d,p,g=Object.assign({},i),h="./this.program",f="object"==typeof window,m="function"==typeof importScripts,y="";(f||m)&&(m?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),o&&(y=o),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",m&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{200==o.status||0==o.status&&o.response?t(o.response):n()},o.onerror=n,o.send(null)});var b,w=i.print||console.log.bind(console),v=i.printErr||console.error.bind(console);Object.assign(i,g),g=null,i.thisProgram&&(h=i.thisProgram),i.wasmBinary&&(b=i.wasmBinary),i.noExitRuntime,"object"!=typeof WebAssembly&&H("no native wasm support detected");var k,_,x,C,S,E,T,I,A,P,M=!1;function N(){var e=k.buffer;i.HEAP8=x=new Int8Array(e),i.HEAP16=S=new Int16Array(e),i.HEAP32=T=new Int32Array(e),i.HEAPU8=C=new Uint8Array(e),i.HEAPU16=E=new Uint16Array(e),i.HEAPU32=I=new Uint32Array(e),i.HEAPF32=A=new Float32Array(e),i.HEAPF64=P=new Float64Array(e)}var O,R=[],D=[],L=[];function B(){var e=i.preRun.shift();R.unshift(e)}var F,j=0,$=null,U=null;function H(e){throw i.onAbort&&i.onAbort(e),v(e="Aborted("+e+")"),M=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function z(e){return e.startsWith("data:application/octet-stream;base64,")}if(!z(F="canvas_advanced.wasm")){var G=F;F=i.locateFile?i.locateFile(G,y):y+G}function q(e){if(e==F&&b)return new Uint8Array(b);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}function V(e,t,n){return function(e){if(!b&&(f||m)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>q(e)));if(d)return new Promise(((t,n)=>{d(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>q(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{v("failed to asynchronously prepare wasm: "+e),H(e)}))}var W,Y,K={437932:(e,t,n,o,i)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=o,window.h.ga.xb=i;let a=window.h;a.D=[],a.yc=function(e){for(var t=0;t<a.D.length;++t)if(null==a.D[t])return a.D[t]=e,t;return a.D.push(e),a.D.length-1},a.Cb=function(e){for(a.D[e]=null;0<a.D.length&&null==a.D[a.D.length-1];)a.D.pop()},a.Sc=function(e){for(var t=0;t<a.D.length;++t)if(a.D[t]==e)return a.Cb(t)},a.ra=function(e){return a.D[e]},a.Bb=["touchend","click"],a.unlock=function(){for(var e=0;e<a.D.length;++e){var t=a.D[e];null!=t&&null!=t.J&&t.state===a.ga.xb&&t.J.resume().then((()=>{Mn(t.pb)}),(e=>{console.error("Failed to resume audiocontext",e)}))}a.Bb.map((function(e){document.removeEventListener(e,a.unlock,!0)}))},a.Bb.map((function(e){document.addEventListener(e,a.unlock,!0)}))}return window.h.Aa+=1,1},440110:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},440274:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,440378:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch(e){return 0}},440549:(e,t,n,o,i,a)=>{if(void 0===window.h)return-1;var r={},s={};return e==window.h.I.ya&&0!=n&&(s.sampleRate=n),r.J=new(window.AudioContext||window.webkitAudioContext)(s),r.J.suspend(),r.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),r.Z=r.J.createScriptProcessor(o,n,t),r.Z.onaudioprocess=function(n){if(null!=r.sa&&0!=r.sa.length||(r.sa=new Float32Array(A.buffer,i,o*t)),e==window.h.I.capture||e==window.h.I.La){for(var s=0;s<t;s+=1)for(var c=n.inputBuffer.getChannelData(s),l=r.sa,u=0;u<o;u+=1)l[u*t+s]=c[u];On(a,o,i)}if(e==window.h.I.ya||e==window.h.I.La)for(Rn(a,o,i),s=0;s<n.outputBuffer.numberOfChannels;++s)for(c=n.outputBuffer.getChannelData(s),l=r.sa,u=0;u<o;u+=1)c[u]=l[u*t+s];else for(s=0;s<n.outputBuffer.numberOfChannels;++s)n.outputBuffer.getChannelData(s).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){r.Da=r.J.createMediaStreamSource(e),r.Da.connect(r.Z),r.Z.connect(r.J.destination)})).catch((function(e){console.log("Failed to get user media: "+e)})),e==window.h.I.ya&&r.Z.connect(r.J.destination),r.pb=a,window.h.yc(r)},443426:e=>window.h.ra(e).J.sampleRate,443499:e=>{void 0!==(e=window.h.ra(e)).Z&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),void 0!==e.Da&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},443899:e=>{window.h.Cb(e)},443949:e=>{(e=window.h.ra(e)).J.resume(),e.state=window.h.ga.xb},444088:e=>{(e=window.h.ra(e)).J.suspend(),e.state=window.h.ga.stopped}},J=e=>{for(;0<e.length;)e.shift()(i)},X=(e,t)=>{for(var n=0,o=e.length-1;0<=o;o--){var i=e[o];"."===i?e.splice(o,1):".."===i?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Z=e=>{var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=X(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},Q=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ee=e=>{if("/"===e)return"/";var t=(e=(e=Z(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},te=e=>(te=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);H("initRandomDevice")})())(e);function ne(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=X(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}var oe="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,ie=(e,t,n)=>{var o=t+n;for(n=t;e[n]&&!(n>=o);)++n;if(16<n-t&&e.buffer&&oe)return oe.decode(e.subarray(t,n));for(o="";t<n;){var i=e[t++];if(128&i){var a=63&e[t++];if(192==(224&i))o+=String.fromCharCode((31&i)<<6|a);else{var r=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|a<<6|r:(7&i)<<18|a<<12|r<<6|63&e[t++])?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else o+=String.fromCharCode(i)}return o},ae=[],re=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t},se=(e,t,n,o)=>{if(!(0<o))return 0;var i=n;o=n+o-1;for(var a=0;a<e.length;++a){var r=e.charCodeAt(a);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++a)),127>=r){if(n>=o)break;t[n++]=r}else{if(2047>=r){if(n+1>=o)break;t[n++]=192|r>>6}else{if(65535>=r){if(n+2>=o)break;t[n++]=224|r>>12}else{if(n+3>=o)break;t[n++]=240|r>>18,t[n++]=128|r>>12&63}t[n++]=128|r>>6&63}t[n++]=128|63&r}}return t[n]=0,n-i};function ce(e,t){var n=Array(re(e)+1);return e=se(e,n,0,n.length),t&&(n.length=e),n}var le=[];function ue(e,t){le[e]={input:[],F:[],V:t},je(e,de)}var de={open:function(e){var t=le[e.node.za];if(!t)throw new Ee(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,o){if(!e.s||!e.s.V.ib)throw new Ee(60);for(var i=0,a=0;a<o;a++){try{var r=e.s.V.ib(e.s)}catch(e){throw new Ee(29)}if(void 0===r&&0===i)throw new Ee(6);if(null==r)break;i++,t[n+a]=r}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,o){if(!e.s||!e.s.V.Oa)throw new Ee(60);try{for(var i=0;i<o;i++)e.s.V.Oa(e.s,t[n+i])}catch(e){throw new Ee(29)}return o&&(e.node.timestamp=Date.now()),i}},pe={ib:function(){e:{if(!ae.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e){e=null;break e}ae=ce(e,!0)}e=ae.shift()}return e},Oa:function(e,t){null===t||10===t?(w(ie(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(w(ie(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},ge={Oa:function(e,t){null===t||10===t?(v(ie(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(v(ie(e.F,0)),e.F=[])}};function he(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var fe,me,ye,be,we={O:null,U:()=>we.createNode(null,"/",16895,0),createNode(e,t,n,o){if(24576==(61440&n)||4096==(61440&n))throw new Ee(63);return we.O||(we.O={dir:{node:{Y:we.l.Y,P:we.l.P,ka:we.l.ka,va:we.l.va,ub:we.l.ub,Ab:we.l.Ab,vb:we.l.vb,sb:we.l.sb,Ea:we.l.Ea},stream:{ba:we.m.ba}},file:{node:{Y:we.l.Y,P:we.l.P},stream:{ba:we.m.ba,read:we.m.read,write:we.m.write,pa:we.m.pa,lb:we.m.lb,nb:we.m.nb}},link:{node:{Y:we.l.Y,P:we.l.P,ma:we.l.ma},stream:{}},$a:{node:{Y:we.l.Y,P:we.l.P},stream:Fe}}),16384==(61440&(n=Ne(e,t,n,o)).mode)?(n.l=we.O.dir.node,n.m=we.O.dir.stream,n.j={}):32768==(61440&n.mode)?(n.l=we.O.file.node,n.m=we.O.file.stream,n.v=0,n.j=null):40960==(61440&n.mode)?(n.l=we.O.link.node,n.m=we.O.link.stream):8192==(61440&n.mode)&&(n.l=we.O.$a.node,n.m=we.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc:e=>e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0),l:{Y(e){var t={};return t.Jc=8192==(61440&e.mode)?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.v:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&(t=t.size,e.v!=t))if(0==t)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Te[44]},va:(e,t,n,o)=>we.createNode(e,t,n,o),ub(e,t,n){if(16384==(61440&e.mode)){try{var o=Me(t,n)}catch(e){}if(o)for(var i in o.j)throw new Ee(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n,o=Me(e,t);for(n in o.j)throw new Ee(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t,n=[".",".."];for(t in e.j)e.j.hasOwnProperty(t)&&n.push(t);return n},Ea:(e,t,n)=>((e=we.createNode(e,t,41471,0)).link=n,e),ma(e){if(40960!=(61440&e.mode))throw new Ee(28);return e.link}},m:{read(e,t,n,o,i){var a=e.node.j;if(i>=e.node.v)return 0;if(8<(e=Math.min(e.node.v-i,o))&&a.subarray)t.set(a.subarray(i,i+e),n);else for(o=0;o<e;o++)t[n+o]=a[i+o];return e},write(e,t,n,o,i,a){if(t.buffer===x.buffer&&(a=!1),!o)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(a)return e.j=t.subarray(n,n+o),e.v=o;if(0===e.v&&0===i)return e.j=t.slice(n,n+o),e.v=o;if(i+o<=e.v)return e.j.set(t.subarray(n,n+o),i),o}if(he(e,i+o),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+o),i);else for(a=0;a<o;a++)e.j[i+a]=t[n+a];return e.v=Math.max(e.v,i+o),o},ba(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.v),0>t)throw new Ee(28);return t},pa(e,t,n){he(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,o,i){if(32768!=(61440&e.node.mode))throw new Ee(43);if(e=e.node.j,2&i||e.buffer!==x.buffer){if((0<n||n+t<e.length)&&(e=e.subarray?e.subarray(n,n+t):Array.prototype.slice.call(e,n,n+t)),n=!0,H(),!(t=void 0))throw new Ee(48);x.set(e,t)}else n=!1,t=e.byteOffset;return{o:t,M:n}},nb:(e,t,n,o)=>(we.m.write(e,t,0,o,n,!1),0)}},ve=null,ke={},_e=[],xe=1,Ce=null,Se=!0,Ee=null,Te={},Ie=(e,t={})=>{if(!(e=ne(e)))return{path:"",node:null};if(8<(t=Object.assign({gb:!0,Qa:0},t)).Qa)throw new Ee(32);e=e.split("/").filter((e=>!!e));for(var n=ve,o="/",i=0;i<e.length;i++){var a=i===e.length-1;if(a&&t.parent)break;if(n=Me(n,e[i]),o=Z(o+"/"+e[i]),n.wa&&(!a||a&&t.gb)&&(n=n.wa.root),!a||t.fb)for(a=0;40960==(61440&n.mode);)if(n=Ge(o),o=ne(Q(o),n),n=Ie(o,{Qa:t.Qa+1}).node,40<a++)throw new Ee(32)}return{path:o,node:n}},Ae=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?"/"!==e[e.length-1]?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},Pe=(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%Ce.length},Me=(e,t)=>{var n;if(n=(n=Re(e,"x"))?n:e.l.ka?0:2)throw new Ee(n,e);for(n=Ce[Pe(e.id,t)];n;n=n.lc){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return e.l.ka(e,t)},Ne=(e,t,n,o)=>(e=new Sn(e,t,n,o),t=Pe(e.parent.id,e.name),e.lc=Ce[t],Ce[t]=e),Oe=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},Re=(e,t)=>Se?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,De=(e,t)=>{try{return Me(e,t),20}catch(e){}return Re(e,"wx")},Le=e=>{if(!(e=_e[e]))throw new Ee(8);return e},Be=(e,t=-1)=>(ye||((ye=function(){this.h={}}).prototype={},Object.defineProperties(ye.prototype,{object:{get(){return this.node},set(e){this.node=e}},flags:{get(){return this.h.flags},set(e){this.h.flags=e}},position:{get(){return this.h.position},set(e){this.h.position=e}}})),e=Object.assign(new ye,e),-1==t&&(t=(()=>{for(var e=0;4096>=e;e++)if(!_e[e])return e;throw new Ee(33)})()),e.X=t,_e[t]=e),Fe={open:e=>{e.m=ke[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new Ee(70)}},je=(e,t)=>{ke[e]={m:t}},$e=(e,t)=>{var n="/"===t,o=!t;if(n&&ve)throw new Ee(10);if(!n&&!o){var i=Ie(t,{gb:!1});if(t=i.path,(i=i.node).wa)throw new Ee(10);if(16384!=(61440&i.mode))throw new Ee(54)}t={type:e,Qc:{},mb:t,kc:[]},(e=e.U(t)).U=t,t.root=e,n?ve=e:i&&(i.wa=t,i.U&&i.U.kc.push(t))},Ue=(e,t,n)=>{var o=Ie(e,{parent:!0}).node;if(!(e=ee(e))||"."===e||".."===e)throw new Ee(28);var i=De(o,e);if(i)throw new Ee(i);if(!o.l.va)throw new Ee(63);return o.l.va(o,e,t,n)},He=(e,t,n)=>{void 0===n&&(n=t,t=438),Ue(e,8192|t,n)},ze=(e,t)=>{if(!ne(e))throw new Ee(44);var n=Ie(t,{parent:!0}).node;if(!n)throw new Ee(44);t=ee(t);var o=De(n,t);if(o)throw new Ee(o);if(!n.l.Ea)throw new Ee(63);n.l.Ea(n,t,e)},Ge=e=>{if(!(e=Ie(e).node))throw new Ee(44);if(!e.l.ma)throw new Ee(28);return ne(Ae(e.parent),e.l.ma(e))},qe=(e,t,n)=>{if(""===e)throw new Ee(44);if("string"==typeof t){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(void 0===o)throw Error(`Unknown file open mode: ${t}`);t=o}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var a=e;else{e=Z(e);try{a=Ie(e,{fb:!(131072&t)}).node}catch(e){}}if(o=!1,64&t)if(a){if(128&t)throw new Ee(20)}else a=Ue(e,n,0),o=!0;if(!a)throw new Ee(44);if(8192==(61440&a.mode)&&(t&=-513),65536&t&&16384!=(61440&a.mode))throw new Ee(54);if(!o&&(n=a?40960==(61440&a.mode)?32:16384==(61440&a.mode)&&("r"!==Oe(t)||512&t)?31:Re(a,Oe(t)):44))throw new Ee(n);if(512&t&&!o){if(!(n="string"==typeof(n=a)?Ie(n,{fb:!0}).node:n).l.P)throw new Ee(63);if(16384==(61440&n.mode))throw new Ee(31);if(32768!=(61440&n.mode))throw new Ee(28);if(o=Re(n,"w"))throw new Ee(o);n.l.P(n,{size:0,timestamp:Date.now()})}return t&=-131713,(a=Be({node:a,path:Ae(a),flags:t,seekable:!0,position:0,m:a.m,zc:[],error:!1})).m.open&&a.m.open(a),!i.logReadFiles||1&t||(be||(be={}),e in be||(be[e]=1)),a},Ve=(e,t,n)=>{if(null===e.X)throw new Ee(8);if(!e.seekable||!e.m.ba)throw new Ee(70);if(0!=n&&1!=n&&2!=n)throw new Ee(28);e.position=e.m.ba(e,t,n),e.zc=[]},We=()=>{Ee||((Ee=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(e){this.aa=e},this.pc(e),this.message="FS error"}).prototype=Error(),Ee.prototype.constructor=Ee,[44].forEach((e=>{Te[e]=new Ee(e),Te[e].stack="<generic error, no stack>"})))},Ye=(e,t,n)=>{e=Z("/dev/"+e);var o=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}(!!t,!!n);me||(me=64);var i=me++<<8;je(i,{open:e=>{e.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,n,o,i)=>{for(var a=0,r=0;r<i;r++){try{var s=t()}catch(e){throw new Ee(29)}if(void 0===s&&0===a)throw new Ee(6);if(null==s)break;a++,n[o+r]=s}return a&&(e.node.timestamp=Date.now()),a},write:(e,t,o,i)=>{for(var a=0;a<i;a++)try{n(t[o+a])}catch(e){throw new Ee(29)}return i&&(e.node.timestamp=Date.now()),a}}),He(e,o,i)},Ke={},Je=void 0;function Xe(){return T[(Je+=4)-4>>2]}function Ze(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function Qe(e,t){return e=Ze(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function et(){this.M=[void 0],this.hb=[]}var tt=new et,nt=void 0;function ot(e){throw new nt(e)}var it=e=>(e||ot("Cannot use deleted val. handle = "+e),tt.get(e).value),at=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return tt.pa({tb:1,value:e})}};function rt(e){var t=Error,n=Qe(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},n}var st=void 0,ct=void 0;function lt(e){for(var t="";C[e];)t+=ct[C[e++]];return t}var ut=[];function dt(){for(;ut.length;){var e=ut.pop();e.g.fa=!1,e.delete()}}var pt=void 0,gt={};function ht(e,t){for(void 0===t&&ot("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var ft={};function mt(e){var t=lt(e=Ln(e));return An(e),t}function yt(e,t){var n=ft[e];return void 0===n&&ot(t+" has unknown type "+mt(e)),n}function bt(){}var wt=!1;function vt(e){--e.count.value,0===e.count.value&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function kt(e,t,n){return t===n?e:void 0===n.A||null===(e=kt(e,t,n.A))?null:n.Pb(e)}var _t={},xt=void 0;function Ct(e){throw new xt(e)}function St(e,t){return t.u&&t.o||Ct("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&Ct("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Et(Object.create(e,{g:{value:t}}))}function Et(e){return"undefined"==typeof FinalizationRegistry?(Et=e=>e,e):(wt=new FinalizationRegistry((e=>{vt(e.g)})),bt=e=>{wt.unregister(e)},(Et=e=>{var t=e.g;return t.G&&wt.register(e,{g:t},e),e})(e))}var Tt={};function It(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function At(e){return this.fromWireType(T[e>>2])}var Pt={},Mt={};function Nt(e,t,n){function o(t){(t=n(t)).length!==e.length&&Ct("Mismatched type converter count");for(var o=0;o<e.length;++o)Rt(e[o],t[o])}e.forEach((function(e){Mt[e]=t}));var i=Array(t.length),a=[],r=0;t.forEach(((e,t)=>{ft.hasOwnProperty(e)?i[t]=ft[e]:(a.push(e),Pt.hasOwnProperty(e)||(Pt[e]=[]),Pt[e].push((()=>{i[t]=ft[e],++r===a.length&&o(i)})))})),0===a.length&&o(i)}function Ot(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function Rt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(e,t,n={}){var o=t.name;if(e||ot(`type "${o}" must have a positive integer typeid pointer`),ft.hasOwnProperty(e)){if(n.$b)return;ot(`Cannot register type '${o}' twice`)}ft[e]=t,delete Mt[e],Pt.hasOwnProperty(e)&&(t=Pt[e],delete Pt[e],t.forEach((e=>e())))}(e,t,n)}function Dt(e){ot(e.g.u.i.name+" instance already deleted")}function Lt(){}function Bt(e,t,n){if(void 0===e[t].B){var o=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||ot(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[o.ea]=o}}function Ft(e,t,n){i.hasOwnProperty(e)?((void 0===n||void 0!==i[e].B&&void 0!==i[e].B[n])&&ot(`Cannot register public name '${e}' twice`),Bt(i,e,e),i.hasOwnProperty(n)&&ot(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),i[e].B[n]=t):(i[e]=t,void 0!==n&&(i[e].Pc=n))}function jt(e,t,n,o,i,a,r,s){this.name=e,this.constructor=t,this.N=n,this.W=o,this.A=i,this.Ub=a,this.na=r,this.Pb=s,this.qb=[]}function $t(e,t,n){for(;t!==n;)t.na||ot(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function Ut(e,t){return null===t?(this.Na&&ot(`null is not a valid ${this.name}`),0):(t.g||ot(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||ot(`Cannot pass deleted object as a pointer of type ${this.name}`),$t(t.g.o,t.g.u.i,this.i))}function Ht(e,t){if(null===t){if(this.Na&&ot(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return null!==e&&e.push(this.W,n),n}return 0}if(t.g||ot(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||ot(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&ot(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=$t(t.g.o,t.g.u.i,this.i),this.ua)switch(void 0===t.g.G&&ot("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:ot(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var o=t.clone();n=this.oc(n,at((function(){o.delete()}))),null!==e&&e.push(this.W,n)}break;default:ot("Unsupporting sharing policy")}return n}function zt(e,t){return null===t?(this.Na&&ot(`null is not a valid ${this.name}`),0):(t.g||ot(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||ot(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&ot(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),$t(t.g.o,t.g.u.i,this.i))}function Gt(e,t,n,o){this.name=e,this.i=t,this.Na=n,this.ta=o,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==t.A?this.toWireType=Ht:(this.toWireType=o?Ut:zt,this.K=null)}function qt(e,t,n){i.hasOwnProperty(e)||Ct("Replacing nonexistant public symbol"),void 0!==i[e].B&&void 0!==n?i[e].B[n]=t:(i[e]=t,i[e].ea=n)}var Vt=[],Wt=e=>{var t=Vt[e];return t||(e>=Vt.length&&(Vt.length=e+1),Vt[e]=t=O.get(e)),t};function Yt(e,t){var n=(e=lt(e)).includes("j")?((e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var o=i["dynCall_"+e];o=n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}else o=Wt(t).apply(null,n);return o}})(e,t):Wt(t);return"function"!=typeof n&&ot(`unknown function pointer with signature ${e}: ${t}`),n}var Kt=void 0;function Jt(e,t){var n=[],o={};throw t.forEach((function e(t){o[t]||ft[t]||(Mt[t]?Mt[t].forEach(e):(n.push(t),o[t]=!0))})),new Kt(`${e}: `+n.map(mt).join([", "]))}function Xt(e,t,n,o,i){var a=t.length;2>a&&ot("argTypes array size mismatch! Must at least get return value and 'this' types!");var r=null!==t[1]&&null!==n,s=!1;for(n=1;n<t.length;++n)if(null!==t[n]&&void 0===t[n].K){s=!0;break}var c="void"!==t[0].name,l=a-2,u=Array(l),d=[],p=[];return function(){if(arguments.length!==l&&ot(`function ${e} called with ${arguments.length} arguments, expected ${l} args!`),p.length=0,d.length=r?2:1,d[0]=i,r){var n=t[1].toWireType(p,this);d[1]=n}for(var a=0;a<l;++a)u[a]=t[a+2].toWireType(p,arguments[a]),d.push(u[a]);if(a=o.apply(null,d),s)It(p);else for(var g=r?1:2;g<t.length;g++){var h=1===g?n:u[g-2];null!==t[g].K&&t[g].K(h)}return c?t[0].fromWireType(a):void 0}}function Zt(e,t){for(var n=[],o=0;o<e;o++)n.push(I[t+4*o>>2]);return n}function Qt(e,t,n){return e instanceof Object||ot(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||ot(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||ot(`cannot call emscripten binding method ${n} on deleted object`),$t(e.g.o,e.g.u.i,t.i)}function en(e){e>=tt.h&&0==--tt.get(e).tb&&tt.Zb(e)}function tn(e,t,n){switch(t){case 0:return function(e){return this.fromWireType((n?x:C)[e])};case 1:return function(e){return this.fromWireType((n?S:E)[e>>1])};case 2:return function(e){return this.fromWireType((n?T:I)[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function nn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function on(e,t){switch(t){case 2:return function(e){return this.fromWireType(A[e>>2])};case 3:return function(e){return this.fromWireType(P[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function an(e,t,n){switch(t){case 0:return n?function(e){return x[e]}:function(e){return C[e]};case 1:return n?function(e){return S[e>>1]}:function(e){return E[e>>1]};case 2:return n?function(e){return T[e>>2]}:function(e){return I[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var rn="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,sn=(e,t)=>{for(var n=e>>1,o=n+t/2;!(n>=o)&&E[n];)++n;if(32<(n<<=1)-e&&rn)return rn.decode(C.subarray(e,n));for(n="",o=0;!(o>=t/2);++o){var i=S[e+2*o>>1];if(0==i)break;n+=String.fromCharCode(i)}return n},cn=(e,t,n)=>{if(void 0===n&&(n=2147483647),2>n)return 0;var o=t;n=(n-=2)<2*e.length?n/2:e.length;for(var i=0;i<n;++i)S[t>>1]=e.charCodeAt(i),t+=2;return S[t>>1]=0,t-o},ln=e=>2*e.length,un=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var i=T[e+4*n>>2];if(0==i)break;++n,65536<=i?(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|1023&i)):o+=String.fromCharCode(i)}return o},dn=(e,t,n)=>{if(void 0===n&&(n=2147483647),4>n)return 0;var o=t;n=o+n-4;for(var i=0;i<e.length;++i){var a=e.charCodeAt(i);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++i)),T[t>>2]=a,(t+=4)+4>n)break}return T[t>>2]=0,t-o},pn=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);55296<=o&&57343>=o&&++n,t+=4}return t},gn={};function hn(e){var t=gn[e];return void 0===t?lt(e):t}var fn,mn=[],yn=[],bn=[],wn={},vn=()=>{if(!fn){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(e in wn)void 0===wn[e]?delete t[e]:t[e]=wn[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);fn=n}return fn},kn=e=>0==e%4&&(0!=e%100||0==e%400),xn=[31,29,31,30,31,30,31,31,30,31,30,31],Cn=[31,28,31,30,31,30,31,31,30,31,30,31];function Sn(e,t,n,o){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=xe++,this.name=t,this.mode=n,this.l={},this.m={},this.za=o}Object.defineProperties(Sn.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),We(),Ce=Array(4096),$e(we,"/"),Ue("/tmp",16895,0),Ue("/home",16895,0),Ue("/home/web_user",16895,0),(()=>{Ue("/dev",16895,0),je(259,{read:()=>0,write:(e,t,n,o)=>o}),He("/dev/null",259),ue(1280,pe),ue(1536,ge),He("/dev/tty",1280),He("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(0===t&&(t=te(e).byteLength),e[--t]);Ye("random",n),Ye("urandom",n),Ue("/dev/shm",16895,0),Ue("/dev/shm/tmp",16895,0)})(),(()=>{Ue("/proc",16895,0);var e=Ue("/proc/self",16895,0);Ue("/proc/self/fd",16895,0),$e({U:()=>{var t=Ne(e,"fd",16895,73);return t.l={ka:(e,t)=>{var n=Le(+t);return(e={parent:null,U:{mb:"fake"},l:{ma:()=>n.path}}).parent=e}},t}},"/proc/self/fd")})(),Object.assign(et.prototype,{get(e){return this.M[e]},has(e){return void 0!==this.M[e]},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),nt=i.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},tt.M.push({value:void 0},{value:null},{value:!0},{value:!1}),tt.h=tt.M.length,i.count_emval_handles=function(){for(var e=0,t=tt.h;t<tt.M.length;++t)void 0!==tt.M[t]&&++e;return e},st=i.PureVirtualError=rt("PureVirtualError");for(var En=Array(256),Tn=0;256>Tn;++Tn)En[Tn]=String.fromCharCode(Tn);ct=En,i.getInheritedInstanceCount=function(){return Object.keys(gt).length},i.getLiveInheritedInstances=function(){var e,t=[];for(e in gt)gt.hasOwnProperty(e)&&t.push(gt[e]);return t},i.flushPendingDeletes=dt,i.setDelayFunction=function(e){pt=e,ut.length&&pt&&pt(dt)},xt=i.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Lt.prototype.isAliasOf=function(e){if(!(this instanceof Lt&&e instanceof Lt))return!1;var t=this.g.u.i,n=this.g.o,o=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;o.A;)e=o.na(e),o=o.A;return t===o&&n===e},Lt.prototype.clone=function(){if(this.g.o||Dt(this),this.g.ia)return this.g.count.value+=1,this;var e=Et,t=Object,n=t.create,o=Object.getPrototypeOf(this),i=this.g;return(e=e(n.call(t,o,{g:{value:{count:i.count,fa:i.fa,ia:i.ia,o:i.o,u:i.u,G:i.G,L:i.L}}}))).g.count.value+=1,e.g.fa=!1,e},Lt.prototype.delete=function(){this.g.o||Dt(this),this.g.fa&&!this.g.ia&&ot("Object already scheduled for deletion"),bt(this),vt(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Lt.prototype.isDeleted=function(){return!this.g.o},Lt.prototype.deleteLater=function(){return this.g.o||Dt(this),this.g.fa&&!this.g.ia&&ot("Object already scheduled for deletion"),ut.push(this),1===ut.length&&pt&&pt(dt),this.g.fa=!0,this},Gt.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},Gt.prototype.ab=function(e){this.W&&this.W(e)},Gt.prototype.argPackAdvance=8,Gt.prototype.readValueFromPointer=At,Gt.prototype.deleteObject=function(e){null!==e&&e.delete()},Gt.prototype.fromWireType=function(e){function t(){return this.ua?St(this.i.N,{u:this.nc,o:n,L:this,G:e}):St(this.i.N,{u:this,o:e})}var n=this.Vb(e);if(!n)return this.ab(e),null;var o=function(e,t){return t=ht(e,t),gt[t]}(this.i,n);if(void 0!==o)return 0===o.g.count.value?(o.g.o=n,o.g.G=e,o.clone()):(o=o.clone(),this.ab(e),o);if(o=this.i.Ub(n),!(o=_t[o]))return t.call(this);o=this.ta?o.Kb:o.pointerType;var i=kt(n,this.i,o.i);return null===i?t.call(this):this.ua?St(o.i.N,{u:o,o:i,L:this,G:e}):St(o.i.N,{u:o,o:i})},Kt=i.UnboundTypeError=rt("UnboundTypeError");var In={__syscall_fcntl64:function(e,t,n){Je=n;try{var o=Le(e);switch(t){case 0:var i=Xe();return 0>i?-28:Be(o,i).X;case 1:case 2:case 6:case 7:return 0;case 3:return o.flags;case 4:return i=Xe(),o.flags|=i,0;case 5:return i=Xe(),S[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return T[Dn()>>2]=28,-1}}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_ioctl:function(e,t,n){Je=n;try{var o=Le(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return o.s?0:-59;case 21505:if(!o.s)return-59;if(o.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i=Xe();T[i>>2]=25856,T[i+4>>2]=5,T[i+8>>2]=191,T[i+12>>2]=35387;for(var a=0;32>a;a++)x[i+a+17|0]=t[a]||0}return 0;case 21506:case 21507:case 21508:if(!o.s)return-59;if(o.s.V.cc)for(i=Xe(),t=[],a=0;32>a;a++)t.push(x[i+a+17|0]);return 0;case 21519:return o.s?(i=Xe(),T[i>>2]=0):-59;case 21520:return o.s?-28:-59;case 21531:if(i=Xe(),!o.m.ac)throw new Ee(59);return o.m.ac(o,t,i);case 21523:return o.s?(o.s.V.dc&&(a=[24,80],i=Xe(),S[i>>1]=a[0],S[i+2>>1]=a[1]),0):-59;default:return-28}}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_openat:function(e,t,n,o){Je=o;try{var i=t=t?ie(C,t):"";if("/"===i.charAt(0))t=i;else{var a=-100===e?"/":Le(e).path;if(0==i.length)throw new Ee(44);t=Z(a+"/"+i)}var r=o?Xe():0;return qe(t,n,r).X}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return-e.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=lt(e),t=yt(t,"wrapper"),n=it(n);var o=[].slice,i=t.i,a=i.N,r=i.A.N,s=i.A.constructor;for(var c in e=Qe(e,(function(){i.A.qb.forEach(function(e){if(this[e]===r[e])throw new st(`Pure virtual function ${e} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:a}),this.__construct.apply(this,o.call(arguments))})),a.__construct=function(){this===a&&ot("Pass correct 'this' to __construct");var e=s.implement.apply(void 0,[this].concat(o.call(arguments)));bt(e);var t=e.g;e.notifyOnDestruction(),t.ia=!0,Object.defineProperties(this,{g:{value:t}}),Et(this),e=t.o,e=ht(i,e),gt.hasOwnProperty(e)?ot(`Tried to register registered instance: ${e}`):gt[e]=this},a.__destruct=function(){this===a&&ot("Pass correct 'this' to __destruct"),bt(this);var e=this.g.o;e=ht(i,e),gt.hasOwnProperty(e)?delete gt[e]:ot(`Tried to unregister unregistered instance: ${e}`)},e.prototype=Object.create(a),n)e.prototype[c]=n[c];return at(e)},_embind_finalize_value_object:function(e){var t=Tt[e];delete Tt[e];var n=t.Pa,o=t.W,i=t.eb;Nt([e],i.map((e=>e.Yb)).concat(i.map((e=>e.rc))),(e=>{var a={};return i.forEach(((t,n)=>{var o=e[n],r=t.Wb,s=t.Xb,c=e[n+i.length],l=t.qc,u=t.sc;a[t.Sb]={read:e=>o.fromWireType(r(s,e)),write:(e,t)=>{var n=[];l(u,e,c.toWireType(n,t)),It(n)}}})),[{name:t.name,fromWireType:function(e){var t,n={};for(t in a)n[t]=a[t].read(e);return o(e),n},toWireType:function(e,t){for(var i in a)if(!(i in t))throw new TypeError(`Missing field: "${i}"`);var r=n();for(i in a)a[i].write(r,t[i]);return null!==e&&e.push(o,r),r},argPackAdvance:8,readValueFromPointer:At,K:o}]}))},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,o,i){var a=Ot(n);Rt(e,{name:t=lt(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?o:i},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var o=x;else if(2===n)o=S;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);o=T}return this.fromWireType(o[e>>a])},K:null})},_embind_register_class:function(e,t,n,o,i,a,r,s,c,l,u,d,p){u=lt(u),a=Yt(i,a),s&&(s=Yt(r,s)),l&&(l=Yt(c,l)),p=Yt(d,p);var g=Ze(u);Ft(g,(function(){Jt(`Cannot construct ${u} due to unbound types`,[o])})),Nt([e,t,n],o?[o]:[],(function(t){if(t=t[0],o)var n=t.i,i=n.N;else i=Lt.prototype;t=Qe(g,(function(){if(Object.getPrototypeOf(this)!==r)throw new nt("Use 'new' to construct "+u);if(void 0===c.$)throw new nt(u+" has no accessible constructor");var e=c.$[arguments.length];if(void 0===e)throw new nt(`Tried to invoke ctor of ${u} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(c.$).toString()}) parameters instead!`);return e.apply(this,arguments)}));var r=Object.create(i,{constructor:{value:t}});t.prototype=r;var c=new jt(u,t,r,p,n,a,s,l);c.A&&(void 0===c.A.oa&&(c.A.oa=[]),c.A.oa.push(c)),n=new Gt(u,c,!0,!1),i=new Gt(u+"*",c,!1,!1);var d=new Gt(u+" const*",c,!1,!0);return _t[e]={pointerType:i,Kb:d},qt(g,t),[n,i,d]}))},_embind_register_class_class_function:function(e,t,n,o,i,a,r){var s=Zt(n,o);t=lt(t),a=Yt(i,a),Nt([],[e],(function(e){function o(){Jt(`Cannot call ${i} due to unbound types`,s)}var i=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.i.constructor;return void 0===c[t]?(o.ea=n-1,c[t]=o):(Bt(c,t,i),c[t].B[n-1]=o),Nt([],s,(function(o){if(o=Xt(i,[o[0],null].concat(o.slice(1)),null,a,r),void 0===c[t].B?(o.ea=n-1,c[t]=o):c[t].B[n-1]=o,e.i.oa)for(const n of e.i.oa)n.constructor.hasOwnProperty(t)||(n.constructor[t]=o);return[]})),[]}))},_embind_register_class_class_property:function(e,t,n,o,i,a,r,s){t=lt(t),a=Yt(i,a),Nt([],[e],(function(e){var i=`${(e=e[0]).name}.${t}`,c={get(){Jt(`Cannot access ${i} due to unbound types`,[n])},enumerable:!0,configurable:!0};return c.set=s?()=>{Jt(`Cannot access ${i} due to unbound types`,[n])}:()=>{ot(`${i} is a read-only property`)},Object.defineProperty(e.i.constructor,t,c),Nt([],[n],(function(n){n=n[0];var i={get:()=>n.fromWireType(a(o)),enumerable:!0};return s&&(s=Yt(r,s),i.set=e=>{var t=[];s(o,n.toWireType(t,e)),It(t)}),Object.defineProperty(e.i.constructor,t,i),[]})),[]}))},_embind_register_class_constructor:function(e,t,n,o,i,a){var r=Zt(t,n);i=Yt(o,i),Nt([],[e],(function(e){var n=`constructor ${(e=e[0]).name}`;if(void 0===e.i.$&&(e.i.$=[]),void 0!==e.i.$[t-1])throw new nt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.i.$[t-1]=()=>{Jt(`Cannot construct ${e.name} due to unbound types`,r)},Nt([],r,(function(o){return o.splice(1,0,null),e.i.$[t-1]=Xt(n,o,null,i,a),[]})),[]}))},_embind_register_class_function:function(e,t,n,o,i,a,r,s){var c=Zt(n,o);t=lt(t),a=Yt(i,a),Nt([],[e],(function(e){function o(){Jt(`Cannot call ${i} due to unbound types`,c)}var i=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.i.qb.push(t);var l=e.i.N,u=l[t];return void 0===u||void 0===u.B&&u.className!==e.name&&u.ea===n-2?(o.ea=n-2,o.className=e.name,l[t]=o):(Bt(l,t,i),l[t].B[n-2]=o),Nt([],c,(function(o){return o=Xt(i,o,e,a,r),void 0===l[t].B?(o.ea=n-2,l[t]=o):l[t].B[n-2]=o,[]})),[]}))},_embind_register_class_property:function(e,t,n,o,i,a,r,s,c,l){t=lt(t),i=Yt(o,i),Nt([],[e],(function(e){var o=`${(e=e[0]).name}.${t}`,u={get(){Jt(`Cannot access ${o} due to unbound types`,[n,r])},enumerable:!0,configurable:!0};return u.set=c?()=>{Jt(`Cannot access ${o} due to unbound types`,[n,r])}:()=>{ot(o+" is a read-only property")},Object.defineProperty(e.i.N,t,u),Nt([],c?[n,r]:[n],(function(n){var r=n[0],u={get(){var t=Qt(this,e,o+" getter");return r.fromWireType(i(a,t))},enumerable:!0};if(c){c=Yt(s,c);var d=n[1];u.set=function(t){var n=Qt(this,e,o+" setter"),i=[];c(l,n,d.toWireType(i,t)),It(i)}}return Object.defineProperty(e.i.N,t,u),[]})),[]}))},_embind_register_emval:function(e,t){Rt(e,{name:t=lt(t),fromWireType:function(e){var t=it(e);return en(e),t},toWireType:function(e,t){return at(t)},argPackAdvance:8,readValueFromPointer:At,K:null})},_embind_register_enum:function(e,t,n,o){function i(){}n=Ot(n),t=lt(t),i.values={},Rt(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:tn(t,n,o),K:null}),Ft(t,i)},_embind_register_enum_value:function(e,t,n){var o=yt(e,"enum");t=lt(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:Qe(`${o.name}_${t}`,(function(){}))}}),e.values[n]=o,e[t]=o},_embind_register_float:function(e,t,n){n=Ot(n),Rt(e,{name:t=lt(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:on(t,n),K:null})},_embind_register_function:function(e,t,n,o,i,a){var r=Zt(t,n);e=lt(e),i=Yt(o,i),Ft(e,(function(){Jt(`Cannot call ${e} due to unbound types`,r)}),t-1),Nt([],r,(function(n){return qt(e,Xt(e,[n[0],null].concat(n.slice(1)),null,i,a),t-1),[]}))},_embind_register_integer:function(e,t,n,o,i){t=lt(t),-1===i&&(i=4294967295),i=Ot(n);var a=e=>e;if(0===o){var r=32-8*n;a=e=>e<<r>>>r}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},Rt(e,{name:t,fromWireType:a,toWireType:n,argPackAdvance:8,readValueFromPointer:an(t,i,0!==o),K:null})},_embind_register_memory_view:function(e,t,n){function o(e){e>>=2;var t=I;return new i(t.buffer,t[e+1],t[e])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];Rt(e,{name:n=lt(n),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{$b:!0})},_embind_register_std_string:function(e,t){var n="std::string"===(t=lt(t));Rt(e,{name:t,fromWireType:function(e){var t=I[e>>2],o=e+4;if(n)for(var i=o,a=0;a<=t;++a){var r=o+a;if(a==t||0==C[r]){if(i=i?ie(C,i,r-i):"",void 0===s)var s=i;else s+=String.fromCharCode(0),s+=i;i=r+1}}else{for(s=Array(t),a=0;a<t;++a)s[a]=String.fromCharCode(C[o+a]);s=s.join("")}return An(e),s},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ot("Cannot pass non-string to std::string");var i=n&&o?re(t):t.length,a=Pn(4+i+1),r=a+4;if(I[a>>2]=i,n&&o)se(t,C,r,i+1);else if(o)for(o=0;o<i;++o){var s=t.charCodeAt(o);255<s&&(An(r),ot("String has UTF-16 code units that do not fit in 8 bits")),C[r+o]=s}else for(o=0;o<i;++o)C[r+o]=t[o];return null!==e&&e.push(An,a),a},argPackAdvance:8,readValueFromPointer:At,K:function(e){An(e)}})},_embind_register_std_wstring:function(e,t,n){if(n=lt(n),2===t)var o=sn,i=cn,a=ln,r=()=>E,s=1;else 4===t&&(o=un,i=dn,a=pn,r=()=>I,s=2);Rt(e,{name:n,fromWireType:function(e){for(var n,i=I[e>>2],a=r(),c=e+4,l=0;l<=i;++l){var u=e+4+l*t;l!=i&&0!=a[u>>s]||(c=o(c,u-c),void 0===n?n=c:(n+=String.fromCharCode(0),n+=c),c=u+t)}return An(e),n},toWireType:function(e,o){"string"!=typeof o&&ot(`Cannot pass non-string to C++ string type ${n}`);var r=a(o),c=Pn(4+r+t);return I[c>>2]=r>>s,i(o,c+4,r+t),null!==e&&e.push(An,c),c},argPackAdvance:8,readValueFromPointer:At,K:function(e){An(e)}})},_embind_register_value_object:function(e,t,n,o,i,a){Tt[e]={name:lt(t),Pa:Yt(n,o),W:Yt(i,a),eb:[]}},_embind_register_value_object_field:function(e,t,n,o,i,a,r,s,c,l){Tt[e].eb.push({Sb:lt(t),Yb:n,Wb:Yt(o,i),Xb:a,rc:r,qc:Yt(s,c),sc:l})},_embind_register_void:function(e,t){Rt(e,{fc:!0,name:t=lt(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=it(e),t=yt(t,"emval::as");var o=[],i=at(o);return I[n>>2]=i,t.toWireType(o,e)},_emval_call_method:function(e,t,n,o,i){e=mn[e],t=it(t),n=hn(n);var a=[];return I[o>>2]=at(a),e(t,n,a,i)},_emval_call_void_method:function(e,t,n,o){(e=mn[e])(t=it(t),n=hn(n),null,o)},_emval_decref:en,_emval_get_method_caller:function(e,t){var n=function(e,t){for(var n=Array(e),o=0;o<e;++o)n[o]=yt(I[t+4*o>>2],"parameter "+o);return n}(e,t),o=n[0];t=o.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var i=yn[t];if(void 0!==i)return i;var a=Array(e-1);return i=function(e){var t=mn.length;return mn.push(e),t}(((t,i,r,s)=>{for(var c=0,l=0;l<e-1;++l)a[l]=n[l+1].readValueFromPointer(s+c),c+=n[l+1].argPackAdvance;for(t=t[i].apply(t,a),l=0;l<e-1;++l)n[l+1].Nb&&n[l+1].Nb(a[l]);if(!o.fc)return o.toWireType(r,t)})),yn[t]=i},_emval_get_module_property:function(e){return e=hn(e),at(i[e])},_emval_get_property:function(e,t){return e=it(e),t=it(t),at(e[t])},_emval_incref:function(e){4<e&&(tt.get(e).tb+=1)},_emval_new_cstring:function(e){return at(hn(e))},_emval_new_object:function(){return at({})},_emval_run_destructors:function(e){It(it(e)),en(e)},_emval_set_property:function(e,t,n){e=it(e),t=it(t),n=it(n),e[t]=n},_emval_take_value:function(e,t){return e=(e=yt(e,"_emval_take_value")).readValueFromPointer(t),at(e)},abort:()=>{H("")},emscripten_asm_const_int:(e,t,n)=>{var o;for(bn.length=0,n>>=2;o=C[t++];)n+=105!=o&n,bn.push(105==o?T[n]:P[n++>>1]),++n;return K[e].apply(null,bn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>C.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=C.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var i=Math;o=Math.max(e,o);e:{i=i.min.call(i,2147483648,o+(65536-o%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(i),N();var a=1;break e}catch(e){}a=void 0}if(a)return!0}return!1},environ_get:(e,t)=>{var n=0;return vn().forEach((function(o,i){var a=t+n;for(i=I[e+4*i>>2]=a,a=0;a<o.length;++a)x[0|i++]=o.charCodeAt(a);x[0|i]=0,n+=o.length+1})),0},environ_sizes_get:(e,t)=>{var n=vn();I[e>>2]=n.length;var o=0;return n.forEach((function(e){o+=e.length+1})),I[t>>2]=o,0},fd_close:function(e){try{var t=Le(e);if(null===t.X)throw new Ee(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(e){throw e}finally{_e[t.X]=null}return t.X=null,0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},fd_read:function(e,t,n,o){try{e:{var i=Le(e);e=t;for(var a,r=t=0;r<n;r++){var s=I[e>>2],c=I[e+4>>2];e+=8;var l=i,u=s,d=c,p=a,g=x;if(0>d||0>p)throw new Ee(28);if(null===l.X)throw new Ee(8);if(1==(2097155&l.flags))throw new Ee(8);if(16384==(61440&l.node.mode))throw new Ee(31);if(!l.m.read)throw new Ee(28);var h=void 0!==p;if(h){if(!l.seekable)throw new Ee(70)}else p=l.position;var f=l.m.read(l,g,u,d,p);h||(l.position+=f);var m=f;if(0>m){var y=-1;break e}if(t+=m,m<c)break;void 0!==a&&(a+=m)}y=t}return I[o>>2]=y,0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},fd_seek:function(e,t,n,o,i){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN;try{if(isNaN(t))return 61;var a=Le(e);return Ve(a,t,o),Y=[a.position>>>0,(W=a.position,1<=+Math.abs(W)?0<W?+Math.floor(W/4294967296)>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],T[i>>2]=Y[0],T[i+4>>2]=Y[1],a.Ma&&0===t&&0===o&&(a.Ma=null),0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},fd_write:function(e,t,n,o){try{e:{var i=Le(e);e=t;for(var a,r=t=0;r<n;r++){var s=I[e>>2],c=I[e+4>>2];e+=8;var l=i,u=s,d=c,p=a,g=x;if(0>d||0>p)throw new Ee(28);if(null===l.X)throw new Ee(8);if(!(2097155&l.flags))throw new Ee(8);if(16384==(61440&l.node.mode))throw new Ee(31);if(!l.m.write)throw new Ee(28);l.seekable&&1024&l.flags&&Ve(l,0,2);var h=void 0!==p;if(h){if(!l.seekable)throw new Ee(70)}else p=l.position;var f=l.m.write(l,g,u,d,p,void 0);h||(l.position+=f);var m=f;if(0>m){var y=-1;break e}t+=m,void 0!==a&&(a+=m)}y=t}return I[o>>2]=y,0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},strftime_l:(e,t,n,o)=>((e,t,n,o)=>{function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function a(e,t){return i(e,t,"0")}function r(e,t){function n(e){return 0>e?-1:0<e?1:0}var o;return 0===(o=n(e.getFullYear()-t.getFullYear()))&&0===(o=n(e.getMonth()-t.getMonth()))&&(o=n(e.getDate()-t.getDate())),o}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.ca;for(e=new Date(new Date(e.da+1900,0,1).getTime());0<t;){var n=e.getMonth(),o=(kn(e.getFullYear())?xn:Cn)[n];if(!(t>o-e.getDate())){e.setDate(e.getDate()+t);break}t-=o-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),n=s(n),0>=r(t,e)?0>=r(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=T[o+40>>2];for(var u in o={wc:T[o>>2],vc:T[o+4>>2],Fa:T[o+8>>2],Sa:T[o+12>>2],Ga:T[o+16>>2],da:T[o+20>>2],R:T[o+24>>2],ca:T[o+28>>2],Rc:T[o+32>>2],uc:T[o+36>>2],xc:l&&l?ie(C,l):""},n=n?ie(C,n):"",l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(u,"g"),l[u]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(u in l={"%a":e=>d[e.R].substring(0,3),"%A":e=>d[e.R],"%b":e=>p[e.Ga].substring(0,3),"%B":e=>p[e.Ga],"%C":e=>a((e.da+1900)/100|0,2),"%d":e=>a(e.Sa,2),"%e":e=>i(e.Sa,2," "),"%g":e=>c(e).toString().substring(2),"%G":e=>c(e),"%H":e=>a(e.Fa,2),"%I":e=>(0==(e=e.Fa)?e=12:12<e&&(e-=12),a(e,2)),"%j":e=>{for(var t=0,n=0;n<=e.Ga-1;t+=(kn(e.da+1900)?xn:Cn)[n++]);return a(e.Sa+t,3)},"%m":e=>a(e.Ga+1,2),"%M":e=>a(e.vc,2),"%n":()=>"\n","%p":e=>0<=e.Fa&&12>e.Fa?"AM":"PM","%S":e=>a(e.wc,2),"%t":()=>"\t","%u":e=>e.R||7,"%U":e=>a(Math.floor((e.ca+7-e.R)/7),2),"%V":e=>{var t=Math.floor((e.ca+7-(e.R+6)%7)/7);if(2>=(e.R+371-e.ca-2)%7&&t++,t)53==t&&(4==(n=(e.R+371-e.ca)%7)||3==n&&kn(e.da)||(t=1));else{t=52;var n=(e.R+7-e.ca-1)%7;(4==n||5==n&&kn(e.da%400-1))&&t++}return a(t,2)},"%w":e=>e.R,"%W":e=>a(Math.floor((e.ca+7-(e.R+6)%7)/7),2),"%y":e=>(e.da+1900).toString().substring(2),"%Y":e=>e.da+1900,"%z":e=>{var t=0<=(e=e.uc);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),l)n.includes(u)&&(n=n.replace(new RegExp(u,"g"),l[u](o)));return(u=ce(n=n.replace(/\0\0/g,"%"),!1)).length>t?0:(x.set(u,e),u.length-1)})(e,t,n,o)};!function(){function e(e){if(_=e=e.exports,k=_.memory,N(),O=_.__indirect_function_table,D.unshift(_.__wasm_call_ctors),j--,i.monitorRunDependencies&&i.monitorRunDependencies(j),0==j&&(null!==$&&(clearInterval($),$=null),U)){var t=U;U=null,t()}return e}var t={env:In,wasi_snapshot_preview1:In};if(j++,i.monitorRunDependencies&&i.monitorRunDependencies(j),i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(e){v("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var n=F;return b||"function"!=typeof WebAssembly.instantiateStreaming||z(n)||n.startsWith("file://")||"function"!=typeof fetch?V(n,e,t):fetch(n,{credentials:"same-origin"}).then((o=>WebAssembly.instantiateStreaming(o,e).then(t,(function(o){return v("wasm streaming compile failed: "+o),v("falling back to ArrayBuffer instantiation"),V(n,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}();var An=e=>(An=_.free)(e),Pn=e=>(Pn=_.malloc)(e),Mn=i._ma_device__on_notification_unlocked=e=>(Mn=i._ma_device__on_notification_unlocked=_.ma_device__on_notification_unlocked)(e);i._ma_malloc_emscripten=(e,t)=>(i._ma_malloc_emscripten=_.ma_malloc_emscripten)(e,t),i._ma_free_emscripten=(e,t)=>(i._ma_free_emscripten=_.ma_free_emscripten)(e,t);var Nn,On=i._ma_device_process_pcm_frames_capture__webaudio=(e,t,n)=>(On=i._ma_device_process_pcm_frames_capture__webaudio=_.ma_device_process_pcm_frames_capture__webaudio)(e,t,n),Rn=i._ma_device_process_pcm_frames_playback__webaudio=(e,t,n)=>(Rn=i._ma_device_process_pcm_frames_playback__webaudio=_.ma_device_process_pcm_frames_playback__webaudio)(e,t,n),Dn=()=>(Dn=_.__errno_location)(),Ln=e=>(Ln=_.__getTypeName)(e);function Bn(){function e(){if(!Nn&&(Nn=!0,i.calledRun=!0,!M)){if(i.noFSInit||fe||(fe=!0,We(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?Ye("stdin",i.stdin):ze("/dev/tty","/dev/stdin"),i.stdout?Ye("stdout",null,i.stdout):ze("/dev/tty","/dev/stdout"),i.stderr?Ye("stderr",null,i.stderr):ze("/dev/tty1","/dev/stderr"),qe("/dev/stdin",0),qe("/dev/stdout",1),qe("/dev/stderr",1)),Se=!1,J(D),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();L.unshift(e)}J(L)}}if(!(0<j)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)B();J(R),0<j||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e())}}if(i.__embind_initialize_bindings=()=>(i.__embind_initialize_bindings=_._embind_initialize_bindings)(),i.dynCall_iiji=(e,t,n,o,a)=>(i.dynCall_iiji=_.dynCall_iiji)(e,t,n,o,a),i.dynCall_jiji=(e,t,n,o,a)=>(i.dynCall_jiji=_.dynCall_jiji)(e,t,n,o,a),i.dynCall_iiiji=(e,t,n,o,a,r)=>(i.dynCall_iiiji=_.dynCall_iiiji)(e,t,n,o,a,r),i.dynCall_iij=(e,t,n,o)=>(i.dynCall_iij=_.dynCall_iij)(e,t,n,o),i.dynCall_jii=(e,t,n)=>(i.dynCall_jii=_.dynCall_jii)(e,t,n),i.dynCall_viijii=(e,t,n,o,a,r,s)=>(i.dynCall_viijii=_.dynCall_viijii)(e,t,n,o,a,r,s),i.dynCall_iiiiij=(e,t,n,o,a,r,s)=>(i.dynCall_iiiiij=_.dynCall_iiiiij)(e,t,n,o,a,r,s),i.dynCall_iiiiijj=(e,t,n,o,a,r,s,c,l)=>(i.dynCall_iiiiijj=_.dynCall_iiiiijj)(e,t,n,o,a,r,s,c,l),i.dynCall_iiiiiijj=(e,t,n,o,a,r,s,c,l,u)=>(i.dynCall_iiiiiijj=_.dynCall_iiiiiijj)(e,t,n,o,a,r,s,c,l,u),U=function e(){Nn||Bn(),Nn||(U=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Bn(),e.ready});const a=i},e=>{e.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.21.6","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>o.Animation});var o=n(4)},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>o});var o=function(){function e(e,t,n,o){this.animation=e,this.artboard=t,this.playing=o,this.loopCount=0,this.scrubTo=null,this.instance=new n.LinearAnimationInstance(e,t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.instance.time},set:function(e){this.instance.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){null===this.scrubTo?this.instance.advance(e):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},e.prototype.apply=function(e){this.instance.apply(e)},e.prototype.cleanup=function(){this.instance.delete()},e}()},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>i.BLANK_URL,registerTouchInteractions:()=>o.registerTouchInteractions,sanitizeUrl:()=>i.sanitizeUrl});var o=n(6),i=n(7)},(e,t,n)=>{n.r(t),n.d(t,{registerTouchInteractions:()=>o});var o=function(e){var t=e.canvas,n=e.artboard,o=e.stateMachines,i=void 0===o?[]:o,a=e.renderer,r=e.rive,s=e.fit,c=e.alignment,l=e.isTouchScrollEnabled,u=void 0!==l&&l;if(!(t&&i.length&&a&&r&&n&&"undefined"!=typeof window))return null;var d=null,p=!1,g=function(e){if(p&&e instanceof MouseEvent)"mouseup"==e.type&&(p=!1);else{p=u&&"touchend"===e.type&&"touchstart"===d,d=e.type;var t=e.currentTarget.getBoundingClientRect(),o=function(e,t){var n,o;return["touchstart","touchmove"].indexOf(e.type)>-1&&(null===(n=e.touches)||void 0===n?void 0:n.length)?(t||e.preventDefault(),{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):"touchend"===e.type&&(null===(o=e.changedTouches)||void 0===o?void 0:o.length)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}(e,u),a=o.clientX,l=o.clientY;if(a||l){var g=a-t.left,h=l-t.top,f=r.computeAlignment(s,c,{minX:0,minY:0,maxX:t.width,maxY:t.height},n.bounds),m=new r.Mat2D;f.invert(m);var y=new r.Vec2D(g,h),b=r.mapXY(m,y),w=b.x(),v=b.y();switch(b.delete(),m.delete(),y.delete(),f.delete(),e.type){case"mouseout":for(var k=0,_=i;k<_.length;k++)_[k].pointerMove(w<0?w-1e4:w+1e4,v<0?v-1e4:v+1e4);break;case"touchmove":case"mouseover":case"mousemove":for(var x=0,C=i;x<C.length;x++)C[x].pointerMove(w,v);break;case"touchstart":case"mousedown":for(var S=0,E=i;S<E.length;S++)E[S].pointerDown(w,v);break;case"touchend":case"mouseup":for(var T=0,I=i;T<I.length;T++)I[T].pointerUp(w,v)}}}}.bind(void 0);return t.addEventListener("mouseover",g),t.addEventListener("mouseout",g),t.addEventListener("mousemove",g),t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("touchmove",g,{passive:u}),t.addEventListener("touchstart",g,{passive:u}),t.addEventListener("touchend",g),function(){t.removeEventListener("mouseover",g),t.removeEventListener("mouseout",g),t.removeEventListener("mousemove",g),t.removeEventListener("mousedown",g),t.removeEventListener("mouseup",g),t.removeEventListener("touchmove",g),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",g)}}},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>l,sanitizeUrl:()=>u});var o=/^([^\w]*)(javascript|data|vbscript)/im,i=/&#(\w+)(^\w|;)?/g,a=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,s=/^.+(:|&colon;)/gim,c=[".","/"],l="about:blank";function u(e){if(!e)return l;var t,n=(t=e,t.replace(r,"").replace(i,(function(e,t){return String.fromCharCode(t)}))).replace(a,"").replace(r,"").trim();if(!n)return l;if(function(e){return c.indexOf(e[0])>-1}(n))return n;var u=n.match(s);if(!u)return n;var d=u[0];return o.test(d)?l:n}}],t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{Alignment:()=>i,EventType:()=>y,Fit:()=>t,Layout:()=>g,LoopType:()=>b,Rive:()=>P,RiveEventType:()=>f,RiveFile:()=>A,RuntimeLoader:()=>h,StateMachineInput:()=>m,StateMachineInputType:()=>p,Testing:()=>O,decodeAudio:()=>R,decodeFont:()=>L,decodeImage:()=>D});var e,t,i,a=n(1),r=n(2),s=n(3),c=n(5),l=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}),u=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((o=o.apply(e,t||[])).next())}))},d=function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};!function(e){e.Cover="cover",e.Contain="contain",e.Fill="fill",e.FitWidth="fitWidth",e.FitHeight="fitHeight",e.None="none",e.ScaleDown="scaleDown"}(t||(t={})),function(e){e.Center="center",e.TopLeft="topLeft",e.TopCenter="topCenter",e.TopRight="topRight",e.CenterLeft="centerLeft",e.CenterRight="centerRight",e.BottomLeft="bottomLeft",e.BottomCenter="bottomCenter",e.BottomRight="bottomRight"}(i||(i={}));var p,g=function(){function e(e){var n,o,a,r,s,c;this.fit=null!==(n=null==e?void 0:e.fit)&&void 0!==n?n:t.Contain,this.alignment=null!==(o=null==e?void 0:e.alignment)&&void 0!==o?o:i.Center,this.minX=null!==(a=null==e?void 0:e.minX)&&void 0!==a?a:0,this.minY=null!==(r=null==e?void 0:e.minY)&&void 0!==r?r:0,this.maxX=null!==(s=null==e?void 0:e.maxX)&&void 0!==s?s:0,this.maxY=null!==(c=null==e?void 0:e.maxY)&&void 0!==c?c:0}return e.new=function(t){var n=t.fit,o=t.alignment,i=t.minX,a=t.minY,r=t.maxX,s=t.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new e({fit:n,alignment:o,minX:i,minY:a,maxX:r,maxY:s})},e.prototype.copyWith=function(t){var n=t.fit,o=t.alignment,i=t.minX,a=t.minY,r=t.maxX,s=t.maxY;return new e({fit:null!=n?n:this.fit,alignment:null!=o?o:this.alignment,minX:null!=i?i:this.minX,minY:null!=a?a:this.minY,maxX:null!=r?r:this.maxX,maxY:null!=s?s:this.maxY})},e.prototype.runtimeFit=function(e){return this.cachedRuntimeFit?this.cachedRuntimeFit:(n=this.fit===t.Cover?e.Fit.cover:this.fit===t.Contain?e.Fit.contain:this.fit===t.Fill?e.Fit.fill:this.fit===t.FitWidth?e.Fit.fitWidth:this.fit===t.FitHeight?e.Fit.fitHeight:this.fit===t.ScaleDown?e.Fit.scaleDown:e.Fit.none,this.cachedRuntimeFit=n,n);var n},e.prototype.runtimeAlignment=function(e){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(t=this.alignment===i.TopLeft?e.Alignment.topLeft:this.alignment===i.TopCenter?e.Alignment.topCenter:this.alignment===i.TopRight?e.Alignment.topRight:this.alignment===i.CenterLeft?e.Alignment.centerLeft:this.alignment===i.CenterRight?e.Alignment.centerRight:this.alignment===i.BottomLeft?e.Alignment.bottomLeft:this.alignment===i.BottomCenter?e.Alignment.bottomCenter:this.alignment===i.BottomRight?e.Alignment.bottomRight:e.Alignment.center,this.cachedRuntimeAlignment=t,t);var t},e}(),h=function(){function e(){}return e.loadRuntime=function(){a.default({locateFile:function(){return e.wasmURL}}).then((function(t){var n;for(e.runtime=t;e.callBackQueue.length>0;)null===(n=e.callBackQueue.shift())||void 0===n||n(e.runtime)})).catch((function(){var t="https://cdn.jsdelivr.net/npm/".concat(r.name,"@").concat(r.version,"/rive_fallback.wasm");e.wasmURL.toLowerCase()!==t?(console.warn("Failed to load WASM from ".concat(e.wasmURL,", trying jsdelivr as a backup")),e.setWasmUrl(t),e.loadRuntime()):console.error("Could not load Rive WASM file from unpkg or jsdelivr, network connection may be down, or         you may need to call set a new WASM source via RuntimeLoader.setWasmUrl() and call         RuntimeLoader.loadRuntime() again")}))},e.getInstance=function(t){e.isLoading||(e.isLoading=!0,e.loadRuntime()),e.runtime?t(e.runtime):e.callBackQueue.push(t)},e.awaitInstance=function(){return new Promise((function(t){return e.getInstance((function(e){return t(e)}))}))},e.setWasmUrl=function(t){e.wasmURL=t},e.isLoading=!1,e.callBackQueue=[],e.wasmURL="https://unpkg.com/".concat(r.name,"@").concat(r.version,"/rive.wasm"),e}();!function(e){e[e.Number=56]="Number",e[e.Trigger=58]="Trigger",e[e.Boolean=59]="Boolean"}(p||(p={}));var f,m=function(){function e(e,t){this.type=e,this.runtimeInput=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(e){this.runtimeInput.value=e},enumerable:!1,configurable:!0}),e.prototype.fire=function(){this.type===p.Trigger&&this.runtimeInput.fire()},e}();!function(e){e[e.General=128]="General",e[e.OpenUrl=131]="OpenUrl"}(f||(f={}));var y,b,w=function(){function e(e,t,n,o){this.stateMachine=e,this.playing=n,this.artboard=o,this.inputs=[],this.instance=new t.StateMachineInstance(e,o),this.initInputs(t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statesChanged",{get:function(){for(var e=[],t=0;t<this.instance.stateChangedCount();t++)e.push(this.instance.stateChangedNameByIndex(t));return e},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){this.instance.advance(e)},e.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},e.prototype.reportedEventAt=function(e){return this.instance.reportedEventAt(e)},e.prototype.initInputs=function(e){for(var t=0;t<this.instance.inputCount();t++){var n=this.instance.input(t);this.inputs.push(this.mapRuntimeInput(n,e))}},e.prototype.mapRuntimeInput=function(e,t){return e.type===t.SMIInput.bool?new m(p.Boolean,e.asBool()):e.type===t.SMIInput.number?new m(p.Number,e.asNumber()):e.type===t.SMIInput.trigger?new m(p.Trigger,e.asTrigger()):void 0},e.prototype.cleanup=function(){this.instance.delete()},e}(),v=function(){function e(e,t,n,o,i){void 0===o&&(o=[]),void 0===i&&(i=[]),this.runtime=e,this.artboard=t,this.eventManager=n,this.animations=o,this.stateMachines=i}return e.prototype.add=function(e,t,n){if(void 0===n&&(n=!0),0===(e=N(e)).length)this.animations.forEach((function(e){return e.playing=t})),this.stateMachines.forEach((function(e){return e.playing=t}));else for(var o=this.animations.map((function(e){return e.name})),i=this.stateMachines.map((function(e){return e.name})),a=0;a<e.length;a++){var r=o.indexOf(e[a]),c=i.indexOf(e[a]);if(r>=0||c>=0)r>=0?this.animations[r].playing=t:this.stateMachines[c].playing=t;else{var l=this.artboard.animationByName(e[a]);if(l){var u=new s.Animation(l,this.artboard,this.runtime,t);u.advance(0),u.apply(1),this.animations.push(u)}else{var d=this.artboard.stateMachineByName(e[a]);if(d){var p=new w(d,this.runtime,t,this.artboard);this.stateMachines.push(p)}}}}return n&&(t?this.eventManager.fire({type:y.Play,data:this.playing}):this.eventManager.fire({type:y.Pause,data:this.paused})),t?this.playing:this.paused},e.prototype.initLinearAnimations=function(e,t){for(var n=this.animations.map((function(e){return e.name})),o=0;o<e.length;o++){var i=n.indexOf(e[o]);if(i>=0)this.animations[i].playing=t;else{var a=this.artboard.animationByName(e[o]);if(a){var r=new s.Animation(a,this.artboard,this.runtime,t);r.advance(0),r.apply(1),this.animations.push(r)}}}},e.prototype.initStateMachines=function(e,t){for(var n=this.stateMachines.map((function(e){return e.name})),o=0;o<e.length;o++){var i=n.indexOf(e[o]);if(i>=0)this.stateMachines[i].playing=t;else{var a=this.artboard.stateMachineByName(e[o]);if(a){var r=new w(a,this.runtime,t,this.artboard);this.stateMachines.push(r)}else this.initLinearAnimations([e[o]],t)}}},e.prototype.play=function(e){return this.add(e,!0)},e.prototype.pause=function(e){return this.add(e,!1)},e.prototype.scrub=function(e,t){var n=this.animations.filter((function(t){return e.includes(t.name)}));return n.forEach((function(e){return e.scrubTo=t})),n.map((function(e){return e.name}))},Object.defineProperty(e.prototype,"playing",{get:function(){return this.animations.filter((function(e){return e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),e.prototype.stop=function(e){var t=this,n=[];if(0===(e=N(e)).length)n=this.animations.map((function(e){return e.name})).concat(this.stateMachines.map((function(e){return e.name}))),this.animations.forEach((function(e){return e.cleanup()})),this.stateMachines.forEach((function(e){return e.cleanup()})),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var o=this.animations.filter((function(t){return e.includes(t.name)}));o.forEach((function(e){e.cleanup(),t.animations.splice(t.animations.indexOf(e),1)}));var i=this.stateMachines.filter((function(t){return e.includes(t.name)}));i.forEach((function(e){e.cleanup(),t.stateMachines.splice(t.stateMachines.indexOf(e),1)})),n=o.map((function(e){return e.name})).concat(i.map((function(e){return e.name})))}return this.eventManager.fire({type:y.Stop,data:n}),n},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animations.reduce((function(e,t){return e||t.playing}),!1)||this.stateMachines.reduce((function(e,t){return e||t.playing}),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),e.prototype.atLeastOne=function(e,t){var n;return void 0===t&&(t=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([n=this.artboard.animationByIndex(0).name],e,t):this.artboard.stateMachineCount()>0&&this.add([n=this.artboard.stateMachineByIndex(0).name],e,t)),n},e.prototype.handleLooping=function(){for(var e=0,t=this.animations.filter((function(e){return e.playing}));e<t.length;e++){var n=t[e];0===n.loopValue&&n.loopCount?(n.loopCount=0,this.stop(n.name)):1===n.loopValue&&n.loopCount?(this.eventManager.fire({type:y.Loop,data:{animation:n.name,type:b.Loop}}),n.loopCount=0):2===n.loopValue&&n.loopCount>1&&(this.eventManager.fire({type:y.Loop,data:{animation:n.name,type:b.PingPong}}),n.loopCount=0)}},e.prototype.handleStateChanges=function(){for(var e=[],t=0,n=this.stateMachines.filter((function(e){return e.playing}));t<n.length;t++){var o=n[t];e.push.apply(e,o.statesChanged)}e.length>0&&this.eventManager.fire({type:y.StateChange,data:e})},e.prototype.handleAdvancing=function(e){this.eventManager.fire({type:y.Advance,data:e})},e}();!function(e){e.Load="load",e.LoadError="loaderror",e.Play="play",e.Pause="pause",e.Stop="stop",e.Loop="loop",e.Draw="draw",e.Advance="advance",e.StateChange="statechange",e.RiveEvent="riveevent",e.AudioStatusChange="audiostatuschange"}(y||(y={})),function(e){e.OneShot="oneshot",e.Loop="loop",e.PingPong="pingpong"}(b||(b={}));var k,_=function(){function e(e){void 0===e&&(e=[]),this.listeners=e}return e.prototype.getListeners=function(e){return this.listeners.filter((function(t){return t.type===e}))},e.prototype.add=function(e){this.listeners.includes(e)||this.listeners.push(e)},e.prototype.remove=function(e){for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t];if(n.type===e.type&&n.callback===e.callback){this.listeners.splice(t,1);break}}},e.prototype.removeAll=function(e){var t=this;e?this.listeners.filter((function(t){return t.type===e})).forEach((function(e){return t.remove(e)})):this.listeners.splice(0,this.listeners.length)},e.prototype.fire=function(e){this.getListeners(e.type).forEach((function(t){return t.callback(e)}))},e}(),x=function(){function e(e){this.eventManager=e,this.queue=[]}return e.prototype.add=function(e){this.queue.push(e)},e.prototype.process=function(){for(;this.queue.length>0;){var e=this.queue.shift();(null==e?void 0:e.action)&&e.action(),(null==e?void 0:e.event)&&this.eventManager.fire(e.event)}},e}();!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.UNAVAILABLE=1]="UNAVAILABLE"}(k||(k={}));var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._started=!1,t._enabled=!1,t._status=k.UNAVAILABLE,t}return l(t,e),t.prototype.delay=function(e){return u(this,void 0,void 0,(function(){return d(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},t.prototype.timeout=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return[2,new Promise((function(e,t){return setTimeout(t,50)}))]}))}))},t.prototype.reportToListeners=function(){this.fire({type:y.AudioStatusChange}),this.removeAll()},t.prototype.enableAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return this._enabled||(this._enabled=!0,this._status=k.AVAILABLE,this.reportToListeners()),[2]}))}))},t.prototype.testAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:if(this._status!==k.UNAVAILABLE||null===this._audioContext)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return e.sent(),this.enableAudio(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},t.prototype._establishAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this._started?[3,5]:(this._started=!0,"undefined"!=typeof window?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),e.label=2;case 2:return this._status!==k.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return e.sent(),[4,this.delay(1e3)];case 4:return e.sent(),[3,2];case 5:return[2]}}))}))},t.prototype.listenForUserAction=function(){var e=this;document.addEventListener("pointerdown",(function(){return u(e,void 0,void 0,(function(){return d(this,(function(e){return this.enableAudio(),[2]}))}))}),{once:!0})},t.prototype.establishAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return this._establishAudio(),[2]}))}))},Object.defineProperty(t.prototype,"systemVolume",{get:function(){return this._status===k.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t}(_),S=new C,E=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),T=globalThis.ResizeObserver||E,I=new(function(){function e(){var e=this;this._elementsMap=new Map,this._onObservedEntry=function(t){var n=e._elementsMap.get(t.target);null!==n?n.onResize(0==t.target.clientWidth||0==t.target.clientHeight):e._resizeObserver.unobserve(t.target)},this._onObserved=function(t){t.forEach(e._onObservedEntry)},this._resizeObserver=new T(this._onObserved)}return e.prototype.add=function(e,t){var n={onResize:t,element:e};return this._elementsMap.set(e,n),this._resizeObserver.observe(e),n},e.prototype.remove=function(e){this._resizeObserver.unobserve(e.element),this._elementsMap.delete(e.element)},e}()),A=function(){function e(e){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=e.src,this.buffer=e.buffer,e.assetLoader&&(this.assetLoader=e.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new _,e.onLoad&&this.on(y.Load,e.onLoad),e.onLoadError&&this.on(y.LoadError,e.onLoadError)}return e.prototype.initData=function(){return u(this,void 0,void 0,(function(){var t,n,o;return d(this,(function(i){switch(i.label){case 0:return this.src?(t=this,[4,M(this.src)]):[3,2];case 1:t.buffer=i.sent(),i.label=2;case 2:return this.assetLoader&&(n=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),o=this,[4,this.runtime.load(new Uint8Array(this.buffer),n,this.enableRiveAssetCDN)];case 3:if(o.file=i.sent(),null===this.file)throw this.eventManager.fire({type:y.LoadError,data:null}),new Error(e.fileLoadErrorMessage);return this.eventManager.fire({type:y.Load,data:this}),[2]}}))}))},e.prototype.init=function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:if(!this.src&&!this.buffer)throw new Error(e.missingErrorMessage);return t=this,[4,h.awaitInstance()];case 1:return t.runtime=n.sent(),[4,this.initData()];case 2:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.cleanup=function(){var e;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(e=this.file)||void 0===e||e.delete())},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},e.missingErrorMessage="Rive source file or data buffer required",e.fileLoadErrorMessage="The file failed to load",e}(),P=function(){function e(e){var t,n=this;this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._hasZeroSize=!1,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(e){n._hasZeroSize=e,n._layout.maxX&&n._layout.maxY||n.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=e.canvas,e.canvas.constructor===HTMLCanvasElement&&(this._observed=I.add(this.canvas,this.onCanvasResize)),this.src=e.src,this.buffer=e.buffer,this.riveFile=e.riveFile,this.layout=null!==(t=e.layout)&&void 0!==t?t:new g,this.shouldDisableRiveListeners=!!e.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!e.isTouchScrollEnabled,this.automaticallyHandleEvents=!!e.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new _,e.onLoad&&this.on(y.Load,e.onLoad),e.onLoadError&&this.on(y.LoadError,e.onLoadError),e.onPlay&&this.on(y.Play,e.onPlay),e.onPause&&this.on(y.Pause,e.onPause),e.onStop&&this.on(y.Stop,e.onStop),e.onLoop&&this.on(y.Loop,e.onLoop),e.onStateChange&&this.on(y.StateChange,e.onStateChange),e.onAdvance&&this.on(y.Advance,e.onAdvance),e.onload&&!e.onLoad&&this.on(y.Load,e.onload),e.onloaderror&&!e.onLoadError&&this.on(y.LoadError,e.onloaderror),e.onplay&&!e.onPlay&&this.on(y.Play,e.onplay),e.onpause&&!e.onPause&&this.on(y.Pause,e.onpause),e.onstop&&!e.onStop&&this.on(y.Stop,e.onstop),e.onloop&&!e.onLoop&&this.on(y.Loop,e.onloop),e.onstatechange&&!e.onStateChange&&this.on(y.StateChange,e.onstatechange),e.assetLoader&&(this.assetLoader=e.assetLoader),this.taskQueue=new x(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:e.autoplay,animations:e.animations,stateMachines:e.stateMachines,artboard:e.artboard,useOffscreenRenderer:e.useOffscreenRenderer})}return e.new=function(t){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new e(t)},e.prototype.onSystemAudioChanged=function(){this.volume=this._volume},e.prototype.init=function(t){var n=this,o=t.src,i=t.buffer,a=t.riveFile,r=t.animations,s=t.stateMachines,c=t.artboard,l=t.autoplay,u=void 0!==l&&l,d=t.useOffscreenRenderer,p=void 0!==d&&d;if(this.src=o,this.buffer=i,this.riveFile=a,!this.src&&!this.buffer&&!this.riveFile)throw new Error(e.missingErrorMessage);var g=N(r),f=N(s);this.loaded=!1,this.readyForPlaying=!1,h.awaitInstance().then((function(e){n.runtime=e,n.renderer=n.runtime.makeRenderer(n.canvas,p),n.canvas.width||n.canvas.height||n.resizeDrawingSurfaceToCanvas(),n.initData(c,g,f,u).then((function(){return n.setupRiveListeners()})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},e.prototype.setupRiveListeners=function(e){var t=this;if(!this.shouldDisableRiveListeners){var n=(this.animator.stateMachines||[]).filter((function(e){return e.playing&&t.runtime.hasListeners(e.instance)})).map((function(e){return e.instance})),o=this.isTouchScrollEnabled;e&&"isTouchScrollEnabled"in e&&(o=e.isTouchScrollEnabled),this.eventCleanup=(0,c.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:n,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:o})}},e.prototype.removeRiveListeners=function(){this.eventCleanup&&this.eventCleanup()},e.prototype.initializeAudio=function(){var e,t=this;S.status==k.UNAVAILABLE&&(null===(e=this.artboard)||void 0===e?void 0:e.hasAudio)&&(S.add({type:y.AudioStatusChange,callback:function(){return t.onSystemAudioChanged()}}),S.establishAudio())},e.prototype.initData=function(e,t,n,o){var i;return u(this,void 0,void 0,(function(){var a;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),null!=this.riveFile?[3,2]:(this.riveFile=new A({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:r.sent(),r.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(e,t,n,o),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:y.Load,data:null!==(i=this.src)&&void 0!==i?i:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return r.sent(),a="Problem loading file; may be corrupt!",console.warn(a),this.eventManager.fire({type:y.LoadError,data:a}),[2,Promise.reject(a)];case 4:return[2]}}))}))},e.prototype.initArtboard=function(e,t,n,o){if(this.file){var i,a=e?this.file.artboardByName(e):this.file.defaultArtboard();if(!a){var r="Invalid artboard name or no default artboard";return console.warn(r),void this.eventManager.fire({type:y.LoadError,data:r})}if(this.artboard=a,a.volume=this._volume*S.systemVolume,this.artboard.animationCount()<1)throw r="Artboard has no animations",this.eventManager.fire({type:y.LoadError,data:r}),r;this.animator=new v(this.runtime,this.artboard,this.eventManager),t.length>0||n.length>0?(i=t.concat(n),this.animator.initLinearAnimations(t,o),this.animator.initStateMachines(n,o)):i=[this.animator.atLeastOne(o,!1)],this.taskQueue.add({event:{type:o?y.Play:y.Pause,data:i}})}},e.prototype.drawFrame=function(){this.startRendering()},e.prototype.draw=function(e,t){this.frameRequestId=null;var n=performance.now();this.lastRenderTime||(this.lastRenderTime=e),this.renderSecondTimer+=e-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==t||t());var o=(e-this.lastRenderTime)/1e3;this.lastRenderTime=e;for(var i=0,a=this.animator.animations.filter((function(e){return e.playing||e.needsScrub})).sort((function(e){return e.needsScrub?-1:1}));i<a.length;i++){var r=a[i];r.advance(o),r.instance.didLoop&&(r.loopCount+=1),r.apply(1)}for(var s=0,l=this.animator.stateMachines.filter((function(e){return e.playing}));s<l.length;s++){var u=l[s],d=u.reportedEventCount();if(d)for(var p=0;p<d;p++){var g=u.reportedEventAt(p);if(g)if(g.type===f.OpenUrl){if(this.eventManager.fire({type:y.RiveEvent,data:g}),this.automaticallyHandleEvents){var h=document.createElement("a"),m=g,b=m.url,w=m.target,v=(0,c.sanitizeUrl)(b);b&&h.setAttribute("href",v),w&&h.setAttribute("target",w),v&&v!==c.BLANK_URL&&h.click()}}else this.eventManager.fire({type:y.RiveEvent,data:g})}u.advance(o)}this.artboard.advance(o);var k=this.renderer;k.clear(),k.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(k),k.restore(),k.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(o),this.frameCount++;var _=performance.now();for(this.frameTimes.push(_),this.durations.push(_-n);this.frameTimes[0]<=_-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},e.prototype.alignRenderer=function(){var e=this,t=e.renderer,n=e.runtime,o=e._layout,i=e.artboard;t.align(o.runtimeFit(n),o.runtimeAlignment(n),{minX:o.minX,minY:o.minY,maxX:o.maxX,maxY:o.maxY},i.bounds)},Object.defineProperty(e.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce((function(e,t){return e+t}),0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){var e;this.stopRendering(),this.cleanupInstances(),null!==this._observed&&I.remove(this._observed),null===(e=this.riveFile)||void 0===e||e.cleanup(),this.riveFile=null,this.file=null},e.prototype.deleteRiveRenderer=function(){var e;null===(e=this.renderer)||void 0===e||e.delete(),this.renderer=null},e.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},e.prototype.retrieveTextRun=function(e){var t;if(e)if(this.artboard){var n=this.artboard.textRun(e);if(n)return n;console.warn("Could not access a text run with name '".concat(e,"' in the '").concat(null===(t=this.artboard)||void 0===t?void 0:t.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},e.prototype.getTextRunValue=function(e){var t=this.retrieveTextRun(e);return t?t.text:void 0},e.prototype.setTextRunValue=function(e,t){var n=this.retrieveTextRun(e);n&&(n.text=t)},e.prototype.play=function(e,t){var n=this;e=N(e),this.readyForPlaying?(this.animator.play(e),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return n.play(e,t)}})},e.prototype.pause=function(e){var t=this;e=N(e),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(e)):this.taskQueue.add({action:function(){return t.pause(e)}})},e.prototype.scrub=function(e,t){var n=this;e=N(e),this.readyForPlaying?(this.animator.scrub(e,t||0),this.drawFrame()):this.taskQueue.add({action:function(){return n.scrub(e,t)}})},e.prototype.stop=function(e){var t=this;e=N(e),this.readyForPlaying?(this.animator.stop(e),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return t.stop(e)}})},e.prototype.reset=function(e){var t,n=null==e?void 0:e.artboard,o=N(null==e?void 0:e.animations),i=N(null==e?void 0:e.stateMachines),a=null!==(t=null==e?void 0:e.autoplay)&&void 0!==t&&t;this.cleanupInstances(),this.initArtboard(n,o,i,a),this.taskQueue.process()},e.prototype.load=function(e){this.file=null,this.stop(),this.init(e)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,e.maxX&&e.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),e.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},e.prototype.resizeDrawingSurfaceToCanvas=function(e){if(this.canvas instanceof HTMLCanvasElement&&window){var t=this.canvas.getBoundingClientRect(),n=t.width,o=t.height,i=e||window.devicePixelRatio||1;this.canvas.width=i*n,this.canvas.height=i*o,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(e.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.animationCount();t++)e.push(this.artboard.animationByIndex(t).name);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.stateMachineCount();t++)e.push(this.artboard.stateMachineByIndex(t).name);return e},enumerable:!1,configurable:!0}),e.prototype.stateMachineInputs=function(e){if(this.loaded){var t=this.animator.stateMachines.find((function(t){return t.name===e}));return null==t?void 0:t.inputs}},e.prototype.retrieveInputAtPath=function(e,t){if(e)if(this.artboard){var n=this.artboard.inputByPath(e,t);if(n)return n;console.warn("Could not access an input with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access input: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(t,"'"))},e.prototype.setBooleanStateAtPath=function(e,t,n){var o=this.retrieveInputAtPath(e,n);o&&(o.type===p.Boolean?o.asBool().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(n,"' is not a boolean")))},e.prototype.setNumberStateAtPath=function(e,t,n){var o=this.retrieveInputAtPath(e,n);o&&(o.type===p.Number?o.asNumber().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(n,"' is not a number")))},e.prototype.fireStateAtPath=function(e,t){var n=this.retrieveInputAtPath(e,t);n&&(n.type===p.Trigger?n.asTrigger().fire():console.warn("Input with name: '".concat(e,"', at path:'").concat(t,"' is not a trigger")))},e.prototype.retrieveTextAtPath=function(e,t){if(e)if(t)if(this.artboard){var n=this.artboard.textByPath(e,t);if(n)return n;console.warn("Could not access text with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access text: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(e,"'"));else console.warn("No text name provided for path '".concat(t,"'"))},e.prototype.getTextRunValueAtPath=function(e,t){var n=this.retrieveTextAtPath(e,t);if(n)return n.text;console.warn("Could not get text with name: '".concat(e,"', at path:'").concat(t,"'"))},e.prototype.setTextRunValueAtPath=function(e,t,n){var o=this.retrieveTextAtPath(e,n);o?o.text=t:console.warn("Could not set text with name: '".concat(e,"', at path:'").concat(n,"'"))},Object.defineProperty(e.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.unsubscribe=function(e,t){console.warn("This function is deprecated: please use `off()` instead."),this.off(e,t)},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.unsubscribeAll=function(e){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(e)},e.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},e.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},e.prototype.enableFPSCounter=function(e){this.runtime.enableFPSCounter(e)},e.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(e.prototype,"contents",{get:function(){if(this.loaded){for(var e={artboards:[]},t=0;t<this.file.artboardCount();t++){for(var n=this.file.artboardByIndex(t),o={name:n.name,animations:[],stateMachines:[]},i=0;i<n.animationCount();i++){var a=n.animationByIndex(i);o.animations.push(a.name)}for(var r=0;r<n.stateMachineCount();r++){for(var s=n.stateMachineByIndex(r),c=s.name,l=new this.runtime.StateMachineInstance(s,n),u=[],d=0;d<l.inputCount();d++){var p=l.input(d);u.push({name:p.name,type:p.type})}o.stateMachines.push({name:c,inputs:u})}e.artboards.push(o)}return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(e){this._volume=e,this.artboard&&(this.artboard.volume=e*S.systemVolume)},enumerable:!1,configurable:!0}),e.missingErrorMessage="Rive source file or data buffer required",e}(),M=function(e){return u(void 0,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=new Request(e),[4,fetch(t)];case 1:return[4,n.sent().arrayBuffer()];case 2:return[2,n.sent()]}}))}))},N=function(e){return"string"==typeof e?[e]:e instanceof Array?e:[]},O={EventManager:_,TaskQueueManager:x},R=function(e){return new Promise((function(t){return h.getInstance((function(n){n.decodeAudio(e,t)}))}))},D=function(e){return new Promise((function(t){return h.getInstance((function(n){n.decodeImage(e,t)}))}))},L=function(e){return new Promise((function(t){return h.getInstance((function(n){n.decodeFont(e,t)}))}))}})(),o})(),e.exports=t()},957:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(609),i=n(52);function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=a(o),s=function(){return s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function c(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function l(){var e="undefined"!=typeof window&&"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1;return Math.min(Math.max(1,e),3)}"function"==typeof SuppressedError&&SuppressedError;var u=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),d=globalThis.ResizeObserver||u,p=void 0!==globalThis.ResizeObserver,g=!p;function h(e,t){void 0===t&&(t=!0);var n=o.useState({width:0,height:0}),i=n[0],a=n[1];o.useEffect((function(){if("undefined"!=typeof window&&t){var e=function(){a({width:window.innerWidth,height:window.innerHeight})};return g&&(e(),window.addEventListener("resize",e)),function(){return window.removeEventListener("resize",e)}}}),[]);var r,s,c=o.useRef(new d((r=function(e){p&&a({width:e[e.length-1].contentRect.width,height:e[e.length-1].contentRect.height})},s=0,function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];clearTimeout(s),s=window.setTimeout((function(){return r.apply(e,t)}),0)})));return o.useEffect((function(){var n=c.current;if(t){var o=e.current;return e.current&&p&&n.observe(e.current),function(){n.disconnect(),o&&p&&n.unobserve(o)}}n.disconnect()}),[e,c]),i}var f={useDevicePixelRatio:!0,fitCanvasToArtboardHeight:!1,useOffscreenRenderer:!0,shouldResizeCanvasToContainer:!0};function m(e){return Object.assign({},f,e)}function y(e){var t=e.riveLoaded,n=void 0!==t&&t,i=e.canvasElem,a=e.containerRef,r=e.options,s=void 0===r?{}:r,c=e.onCanvasHasResized,u=e.artboardBounds,d=m(s),p=o.useState({height:0,width:0}),g=p[0],f=g.height,y=g.width,b=p[1],w=o.useState({height:0,width:0}),v=w[0],k=v.height,_=v.width,x=w[1],C=o.useState(!0),S=C[0],E=C[1],T=d.fitCanvasToArtboardHeight,I=d.shouldResizeCanvasToContainer,A=d.useDevicePixelRatio,P=d.customDevicePixelRatio,M=h(a,I),N=function(e){var t=e||l(),n=o.useState(t),i=n[0],a=n[1];return o.useEffect((function(){if("undefined"!=typeof window&&"matchMedia"in window){var t=function(){var t=e||l();a(t)},n=window.matchMedia("screen and (resolution: ".concat(i,"dppx)"));return n.hasOwnProperty("addEventListener")?n.addEventListener("change",t):n.addListener(t),function(){n.hasOwnProperty("removeEventListener")?n.removeEventListener("change",t):n.removeListener(t)}}}),[i,e]),i}(P),O=null!=u?u:{},R=O.maxX,D=O.maxY,L=o.useCallback((function(){var e,t,n,o,i=null!==(t=null===(e=a.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0,r=null!==(o=null===(n=a.current)||void 0===n?void 0:n.clientHeight)&&void 0!==o?o:0;return T&&u?{width:i,height:i*(u.maxY/u.maxX)}:{width:i,height:r}}),[a,T,R,D]);o.useEffect((function(){if(I&&a.current&&n){var e=L(),t=e.width,o=e.height,r=!1;if(i){var s=t!==y||o!==f;if(d.fitCanvasToArtboardHeight&&s&&(a.current.style.height=o+"px",r=!0),d.useDevicePixelRatio){if(s||t*N!==_||o*N!==k){var l=N*t,u=N*o;i.width=l,i.height=u,i.style.width=t+"px",i.style.height=o+"px",x({width:l,height:u}),r=!0}}else s&&(i.width=t,i.height=o,x({width:t,height:o}),r=!0);b({width:t,height:o})}c&&(S||r)&&c&&c(),S&&E(!1)}}),[i,a,M,N,L,S,E,k,_,f,y,c,I,T,A,n]),o.useEffect((function(){x({width:0,height:0})}),[i])}var b,w=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),v=globalThis.IntersectionObserver||w,k=function(){function e(){var e=this;this.elementsMap=new Map,this.onObserved=function(t){t.forEach((function(t){var n=e.elementsMap.get(t.target);n&&n(t)}))},this.observer=new v(this.onObserved)}return e.prototype.registerCallback=function(e,t){this.observer.observe(e),this.elementsMap.set(e,t)},e.prototype.removeCallback=function(e){this.observer.unobserve(e),this.elementsMap.delete(e)},e}(),_=function(){return b||(b=new k),b};function x(e){var t=e.setContainerRef,n=e.setCanvasRef,o=e.className,i=void 0===o?"":o,a=e.style,l=e.children,u=c(e,["setContainerRef","setCanvasRef","className","style","children"]),d=s({width:"100%",height:"100%"},a);return r.default.createElement("div",s({ref:t,className:i},!i&&{style:d}),r.default.createElement("canvas",s({ref:n,style:{verticalAlign:"top",width:0,height:0}},u),l))}function C(e,t){void 0===t&&(t={});var n=o.useState(null),a=n[0],c=n[1],l=o.useRef(null),u=o.useState(null),d=u[0],p=u[1],g=Boolean(e),h=m(t),f=o.useCallback((function(){d&&(d.startRendering(),d.resizeToCanvas())}),[d]);y({riveLoaded:!!d,canvasElem:a,containerRef:l,options:h,onCanvasHasResized:f,artboardBounds:null==d?void 0:d.bounds});var b=o.useCallback((function(e){null===e&&a&&(a.height=0,a.width=0),c(e)}),[]);o.useEffect((function(){if(a&&e&&null==d){var t=h.useOffscreenRenderer,n=new i.Rive(s(s({useOffscreenRenderer:t},e),{canvas:a}));n.on(i.EventType.Load,(function(){a?p(n):n.cleanup()}))}}),[a,g,d]);var w=o.useCallback((function(e){l.current=e}),[]),v={observe:o.useCallback((function(e,t){_().registerCallback(e,t)}),[]),unobserve:o.useCallback((function(e){_().removeCallback(e)}),[])},k=v.observe,C=v.unobserve;o.useEffect((function(){var e,t=!1,n=function(){if(a&&t){var e=a.getBoundingClientRect();e.width>0&&e.height>0&&e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.bottom>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.right>0&&(null==d||d.startRendering(),t=!1)}};return a&&!1!==h.shouldUseIntersectionObserver&&k(a,(function(o){o.isIntersecting?d&&d.startRendering():d&&d.stopRendering(),t=!o.isIntersecting,clearTimeout(e),o.isIntersecting||0!==o.boundingClientRect.width||(e=setTimeout(n,10))})),function(){a&&C(a)}}),[k,C,d,a,h.shouldUseIntersectionObserver]),o.useEffect((function(){return function(){d&&(d.cleanup(),p(null))}}),[d,a]);var S=null==e?void 0:e.animations;o.useEffect((function(){d&&S&&(d.isPlaying?(d.stop(d.animationNames),d.play(S)):d.isPaused&&(d.stop(d.animationNames),d.pause(S)))}),[S,d]);var E=o.useCallback((function(e){return r.default.createElement(x,s({setContainerRef:w,setCanvasRef:b},e))}),[b,w]);return{canvas:a,container:l.current,setCanvasRef:b,setContainerRef:w,rive:d,RiveComponent:E}}t.default=function(e){var t=e.src,n=e.artboard,o=e.animations,i=e.stateMachines,a=e.layout,l=e.useOffscreenRenderer,u=void 0===l||l,d=e.shouldDisableRiveListeners,p=void 0!==d&&d,g=e.shouldResizeCanvasToContainer,h=void 0===g||g,f=e.automaticallyHandleEvents,m=void 0!==f&&f,y=e.children,b=c(e,["src","artboard","animations","stateMachines","layout","useOffscreenRenderer","shouldDisableRiveListeners","shouldResizeCanvasToContainer","automaticallyHandleEvents","children"]),w=C({src:t,artboard:n,animations:o,layout:a,stateMachines:i,autoplay:!0,shouldDisableRiveListeners:p,automaticallyHandleEvents:m},{useOffscreenRenderer:u,shouldResizeCanvasToContainer:h}).RiveComponent;return r.default.createElement(w,s({},b),y)},t.useResizeCanvas=y,t.useRive=C,t.useRiveFile=function(e){var t=this,n=o.useState(null),a=n[0],r=n[1],s=o.useState("idle"),c=s[0],l=s[1];return o.useEffect((function(){var n=null;return function(e,t,n,o){new(n||(n=Promise))((function(t,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(a,r)}s((o=o.apply(e,[])).next())}))}(t,0,void 0,(function(){return function(e,t){var n,o,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=s(0),r.throw=s(1),r.return=s(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){try{l("loading"),(n=new i.RiveFile(e)).init(),n.on(i.EventType.Load,(function(){null==n||n.getInstance(),r(n),l("success")})),n.on(i.EventType.LoadError,(function(){l("failed")})),r(n)}catch(e){console.error(e),l("failed")}return[2]}))})),function(){null==n||n.cleanup()}}),[e.src,e.buffer]),{riveFile:a,status:c}},t.useStateMachineInput=function(e,t,n,a){var r=o.useState(null),s=r[0],c=r[1];return o.useEffect((function(){function o(){if(e&&t&&n||c(null),e&&t&&n){var o=e.stateMachineInputs(t);if(o){var i=o.find((function(e){return e.name===n}));void 0!==a&&i&&(i.value=a),c(i||null)}}else c(null)}o(),e&&e.on(i.EventType.Load,(function(){o()}))}),[e]),s},Object.keys(i).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}))},789:function(e,t){!function(e){"use strict";function t(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((o=o.apply(e,t||[])).next())}))}const n=(e=300)=>new Promise((t=>{setTimeout(t,e)})),o=e=>t(void 0,void 0,void 0,(function*(){return yield n(),document.hasFocus()?e:o(e)}));e.checkIfBrowserSupported=()=>{var e;return Boolean(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getDisplayMedia)},e.takeScreenshot=({onCaptureEnd:e,onCaptureStart:i,quality:a=.7,type:r="image/jpeg",soundEffectUrl:s}={})=>t(void 0,void 0,void 0,(function*(){return yield null==i?void 0:i(),navigator.mediaDevices.getDisplayMedia({preferCurrentTab:!0,video:{frameRate:30}}).then(o).then((o=>t(void 0,void 0,void 0,(function*(){const t=(e=>{const t=document.createElement("video");return t.autoplay=!0,t.muted=!0,t.playsInline=!0,t.srcObject=e,t.setAttribute("style","position:fixed;top:0;left:0;pointer-events:none;visibility:hidden;"),t})(o);document.body.appendChild(t),s&&(e=>{const t=document.createElement("audio");t.loop=!1,t.src=e,t.play(),t.remove()})(s),yield n();const i=(e=>{var t,n,o;const i=null===(t=e.srcObject)||void 0===t?void 0:t.getTracks()[0].getSettings(),a=document.createElement("canvas");a.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:0,a.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:0;const r=a.getContext("2d");return null==r||r.drawImage(e,0,0),a})(t),c=i.toDataURL(r,a);return(e=>{var t;const n=null===(t=e.srcObject)||void 0===t?void 0:t.getTracks();null==n||n.forEach((e=>e.stop())),e.srcObject=null,e.remove()})(t),i.remove(),yield null==e?void 0:e(),c}))))})),Object.defineProperty(e,"__esModule",{value:!0})}(t)},833:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(i=o))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e="false"),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(736)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,a,r=null;function s(...e){if(!s.enabled)return;const o=s,i=Number(new Date),a=i-(n||i);o.diff=a,o.prev=n,o.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let r=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";r++;const a=t.formatters[i];if("function"==typeof a){const t=e[r];n=a.call(o,t),e.splice(r,1),r--}return n})),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=o,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==r?r:(i!==t.namespaces&&(i=t.namespaces,a=t.enabled(e)),a),set:e=>{r=e}}),"function"==typeof t.init&&t.init(s),s}function o(e,n){const o=t(this.namespace+(void 0===n?":":n)+e);return o.log=this.log,o}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const o=("string"==typeof e?e:"").split(/[\s,]+/),i=o.length;for(n=0;n<i;n++)o[n]&&("-"===(e=o[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,o;for(n=0,o=t.skips.length;n<o;n++)if(t.skips[n].test(e))return!1;for(n=0,o=t.names.length;n<o;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},744:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function i(e,t,n){return e.concat(t).map((function(e){return o(e,n)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function r(e,t){try{return t in e}catch(e){return!1}}function s(e,n,c){(c=c||{}).arrayMerge=c.arrayMerge||i,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=o;var l=Array.isArray(n);return l===Array.isArray(e)?l?c.arrayMerge(e,n,c):function(e,t,n){var i={};return n.isMergeableObject(e)&&a(e).forEach((function(t){i[t]=o(e[t],n)})),a(t).forEach((function(a){(function(e,t){return r(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(r(e,a)&&n.isMergeableObject(t[a])?i[a]=function(e,t){if(!t.customMerge)return s;var n=t.customMerge(e);return"function"==typeof n?n:s}(a,n)(e[a],t[a],n):i[a]=o(t[a],n))})),i}(e,n,c):o(n,c)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return s(e,n,t)}),{})};var c=s;e.exports=c},849:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},r=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var o,i=t.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(o in e);return void 0===o||t.call(e,o)},s=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,o,i,l,u,d=arguments[0],p=1,g=arguments.length,h=!1;for("boolean"==typeof d&&(h=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<g;++p)if(null!=(t=arguments[p]))for(n in t)o=c(d,n),d!==(i=c(t,n))&&(h&&i&&(r(i)||(l=a(i)))?(l?(l=!1,u=o&&a(o)?o:[]):u=o&&r(o)?o:{},s(d,{name:n,newValue:e(h,u,i)})):void 0!==i&&s(d,{name:n,newValue:i}));return d}},788:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,o=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,r=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,c=/^\s+|\s+$/g,l="";function u(e){return e?e.replace(c,l):l}e.exports=function(e,c){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];c=c||{};var d=1,p=1;function g(e){var t=e.match(n);t&&(d+=t.length);var o=e.lastIndexOf("\n");p=~o?e.length-o:p+e.length}function h(){var e={line:d,column:p};return function(t){return t.position=new f(e),w(),t}}function f(e){this.start=e,this.end={line:d,column:p},this.source=c.source}f.prototype.content=e;var m=[];function y(t){var n=new Error(c.source+":"+d+":"+p+": "+t);if(n.reason=t,n.filename=c.source,n.line=d,n.column=p,n.source=e,!c.silent)throw n;m.push(n)}function b(t){var n=t.exec(e);if(n){var o=n[0];return g(o),e=e.slice(o.length),n}}function w(){b(o)}function v(e){var t;for(e=e||[];t=k();)!1!==t&&e.push(t);return e}function k(){var t=h();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return y("End of comment missing");var o=e.slice(2,n-2);return p+=2,g(o),e=e.slice(n),p+=2,t({type:"comment",comment:o})}}function _(){var e=h(),n=b(i);if(n){if(k(),!b(a))return y("property missing ':'");var o=b(r),c=e({type:"declaration",property:u(n[0].replace(t,l)),value:o?u(o[0].replace(t,l)):l});return b(s),c}}return w(),function(){var e,t=[];for(v(t);e=_();)!1!==e&&(t.push(e),v(t));return t}()}},585:e=>{var t=1e3,n=60*t,o=60*n,i=24*o,a=7*i;function r(e,t,n,o){var i=t>=1.5*n;return Math.round(e/n)+" "+o+(i?"s":"")}e.exports=function(e,s){s=s||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(c=e,(l=Math.abs(c))>=i?r(c,l,i,"day"):l>=o?r(c,l,o,"hour"):l>=n?r(c,l,n,"minute"):l>=t?r(c,l,t,"second"):c+" ms"):function(e){var a=Math.abs(e);return a>=i?Math.round(e/i)+"d":a>=o?Math.round(e/o)+"h":a>=n?Math.round(e/n)+"m":a>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},694:(e,t,n)=>{"use strict";var o=n(925);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,r){if(r!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},27:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(609)),i=p(n(556)),a=p(n(795)),r=p(n(322)),s=n(89),c=n(726),l=n(56),u=p(n(888)),d=p(n(696));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends o.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:o}=t;return!n||o&&n.x===o.x&&n.y===o.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:o}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),f(this,"onDragStart",((e,t)=>{if((0,d.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,c.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),f(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const n=(0,c.createDraggableData)(this,t),o={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=o;o.x+=this.state.slackX,o.y+=this.state.slackY;const[i,a]=(0,c.getBoundPosition)(this,o.x,o.y);o.x=i,o.y=a,o.slackX=this.state.slackX+(e-o.x),o.slackY=this.state.slackY+(t-o.y),n.x=o.x,n.y=o.y,n.deltaX=o.x-this.state.x,n.deltaY=o.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(o)})),f(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,c.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:a.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:n,defaultPosition:i,defaultClassName:a,defaultClassNameDragging:l,defaultClassNameDragged:d,position:p,positionOffset:g,scale:f,...m}=this.props;let y={},b=null;const w=!Boolean(p)||this.state.dragging,v=p||i,k={x:(0,c.canDragX)(this)&&w?this.state.x:v.x,y:(0,c.canDragY)(this)&&w?this.state.y:v.y};this.state.isElementSVG?b=(0,s.createSVGTransform)(k,g):y=(0,s.createCSSTransform)(k,g);const _=(0,r.default)(n.props.className||"",a,{[l]:this.state.dragging,[d]:this.state.dragged});return o.createElement(u.default,h({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(n),{className:_,style:{...n.props.style,...y},transform:b}))}}t.default=m,f(m,"displayName","Draggable"),f(m,"propTypes",{...u.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),f(m,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(609)),i=u(n(556)),a=u(n(795)),r=n(89),s=n(726),c=n(56),l=u(n(696));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"};let f=h;class m extends o.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const o=(0,r.getTouchIdentifier)(e);this.touchIdentifier=o;const i=(0,s.getControlPosition)(e,o,this);if(null==i)return;const{x:a,y:c}=i,u=(0,s.createCoreData)(this,a,c);(0,l.default)("DraggableCore: handleDragStart: %j",u),(0,l.default)("calling",this.props.onStart),!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(n),this.dragging=!0,this.lastX=a,this.lastY=c,(0,r.addEvent)(n,f.move,this.handleDrag),(0,r.addEvent)(n,f.stop,this.handleDragStop))})),p(this,"handleDrag",(e=>{const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:o}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=o-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,o=this.lastY+t}const i=(0,s.createCoreData)(this,n,o);if((0,l.default)("DraggableCore: handleDrag: %j",i),!1!==this.props.onDrag(e,i)&&!1!==this.mounted)this.lastX=n,this.lastY=o;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),p(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:o}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=o-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,o=this.lastY+t}const i=(0,s.createCoreData)(this,n,o);if(!1===this.props.onStop(e,i)||!1===this.mounted)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,r.removeUserSelectStyles)(a.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,l.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(a.ownerDocument,f.move,this.handleDrag),(0,r.removeEvent)(a.ownerDocument,f.stop,this.handleDragStop))})),p(this,"onMouseDown",(e=>(f=h,this.handleDragStart(e)))),p(this,"onMouseUp",(e=>(f=h,this.handleDragStop(e)))),p(this,"onTouchStart",(e=>(f=g,this.handleDragStart(e)))),p(this,"onTouchEnd",(e=>(f=g,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,r.addEvent)(e,g.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,r.removeEvent)(t,h.move,this.handleDrag),(0,r.removeEvent)(t,g.move,this.handleDrag),(0,r.removeEvent)(t,h.stop,this.handleDragStop),(0,r.removeEvent)(t,g.stop,this.handleDragStop),(0,r.removeEvent)(e,g.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:a.default.findDOMNode(this)}render(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=m,p(m,"displayName","DraggableCore"),p(m,"propTypes",{allowAnyClick:i.default.bool,children:i.default.node.isRequired,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),p(m,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},794:(e,t,n)=>{"use strict";const{default:o,DraggableCore:i}=n(27);e.exports=o,e.exports.default=o,e.exports.DraggableCore=i},89:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=l,t.addEvent=function(e,t,n,o){if(!e)return;const i={capture:!0,...o};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&l(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const n=c(e,t,"px");return{[(0,i.browserPrefixToKey)("transform",i.default)]:n}},t.createSVGTransform=function(e,t){return c(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,o.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,o.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=c,t.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(n.paddingTop),t-=(0,o.int)(n.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(n.paddingLeft),t-=(0,o.int)(n.paddingRight),t},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,n){let o=e;do{if(s(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1},t.offsetXYFromParent=function(e,t,n){const o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-o.left)/n,y:(e.clientY+t.scrollTop-o.top)/n}},t.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(n.borderTopWidth),t+=(0,o.int)(n.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(n.borderLeftWidth),t+=(0,o.int)(n.borderRightWidth),t},t.removeClassName=u,t.removeEvent=function(e,t,n,o){if(!e)return;const i={capture:!0,...o};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var o=n(56),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}(n(514));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}let r="";function s(e,t){return r||(r=(0,o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,o.isFunction)(e[t])}))),!!(0,o.isFunction)(e[r])&&e[r](t)}function c(e,t,n){let{x:o,y:i}=e,a="translate(".concat(o).concat(n,",").concat(i).concat(n,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+n),o="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(e,", ").concat(o,")")+a}return a}function l(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=o;const n=["Moz","Webkit","O","ms"];function o(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const o=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!o)return"";if(t in o)return"";for(let e=0;e<n.length;e++)if(i(t,n[e])in o)return n[e];return""}function i(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let o=0;o<e.length;o++)n?(t+=e[o].toUpperCase(),n=!1):"-"===e[o]?n=!0:t+=e[o];return t}(e)):e}t.default=o()},696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){const i=!(0,o.isNum)(e.lastX),r=a(e);return i?{node:r,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:r,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);const s=a(e);if("string"==typeof r){const{ownerDocument:e}=s,t=e.defaultView;let n;if(n="parent"===r?s.parentNode:e.querySelector(r),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const a=n,c=t.getComputedStyle(s),l=t.getComputedStyle(a);r={left:-s.offsetLeft+(0,o.int)(l.paddingLeft)+(0,o.int)(c.marginLeft),top:-s.offsetTop+(0,o.int)(l.paddingTop)+(0,o.int)(c.marginTop),right:(0,i.innerWidth)(a)-(0,i.outerWidth)(s)-s.offsetLeft+(0,o.int)(l.paddingRight)-(0,o.int)(c.marginRight),bottom:(0,i.innerHeight)(a)-(0,i.outerHeight)(s)-s.offsetTop+(0,o.int)(l.paddingBottom)-(0,o.int)(c.marginBottom)}}return(0,o.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,o.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,o.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,o.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]},t.getControlPosition=function(e,t,n){const o="number"==typeof t?(0,i.getTouch)(e,t):null;if("number"==typeof t&&!o)return null;const r=a(n),s=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,i.offsetXYFromParent)(o||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var o=n(56),i=n(89);function a(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},56:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,o=e.length;n<o;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},322:(e,t,n)=>{"use strict";function o(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>a});const a=i},20:(e,t,n)=>{"use strict";var o=n(609),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,a={},l=null,u=null;for(o in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,o)&&!c.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:i,type:e,key:l,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},848:(e,t,n)=>{"use strict";e.exports=n(20)},133:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(788));t.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var o=(0,i.default)(e),a="function"==typeof t;return o.forEach((function(e){if("declaration"===e.type){var o=e.property,i=e.value;a?t(o,i,e):i&&((n=n||{})[o]=i)}})),n}},609:e=>{"use strict";e.exports=window.React},795:e=>{"use strict";e.exports=window.ReactDOM},942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=r(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=r(t,n));return t}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},665:(e,t,n)=>{"use strict";var o={};n.r(o),n.d(o,{boolean:()=>zs,booleanish:()=>Gs,commaOrSpaceSeparated:()=>Ks,commaSeparated:()=>Ys,number:()=>Vs,overloadedBoolean:()=>qs,spaceSeparated:()=>Ws});var i={};n.r(i),n.d(i,{attentionMarkers:()=>Tu,contentInitial:()=>ku,disable:()=>Iu,document:()=>vu,flow:()=>xu,flowInitial:()=>_u,insideSpan:()=>Eu,string:()=>Cu,text:()=>Su});var a={};n.r(a),n.d(a,{closeModal:()=>Gg,disableComplementaryArea:()=>Bg,enableComplementaryArea:()=>Lg,openModal:()=>zg,pinItem:()=>Fg,setDefaultComplementaryArea:()=>Dg,setFeatureDefaults:()=>Hg,setFeatureValue:()=>Ug,toggleFeature:()=>$g,unpinItem:()=>jg});var r={};n.r(r),n.d(r,{getActiveComplementaryArea:()=>qg,isComplementaryAreaLoading:()=>Vg,isFeatureActive:()=>Yg,isItemPinned:()=>Wg,isModalActive:()=>Kg});var s=n(609),c=n.n(s);const l=window.wp.plugins,u=window.wp.primitives;var d=n(848);const p=(0,d.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(u.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"})}),g=window.wp.data,h=window.wp.editor,f=window.wp.element,m=window.wp.i18n,y=window.wp.components,b={SPEC:"big-sky-spec",CONTENT:"big-sky-content",COLOR:"big-sky-color",PATTERN:"big-sky-pattern",FONT:"big-sky-font",PAGE:"big-sky-page",HELP:"big-sky-help",LAYOUT:"big-sky-layout",IMAGE:"big-sky-image",PLANNER:"big-sky-planner",SITE_ADMIN:"big-sky-site-admin",BLOCKS:"big-sky-blocks"};Object.values(b).filter((e=>e!==b.SPEC));let w=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};const v=window.wp.blockEditor,k=window.wp.blocks;var _={};function x(e){return[e]}function C(e,t,n){var o;if(e.length!==t.length)return!1;for(o=n;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function S(e,t){var n,o=t||x;function i(){n=new WeakMap}function a(){var t,i,a,r,s,c=arguments.length;for(r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];for(t=function(e){var t,o,i,a,r,s=n,c=!0;for(t=0;t<e.length;t++){if(!(r=o=e[t])||"object"!=typeof r){c=!1;break}s.has(o)?s=s.get(o):(i=new WeakMap,s.set(o,i),s=i)}return s.has(_)||((a=function(){var e={clear:function(){e.head=null}};return e}()).isUniqueByDependants=c,s.set(_,a)),s.get(_)}(s=o.apply(null,r)),t.isUniqueByDependants||(t.lastDependants&&!C(s,t.lastDependants,0)&&t.clear(),t.lastDependants=s),i=t.head;i;){if(C(i.args,r,1))return i!==t.head&&(i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=t.head,i.prev=null,t.head.prev=i,t.head=i),i.val;i=i.next}return i={val:e.apply(null,r)},r[0]=null,i.args=r,t.head&&(t.head.prev=i,i.next=t.head),t.head=i,i.val}return a.getDependants=o,a.clear=i,i(),a}const E=window.wp.apiFetch;var T=n.n(E);function I(){return"undefined"!=typeof window&&!!window?.bigSkyInitialState?.isDevMode||!1}function A(){return"undefined"==typeof window?null:window?.bigSkyInitialState?.currentScreen}function P(){return"undefined"!=typeof window&&window?.bigSkyInitialState?.isFreeTrial}const M={SYSTEM:"system",USER:"user",ASSISTANT:"assistant",USER_CHOICE:"user_choice",ACTION:"action",RESPONSE_ACTIONS:"response_actions",COMPONENT:"component",THINKING:"thinking",ERROR:"error",ERROR_ASSISTANT:"error_assistant",TOOL_CALL:"tool_call",TOOL:"tool",SCREENSHOT:"screenshot",COMMENT:"comment"},N=((0,m.__)("Type another request ","big-sky"),(0,m.__)("Yes, create my site","big-sky")),O=(0,m.__)("No, update details","big-sky"),R={siteDescription:null,siteLocation:null,siteTitle:null,siteType:null,topic:null,colorRequest:null,currentColor:null,currentFont:null,defaultImageStyle:"photographic",patterns:{}},D={CHAT:"chat",HANDOFF:"handoff",HANDOFF_CHAT:"handoff_chat",MENUS:"menus"},L=6,B=2*L,F=/\bis-style-(\S+)\b/g,j={ITEMS_KEY:"Items",ITEM_KEY:"Item",SECTIONS_KEY:"Sections",SECTION_KEY:"Section"},$={COLOR:"color",FONT:"font",LOCATION:"location",BLOCKS:"blocks",LOGO:"logo",PAGE:"page",IMAGE:"image"},U="logo_click",H="redirected",z={DATA_TRACK:"data-track",TARGET:"target"};function G(e,t,n=" "){return e&&e.length>0?e+n+t:t}function q(...e){return e.reduce(((e,t)=>{if("string"==typeof t)e.content=G(e.content,t);else if(t instanceof Error)e.content=G(e.content,`${t?.name}: ${t?.message}`),t?.stack&&(e.trace=G(e.trace,t?.stack));else if(t instanceof Response)e.content=G(e.content,`Response: ${t?.url} ${t?.status} ${t?.statusText}`,"\n\n");else if("object"!=typeof t||Array.isArray(t))try{e.extra=G(e.extra,JSON.stringify(t))}catch(e){}else Object.entries(t).forEach((([t,n])=>{try{"string"!=typeof n&&(n=JSON.stringify(n)),e[t]=n}catch(e){}}));return e}),{content:"",trace:""})}async function V(e,t,n="",o="",i="",a=0){var r;if(!e||t?.[0]?.type===M.COMPONENT)return;if(a>1)return void console.error.call(window.console,"[LOOP!] Error logging action:",t);const s=new URL(window.location.href),c=null!==(r=s?.searchParams?.get("ai-step"))&&void 0!==r?r:"editor",l=A()?.screen,u={content:t,message_type:n,message_id:o,parent_message_id:i,is_test:I(),phase:c,editor:l};try{return await E({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(e)+"/action",method:"POST",data:u})}catch(t){console.error.call(window.console,"[LOOP?] Error logging action:",t);const r=q("Error logging action: ",t);if(r)return V(e,r,n,o,i,a+1)}}let W=null;const Y="undefined"!=typeof window&&!!window?.bigSkyInitialState?.isDevMode||!1,K={info:Y?console.info.bind(window.console):()=>{},warn:Y?console.warn.bind(window.console):()=>{},error(...e){const t=W,n=q(...e);n&&V(t,n,M.ERROR),console.error.call(window.console,...e)},storeLastPayload:function(e){Y&&(window.bigSkyInitialState.lastPayload=e)}};const J=[239,187,191];class X extends TransformStream{constructor(){let e;super({start(t){e=function(e){let t,n,o,i,a,r,s;return c(),{feed:function(e){n=n?n+e:e,t&&function(e){return J.every(((t,n)=>e.charCodeAt(n)===t))}(n)&&(n=n.slice(J.length)),t=!1;const a=n.length;let r=0,s=!1;for(;r<a;){s&&("\n"===n[r]&&++r,s=!1);let e,t=-1,c=i;for(let i=o;t<0&&i<a;++i)e=n[i],":"===e&&c<0?c=i-r:"\r"===e?(s=!0,t=i-r):"\n"===e&&(t=i-r);if(t<0){o=a-r,i=c;break}o=0,i=-1,l(n,r,c,t),r+=t+1}r===a?n="":r>0&&(n=n.slice(r))},reset:c};function c(){t=!0,n="",o=0,i=-1,a=void 0,r=void 0,s=""}function l(t,n,o,i){if(0===i)return s.length>0&&(e({type:"event",id:a,event:r||void 0,data:s.slice(0,-1)}),s="",a=void 0),void(r=void 0);const c=o<0,l=t.slice(n,n+(c?i:o));let u=0;u=c?i:" "===t[n+o+1]?o+2:o+1;const d=n+u,p=i-u,g=t.slice(d,d+p).toString();if("data"===l)s+=g?`${g}\n`:"\n";else if("event"===l)r=g;else if("id"!==l||g.includes("\0")){if("retry"===l){const t=parseInt(g,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else a=g}}((e=>{"event"===e.type&&t.enqueue(e)}))},transform(t){e.feed(t)}})}}const Z={WPCOM_JETPACK_AI:"wpcom-jetpack-ai",WPCOM_OPENAI:"wpcom-openai",OPENAI:"openai",GROQ:"groq",OLLAMA:"ollama",LMSTUDIO:"lmstudio",LOCALAI:"localai",LOCAL_GRAPH:"local-graph",WPCOM_GRAPH:"wpcom-graph",getAvailable:()=>[Z.WPCOM_JETPACK_AI,Z.WPCOM_OPENAI,Z.OLLAMA,Z.LMSTUDIO,Z.LOCALAI,Z.OPENAI,Z.GROQ,Z.LOCAL_GRAPH,Z.WPCOM_GRAPH],getDefault:()=>Z.OPENAI,getDefaultApiKey:e=>(e!==Z.GROQ||"undefined"==typeof process)&&(e!==Z.OPENAI||"undefined"==typeof process)&&null},Q={GPT_4O_MINI:"gpt-4o-mini",GPT_4_TURBO:"gpt-4-turbo",GPT_4O:"gpt-4o-2024-11-20",LLAMA3_70B_8192:"llama3-70b-8192",LLAMA3_70B_8192_WPCOM:"llama3-70b",GEMMA_7b_INSTRUCT:"gemma:7b-instruct-q5_K_M",PHI_3_MEDIUM:"legraphista/Phi-3-medium-128k-instruct-IMat-GGUF",MISTRAL_03:"mistral-0.3",HERMES_2_PRO_MISTRAL:"hermes-2-pro-mistral",isMultimodal:e=>e===Q.GPT_4O,supportsToolMessages:e=>[Q.GPT_4O,Q.GPT_4_TURBO,Q.GPT_4O_MINI,Q.LLAMA3_70B_8192,Q.MISTRAL_03,Q.HERMES_2_PRO_MISTRAL,Q.LOCAL_GRAPH,Q.WPCOM_GRAPH].includes(e),getAvailable:e=>e===Z.GROQ?[Q.LLAMA3_70B_8192]:[Z.WPCOM_JETPACK_AI,Z.WPCOM_OPENAI].includes(e)?[Q.GPT_4O,Q.GPT_4_TURBO,Q.GPT_4O_MINI,Q.LLAMA3_70B_8192_WPCOM]:e===Z.OLLAMA?[Q.GEMMA_7b_INSTRUCT]:e===Z.LOCALAI?[Q.MISTRAL_03,Q.HERMES_2_PRO_MISTRAL]:e===Z.LMSTUDIO?[Q.PHI_3_MEDIUM]:[Q.GPT_4O_MINI,Q.GPT_4_TURBO,Q.GPT_4O],getDefault:(e=null)=>(e||(e=Z.getDefault()),e===Z.GROQ?Q.LLAMA3_70B_8192:[Z.WPCOM_JETPACK_AI,Z.WPCOM_OPENAI,Z.OPENAI].includes(e)?Q.GPT_4O:e===Z.OLLAMA?Q.GEMMA_7b_INSTRUCT:e===Z.LOCALAI?Q.HERMES_2_PRO_MISTRAL:Q.GPT_4O)},ee=(e,t)=>{const n=Q.isMultimodal(t),o=Q.supportsToolMessages(t);return n||(e=e.map((e=>{if(e.content&&Array.isArray(e.content)){const t=e.content.filter((e=>"text"===e.type)).map((e=>e.text)).join("\n"),n=e.content.filter((e=>"image_url"===e.type)).map((e=>e.image_url.substring(0,200))).join("\n");e.content=[t,n].join("\n")}return e}))),o||(console.warn("remapping history",e),e=e.map((e=>"tool"===e.role?{...e,role:"user"}:e)),console.warn("remapped history",e)),e.map((e=>e.tool_calls?{...e,tool_calls:e.tool_calls.map((e=>("string"!=typeof e.function.arguments&&(e.function.arguments=JSON.stringify(e.function.arguments)),e)))}:e))},te="You are a helpful AI assistant.";function ne(e,t,n,o,i){const a=e.slice(-o),r=a.findIndex((e=>"tool"!==e.role));r>0&&a.splice(0,r);const s=[{role:"system",content:t},...ee(a,i)];return n&&s.push({role:"system",content:n}),s}class oe{constructor({apiKey:e,feature:t,sessionId:n}){this.apiKey=e,this.feature=t,this.sessionId=n,this.abortController=null}getApiKey(){return this.apiKey}async run({model:e,messages:t,tools:n,instructions:o,additionalInstructions:i,temperature:a,maxTokens:r,tags:s,middleware:c,sessionId:l,store:u}){var d,p;if(!t||!t.length)throw new Error("Missing history");e=null!==(d=e)&&void 0!==d?d:this.getDefaultModel(),t=ne(t,null!=o?o:te,i,this.maxHistoryLength,e),a=null!==(p=a)&&void 0!==p?p:this.getDefaultTemperature(e);const g=null!=r?r:this.getDefaultMaxTokens(e),h=c?c(this.call.bind(this),{tags:s}):this.call.bind(this),f=await h({model:e,temperature:a,max_tokens:g,messages:t,tools:n,sessionId:l,store:u}),m=f.choices[0];if("tool_calls"===m.finish_reason);else{if("length"===m.finish_reason)throw new Error("Finish reason length not implemented");"content_filter"===m.finish_reason||m.finish_reason}return!m.message.id&&f.id&&(m.message.id=f.id),m.message}async call(e){const t=this.getParams(e),n=this.getHeaders();this.abortController=new AbortController,K.info(` Calling ${this.constructor.name} with model ${t.model}, temperature ${t.temperature}, max_tokens ${t.max_tokens}`),K.storeLastPayload(t);const o=await fetch(this.getServiceUrl(),{method:"POST",headers:n,body:JSON.stringify(t),signal:this.abortController.signal});if(401===o.status)throw new Error("Unauthorized");if(403===o.status)throw new Error("Forbidden");if(429===o.status)throw new Error("Rate limit exceeded");if(500===o.status){const e=await o.text();throw new Error(`Internal server error: ${e}`)}let i;try{i=await o.json()}catch(e){if("AbortError"===e.name)return null;throw console.error("Error parsing response",e),new Error("Unexpected response format")}finally{this.abortController=null}var a;if("jetpack_ai_moderation"===i.code&&(i={choices:[{message:{content:"I can't help with that."}}],status:422}),i.code&&!i.choices)throw new Error(`${i.code} ${null!==(a=i.message)&&void 0!==a?a:""}`);if(i.error)throw console.error("Chat Model Error",i.error,t),new Error(`${i.error.type}: ${i.error.message}`);if(!i?.choices||i?.choices.length>1)throw console.error("Invalid response from server, unexpected number of choices",i,i?.choices),new Error("Invalid response from server");return i}async*runStream({model:e,messages:t,tools:n,instructions:o,additionalInstructions:i,temperature:a,maxTokens:r}){var s,c;if(!t||!t.length)throw new Error("Missing history");this.abortController=new AbortController;const l=this.getHeaders();e=null!==(s=e)&&void 0!==s?s:this.getDefaultModel(),t=ne(t,null!=o?o:te,i,this.maxHistoryLength,e),a=null!==(c=a)&&void 0!==c?c:this.getDefaultTemperature(e);const u=null!=r?r:this.getDefaultMaxTokens(e);K.info(` Streaming ${this.constructor.name} with model ${e}, temperature ${a}, max_tokens ${u}`);const d=this.getParams({model:e,temperature:a,max_tokens:u,messages:t,tools:n,stream:!0}),p=await fetch(this.getServiceUrl(),{method:"POST",headers:l,body:JSON.stringify(d),signal:this.abortController.signal});if(401===p.status)throw new Error("Unauthorized");if(403===p.status)throw new Error("Forbidden");if(429===p.status)throw new Error("Rate limit exceeded");if(500===p.status){const e=await p.text();throw new Error(`Internal server error: ${e}`)}const g=p.body.pipeThrough(new TextDecoderStream).pipeThrough(new X).getReader();try{for(;;){const{done:e,value:t}=await g.read();if(e)break;if("[DONE]"===t.data){yield{event:"done"};break}const n=JSON.parse(t.data);if("chat.completion.error"===n.object){yield{event:"chat.completion.error",data:n};break}"chat.completion.chunk"===n.object?yield{event:"chat.message.partial",data:n}:"moderation.result.combined"===n.object&&Object.keys(n.result).length>0?yield{event:"moderation.result.combined",data:n.result}:["moderation.result.custom","moderation.result.openai","moderation.result.classifications"].includes(n.object)?console.log(n.object,n):console.error("Unknown object type",t)}}catch(e){console.error("Stream reading error:",e)}finally{g.releaseLock()}}abortRequest(){this.abortController&&this.abortController.abort()}getParams({model:e,temperature:t,max_tokens:n,messages:o,tools:i,sessionId:a,tool_choice:r=null,stream:s=!1,response_format:c="text",parallel_tool_calls:l}){const u={stream:s,model:e,temperature:t,messages:o,max_tokens:n,response_format:c,sessionId:a,parallel_tool_calls:l};return i?.length&&(u.tools=i),r&&(u.tool_choice={type:"function",function:{name:r}}),u}getHeaders(){return{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}}getDefaultMaxTokens(){return 4096}getDefaultTemperature(){return.2}getDefaultModel(){throw new Error("Not implemented")}getServiceUrl(){throw new Error("Not implemented")}static getInstance(e,t,n,o){const i={apiKey:t,feature:n,sessionId:o};switch(e){case Z.GROQ:return new pe(i);case Z.OPENAI:return new de(i);case Z.WPCOM_JETPACK_AI:return new ie(i);case Z.WPCOM_OPENAI:return new ae(i);case Z.OLLAMA:return new re(i);case Z.LMSTUDIO:return new se(i);case Z.LOCALAI:return new ce(i);case Z.LOCAL_GRAPH:return new le(i);case Z.WPCOM_GRAPH:return new ue(i);default:throw new Error(`Unknown service: ${e}`)}}}class ie extends oe{getDefaultModel(){return Q.GPT_4O}getParams(e){const t=super.getParams(e);return this.feature&&(t.feature=this.feature),this.sessionId&&(t.session_id=this.sessionId),e.store&&(t.store=e.store),t}getServiceUrl(){return"https://public-api.wordpress.com/wpcom/v2/jetpack-ai-query"}}class ae extends oe{getHeaders(){const e=super.getHeaders();return this.feature&&(e["X-WPCOM-AI-Feature"]=this.feature,e["Access-Control-Request-Headers"]="authorization,content-type,X-WPCOM-AI-Feature"),this.sessionId&&(e["X-WPCOM-Session-ID"]=this.sessionId),e}getDefaultModel(){return Q.GPT_4O}getServiceUrl(){return"https://public-api.wordpress.com/wpcom/v2/ai-api-proxy/v1/chat/completions"}}class re extends oe{getDefaultModel(){return Q.GEMMA_7b_INSTRUCT}getServiceUrl(){return"http://localhost:11434/api/chat"}}class se extends oe{getDefaultModel(){return Q.PHI_3_MEDIUM}getServiceUrl(){return"http://localhost:1234/v1/chat/completions"}}class ce extends oe{getDefaultModel(){return Q.HERMES_2_PRO_MISTRAL}getServiceUrl(){return"http://localhost:1234/v1/chat/completions"}}class le extends oe{constructor({apiKey:e,feature:t,sessionId:n}){super({apiKey:e,feature:t,sessionId:n})}getApiKey(){return this.apiKey}getDefaultModel(){return Q.GPT_4O}getServiceUrl(){return"http://localhost:8000/ai-services/graphs/chat/completions"}}class ue extends oe{constructor({apiKey:e,feature:t,sessionId:n}){super({apiKey:e,feature:t,sessionId:n})}getHeaders(){const e=super.getHeaders();return this.feature&&(e["X-WPCOM-AI-Feature"]=this.feature,e["Access-Control-Request-Headers"]="authorization,content-type,X-WPCOM-AI-Feature"),this.sessionId&&(e["X-WPCOM-Session-ID"]=this.sessionId),e}getDefaultModel(){return Q.GPT_4O}getServiceUrl(){return"https://public-api.wordpress.com/wpcom/v2/graphs/v1/chat/completions"}}class de extends oe{getDefaultModel(){return Q.GPT_4O}getServiceUrl(){return"https://api.openai.com/v1/chat/completions"}getParams(e){const t=super.getParams(e);return"string"==typeof t.response_format&&(t.response_format={type:t.response_format}),t}}class pe extends oe{getDefaultModel(){return Q.LLAMA3_70B_8192}getDefaultTemperature(){return.1}getDefaultMaxTokens(){return 8192}getServiceUrl(){return"https://api.groq.com/openai/v1/chat/completions"}}function ge(){return"simple"===("object"==typeof window&&"string"==typeof window._currentSiteType?window._currentSiteType:null)}const he="jetpack-ai-jwt-token",fe=18e5,me=async(e,t=!0)=>{const n=await ye(t);n&&n.token&&e(n.token)};async function ye(e=!0){const t=localStorage.getItem(he);let n;if(t&&(n=JSON.parse(t)),n&&n?.token&&n?.expire&&n?.expire>Date.now()&&e)return n;const o=window.JP_CONNECTION_INITIAL_STATE?.apiNonce,i=window.Jetpack_Editor_Initial_State?.wpcomBlogId;let a={token:"",blog_id:""};try{a=ge()?await T()({path:"/wpcom/v2/sites/"+i+"/jetpack-openai-query/jwt",method:"POST"}):await T()({path:"/jetpack/v4/jetpack-ai-jwt?_cacheBuster="+Date.now(),credentials:"same-origin",headers:{"X-WP-Nonce":o},method:"POST"})}catch(e){K.error("Failed to fetch Jetpack token:",e)}const r={token:a.token,blogId:a.blog_id,expire:Date.now()+fe};return K.info("Storing new token"),localStorage.setItem(he,JSON.stringify(r)),r}let be=null;function we(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}const ve=[{title:"About",description:"Informational sections provide details about a company, product, or service. They often mostly include text, to educate visitors and answer common questions.",slug:"about"},{title:"Contact",description:"Contact sections allow visitors to see your location and get in touch with you.",slug:"contact"},{title:"Event Listings",description:"Event listings promote and provide details about upcoming events, conferences, meetings, or webinars.",slug:"events"},{title:"Footers",description:"Footers are sections located at the bottom of a website, often containing important information such as copyright details, terms and conditions, and contact information.",slug:"footer"},{title:"Image Galleries",description:"Image galleries showcase collections of images that can be browsed, viewed, and sometimes downloaded or shared.",slug:"gallery"},{title:"Headers",description:"The header section is typically located at the top of a website and contains essential information such as the brand's name, logo, navigation menu, and sometimes search functionality.",slug:"header"},{title:"Introduction",description:"Introduction sections are large, prominent areas at the top of a website that showcase key messages, images, or videos. They are designed to capture visitors' attention and encourage them to explore further.",slug:"intro"},{title:"Link in Bio",description:"Link in bio sections are a way to showcase a business or individuals social media profiles in a single, easily accessible location.",slug:"link-in-bio"},{title:"Menu",description:"Menus showcase the food offerings available at a restaurant, cafe, or eatery. They often include categories, descriptions, and prices for each item.",slug:"menu"},{title:"Subscription Forms",description:"Subscription forms are used for recurring payments, memberships, or services. They require users to input their information and agree to terms and conditions before committing to a subscription.",slug:"newsletter"},{title:"Page Title",description:"The page title is usually located at the top of subpages in order to give each subpage of the site a cohesive look.",slug:"page-title"},{title:"Blog Posts",description:"Blog posts are articles or entries published on a website's blog, often featuring news, updates, insights, or educational content.",slug:"posts"},{title:"Pricing Tiers",description:"Pricing tiers are used to display various pricing plans or options for products or services. They help customers compare features and costs, making it easier to choose the right plan for their needs.",slug:"pricing"},{title:"Services Offered",description:"Service offerings list the various services provided by a business, such as consulting, coaching, or training.",slug:"services"},{title:"Team",description:"Team sections showcase the people behind a business, including their names, roles, and sometimes images. This should only be used for business and professional sites that are likely to have a team of people they want to showcase.",slug:"team"},{title:"Testimonials",description:"Testimonials are statements from satisfied customers, clients, or users that highlight the benefits of a product or service.",slug:"testimonials"},{title:"Tickets",description:"Tickets are used to sell tickets for events.",slug:"tickets"},{title:"General content",description:"These are generic content sections that can be used to add site specific content to a page that may not fit into the other categories. For example a band might have a latest album section on their homepage.",slug:"general"}],ke=(ve.reduce(((e,t)=>(e[t.slug]=t,e)),{}),ve),_e={PRIMARY_HEADING:"h1","core/heading":"h2","core/paragraph":"p","core/site-title":"st","core/button":"b"};function xe(e,t){const n=[];return e.forEach((e=>{if(e.innerBlocks?.length>0)n.push(...xe(e.innerBlocks,t||e?.attributes?.metadata?.patternCategory));else if("core/heading"===e.name||"core/paragraph"===e.name||"core/button"===e.name){const a="intro"===t&&"core/heading"===e.name?"PRIMARY_HEADING":e.name;let r;var o,i;r="core/button"===e.name?null!==(o=null!==(i=e.attributes?.text?.text)&&void 0!==i?i:e.attributes?.text)&&void 0!==o?o:"Click here":"string"==typeof e.attributes.content?e.attributes.content:e.attributes.content?.originalHTML,n.push({name:a,clientId:e.clientId,example:r,block:e})}})),n}function Ce(e,t,n){const o={"core/heading":30,"core/paragraph":60,"core/button":8},i={"core/heading":0,"core/paragraph":0,"core/button":0};if(0===e.length&&t){const e=[];return Object.keys(i).forEach((t=>{for(;i[t]<3;)i[t]++,e.push({t:_e[t],i:"SPARE",ln:o[t]})})),{contentForRequest:e,clientIdMap:{},blockMap:null}}const a={},r={},s=e.map((e=>{i[e.name]++;const o=w(4);let s;return a[o]=e.clientId,t&&(r[e.clientId]=e.block),s=t?{t:_e[e.name],i:o,ln:e.example.length}:{t:_e[e.name],i:o,e:e.example},n&&(s.l=n),s}));return t&&Object.keys(i).forEach((e=>{for(;i[e]<3;)i[e]++,s.push({t:_e[e],i:"SPARE",ln:o[e]})})),{contentForRequest:s,clientIdMap:a,blockMap:t?r:null}}function Se(e,t){if(e?.innerBlocks){const n=e.innerBlocks.find((e=>e.attributes.className===t));if(n)return n;for(let n=0;n<e.innerBlocks.length;n++){const o=Se(e.innerBlocks[n],t);if(o)return o}}return!1}function Ee(e,t){if(e?.innerBlocks)for(let n=e.innerBlocks.length-1;n>=0;n--){const o=e.innerBlocks[n];if(o.attributes.className===t)return o;const i=Ee(o,t);if(i)return i}return!1}function Te({data:e,type:t,offset:n}){let o="";-1===n&&(n=0);for(let i=n%=e.length;i<e.length;i++)if(e[i][t])return o=e[i][t],{data:e,contentValue:o};return{data:e,contentValue:o}}function Ie(e,t){let n=`\x3c!--\\s*wp:${t}\\s*.*?--\x3e.*?\x3c!--\\s*/wp:${t}\\s*--\x3e`;return"navigation"===t&&(n=`\x3c!--\\s*wp:${t}\\s*[^/]*?/--\x3e`),e.replace(new RegExp(n,"gs"),"")}const Ae=e=>e?e.replace(/\n/g,"<br />"):"",Pe={argName:"it",encoders:{},selfContained:!1,strip:!0,internalPrefix:"_val",encodersPrefix:"_enc",delimiters:{start:"{{",end:"}}"}},Me={false:"function",true:"string"},Ne={evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,typeInterpolate:/\{\{%([nsb])=([\s\S]+?)\}\}/g,encode:/\{\{([a-z_$]+[\w$]*)?!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$]+(?:\.[\w$]+|\[[^\]]+\])*|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\}|\[[^\]]*\])/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g},Oe={n:"number",s:"string",b:"boolean"};function Re(e,t,n,o){return("string"==typeof n?n:n.toString()).replace(t.define,((e,n,i,a)=>(0===n.indexOf("def.")&&(n=n.substring(4)),n in o||(":"===i?(a.replace(t.defineParams,((e,t,i)=>{o[n]={arg:t,text:i}})),n in o||(o[n]=a)):new Function("def",`def['${n}']=${a}`)(o)),""))).replace(t.use,((n,i)=>{i=i.replace(t.useParams,((e,t,n,i)=>{if(o[n]&&o[n].arg&&i){const e=De((n+":"+i).replace(/'|\\/g,"_"));return o.__exp=o.__exp||{},o.__exp[e]=o[n].text.replace(new RegExp(`(^|[^\\w$])${o[n].arg}([^\\w$])`,"g"),`$1${i}$2`),t+`def.__exp['${e}']`}}));const a=new Function("def","return "+i)(o);return a?Re(e,t,a,o):a}))}function De(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}function Le(e,t){let n=0,o=Re(Pe,Ne,e,t||{});const i={};o=("let out='"+(Pe.strip?o.trim().replace(/[\t ]+(\r|\n)/g,"\n").replace(/(\r|\n)[\t ]+/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):o).replace(/'|\\/g,"\\$&").replace(Ne.interpolate,((e,t)=>`'+(${De(t)})+'`)).replace(Ne.typeInterpolate,((e,t,o)=>{n++;const i=Pe.internalPrefix+n,a=`throw new Error("expected ${Oe[t]}, got "+ (typeof ${i}))`;return`';const ${i}=(${De(o)});if(typeof ${i}!=="${Oe[t]}") ${a};out+=${i}+'`})).replace(Ne.encode,((e,t="",n)=>(i[t]=!0,n=De(n),`'+${Pe.encodersPrefix}${Pe.selfContained?t:t?"."+t:'[""]'}(${n})+'`))).replace(Ne.conditional,((e,t,n)=>n?(n=De(n),t?`';}else if(${n}){out+='`:`';if(${n}){out+='`):t?"';}else{out+='":"';}out+='")).replace(Ne.iterate,((e,t,o,i)=>{if(!t)return"';} } out+='";n++;const a=i?`let ${i}=-1;`:"",r=i?`${i}++;`:"",s=Pe.internalPrefix+n;return`';const ${s}=${De(t)};if(${s}){${a}for (const ${o} of ${s}){${r}out+='`})).replace(Ne.evaluate,((e,t)=>`';${De(t)}out+='`))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");const a=Array.isArray(Pe.argName)?function(e){return e.reduce(((e,t,n)=>e+(n?",":"")+t),"{")+"}"}(Pe.argName):Pe.argName;return 0===Object.keys(i).length?r((()=>new Function(a,o))):(function(e,t){const n=Me[e.selfContained];for(const o in t){const t=e.encoders[o];if(!t)throw new Error(`unknown encoder "${o}"`);if(typeof t!==n)throw new Error(`selfContained ${e.selfContained}: encoder type must be "${n}"`)}}(Pe,i),o=`return function(${a}){${o}};`,r((()=>Pe.selfContained?new Function(o=function(e,t){let n="";for(const o in t)n+=`const ${e.encodersPrefix}${o}=${e.encoders[o]};`;return n}(Pe,i)+o)():new Function(Pe.encodersPrefix,o)(Pe.encoders))));function r(e){try{return e()}catch(e){throw K.error("Could not create a template function: "+o),e}}}class Be{format(){throw new Error("Not implemented")}}class Fe extends Be{constructor({inputVariables:e,template:t,engine:n,formatters:o={},...i}){super(),this.validate(n,e),this.inputVariables=e,this.engine=n,this.template=t,this.formatters=o,Object.assign(this,i)}validate(e,t){try{const n=t.reduce(((e,t)=>(e[t]="foo",e)),{});e(n)}catch(e){throw new Error(`Invalid inputs: ${e.message}, inputs: ${t.join(", ")}`)}}format(e){const t=this.inputVariables.reduce(((t,n)=>(n in this.formatters?t[n]=this.formatters[n].format(e):t[n]=e[n],t)),{});return this.engine(t)}}class je extends Fe{constructor({template:e,inputVariables:t,...n}){super({engine:Le(e),template:e,inputVariables:t,...n})}static fromString(e,t=[],n={}){return new je({template:e,inputVariables:t,...n})}}const $e="undefined"!=typeof window&&window.bigSkyInitialState?.userLanguage?window.bigSkyInitialState.userLanguage:"English (United States)",Ue=je.fromString(`## {{= it.role }}\n\n{{? it.context }}\n\n## Context:\n{{= it.context }}\n{{?}}\n\n{{? it.examplesDescription }}\n## Examples:\n{{= it.examplesDescription }}\n\n{{~it.examples :value }}\n- {{= value }}\n{{~}}\n\n{{?}}\n\n{{? it.do && it.do.length }}\n## Things you should do:\n\n- Respond in ${$e} unless the user explicitly asks for a different language.\n{{~it.do :value }}\n- {{= value }}\n{{~}}\n\n{{?}}\n\n{{? it.dont && it.dont.length }}\n## Things you should NEVER do:\n\n{{~it.dont :value }}\n- {{= value }}\n{{~}}\n\n{{?}}\n{{? it.additionalInstructions }}\n## Additional instructions:\n{{= it.additionalInstructions }}\n{{?}}\n`,["role","context","examplesDescription","examples","do","dont","additionalInstructions"]);function He(e){return Ue.format({role:"You are an expert at generating realistic names, descriptions, dates, times, and locations for events that would be listed on a website when provided with a description of the website",do:["ALWAYS return an array of JSON objects as in the example response.","Keep the event names short and concise with 10-20 characters only.","Events should be ordered by date, starting with the earliest.","Event descriptions should always be two short sentences long, never longer. Never use quotes (' or \") in the description.",`Dates should always be after today's date which is: ${(new Date).toLocaleDateString()} and formatted in this style: ${e}`],examplesDescription:"Here is an example response:",examples:['{ events: [\n\t\t\t\t\t{"name": "Event Name", "description": "Event Description", "date": "Event Date", "time": "Event Time", "location": "Event Location"},\n\t\t\t\t\t{"name": "Event Name", "description": "Event Description", "date": "Event Date", "time": "Event Time", "location": "Event Location"}\n\t\t\t] }']})}const ze=Ue.format({role:"You are an expert at generating services offered when provided with a description of the website.",do:["ALWAYS return an array of JSON objects as in the example response.","Each service has a short name, a brief description, and link text.","The description should be one sentence long, never longer.","The link text should be a short phrase or word used as a call to action.","Keep the service names short and concise with 10-20 characters only."],examplesDescription:"Here is an example response:",examples:['{ services: [\n\t\t\t\t{"name": "Service Name", "description": "Service Description", "link": "Service Link"},\n\t\t\t\t{"name": "Service Name", "description": "Service Description", "link": "Service Link"}\n\t\t] }']}),Ge=Ue.format({role:"You are an expert at generating realistic testimonials for a website when provided with a description of the website.",do:["ALWAYS return an array of JSON objects as in the example response.","Assume all testimonials are for a positive 5-star rating.",'Each testimonial should contain the following information:\n            - name: The name of the person giving the testimonial, in the format of "First Name" "Last Initial", e.g. "John D."\n            - handle: The social media handle of the person giving the testimonial, e.g. "@john_doe"\n             - review: The review given by the person, no more than 2 sentences long.'],examplesDescription:"Here is an example response:",examples:['{ testimonials: [\n\t\t\t\t{"name": "John D.", "handle": "@john_doe", "review": "This is a wonderful product that was received as advertised! I would buy it again!"},\n\t\t\t\t{"name": "John D.", "handle": "@john_doe", "review": "This is a wonderful product that was received as advertised! I would buy it again!"}\n\t\t] }']}),qe=Ue.format({role:"You are an expert at generating team section content for a website when provided with a description of the website and the current section.",do:["Generate a short, engaging heading for the team section.",'The heading should be relevant to the website description and reason for the section, eg. "Our Team" for a company, "The Band" for a band site, "Our Chefs" for a restaurant, etc.',"The heading should be no more than 3 words.","Generate 6 unique team member titles/roles that are relevant to the website description.","Generate 6 unique team member bios that match their titles/roles and are relevant to the website description.","Each bio should be 1-2 sentences long and highlight the team member's expertise and experience.","Your response must be in valid JSON format."],examplesDescription:"Here is an example response in JSON format:",examples:['{ \n\t\t"heading": "Meet Our Chefs",\n\t\t"titles": [\n\t\t\t"Executive Chef",\n\t\t\t"Sous Chef",\n\t\t\t"Pastry Chef",\n\t\t\t"Line Cook",\n\t\t\t"Prep Cook",\n\t\t\t"Kitchen Manager"\n\t\t],\n\t\t"bios": [\n\t\t\t"With over 15 years of experience in fine dining, our Executive Chef brings innovative techniques and a passion for local ingredients to every dish.",\n\t\t\t"Our Sous Chef specializes in French cuisine and has trained in some of Paris\'s most prestigious kitchens.",\n\t\t\t"The Pastry Chef creates stunning desserts that are both visually striking and delicious, with a focus on seasonal flavors.",\n\t\t\t"With a background in Asian fusion cuisine, our Line Cook brings unique flavors and techniques to the kitchen.",\n\t\t\t"Our Prep Cook ensures all ingredients are perfectly prepared and maintains the highest standards of food safety.",\n\t\t\t"The Kitchen Manager keeps our operations running smoothly while maintaining our commitment to quality and efficiency."\n\t\t]\n\t}'],additionalInstructions:'Your response will only be in valid JSON with no other content. The response must contain "heading", "titles", and "bios" fields. The "titles" and "bios" fields should be arrays of 6 items each.'}),Ve={name:"footer",preprocessSection:function(e){e.html=Ie(e.html,"navigation")},getPrompts:function({siteLocation:e}){var t;return{system:(t=e?.name,Ue.format({role:"You are an expert at generating realistic address, phone, email and opening hours for footer section of a page that would be listed on a website when provided with a description of the website.",context:`The address: ${t||"unknown"}`,examplesDescription:"Here are examples for each part of the footer section:",examples:["Address: 123 Example Street\nSan Franciso, CA 12345","Phone and email: (123) 456-7890\nadmin@example.com","Opening hours: MondayFriday\n9am-5pm"],do:["Use the email, address, phone information in the site description if provided. Otherwise make up a realistic one."],additionalInstructions:'Your response will only be in valid JSON with no other content. All fields are required. Return the result as an array of JSON objects in the following format:\n            { "address": "Address in two lines", "phone-email": "Phone number and email address in two lines",\n\t\t\t"opening-hours": "Weekday from/to and time range for opening hours in two lines"}'})),user:"Generate the footer information for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:a,ITEM_KEY:r}=j;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===a?c=-1:t?.attributes?.metadata?.name===r&&c++;const l=["is-footer-address","is-footer-phone-email","is-footer-opening-hours"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedFooterData:n,contentValue:i}=Te({data:s,type:e.replace("is-footer-",""),offset:c});s=n,o?o(t.clientId,{content:i}):t.attributes.content=i}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c}};let We=!1;const Ye={name:"menu",getPrompts:function({siteLocation:e,numOfSections:t=2}){var n;return{system:(n=e?.name,Ue.format({role:"An expert at generating realistic food menus for a website when provided with a description of the website.",do:["ALWAYS return an array of JSON objects as in the example response.","The sections and items in the menu should always pertain to food or drink and be relevant to the website's description.",'The menus you generate will contain specific sections like "Lunch", "Cakes", "Dinner", "Coffee" and be tailored to the website\'s description.',"Each section of the menu will contain menu items with a name, description, and realistic price in the local currency for the item.",`The currency should include only the symbol of the currency for the location of '${n}'. If you cannot determine the correct currency symbol, use '$'.`,"Item descriptions should always be one short sentence long, never longer."],dont:["Use the word 'Menu' in the section names.","Use the same item in multiple sections.","Use quotes (' or \") in the description.","Use markdown or HTML in the JSON response."],examplesDescription:"Here is an example response:",examples:['{ menu: [\n\t\t\t\t\t{"name": "Menu Section Name", "items": [{"name": "Item Name", "description": "Item Description", "currency": "Currency Symbol", "price": "Item Price"}]},\n\t\t\t\t\t{"name": "Menu Section Name", "items": [{"name": "Item Name", "description": "Item Description", "currency": "Currency Symbol", "price": "Item Price"}]}\n\t\t\t] }']})),user:`Generate ${t} menu sections, each with 8 menu items relevant for this website based on the description and reason the section exists.`}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,sectionHeading:i,replaceHeading:a,startIndex:r=-1}){const{ITEMS_KEY:s,ITEM_KEY:c}=j;let l=null;if(!n||!t)return;t?.attributes?.metadata?.patternCategory?(l=JSON.parse(JSON.stringify(n)),We=!1):l=n;let u=r;t?.attributes?.metadata?.name===s?u=r:t?.attributes?.metadata?.name===c&&u++;const d=["is-menu-section-name","is-menu-item-name","is-menu-item-description","is-menu-item-currency","is-menu-item-price"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>d.includes(e)));if(e){if("is-menu-section-name"===e){if(!a)return;We=!1===We?0:1,r++}const{data:n,contentValue:s}=function({data:e,type:t,sectionIndex:n,sectionHeading:o,offset:i=0}){let a=n||0;o&&(a=Object.values(e).findIndex((e=>e.name===o)),-1===a&&(a=0));const r=e[a];let s="";if("section-name"===t)return s=r.name,{data:e,contentValue:s};const c=t.replace("item-","");for(let t=i%=r.items.length;t<r.items.length;t++)if(r.items[t][c])return s=r.items[t][c],{data:e,contentValue:s};return{data:e,contentValue:s}}({data:l,type:e.replace("is-menu-",""),sectionIndex:We,sectionHeading:i,offset:u});l=n,o?o(t.clientId,{content:s}):t.attributes.content=s}}for(const n of t.innerBlocks)u=e({rootBlock:n,data:l,updateBlockAttributes:o,sectionHeading:i,replaceHeading:a,startIndex:u});return u}};let Ke=-1;const Je={name:"pricing",getPrompts:function({siteLocation:e}){var t;return{system:(t=e?.name,Ue.format({role:"You are an expert at generating pricing tiers for a website when provided with a description of the website.",do:["Generate a short title no more than 3 words, and a brief description as an overview of the pricing tiers.","The pricing tiers you generate will contain specific sections with varying levels of services tailored to the website's description.",`Each pricing tier will contain a name, the price in the local currency for the location of '${t}', and a list of the services included.`,"Make up prices for the tiers, but ensure they are realistic for the website's description and for the services provided.",`The currency should include only the symbol of the currency for the location of '${t}'. If you cannot determine the correct currency symbol, use '$'.`,"The list of services should be realistic and relevant to the website's description. Features for a preceding tier should be always be included in the next tier."],additionalInstructions:'Your response will only be in valid JSON with no other content. You will return each pricing tier in a JSON array in the following format:\n\n\t\t{\n\t\t\t"title": "Pricing Tier Section Title",\n\t\t\t"description": "Pricing Tier Section Description",\n\t\t\t"tiers": [\n\t\t\t\t{\n\t\t\t\t\t"name": "Basic",\n\t\t\t\t\t"price": "$50",\n\t\t\t\t\t"services": [ "Service 1", "Service 2", "Service 3", "Service 4" ]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "Standard",\n\t\t\t\t\t"price": "$100",\n\t\t\t\t\t"services": [ "Services from Basic Tier", "Service 5", "Service 6", "Service 7" ]\n\t\t\t\t}\n\t\t\t]\n\t\t}'})),user:"Generate 3 pricing tiers with 4 features in each tier. The first feature of the second tier should include all the features of the first tier, and so on."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:a,ITEM_KEY:r}=j;let s=null;if(!n)return;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===a?c=i:t?.attributes?.metadata?.name===r&&c++;const l=["is-pricing-title","is-pricing-description","is-pricing-tier-name","is-pricing-tier-price","is-pricing-tier-service","is-pricing-tier-service-checked"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){"is-pricing-tier-name"===e&&(i++,Ke=-1),e.startsWith("is-pricing-tier-service")&&Ke++;const{data:n,contentValue:a}=function({data:e,type:t,tierIndex:n,serviceIndex:o=0}){const i=Array.isArray(e)?e[0]:e;let a="";if(["title","description"].includes(t))return a=i[t],{data:e,contentValue:a};const r=t.replace("tier-",""),s=(n&&-1!==n?n:0)%i.tiers.length;if(["name","price"].includes(r))return a=i.tiers[s][r],{data:e,contentValue:a};const c=i.tiers[s].services;return["service"].includes(r)?(a=c[o],{data:e,contentValue:a}):["service-checked"].includes(r)?(a=`<b></b> ${c[o]}`,{data:e,contentValue:a}):{data:e,contentValue:a}}({data:s,type:e.replace("is-pricing-",""),tierIndex:c,serviceIndex:Ke});s=n,o?o(t.clientId,{content:a}):t.attributes.content=a}}for(const n of t.innerBlocks)c=e({rootBlock:n,data:s,updateBlockAttributes:o,startIndex:c});return c},preprocessSection:function(e){e.html=Ie(e.html,"buttons")},isCachedContentValid:function(e){return e?.length>0&&e[0]?.tiers}};function Xe(e){return"jetpack/map"===e.name?(0,k.createBlock)("core/group",{style:{dimensions:{minHeight:e.attributes.mapHeight}}},[e]):(e.innerBlocks=e.innerBlocks.map((e=>Xe(e))),e)}const Ze={name:"contact",getPrompts:function({siteLocation:e}){var t;return{system:(t=e?.name,Ue.format({role:"You are an expert at generating realistic descriptions, address, phone, email and opening hours for contact us page that would be listed on a website when provided with a description of the website",context:`The address: ${t||"unknown"}`,do:["If the site location name is provided you must always use it for the `address` property.","Contact Us descriptions should always be two short sentences long, never longer. Never use quotes (' or \") in the description.","Your response will always be in valid JSON and an array of objects with all the specified fields and no other content. All fields are required."],examplesDescription:"Here is an example response:",examples:["[{'address: 123 Example Street\nSan Franciso, CA 12345',\n\t\t\t'phone-email: (123) 456-7890\nadmin@example.com',\n\t\t\t'address-phone: 123 Example Street,\nSan Francisco, CA 12345\n(123)-456-7890',\n\t\t\t'opening-hours: MondayFriday\n9am-5pm',\n\t\t\t'description: Contact us anytime for any questions or concerns.}]"]})),user:"Generate the contact information for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:a,ITEM_KEY:r}=j;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===a?c=-1:t?.attributes?.metadata?.name===r&&c++;const l=["is-contact-description","is-contact-address","is-contact-phone-email","is-contact-address-phone","is-contact-opening-hours"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedContactData:n,contentValue:i}=Te({data:s,type:e.replace("is-contact-",""),offset:c});s=n,o?o(t.clientId,{content:i}):t.attributes.content=i}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c},preprocessSection:function(e){const t=(0,k.parse)(e.html);e.html=(0,k.serialize)(t.map((e=>Xe(e))))}};function Qe(e,t){if(!e)return[];const n=[];if(e.attributes?.className?.includes(t)&&n.push(e),e.innerBlocks?.length)for(const o of e.innerBlocks)n.push(...Qe(o,t));return n}const et={name:"team",getPrompts:function(){return{system:qe,user:"Generate a heading for the team section and 6 unique team member titles/roles and bios based on the description and reason the section exists."}},replaceContent:function({rootBlock:e,data:t,updateBlockAttributes:n}){if(!t||!e)return;const o=Qe(e,"is-team-heading");if(o.length>0){const e=t.heading;n?n(o[0].clientId,{content:e}):o[0].attributes.content=e}const i=Qe(e,"is-team-title");i.length>0&&t.titles?.length&&i.forEach(((e,o)=>{if(o<t.titles.length){const i=t.titles[o];n?n(e.clientId,{content:i}):e.attributes.content=i}}));const a=Qe(e,"is-team-bio");a.length>0&&t.bios?.length&&a.forEach(((e,o)=>{if(o<t.bios.length){const i=t.bios[o];n?n(e.clientId,{content:i}):e.attributes.content=i}}))}},tt={pricing:Je,footer:Ve,contact:Ze},nt={events:{name:"events",getPrompts:function({conceptSection:e}){const t=e?.length?Se(e[0],"is-event-date"):null;let n="Jan 1, 2025";return t&&(n="string"==typeof t.attributes.content?t.attributes.content:t.attributes.content?.originalHTML),{system:He(n),user:"Generate 10 event names, descriptions, dates, and locations for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:a,ITEM_KEY:r}=j;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===a?c=i:t?.attributes?.metadata?.name===r&&c++;const l=["is-event-date","is-event-time","is-event-name","is-event-description","is-event-location"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedEventsData:n,contentValue:i}=Te({data:s,type:e.replace("is-event-",""),offset:c});s=n,o?o(t.clientId,{content:i}):t.attributes.content=i}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c}},menu:Ye,pricing:Je,services:{name:"services",getPrompts:function(){return{system:ze,user:"Generate 6 services relevant for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:a,ITEM_KEY:r}=j;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===a?c=i:t?.attributes?.metadata?.name===r&&c++;const l=["is-service-name","is-service-description","is-service-link"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedServicesData:n,contentValue:i}=Te({data:s,type:e.replace("is-service-",""),offset:c});s=n,((e,t,n=null)=>{const o={"core/button":{text:t},"core/paragraph":e.attributes?.className?.includes("is-service-link")?{content:`<a href="#">${t}</a>`}:{content:t},default:{content:t}},i=o[e.name]||o.default;n?n(e.clientId,i):Object.assign(e.attributes,i)})(t,i,o)}}for(const n of t.innerBlocks)c=e({rootBlock:n,data:s,updateBlockAttributes:o,startIndex:c});return c}},testimonials:{name:"testimonials",getPrompts:function(){return{system:Ge,user:"Generate 4 testimonials for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:a,ITEM_KEY:r}=j;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===a?c=i:t?.attributes?.metadata?.name===r&&c++;const l=["is-testimonial-name","is-testimonial-handle","is-testimonial-review"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedTestimonialsData:n,contentValue:i}=Te({data:s,type:e.replace("is-testimonial-",""),offset:c});s=n;let a=i;"is-testimonial-name"===e?a=(0,m.__)("Testimonial generated by AI","big-sky"):"is-testimonial-handle"===e&&(
// translators: @generatedbyai is a fake account name we use to make it clear that an AI generated testimonial is AI generated.
a=(0,m.__)("@generatedbyai","big-sky")),o?o(t.clientId,{content:a}):t.attributes.content=a}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c}},contact:Ze,team:et,footer:Ve},ot=Object.keys(nt),it=Object.keys(tt);function at(e){return e?.length>0}var rt;const st={"gpt-3.5-turbo-0125":{inputCost:5e-4,outputCost:.0015},"gpt-4o":{inputCost:.005,outputCost:.015},"gpt-4-turbo":{inputCost:.01,outputCost:.03},"gpt-4o-mini":{inputCost:15e-5,outputCost:6e-4},"dall-e-3":{imageCost:.04}},ct={"claude-3-5-sonnet-20241022":{inputCost:.003,outputCost:.015}},lt={bigSkyInitialState:window?.bigSkyInitialState,apiKey:"",currentUserMessage:"",isSendingMessage:!1,pendingToolCallbacks:0,currentToolCall:"",hasRetriedChatRequest:!1,assistant:"",messages:[],isThinking:!1,suggestions:{},buildProgress:0,advancedChatModel:"gpt-4.1-2025-04-14",basicChatModel:"gpt-4.1-nano-2025-04-14",imageGenModel:"dall-e-3",openAIUsage:{},anthropicUsage:{},commands:{},stock_photos:{},selectedSectionContent:{},cachedContent:{},patternCategories:(()=>{if(!ke)return[];const e={};return ke.forEach((t=>{e[t.slug]||(e[t.slug]={description:t.description,title:t.title})})),e})(),remotePatterns:[],generatedPatterns:[],currentPageMetadata:{},fullPageStructure:{summary:"",clientIdMap:{}},delaySettings:{onboarding:{afterBlockProcessed:1e3,afterScrollToBlock:1500}},isAssistantButtonVisible:!1,isToolContainerVisible:!1,isDragging:!1,toolComponent:null,showThread:!1,chatComponents:[],dockView:D.MENUS,onSelectedBlockAction:{},inputtedFiles:[],onInputtedFilesAction:{},showChatContinueButton:!1,chatContinueButtonOnClick:()=>{},showEditorWelcome:!1,messagesToDelete:[],focusInput:0,scrollChatToBottom:0,isEditorReady:!1,isEditorIframeLoaded:!1,isTemplatePartContentReady:!1,blockBeforeChanges:null,lastEditorState:null,handoffStep:0,siteSpecList:null,isConfirmingSpecs:!1,isEditingSpecs:!1,logSessions:!0,sessionId:we(),chosenCategories:[],chosenColorsComponent:null,generatedVariations:[],chosenFonts:[],isBuildingSite:!1,headerSectionIsReady:!1,currentHandoffArea:"welcome",userStyleWithSettings:{},currentColor:"",currentFont:"",imageStyle:"",isTyping:!1,siteMetadata:null!==(rt=window?.bigSkyInitialState?.siteMetadata)&&void 0!==rt?rt:R,isMaximized:!1,initializedCustomScheme:!1,hideInput:!1,hideChatNavigationBackButton:!1,customVariationTemplates:[],currentPaletteColors:[],googleFonts:{font_families:[]},generatedPatternChunksAsJSON:[],generatedPatternAsBlocks:[],generatedPatternAsString:"",generatedPatternDummySectionClientId:null,generatedRootPatternClientId:null,pendingPlan:null,awaitingUserInput:!1,isPlanRunning:!1,callbacks:{},contexts:{},error:null};async function ut(e,t=!1){return new Promise((t=>setTimeout(t,e))).then(t)}const dt=["store"],pt=[13510,13530,13528,13518,13460,13462,13469],gt={ID:1,URL:"https://dotcompatterns.wordpress.com/wp-content/uploads/2024/01/paint-wide-3.jpg"},ht=e=>({type:"ADD_MESSAGE",message:{...e,id:e.id||we(),created_at:e.created_at||Date.now()/1e3}}),ft={addMessage:ht,assistantSay:(e,t={})=>ht({role:"assistant",content:e?[{type:(0,f.isValidElement)(e)?"component":"text",...(0,f.isValidElement)(e)?{component:e}:{text:e}}]:"",...t}),runChatCompletion:(e,t=[],n,o=.1,i="text",a=!1)=>async({select:r,dispatch:s})=>{var c;const l=await ye(!a);if(!l)return;const u={model:e,messages:t,stream:!1,temperature:o,session_id:r.getSessionId()};e===r.getAdvancedChatModel()&&(u.parallel_tool_calls=!1),n&&(u.tools=n),i&&(u.response_format=i);const d=null!==(c=window.bigSkyInitialState?.isDevMode)&&void 0!==c&&c,p=new ie({apiKey:l.token,feature:d?"big-sky-dev":"big-sky",sessionId:r.getSessionId()});be=p;try{const t=await p.call(u);if(s.logOpenAIUsage(e,t.usage),401===t.status)throw new Error("Unauthorized");if(403===t.status)throw new Error("Forbidden");if(429===t.status)throw new Error("Rate limit exceeded");if(500===t.status){const e=await t.text();throw new Error(`Internal server error: ${e}`)}return t}catch(r){if("AbortError"===r.name)throw r;return a?(K.error("OpenAI error",r),s.setError("OpenAI error: "+r),null):s.runChatCompletion(e,t,n,o,i,!0)}},generateImage:({model:e,prompt:t,n=1,size:o,response_format:i="url",image_format:a="PNG",retry:r=!1})=>async({select:s,dispatch:c})=>{try{var l;const u=await ye(!r);if(!u)return;const d="https://public-api.wordpress.com/wpcom/v2/jetpack-ai-image",p=null!==(l=window.bigSkyInitialState?.isDevMode)&&void 0!==l&&l,g={model:e,prompt:t,n,size:o,response_format:i,remove_background:!0,image_format:a,feature:p?"big-sky-dev":"big-sky",session_id:s.getSessionId()},h=await fetch(d,{method:"POST",headers:{Authorization:`Bearer ${u.token}`,"Content-Type":"application/json"},body:JSON.stringify(g)});if(h.status>=300)return r?(K.error("Error calling Image Generation API: ",h),null):c.generateImage({model:e,prompt:t,n,size:o,response_format:i,image_format:a,retry:!0});const f=await h.json();return c.logOpenAIUsage(e,f.usage),f}catch(s){return r?(K.error("OpenAI error",s),null):c.generateImage({model:e,prompt:t,n,size:o,response_format:i,image_format:a,retry:!0})}},logOpenAIUsage:function(e,t){return{type:"LOG_OPENAI_USAGE",payload:{model:e,usage:t}}},setGoogleFonts:e=>({type:"SET_GOOGLE_FONTS_COLLECTION",payload:e}),nextStockPhoto:(e,t,n,o=[])=>async({dispatch:i,resolveSelect:a})=>{const r=await a.getPhotosFromPexels(e,t);r?.photos&&0!==r?.photos.length||(K.error("Photos not set - falling back to default"),r.photos=[gt]),r.photos=r.photos.filter(((e,t,n)=>t===n.findIndex((t=>t.ID===e.ID)))),r.photos=r.photos.filter((e=>!o.includes(e.URL)));const s=(e,t)=>{const n=e/t;return Math.abs(n-1)<.1?"square":n>1?"landscape":"portrait"},c=(e=>{if(!e)return null;const[t,n]=e.split("/").map(Number);return t&&n?t/n:null})(n),l=c?s(c,1):null;let u;return l?r.photos.sort(((e,t)=>{const n=s(e.width,e.height),o=s(t.width,t.height);return n===l==(o===l)?Math.random()-.5:n===l?-1:1})):r.photos.sort((()=>Math.random()-.5)),u=1===r.photos.length?r.photos[0]:r.photos.shift(),i({type:"SET_STOCK_PHOTOS",payload:r,topic:e}),u},removeOldestMessage:()=>({type:"SHIFT_MESSAGE"}),setIsAssistantButtonVisible:e=>({type:"SET_IS_ASSISTANT_BUTTON_VISIBLE",payload:e}),setIsToolContainerVisible:e=>({type:"SET_IS_TOOL_CONTAINER_VISIBLE",payload:e}),setIsDragging:e=>({type:"SET_IS_DRAGGING",payload:e}),setToolComponent:e=>({type:"SET_TOOL_COMPONENT",payload:e}),setCurrentUserMessage:e=>({type:"SET_CURRENT_USER_MESSAGE",payload:e}),archiveMessages:()=>({type:"ARCHIVE_MESSAGES"}),archiveMessage:e=>({type:"ARCHIVE_MESSAGE",payload:e}),setLogSessions:e=>({type:"SET_LOG_SESSIONS",payload:e}),setSessionLogged:e=>({type:"SET_SESSION_LOGGED",payload:e}),deleteMessage:e=>({type:"DELETE_MESSAGE",payload:e}),setSelectedSectionContent:e=>({type:"SET_PATTERN_SHUFFLING_CONTENT",payload:e}),clearSelectedSectionContent:()=>({type:"CLEAR_PATTERN_SHUFFLING_CONTENT"}),setIsEditorReady:e=>({type:"SET_IS_EDITOR_READY",payload:e}),setIsEditorIframeLoaded:e=>({type:"SET_IS_EDITOR_IFRAME_LOADED",payload:e}),addCachedContent:e=>({type:"ADD_CACHED_CONTENT",payload:e}),addCachedImage:e=>({type:"ADD_CACHED_IMAGE",payload:e}),addCommand:e=>({type:"ADD_COMMAND",payload:e}),resetCachedContent:()=>(localStorage.removeItem(`bigSkyCachedContent${window.Jetpack_Editor_Initial_State?.wpcomBlogId}`),{type:"SET_CACHED_CONTENT",payload:{}}),setRemotePatterns:(e,t)=>({type:"SET_REMOTE_PATTERNS",payload:[e,t]}),setGeneratedPatterns:e=>({type:"SET_GENERATED_PATTERNS",payload:e}),setIsEditingPageLayout:e=>({type:"SET_IS_EDITING_PAGE_LAYOUT",payload:e}),setCurrentPageMetadata:e=>({type:"SET_CURRENT_PAGE_METADATA",payload:e}),setIsBuildingSite:e=>({type:"SET_IS_BUILDING_SITE",payload:e}),setIsHandoff:e=>({type:"SET_IS_HANDOFF",payload:e}),setCurrentHandoffArea:e=>({type:"SET_CURRENT_HANDOFF_AREA",payload:e}),setChatComponents:e=>({type:"SET_CHAT_COMPONENTS",payload:e}),setShowThread:e=>({type:"SET_SHOW_THREAD",payload:e}),setCurrentToolCall:e=>({type:"SET_CURRENT_TOOL_CALL",payload:e}),incrementPendingToolCallbacks:()=>({type:"INCREMENT_PENDING_TOOL_CALLBACKS"}),decrementPendingToolCallbacks:()=>({type:"DECREMENT_PENDING_TOOL_CALLBACKS"}),setDockView:e=>({type:"SET_DOCK_VIEW",payload:e}),setChosenCategories:e=>({type:"SET_CHOSEN_CATEGORIES",payload:e}),setChosenColorsComponent:e=>({type:"SET_CHOSEN_COLORS_COMPONENT",payload:e}),setChosenFonts:e=>({type:"SET_CHOSEN_FONTS",payload:e}),setBlockBeforeChanges:e=>({type:"SET_BLOCK_BEFORE_CHANGES",payload:e}),setOnSelectedBlockAction:e=>({type:"SET_ON_SELECTED_BLOCK_ACTION",payload:e}),setIsTemplatePartContentReady:e=>({type:"SET_IS_TEMPLATE_PART_CONTENT_READY",payload:e}),setUserStyleWithSettings:e=>({type:"SET_USER_STYLE_WITH_SETTINGS",payload:e}),setInputtedFiles:e=>({type:"SET_INPUTTED_FILES",payload:e}),setOnInputtedFilesAction:e=>({type:"SET_ON_INPUTTED_FILES_ACTION",payload:e}),setShowChatContinueButton:e=>({type:"SET_SHOW_CHAT_CONTINUE_BUTTON",payload:e}),setChatContinueButtonOnClick:e=>({type:"SET_CHAT_CONTINUE_BUTTON_ON_CLICK",payload:e}),setCurrentColor:e=>({type:"SET_CURRENT_COLOR",payload:e}),setInitializedCustomScheme:e=>({type:"SET_INITIALIZED_CUSTOM_SCHEME",payload:e}),pushGeneratedVariations:e=>({type:"PUSH_GENERATED_VARIATIONS",payload:e}),modifyGeneratedVariation:(e,t)=>({type:"MODIFY_GENERATED_VARIATION",payload:{name:e,variation:t}}),setCurrentFont:e=>({type:"SET_CURRENT_FONT",payload:e}),setImageStyle:e=>({type:"SET_IMAGE_STYLE",payload:e}),setIsTyping:e=>({type:"SET_IS_TYPING",payload:e}),setApiKey:e=>({type:"SET_API_KEY",payload:e}),setHasRetriedChatRequest:e=>({type:"SET_HAS_RETRIED_CHAT_REQUEST",payload:e}),setSiteMetadata:e=>({type:"SET_SITE_METADATA",payload:e}),setHandoffStep:e=>({type:"SET_HANDOFF_STEP",payload:e}),resetStore:()=>({type:"RESET_STORE"}),setIsMaximized:e=>({type:"SET_IS_MAXIMIZED",payload:e}),setHideInput:e=>({type:"SET_HIDE_INPUT",payload:e}),setIsConfirmingSpecs:e=>({type:"SET_IS_CONFIRMING_SPECS",payload:e}),setIsEditingSpecs:e=>({type:"SET_IS_EDITING_SPECS",payload:e}),setSiteSpecList:e=>({type:"SET_SITE_SPEC_LIST",payload:e}),setShowEditorWelcome:e=>({type:"SET_SHOW_EDITOR_WELCOME",payload:e}),setAssistant:e=>({type:"SET_ASSISTANT",payload:e}),setGeneratedPatternAsString:e=>({type:"SET_GENERATED_PATTERN_AS_STRING",payload:e}),setGeneratedPatternChunksAsJSON:e=>({type:"SET_GENERATED_PATTERN_CHUNKS_AS_JSON",payload:e}),setGeneratedPatternAsBlocks:e=>({type:"SET_GENERATED_PATTERN_AS_BLOCKS",payload:e}),setGeneratedPatternDummySectionClientId:e=>({type:"SET_GENERATED_PATTERN_DUMMY_SECTION_CLIENT_ID",payload:e}),setGeneratedRootPatternClientId:e=>({type:"SET_GENERATED_ROOT_PATTERN_CLIENT_ID",payload:e}),logAnthropicUsage:(e,t)=>({type:"LOG_ANTHROPIC_USAGE",payload:{model:e,usage:t}}),setCurrentPaletteColors:e=>({type:"SET_CURRENT_PALETTE_COLORS",payload:e}),setPendingPlan:e=>({type:"SET_PENDING_PLAN",plan:e}),setAwaitingUserInput:e=>({type:"SET_AWAITING_USER_INPUT",isAwaiting:e}),addMessageToDelete:e=>({type:"ADD_MESSAGE_TO_DELETE",message:e}),clearMessagesToDelete:()=>({type:"CLEAR_MESSAGES_TO_DELETE"}),setLastEditorState:e=>({type:"SET_LAST_EDITOR_STATE",payload:e}),incrementFocusInput:()=>({type:"INCREMENT_FOCUS_INPUT"}),incrementScrollChatToBottom:()=>({type:"INCREMENT_SCROLL_CHAT_TO_BOTTOM"}),setIsSendingMessage:e=>({type:"SET_IS_SENDING_MESSAGE",payload:e}),userSay:(e,t=[])=>ht({role:"user",id:we(),content:[{type:"text",text:e},...t?.map((e=>({type:"image_url",image_url:e})))]}),setThinking:e=>({type:"SET_THINKING",payload:e}),clearMessages:()=>({type:"CLEAR_MESSAGES"}),setPlanRunning:e=>({type:"SET_PLAN_RUNNING",running:e}),setSuggestions:e=>({type:"SET_SUGGESTIONS",payload:e}),clearSuggestions:()=>({type:"CLEAR_SUGGESTIONS"}),registerCallbacks:(e,t)=>({type:"REGISTER_CALLBACKS",name:e,callbacks:t}),registerContext:(e,t)=>({type:"REGISTER_CONTEXT",name:e,context:t}),setError:e=>({type:"SET_ERROR",error:e}),setHideChatNavigationBackButton:e=>({type:"SET_HIDE_CHAT_NAVIGATION_BACK_BUTTON",payload:e}),setBuildProgress:e=>({type:"SET_BUILD_PROGRESS",payload:e}),setHeaderSectionIsReady:e=>({type:"SET_HEADER_SECTION_IS_READY",payload:e}),setFullPageStructure:e=>({type:"SET_FULL_PAGE_STRUCTURE",payload:e})},mt=S((e=>e.messages.filter((e=>!e.archived))),(e=>[e.messages])),yt=S(((e,t)=>{const n=e.remotePatterns[t]?.filter((e=>"page-title"===e.category));return n}),((e,t)=>[e.remotePatterns[t]])),bt=S((e=>{const t={};return e.bigSkyInitialState?.siteIntent&&(t.siteIntent=e.bigSkyInitialState.siteIntent),e.bigSkyInitialState?.siteGoals&&e.bigSkyInitialState.siteGoals.length>0&&(t.siteGoals=e.bigSkyInitialState.siteGoals),t}),(e=>[e.bigSkyInitialState])),wt=(0,g.createReduxStore)("ai-assembler",{reducer:function(e=lt,t){var n,o;const i=`bigSkyCachedContent${window.Jetpack_Editor_Initial_State?.wpcomBlogId}`;switch(t.type){case"SET_GOOGLE_FONTS_COLLECTION":return{...e,googleFonts:t.payload};case"SET_IS_ASSISTANT_BUTTON_VISIBLE":return{...e,isAssistantButtonVisible:t.payload};case"SET_IS_TOOL_CONTAINER_VISIBLE":return{...e,isToolContainerVisible:t.payload};case"SET_IS_DRAGGING":return{...e,isDragging:t.payload};case"SET_TOOL_COMPONENT":case"SET_TOOL_RESULT":return{...e,toolComponent:t.payload};case"SET_CURRENT_USER_MESSAGE":return{...e,currentUserMessage:t.payload};case"LOG_OPENAI_USAGE":const{model:a,usage:r={}}=t.payload,s={completionTokens:0,promptTokens:0,totalTokens:0,totalRequests:0,estimatedCost:0,...e.openAIUsage[a]};s.completionTokens+=r.completion_tokens,s.promptTokens+=r.prompt_tokens,s.totalTokens+=r.total_tokens,s.totalRequests+=1;const c=function(e,t,n){if(st[e]){const{inputCost:o,outputCost:i}=st[e];return t/1e3*o+n/1e3*i}return(t+n)/1e3*.03}(a,r.prompt_tokens,r.completion_tokens);return s.estimatedCost+=c,{...e,openAIUsage:{...e.openAIUsage,[a]:s}};case"LOG_ANTHROPIC_USAGE":const{model:l,usage:u={}}=t.payload,d={inputTokens:0,outputTokens:0,totalTokens:0,totalRequests:0,estimatedCost:0,...e.anthropicUsage[l]};d.inputTokens+=u.input_tokens||0,d.outputTokens+=u.output_tokens||0,d.totalTokens=d.inputTokens+d.outputTokens,d.totalRequests+=1;const p=function(e,t,n){if(ct[e]){const{inputCost:o,outputCost:i}=ct[e];return t/1e3*o+n/1e3*i}return 0}(l,u.input_tokens||0,u.output_tokens||0);return d.estimatedCost+=p,{...e,anthropicUsage:{...e.anthropicUsage,[l]:d}};case"SET_LOG_SESSIONS":return{...e,logSessions:t.payload};case"SET_SESSION_ID":return{...e,sessionId:t.payload};case"SET_SESSION_LOGGED":return{...e,sessionLogged:t.payload};case"SET_STOCK_PHOTOS":return{...e,stock_photos:{...e.stock_photos,[t.topic]:t.payload}};case"SET_PATTERN_SHUFFLING_CONTENT":return{...e,selectedSectionContent:{...e.selectedSectionContent,...t.payload}};case"CLEAR_PATTERN_SHUFFLING_CONTENT":return{...e,selectedSectionContent:{}};case"SET_IS_EDITOR_READY":return{...e,isEditorReady:t.payload};case"SET_IS_EDITOR_IFRAME_LOADED":return{...e,isEditorIframeLoaded:t.payload};case"ADD_CACHED_CONTENT":const g={p:"paragraph",h2:"heading",b:"button"}[t.payload.type],h=t.payload.category,f=!!t.payload.append;let m;if(ot.includes(h)){const n=Array.isArray(t.payload.content)?t.payload.content:[t.payload.content];m={...e.cachedContent},m[h]&&!t.payload.clear||(m[h]=[]);const o="pricing"===h?"title":"name";n.forEach((e=>{const t=m[h].findIndex((t=>t[o]===e[o]));if(-1===t)m[h].push(e);else if(f)if("menu"===h||"pricing"===h){const n="menu"===h?"items":"tiers";m[h][t][n].push(...e[n])}else m[h].push(e);else m[h][t]=e}))}else{const n=`${h}-${g}`;m={...e.cachedContent,[n]:[...e.cachedContent[n]?e.cachedContent[n]:[],t.payload.content]}}return localStorage.setItem(i,JSON.stringify({...m,lastUpdated:Date.now()})),{...e,cachedContent:m};case"SET_CACHED_CONTENT":return localStorage.setItem(i,JSON.stringify({...t.payload,lastUpdated:Date.now()})),{...e,cachedContent:t.payload};case"ADD_CACHED_IMAGE":return{...e,cachedContent:{...e.cachedContent,images:[...e.cachedContent.images?e.cachedContent.images:[],t.payload]}};case"ADD_COMMAND":return{...e,commands:{...e.commands,...t.payload}};case"SET_REMOTE_PATTERNS":const[y,b]=t.payload;return{...e,remotePatterns:{...e.remotePatterns,[b]:y}};case"SET_GENERATED_PATTERNS":return{...e,generatedPatterns:t.payload};case"SET_IS_EDITING_PAGE_LAYOUT":return{...e,isEditingPageLayout:t.payload};case"SET_CURRENT_PAGE_METADATA":return{...e,currentPageMetadata:t.payload};case"SET_IS_BUILDING_SITE":return{...e,isBuildingSite:t.payload};case"SET_IS_HANDOFF":return{...e,isHandoff:t.payload};case"SET_CURRENT_HANDOFF_AREA":return{...e,currentHandoffArea:t.payload};case"SET_CHAT_COMPONENTS":return{...e,chatComponents:t.payload};case"SET_SHOW_THREAD":return{...e,showThread:t.payload};case"SET_CURRENT_TOOL_CALL":return{...e,currentToolCall:t.payload};case"INCREMENT_PENDING_TOOL_CALLBACKS":return{...e,pendingToolCallbacks:e.pendingToolCallbacks+1};case"DECREMENT_PENDING_TOOL_CALLBACKS":return{...e,pendingToolCallbacks:Math.max(0,e.pendingToolCallbacks-1)};case"SET_DOCK_VIEW":return{...e,dockView:t.payload};case"SET_CHOSEN_CATEGORIES":return{...e,chosenCategories:t.payload};case"SET_CHOSEN_COLORS_COMPONENT":return{...e,chosenColorsComponent:t.payload};case"SET_INITIALIZED_CUSTOM_SCHEME":return{...e,initializedCustomScheme:t.payload};case"PUSH_GENERATED_VARIATIONS":return{...e,generatedVariations:[...t.payload,...e.generatedVariations]};case"MODIFY_GENERATED_VARIATION":const{name:w,variation:v}=t.payload,k=e.generatedVariations.map((e=>e.title===w?v:e));return k.includes(v)||k.push(v),{...e,generatedVariations:k};case"SET_CHOSEN_FONTS":return{...e,chosenFonts:t.payload};case"SET_IMAGE_STYLE":return{...e,imageStyle:t.payload};case"SET_BLOCK_BEFORE_CHANGES":return{...e,blockBeforeChanges:t.payload};case"SET_ON_SELECTED_BLOCK_ACTION":return{...e,onSelectedBlockAction:t.payload};case"SET_IS_TEMPLATE_PART_CONTENT_READY":return{...e,isTemplatePartContentReady:t.payload};case"SET_USER_STYLE_WITH_SETTINGS":return{...e,userStyleWithSettings:t.payload};case"SET_INPUTTED_FILES":const _=null!==(n=e.inputtedFiles)&&void 0!==n?n:[],x=null!==(o=t.payload)&&void 0!==o?o:[];for(const e of _)x.some((t=>t.url===e.url))||URL.revokeObjectURL(e.url);return{...e,inputtedFiles:x};case"SET_ON_INPUTTED_FILES_ACTION":return{...e,onInputtedFilesAction:t.payload};case"SET_SHOW_CHAT_CONTINUE_BUTTON":return{...e,showChatContinueButton:t.payload};case"SET_CHAT_CONTINUE_BUTTON_ON_CLICK":return{...e,chatContinueButtonOnClick:t.payload};case"SET_CURRENT_COLOR":return{...e,currentColor:t.payload};case"SET_CURRENT_FONT":return{...e,currentFont:t.payload};case"SET_IS_TYPING":return{...e,isTyping:t.payload};case"SET_API_KEY":return{...e,apiKey:t.payload};case"SET_HAS_RETRIED_CHAT_REQUEST":return{...e,hasRetriedChatRequest:t.payload};case"SET_SITE_METADATA":return{...e,siteMetadata:{...e.siteMetadata,...t.payload}};case"SET_HANDOFF_STEP":return{...e,handoffStep:t.payload};case"RESET_STORE":return{...lt,apiKey:e.apiKey,stock_photos:e.stock_photos,cachedContent:e.cachedContent,patternCategories:e.patternCategories,remotePatterns:e.remotePatterns,currentPageMetadata:e.currentPageMetadata,siteMetadata:e.siteMetadata};case"SET_IS_MAXIMIZED":return{...e,isMaximized:t.payload};case"SET_HIDE_INPUT":return{...e,hideInput:t.payload};case"SET_IS_CONFIRMING_SPECS":return{...e,isConfirmingSpecs:t.payload};case"SET_IS_EDITING_SPECS":return{...e,isEditingSpecs:t.payload};case"SET_SITE_SPEC_LIST":return{...e,siteSpecList:t.payload};case"SET_SHOW_EDITOR_WELCOME":return{...e,showEditorWelcome:t.payload};case"SET_ASSISTANT":return{...e,assistant:t.payload};case"SET_CUSTOM_VARIATION_TEMPLATES":return{...e,customVariationTemplates:t.payload};case"SET_GENERATED_PATTERN_CHUNKS_AS_JSON":return Array.isArray(t.payload)&&0===t.payload.length?{...e,generatedPatternChunksAsJSON:[]}:{...e,generatedPatternChunksAsJSON:[...e.generatedPatternChunksAsJSON,...Array.isArray(t.payload)?t.payload:[t.payload]]};case"SET_GENERATED_PATTERN_AS_BLOCKS":return{...e,generatedPatternAsBlocks:t.payload};case"SET_GENERATED_PATTERN_AS_STRING":return{...e,generatedPatternAsString:t.payload};case"SET_GENERATED_PATTERN_DUMMY_SECTION_CLIENT_ID":return{...e,generatedPatternDummySectionClientId:t.payload};case"SET_GENERATED_ROOT_PATTERN_CLIENT_ID":return{...e,generatedRootPatternClientId:t.payload};case"SET_CURRENT_PALETTE_COLORS":return{...e,currentPaletteColors:t.payload};case"SET_PENDING_PLAN":return{...e,pendingPlan:t.plan};case"SET_AWAITING_USER_INPUT":return{...e,awaitingUserInput:t.isAwaiting};case"ADD_MESSAGE_TO_DELETE":return{...e,messagesToDelete:[...e.messagesToDelete,t.message]};case"CLEAR_MESSAGES_TO_DELETE":return{...e,messagesToDelete:[]};case"SET_LAST_EDITOR_STATE":return{...e,lastEditorState:t.payload};case"INCREMENT_FOCUS_INPUT":return{...e,focusInput:e.focusInput+1};case"INCREMENT_SCROLL_CHAT_TO_BOTTOM":return{...e,scrollChatToBottom:e.scrollChatToBottom+1};case"SET_IS_SENDING_MESSAGE":return{...e,isSendingMessage:t.payload};case"ADD_MESSAGE":return{...e,messages:[...e.messages,t.message]};case"SET_THINKING":return{...e,isThinking:t.payload};case"CLEAR_MESSAGES":return{...e,messages:[]};case"SET_PENDING_TOOL_CALLBACKS":return{...e,pendingToolCallbacks:t.payload};case"SET_PLAN_RUNNING":return{...e,isPlanRunning:t.running};case"SET_SUGGESTIONS":return{...e,suggestions:t.payload};case"CLEAR_SUGGESTIONS":return{...e,suggestions:{}};case"DELETE_MESSAGE":return{...e,messages:e.messages.filter((e=>e.id!==t.payload))};case"REGISTER_CALLBACKS":return{...e,callbacks:{...e.callbacks,[t.name]:t.callbacks}};case"REGISTER_CONTEXT":return{...e,contexts:{...e.contexts,[t.name]:t.context}};case"SET_ERROR":return{...e,error:t.error};case"SET_HIDE_CHAT_NAVIGATION_BACK_BUTTON":return{...e,hideChatNavigationBackButton:t.payload};case"SET_BUILD_PROGRESS":return{...e,buildProgress:t.payload};case"SET_HEADER_SECTION_IS_READY":return{...e,headerSectionIsReady:t.payload};case"SET_FULL_PAGE_STRUCTURE":return{...e,fullPageStructure:t.payload};default:return e}},actions:ft,selectors:{getAdditionalContext:bt,getCurrentMessages:mt,getPageTitlePatterns:yt,getCustomVariationTemplates:e=>e.customVariationTemplates,getAllMessages:e=>e.messages,currentUserMessage:e=>e.currentUserMessage,getIsAssistantButtonVisible:e=>e.isAssistantButtonVisible,isToolContainerVisible:e=>e.isToolContainerVisible,getToolComponent:e=>e.toolComponent,getOpenAIChatUsage:e=>e.openAIUsage[e.advancedChatModel],getOpenAIChat35Usage:e=>e.openAIUsage["gpt-3.5-turbo-0125"],getOpenAIImageGenUsage:e=>e.openAIUsage[e.imageGenModel],getAnthropicUsage:e=>e.anthropicUsage["claude-3-5-sonnet-20241022"],getAdvancedChatModel:e=>e.advancedChatModel,getBasicChatModel:e=>e.basicChatModel,getImageGenModel:e=>e.imageGenModel,shouldLogSessions:e=>e.logSessions,getSessionId:e=>e.sessionId,isSessionLogged:e=>e.sessionLogged,getDelaySettings:e=>e.delaySettings,getPhotosFromPexels:(e,t)=>e.stock_photos[t]||{},getSelectedSectionContent:e=>e.selectedSectionContent,getIsEditorReady:e=>e.isEditorReady,getIsEditorIframeLoaded:e=>e.isEditorIframeLoaded,getCachedContent:e=>e.cachedContent,getCommands:e=>e.commands,getPatternCategories:e=>e.patternCategories,getIsComingSoon:e=>e.bigSkyInitialState?.isComingSoon||!1,getIsBlogPrivate:e=>e.bigSkyInitialState?.isBlogPrivate||!1,getIsDevMode:e=>!!e.bigSkyInitialState?.isDevMode,getSiteLaunchStatus:e=>e.bigSkyInitialState?.launchStatus||"",getUserLocale:e=>e.bigSkyInitialState?.userLocale||"en_US",getUserLanguage:e=>e.bigSkyInitialState?.userLanguage||"English (United States)",getRemotePatterns:(e,t)=>e.remotePatterns[t],getGeneratedPatterns:e=>e.generatedPatterns,getIsEditingPageLayout:e=>e.isEditingPageLayout,getCurrentPageMetadata:e=>e.currentPageMetadata,getIsBuildingSite:e=>e.isBuildingSite,getIsHandoff:e=>e.isHandoff,getCurrentHandoffArea:e=>e.currentHandoffArea,getChatComponents:e=>e.chatComponents,getShowThread:e=>e.showThread,getCurrentToolCall:e=>e.currentToolCall,getPendingToolCallbacks:e=>e.pendingToolCallbacks,getDockView:e=>e.dockView,getChosenCategories:e=>e.chosenCategories,getChosenColorsComponent:e=>e.chosenColorsComponent,getInitializedCustomScheme:e=>e.initializedCustomScheme,getGeneratedVariations:e=>e.generatedVariations,getChosenFonts:e=>e.chosenFonts,getBlockBeforeChanges:e=>e.blockBeforeChanges,getOnSelectedBlockAction:e=>e.onSelectedBlockAction,getIsTemplatePartContentReady:e=>e.isTemplatePartContentReady,getUserStyleWithSettings:e=>e.userStyleWithSettings,getInputtedFiles:e=>e.inputtedFiles,getOnInputtedFilesAction:e=>e.onInputtedFilesAction,getShowChatContinueButton:e=>e.showChatContinueButton,getChatContinueButtonOnClick:e=>e.chatContinueButtonOnClick,getCurrentColor:e=>e.currentColor,getCurrentFont:e=>e.currentFont,getImageStyle:e=>e.imageStyle,getIsTyping:e=>e.isTyping,getApiKey:e=>e.apiKey,getHasRetriedChatRequest:e=>e.hasRetriedChatRequest,getSiteMetadata:e=>e.siteMetadata,getHandoffStep:e=>e.handoffStep,getIsMaximized:e=>e.isMaximized,getHideInput:e=>e.hideInput,getIsConfirmingSpecs:e=>e.isConfirmingSpecs,getIsEditingSpecs:e=>e.isEditingSpecs,getSiteSpecList:e=>e.siteSpecList,getShowEditorWelcome:e=>e.showEditorWelcome,getAssistant:e=>e.assistant,getGeneratedPatternChunksAsJSON:e=>e.generatedPatternChunksAsJSON,getGeneratedPatternAsBlocks:e=>e.generatedPatternAsBlocks,getGeneratedPatternAsString:e=>e.generatedPatternAsString,getGeneratedPatternDummySectionClientId:e=>e.generatedPatternDummySectionClientId,getGeneratedRootPatternClientId:e=>e.generatedRootPatternClientId,getCurrentPaletteColors:e=>e.currentPaletteColors,getPendingPlan:e=>e.pendingPlan,getAwaitingUserInput:e=>e.awaitingUserInput,getMessagesToDelete:e=>e.messagesToDelete,getLastEditorState:e=>e.lastEditorState,getFocusInput:e=>e.focusInput,getScrollChatToBottom:e=>e.scrollChatToBottom,getIsSendingMessage:e=>e.isSendingMessage,getMessages:e=>e.messages,getIsThinking:e=>e.isThinking,getSuggestions:e=>e.suggestions,getCallbacks:e=>e.callbacks,getContexts:e=>e.contexts,getError:e=>e.error,getHideChatNavigationBackButton:e=>e.hideChatNavigationBackButton,getBuildProgress:e=>e.buildProgress,getHeaderSectionIsReady:e=>e.headerSectionIsReady,getIsDragging:e=>e.isDragging,getFullPageStructure:e=>e.fullPageStructure,getGoogleFonts:e=>e.googleFonts,getGoogleFontsKeywords:e=>[...new Set(e.googleFonts.font_families.flatMap((e=>e.keywords)))],getGoogleFontNames:e=>e.googleFonts.font_families.map((e=>e.font_family_settings.name)),getGoogleFontsFamilies:e=>e.googleFonts.font_families,getGoogleFontKeywordsByName(e,t){const n=e.googleFonts.font_families.find((e=>e.name===t));return n?n.keywords:[]},getGoogleFontFamilyByName:(e,t)=>e.googleFonts.font_families.find((e=>e.name===t))||null},resolvers:{getGoogleFonts:()=>async({dispatch:e})=>{try{const t=await E({path:"/wpcom/v2/big-sky/v1/google-fonts",method:"GET"});if(t)return e({type:"SET_GOOGLE_FONTS_COLLECTION",payload:t}),t}catch(e){return K.error("Failed to fetch Google Fonts data",e),{}}},getCachedContent:()=>({dispatch:e})=>{let t={};const n=localStorage.getItem(`bigSkyCachedContent${window.Jetpack_Editor_Initial_State?.wpcomBlogId}`);if(n)try{t=JSON.parse(n)}catch(e){K.error("Failed to parse cached content",e)}e({type:"SET_CACHED_CONTENT",payload:t})},getPhotosFromPexels:(e,t)=>{const n={foodAndBeverage:"food and drink",business:"business people",blog:"writing",portfolio:"art",personal:"writing"};return async({dispatch:o,select:i})=>{const a=async(e,t,n=3)=>{for(let o=1;o<=n;o++)try{const n=await ye(1===o);if(!n)throw new Error("No Jetpack token");const i=await fetch(`https://public-api.wordpress.com/wpcom/v2/meta/external-media/pexels?number=${t}&path=recent&search=`+encodeURIComponent(e),{headers:{Authorization:`X_JETPACK_JWT ${n.token}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();return(a?.media||[]).map((e=>({...e,URL:e.URL&&e.width&&e.height?`${e.URL}${e.URL.includes("?")?"&":"?"}width=${e.width}&height=${e.height}`:e.URL})))}catch(e){if(o>=n)throw e;const t=Math.min(1e3*Math.pow(2,o-1),5e3);await ut(t),K.info(`Attempt ${o} failed, retrying after ${t}ms delay...`)}return[]};try{const r=await a(e,t);let s=[...r];if(r.length<t){const e=n[i.getSiteMetadata()?.siteType]||"people or places",o=t-r.length,c=await a(e,o);s=[...s,...c]}0===s.length&&(s=[gt]),o({type:"SET_STOCK_PHOTOS",payload:{index:0,photos:s},topic:e})}catch(t){K.error("Failed to fetch stock photos from Pexels after retry",t),o({type:"SET_STOCK_PHOTOS",payload:{index:0,photos:[gt]},topic:e})}}},getRemotePatterns:e=>async({dispatch:t})=>{const o=e=>{let t=e;return t=e.filter((e=>!dt.some((t=>e.categories?.[t])))),t=t.filter((e=>!pt.includes(e.ID))),t},i=e=>{const t=[...new Set(ke.map((e=>e.slug)))];return e.forEach((n=>{const o=n.categories;if(0!==Object.keys(o).length){for(const e in o)t.includes(e)&&(n.category=e);if("about"===n.category){const t={...n};t.category="general",t.ID=t.ID+"-general",t.title&&(t.title=t.title.replace(/About/g,"General")),e.push(t)}it.includes(n.category)&&tt[n.category].preprocessSection(n)}})),e};if("true"===window.localStorage.getItem("isUsingLocalPatterns")){const o=await n.e(477).then(n.t.bind(n,477,17)),a=i(o.default);return console.log("DEBUG: Using patterns from patterns.json",a),void t({type:"SET_REMOTE_PATTERNS",payload:[a,e]})}try{await(async(n=3)=>{for(let a=1;a<=n;a++)try{const n=await fetch(`https://public-api.wordpress.com/rest/v1.1/ptk/patterns/${encodeURIComponent(e)}?post_type=wp_block&per_page=10000`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();if(a){const n=o(a),r=i(n);return void t({type:"SET_REMOTE_PATTERNS",payload:[r,e]})}}catch(e){if(a>=n)throw K.error(`Failed to fetch remote patterns after ${n} attempts`,e),e;const t=Math.min(1e3*Math.pow(2,a-1),5e3);await ut(t),K.info(`Attempt ${a} failed, retrying after ${t}ms delay...`)}})()}catch(e){K.error("All retry attempts failed to fetch remote patterns",e)}},getCustomVariationTemplates:()=>async({dispatch:e})=>{e({type:"SET_CUSTOM_VARIATION_TEMPLATES",payload:await E({path:"/wpcom/v2/big-sky/v1/variation-templates/colors"})})}}});!function(e){const t=e.instantiate().store.getState();W=t.sessionId}(wt),(0,g.register)(wt);const vt={"core/group":"g","core/columns":"cs","core/column":"c","core/heading":"h","core/paragraph":"p","core/image":"i","core/social-links":"sls","core/social-link":"sl"},kt=(e,t={},n="")=>{const{clientIdMap:o}=(0,g.select)(wt).getFullPageStructure(),i=Object.entries(o).find((([,t])=>t===e.clientId))?.[0],a=i||((e,t=4)=>e?w(t):"")(e.clientId,4);t[a]=e.clientId;const r=n?`${n} > ${e.name}`:e.name,s=e.innerBlocks?.map((e=>kt(e,t,r))).join("");return`<div data-id="${a}" data-n="${vt[e.name]||e.name}" data-a="${JSON.stringify(e.attributes)}" >\n\t\t${e.originalContent||""}\n\t\t${s}\n\t</div>`},_t=(e,t="",n={},o=!0,i="")=>{if(!e)return"";let a="";for(const[t,o]of Object.entries(n))if(o===e.clientId){a=t;break}const r=e.name.replace("core/","");let s="",c="",l=!1;const u=e.clientId===i;if(o){const t=function(e){if(!e.attributes)return"";const t=(0,g.select)(k.store).getBlockType(e.name);for(const[n,o]of Object.entries(e.attributes))if("rich-text"===t.attributes[n]?.type)return o?o.replace(/<[^>]*>/g,"").substring(0,40).trim():"";return""}(e);t&&(s+=`: "${t}${t.length>=40?"...":""}"`),e.attributes?.url&&(s+=" [has url]"),e.attributes?.alt&&(s+=` [alt: "${e.attributes.alt.substring(0,30)}${e.attributes.alt.length>30?"...":""}"]`)}e.attributes?.metadata?.patternCategory?(l=!0,c=` [SECTION: ${e.attributes.metadata.patternCategory}]`):e.attributes?.metadata?.name&&(c=` [${e.attributes.metadata.name}]`);const d=u?" [SELECTED BLOCK]":"";let p="";if(p=l?`${t}=== ${a?`(${a}) `:""}${r}${c}${s}${d} ===\n`:`${t}- ${a?`(${a}) `:""}${r}${c}${s}${d}\n`,e.innerBlocks&&e.innerBlocks.length>0){const a=l?t:`${t}  `;e.innerBlocks.forEach((e=>{p+=_t(e,a,n,o,i)}))}return p},xt=()=>{const{getBlocks:e,getBlocksByName:t,getBlock:n,getSelectedBlockClientId:o}=(0,g.select)(v.store),i=o(),a=t("core/post-content")[0],r=a?e(a):[],s=t("core/template-part"),c=s?.find((e=>"header"===n(e)?.attributes?.slug)),l=s?.find((e=>"footer"===n(e)?.attributes?.slug)),u=c?e(c):[],d=l?e(l):[],p={},h=[];u.length&&h.push({name:"core/template-part",clientId:c,attributes:{...n(c)?.attributes},innerBlocks:u}),r.length>0&&h.push({name:"core/post-content",clientId:a,innerBlocks:r}),d.length&&h.push({name:"core/template-part",clientId:l,attributes:{...n(l)?.attributes},innerBlocks:d});const f=h.filter((e=>e)).map((e=>kt(e,p))).join(""),m=((e,t,n=!0,o="")=>{if(!e||0===e.length)return"Empty page structure";let i="\nPAGE STRUCTURE:\n";const a=e.filter((e=>"core/template-part"===e.name&&"header"===e.attributes?.slug)),r=e.filter((e=>"core/template-part"===e.name&&"footer"===e.attributes?.slug)),s=e.filter((e=>"core/template-part"!==e.name||"header"!==e.attributes?.slug&&"footer"!==e.attributes?.slug));return a.length&&(i+="\nHEADER:\n",a.forEach((e=>{i+=_t(e,"  ",t,n,o)}))),s.length&&(i+="\nMAIN CONTENT:\n",s.forEach((e=>{i+=_t(e,"  ",t,n,o)}))),r.length&&(i+="\nFOOTER:\n",r.forEach((e=>{i+=_t(e,"  ",t,n,o)}))),i})(h,p,!0,i);return(0,g.dispatch)(wt).setFullPageStructure({html:`<div class="page-structure">${f}</div>`,summary:m,clientIdMap:p}),{clientIdMap:p,summary:m}},Ct=async(e,t,n="",o={})=>{const i=n||"Analyze this page structure and provide detailed insights.";try{const n=await(0,g.dispatch)(wt).runChatCompletion("gpt-4o",[{role:"system",content:o.systemPrompt||'You are an expert WordPress block editor analyst.\nYou will receive a complete structure of blocks from a WordPress page, including their:\n clientId: data-id\n name: data-n (abbreviated block names: g=core/group, cs=core/columns, c=core/column, h=core/heading, p=core/paragraph, i=core/image, sls=core/social-links, sl=core/social-link)\n attributes: data-a\n markup: the content of the block.\nYou will be given a request from the user to take action on a part of the page.\nYour job is to analyze the page structure and find blocks that match the user\'s request.\nReturn all matching blocks in order of relevance, with confidence scores for each match.\nYour response should be in the following json format:\n{\n    "matches": [\n        {\n            "clientId": "ab1c",\n            "confidence": 0.95,\n            "reasoning": "This block matches because...",\n            "context": "Located within..."\n        }\n    ]\n}\n'},{role:"user",content:`${i}\n\nContext:\n${JSON.stringify({blockStructure:e},null,2)}`}],null,.2,"json_object");return n.choices[0].message.content?{success:!0,data:JSON.parse(n.choices[0].message.content),clientIdMap:t}:{success:!1,error:"No content in response"}}catch(e){return console.error("Analysis failed:",e),{success:!1,error:e.message||"Failed to analyze structure"}}},St="undefined"!=typeof window&&window.bigSkyInitialState?.userLanguage?window.bigSkyInitialState.userLanguage:"English (United States)",Et="When calling a tool the content of your message should always be null.",Tt=(e,t)=>{const n=e?.site||{},o=[],i=e=>!t||t.includes(e);return n.siteTitle&&i("siteTitle")&&o.push(` - Site Title: ${n.siteTitle}`),n.siteDescription&&i("siteDescription")&&o.push(` - Site Description: ${n.siteDescription}`),n.siteLocation?.name&&i("siteLocation")&&o.push(` - Site Location: ${n.siteLocation.name}`),n.topic&&i("topic")&&o.push(` - Site Topic: ${n.topic}`),o.join("\n")},It="undefined"!=typeof window&&"true"===window.localStorage.getItem("isGeneratingPatterns")?"- generate_pattern: Generates new patterns/sections on pages":"\nNote:\n   - Does not support editing content within patterns/sections.\n   - Does not support pattern/section ordering changes.\n   - Does not support moving existing blocks into a new container or grouping then differently\n   - Does not support replacement for any blocks other than core/group\n",At=`\n<color_assistant>\nColor Assistant (ID: ${b.COLOR})\n\nDescription:\n   - An assistant specializing in color palette creation, selection, and assisting users with website color modifications.\n\nTools:\n   - color_palette_generator: Generates color palettes if one or more colors are provided\n   - update_component_color: Updates colors of specific components, supports changing the color of the background, text, button, button text for the entire site or a specific section or block\n\nNote:\n   - Should be called if the request is asking anything about colors, even if specific colors are not provided\n   - Should be called if the request is just a list of one or more colors\n</color_assistant>\n\n<content_assistant>\nContent Assistant (ID: ${b.CONTENT})\n\nDescription:\n   - An expert content writer and editor assistant, specializing in website content creation, editing, and translation. The primary goal is to help users improve their website content and editing content within existing patterns/sections.\n\nTools:\n   - rewrite_content: Rewrites text content. Translates text. Changes the tone or spelling.\n   - translate_content: Translates text content to a different language.\n   - upsert_social_link: Adds/updates social media links in the social links block\n   - update_address: Updates address information\n\nNote:\n   - Does not support adding entirely new sections/patterns.\n</content_assistant>\n\n<font_assistant>\nFont Assistant (ID: ${b.FONT})\n\nDescription:\n   - An assistant specializing in font selection and helping users modify their website fonts.\n\nTools:\n   - show_font_picker: Shows font selection interface\n</font_assistant>\n\n<image_assistant>\nImage Assistant (ID: ${b.IMAGE})\n\nDescription:\n   - An assistant specializing in the generation, replacement, and deletion of images and site logos.\n\nTools:\n   - generate_image: Replaces an image or a block background image with an AI generated image\n   - get_stock_image: Replaces an image or a block background image with a new stock image\n   - generate_site_logo: Replaces the site logo with an AI generated logo\n   - upload_image: Replaces an image with a new uploaded image. Use this tool if a user wants to change one image for another.\n   - upload_site_logo: Replaces the site logo with a new uploaded logo\n   - delete_image: Deletes an image or a block background image\n\nNote:\n  - Handles background images for supported blocks.\n  - Does not handle background images for the entire site. Use the help assistant to handle this.\n  - Does not support modifying images in any other way.\n  - Should be called if asking to "replace this" and a core/image block is selected.\n  - If the request is referencing an image in the gallery, use this assistant to handle it.\n  - NEVER call if the request is asking to add a new image, use the blocks assistant instead.\n</image_assistant>\n\n<layout_assistant>\nLayout Assistant (ID: ${b.LAYOUT})\n\nDescription:\n   - An assistant specializing in only full page layouts to allow users to modify the layout for their entire website page.\n\nTools:\n   - show_layout_picker: Shows the user the full page layout options to select from\n\nNote:\n   - Does not support changing padding, margins, or other layout settings.\n   - Does not handle changes to a single block, e.g header, footer, etc.\n</layout_assistant>\n\n<page_assistant>\nPage Assistant (ID: ${b.PAGE})\n\nDescription:\n   - An assistant specializing in creating new pages and navigating between pages and renaming page titles.\n\nTools:\n   - add_page: Adds new pages\n   - navigate_to_page: Navigates between pages\n   - rename_page: Renames existing pages\n   - show_pages: Shows all pages\n   - remove_page: Removes/deletes pages by moving them to the trash.\n\nNote:\n   - Does not support moving existing blocks into a new container or grouping then differently\n</page_assistant>\n\n<blocks_assistant>\nBlocks Assistant (ID: ${b.BLOCKS})\n\nDescription:\n   - An assistant specializing managing blocks.\n\nTools:\n   - remove_block: Removes blocks and patterns from pages\n   - edit_blocks: Edits existing blocks or patterns on pages, including adding, editing, removing, and reordering blocks, also adding padding and border to blocks\n\nNote:\n   - Call this assistant if the user is asking to:\n\t\t- Add a new block to a page\n\t\t- Move a block to a new location on a page\n\t\t- Remove a block from a page\n\t\t- Move blocks to a new container or group, or wrap blocks in a new container or group\n   - Do not use if\n   \t\t- the user is asking to add a new section or pattern in <pattern_categories>. Use the pattern assistant instead.\n\t\t- the user is modifying or generating images use the ${b.IMAGE} assistant instead.\n\n</blocks_assistant>\n<pattern_assistant>\nPattern Assistant (ID: ${b.PATTERN})\n\nDescription:\n   - An assistant specializing in adding, changing, and replacing single patterns, sections.\n   - Only call if the user specifies 'section' or 'pattern' in their request.\n   - Only call this assistant if the request is asking to add, or replace a section or pattern that matches one of the following pattern categories:\n<pattern_categories>\n${JSON.stringify(ke.map((e=>`${e.slug}: ${e.description}`)))}\n</pattern_categories>\n  - For requests related to adding new individual blocks and block parts like new columns, etc. use the blocks assistant.\nTools:\n   - add_pattern: Adds new patterns/sections to pages\n   - replace_pattern: Replaces existing patterns/sections on pages\n${It}\n\nNote:\n   - Does not support deleting patterns, use the blocks assistant to delete patterns with remove_block.\n</pattern_assistant>\n\n<help_assistant>\nHelp Assistant (ID: ${b.HELP})\n\nDescription:\n   - An assistant specializing in answering questions about WordPress, website building, and technical guidance.\n\nTools:\n   - ask_wordpress_expert: Asks WordPress expert for help\n\n</help_assistant>\n\n<site_admin_assistant>\nSite Admin Assistant (ID: ${b.SITE_ADMIN})\n\nDescription:\n   - An assistant specializing in site-wide administrative tasks like resetting the site and designing a new site from scratch.\n\nTools:\n   - start_over: Resets the site and starts over from scratch and allows a user to design a new site\n\nNote:\n   - Only handles site-wide administrative operations.\n   - Use this assistant if the request asks to "start over" or "reset their site"\n   - Use this assistant if the request asks for things like "design a site", "create a site" or "build a site"\n   - Use this assistant if the request contains a detailed description of the site\n</site_admin_assistant>\n`,Pt="You NEVER discuss products or services that are not made or provided by Automattic or hosted on WordPress.com.",Mt={name:"planner",tools:()=>[{name:"execute_plan",description:"Creates or modifies an existing plan, and then executes it to complete a complex task.",parameters:{type:"object",properties:{steps:{type:"array",description:"Array of steps to execute",items:{type:"object",properties:{assistantId:{type:"string",description:"The ID of the assistant to handle this step"},request:{type:"string",description:"The specific request for this step, broken out from the original request."},progressMessage:{type:"string",description:"A very brief message (AT MOST 2-3 words) about what this step is doing. Be concise and do not include lengthy details from the request. Do not include any closing punctuation."},fulfilled:{type:"boolean",description:"Whether the step has been fulfilled."},clientId:{type:"string",description:"The ID of the block that this step is targeting. ALWAYS take this from the page_structure context. If the step is not targeting a specific block, this should be null."},userConfirmed:{type:"boolean",description:"Whether the user has confirmed the step."}},required:["assistantId","request","progressMessage","fulfilled","clientId","userConfirmed"],additionalProperties:!1}},originalRequest:{type:"string",description:"The original request that triggered the plan"},isNewPlan:{type:"boolean",description:"Whether this is a new plan or a modification/continuation of the current plan."}},required:["steps","originalRequest","isNewPlan"],additionalProperties:!1},strict:!0}]},Nt=function(){const{getBlock:e}=(0,g.useSelect)(v.store);return{blockExists:t=>!!e(t),isValidClientId:e=>!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}},Ot=()=>{const{getBlock:e}=(0,g.useSelect)(v.store),{isValidClientId:t}=Nt(),{decrementPendingToolCallbacks:n,incrementPendingToolCallbacks:o,setCurrentToolCall:i}=(0,g.useDispatch)(wt),a=(0,f.useCallback)((e=>async t=>{o(),await ut(200);try{return await e(t)}catch(e){throw e}finally{n()}}),[n,o]),r=async(e,t)=>{var n;return null!==(n=t?.message)&&void 0!==n?n:(0,m.__)("Failed to validate arguments","big-sky")};return{withPendingToolCallback:a,createToolCallback:({name:n,action:o,closeChatWhenDone:s=()=>!0,validator:c=null,failValidatorAction:l=r,getTargetedBlockRequired:u=()=>!1,getTargetedBlockValidTypes:d=()=>null})=>async r=>{if(i(n),u(r)&&!((n,o)=>{if(!n.clientId||!t(n.clientId))return!1;const i=e(n.clientId);return!(o&&!i)&&(!o||("function"==typeof o?o(i.name):o.includes(i.name)))})(r,d(r)))return await l(r,{message:(0,m.__)("I couldn't find the block you mentioned. Describe where it is on the page or select it and try again.","big-sky")});if(c)try{if(!await c(r)&&"function"==typeof l)return await l(r,{message:(0,m.__)("Failed to validate arguments","big-sky")})}catch(e){if("function"==typeof l)return await l(r,e)}const p=async e=>{try{return await o(e)}catch(e){return K.error("Tool error:",e),{message:(0,m.__)("I couldn't complete that request. Please try again.","big-sky")}}};return s()?await a(p)(r):await p(r)}}},Rt=new Map,Dt=[];function Lt(e){return Rt.get(e)}function Bt({message:e}){return(0,s.createElement)("p",null,(0,s.createElement)("span",{className:"thinking-message"},e))}const Ft=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"m9.99609 14v-.2251l.00391.0001v6.225h1.5v-14.5h2.5v14.5h1.5v-14.5h3v-1.5h-8.50391c-2.76142 0-5 2.23858-5 5 0 2.7614 2.23858 5 5 5z"})}),jt=(0,d.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(u.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 0 1-6.5 6.5v-13a6.5 6.5 0 0 1 6.5 6.5Z"})}),$t=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"})}),Ut=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"})}),Ht=(0,d.jsxs)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,d.jsx)(u.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,d.jsx)(u.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]}),zt=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z"})}),Gt=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),qt=(0,d.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(u.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),Vt=(0,d.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(u.Path,{d:"M8 12.5h8V11H8v1.5Z M19 6.5H5a2 2 0 0 0-2 2V15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a2 2 0 0 0-2-2ZM5 8h14a.5.5 0 0 1 .5.5V15a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V8.5A.5.5 0 0 1 5 8Z"})}),Wt=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M6 5V18.5911L12 13.8473L18 18.5911V5H6Z"})}),Yt={[b.CONTENT]:Ft,[b.COLOR]:jt,[b.PATTERN]:$t,[b.BLOCKS]:$t,[b.FONT]:Ut,[b.PAGE]:Ht,[b.HELP]:zt,[b.LAYOUT]:Gt,[b.IMAGE]:qt},Kt={"core/button":Vt,"core/heading":Wt,"core/image":qt,"core/paragraph":Ft};function Jt(){const{runChatCompletion:e,assistantSay:t,userSay:n,setThinking:o,clearMessages:i,incrementPendingToolCallbacks:a,decrementPendingToolCallbacks:r,deleteMessage:c,setPlanRunning:l,setError:u,addMessage:d,addMessageToDelete:p,clearMessagesToDelete:h,setIsMaximized:y}=(0,g.useDispatch)(wt),{chatModel:b,isThinking:w,pendingToolCalls:k,getMessages:_,getAssistant:x,getContexts:C,getCallbacks:S,error:E,getMessagesToDelete:T}=(0,g.useSelect)((e=>({chatModel:e(wt).getAdvancedChatModel(),getAssistant:e(wt).getAssistant,messages:e(wt).getMessages(),isThinking:e(wt).getIsThinking(),pendingToolCalls:e(wt).getPendingToolCallbacks(),getMessages:e(wt).getMessages,getContexts:e(wt).getContexts,getCallbacks:e(wt).getCallbacks,error:e(wt).getError(),getMessagesToDelete:e(wt).getMessagesToDelete}))),{getSelectedBlock:I}=(0,g.useSelect)(v.store),A=(0,f.useCallback)((e=>C()[e.id]),[C]),P=(0,f.useCallback)((e=>"function"==typeof e.instructions?e.instructions(A(e)):e.instructions),[A]),M=(0,f.useCallback)((e=>{const t=e?.toolkits[0];if(!t)throw new Error("Toolkit not found");const n=("function"==typeof t?.tools?t.tools(A(e)):t.tools).map((e=>(e.parameters&&void 0!==e.strict&&(e.parameters.additionalProperties=!e.strict),{type:"function",function:e})));return n}),[A]),N=(0,f.useCallback)((async(e,t,n,o,i=null)=>{a();try{const a=S();if(a[e.id]&&a[e.id][t])return await a[e.id][t]({...n,__original_request:o,__original_id:i});throw new Error(`Callback ${t} not found`)}finally{r()}}),[a,S,r]),O=(0,f.useCallback)((()=>{T().filter((e=>e.id)).forEach((e=>{c(e.id)})),h()}),[c,T,h]),R=async(e,n=(0,m.__)("Thinking","big-sky"))=>{O();const o=I(),i=await t((0,s.createElement)(Bt,{message:n}),{showIcon:!0,icon:Yt[e],selectedBlockIcon:"Thinking"===n?Kt[o?.name]:void 0});p({id:i?.message?.id})},D=async(e,n,o={})=>{var i;const a=null!=n?n:"";return(null!==(i=a?.length)&&void 0!==i?i:0)>800&&y(!0),t(n,{showIcon:!0,icon:Yt[e],...o})},L=(0,f.useCallback)((async n=>{const o=(e=>{const t=[...e];t.sort(((e,t)=>e.created_at-t.created_at));for(let e=0;e<t.length;e++)if("assistant"===t[e].role&&t[e].tool_calls&&t[e].tool_calls.length>0){let n=e+1;for(let o=e+1;o<t.length;o++)if("tool"===t[o].role&&t[e].tool_calls.some((e=>e.id===t[o].tool_call_id))){const e=t.splice(o,1)[0];t.splice(n,0,e),n++}}return t})(_().filter((e=>!Array.isArray(e.content)||!e.content.some((e=>"component"===e.type))))),i=Lt(x());let a;if(i.prompt){const e=await ye();a=await(await fetch("https://public-api.wordpress.com/wpcom/v2/big-sky/prompt-query",{method:"POST",headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"application/json"},body:JSON.stringify({prompt:i.prompt,context:{userLanguage:"en-US",messages:o,userMessage:n,...A(i)}})})).json()}else{const t=[{role:"system",content:P(i)},...o],n=M(i);a=await e(b,t,n)}a?.usage?.big_sky?.show_free_trial_warning&&t((0,m.__)("You have used 15 of your 30 free AI requests.","big-sky"));const r=a?.choices?.[0]?.message?.tool_calls;if(!r||0===r.length){const e=a?.choices?.[0]?.message?.content;return e||void K.error("No text or tool call response from AI.")}t("",{tool_calls:r,id:a?.id,created_at:a?.created_at||Date.now()/1e3});for(const[e,t]of r.entries()){const o=t.function.arguments;try{const s=JSON.parse(o),c=await N(i,t.function.name,s,n,a?.id);if(e===r.length-1)return c}catch(e){K.error(`Error running callback for ${t.function.name}: ${e.message}`)}finally{d({role:"tool",id:`tc:${t.id}`,created_at:Date.now()/1e3,tool_call_id:t.id,content:""})}}}),[_,x,t,A,P,M,e,b,d,N]);return{runChat:L,userSay:async e=>{const t=x();n(e),R(t),o(!0);try{const n=await L(e);return n&&(D(t,n),O()),n}catch(e){K.error("Error in userSay:",e)}finally{o(!1)}},assistantSay:t,clearMessages:i,isThinking:w,pendingToolCalls:k,getSystemPrompt:P,getTools:M,getMessages:_,deleteMessage:c,setPlanRunning:l,error:E,setError:u,addThinkingMessage:R,deleteMarkedMessages:O,addAssistantMessage:D}}const Xt=()=>{var e,t,n,o;const i=document.querySelector('[name="editor-canvas"]'),a=null!==(e=i?.contentDocument)&&void 0!==e?e:null;return{canvasiFrame:i,canvasiFrameRoot:null!==(t=a?.documentElement)&&void 0!==t?t:null,canvasiFrameDocument:a,canvasiFrameWindow:null!==(n=i?.contentWindow)&&void 0!==n?n:null,canvasiFrameBody:null!==(o=a?.body)&&void 0!==o?o:null}},Zt=window.wp.coreData;async function Qt(e,t="Big Sky Session"){try{return await E({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(e),method:"POST",data:{name:t,is_test:I()}})}catch(e){K.error("Error logging session: ",e)}}let en={};function tn(){const{shouldLogSessions:e,sessionId:t,getSiteMetadata:n}=(0,g.useSelect)((e=>({getSiteMetadata:e(wt).getSiteMetadata,sessionId:e(wt).getSessionId(),shouldLogSessions:e(wt).shouldLogSessions()}))),{getCurrentPostId:o}=(0,g.useSelect)((e=>({getCurrentPostId:e(h.store).getCurrentPostId}))),{setSiteMetadata:i}=(0,g.useDispatch)(wt),{saveEditedEntityRecord:a,editEntityRecord:r}=(0,g.useDispatch)(Zt.store),s=e=>!!e.siteTitle&&!!e.siteDescription&&!!e.topic,c=async(o,c=!1,l=!1)=>{const u=n();en={...en,...o};const d={...u,...en};delete d.mode,d.isOnboarded=!l&&s(d);const p=JSON.stringify(d);s(d)&&p!==JSON.stringify(u)&&async function(e,t){try{return await E({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(e)+"/metadata",method:"POST",data:t})}catch(e){K.error("Error logging site metadata: ",e)}}(t,d),i(d),r("root","site",void 0,{big_sky_site_metadata:p},{undoIgnore:!0}),c&&await a("root","site",void 0,{big_sky_site_metadata:p}),o.siteTitle&&e&&Qt(t,o.siteTitle)},l=(0,f.useCallback)(((e=null)=>{const t=n().patterns;return e?t[e]:t[o()]}),[o,n]);return{getPagePatterns:l,getSiteMetadata:n,setCurrentColor:n=>(e&&V(t,`Color: ${n}`,M.COMMENT,we()),c({currentColor:n})),setCurrentFont:n=>(e&&V(t,`Font: ${n}`,M.COMMENT,we()),c({currentFont:n})),setTopic:n=>(e&&V(t,`Topic: ${n}`,M.COMMENT,we()),c({topic:n})),setSiteDescription:n=>(e&&V(t,`Site Description: ${n}`,M.COMMENT,we()),c({siteDescription:n})),setSiteLocation:n=>(e&&V(t,`Site Location: ${n?.name}`,M.COMMENT,we()),c({siteLocation:n})),setSiteTitle:n=>(e&&V(t,`Site Title: ${n}`,M.COMMENT,we()),c({siteTitle:n})),setSiteMetadata:c}}const nn=window.wp.privateApis,on=["I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.","I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress."],{lock:an,unlock:rn}=function(){let e;for(const t of on)try{return(0,nn.__dangerousOptInToUnstableAPIsOnlyForCoreModules)(t,"@wordpress/edit-site")}catch(t){e=t}throw e}();function sn(){const{getBlockHierarchyRootClientId:e,getBlock:t,getBlocksByName:n,getClientIdsOfDescendants:o,getBlockParentsByBlockName:i,getBlocks:a}=(0,g.useSelect)(v.store),{getSectionRootClientId:r}=(0,g.useSelect)((e=>{const{getSectionRootClientId:t}=rn(e(v.store));return{getSectionRootClientId:t}})),{getSiteMetadata:s}=tn(),{selectBlock:c,updateBlockAttributes:l}=(0,g.useDispatch)(v.store),{replaceBlock:u}=(0,g.useDispatch)(h.store),d=e=>{const t=[];return e.forEach((e=>{if(e.innerBlocks?.length>0)t.push(...d(e.innerBlocks));else if("core/heading"===e.name||"core/paragraph"===e.name||"core/site-title"===e.name||"core/image"===e.name||"core/button"===e.name){let n;n="core/button"===e.name?e.attributes.text||"Button":"core/site-title"===e.name?"Acme Inc":e.attributes.content,t.push({name:e.name,clientId:e.clientId,example:n})}})),t},p=(0,f.useCallback)((e=>{const o=n("core/template-part");if(!o)return;const i="header"===e?"header":"footer";return o.find((e=>t(e).attributes.slug===i))}),[n,t]),m=(e,t)=>{if(!t||!t.coordinates)return;const n=s();for(const o of e){if("jetpack/map"===o.name){const e=t.coordinates[0],i=t.coordinates[1];o.attributes.mapCenter={lat:e,lng:i},o.attributes.points=[{placeTitle:t.name,title:n.siteTitle||t.name,caption:"",id:"place."+Math.random(),coordinates:{latitude:e,longitude:i}}],l(o?.clientId,{mapCenter:{lat:e,lng:i},points:[{placeTitle:t.name,title:n.siteTitle||t.name,caption:"",id:"place."+Math.random(),coordinates:{latitude:e,longitude:i}}]})}o.innerBlocks?.length>0&&m(o.innerBlocks,t)}},y=(e,t,n)=>{const o=e.getBoundingClientRect();let i=o.top,a=o.bottom;return o.height>t.innerHeight&&(i=o.top+(o.height-t.innerHeight),a=o.bottom-(o.height-t.innerHeight)),i>=0&&a<=t.innerHeight&&(c(n),!0)},b=async(e,t="start",n=!1,o=0)=>{if(e){const{canvasiFrameWindow:i}=Xt();if(i&&"complete"===i.document.readyState){const a=i.document.getElementById(`block-${e}`);if(a&&(a.style.scrollMarginTop=`${o}px`,a.scrollIntoView({behavior:"smooth",block:t})),n){if(y(a,i,e))return;const t=e=>{y(a,i,e)&&i.document.removeEventListener("scroll",n)},n=()=>t(e);i.document.addEventListener("scroll",n)}}}},w=(0,f.useCallback)(((e,t)=>{if(e.name===t)return e;if(e.innerBlocks?.length)for(const n of e.innerBlocks){const e=w(n,t);if(e)return e}return!1}),[]),_=e=>{const n=t(e);if("core/template-part"===n.name)return n;const o=i(e,"core/template-part");return o?t(o[0]):void 0},x=e=>{const t=(0,k.createBlock)(e.name,e.attributes);return e.innerBlocks&&e.innerBlocks.length&&(t.innerBlocks=e.innerBlocks.map((e=>x(e)))),t},C=e=>{const{clientId:t,name:n,attributes:o,innerBlocks:i}=e,a=(0,k.createBlock)(n,o,i);return(e=>{if(!e)return!1;switch(e.name){case"core/paragraph":return e.attributes?.content?.length>0;case"core/image":return e.attributes?.url?.length>0;case"core/quote":return e.attributes?.value?.length>0;default:return!0}})(a)&&u(t,a),e?.innerBlocks?.forEach((e=>{C(e)})),e},S=(0,f.useCallback)((()=>{const e=r();return[...a(e),...a(p("header")),...a(p("footer"))]}),[r,a,p]),E=(0,f.useCallback)((()=>{const e=r(),t=a(e);return{headerBlocks:a(p("header")),footerBlocks:a(p("footer")),contentBlocks:t}}),[a,r,p]),T=(0,f.useCallback)((()=>(0,k.createBlock)("core/group",{},S())),[S]);return{getRootBlocks:S,getRootBlocksState:E,getSurroundingContentOfBlock:n=>{const i=e(n?.clientId),a=t(i),r=o(a?.clientId);let s="";return r.forEach((e=>{const n=t(e);"core/heading"!==n.name&&"core/paragraph"!==n.name||(s+=" "+n.attributes.content)})),s},getContentOfBlocks:d,getContentBlockClientID:()=>n("core/post-content")[0],getSectionRootClientId:r,getTemplatePartClientID:p,setBlockIsProcessing:(e,t)=>{const n=(e=>{const{canvasiFrameWindow:t}=Xt();return t&&"complete"===t.document.readyState?t.document.getElementById(`block-${e.clientId}`):null})(e);n&&(n.dataset.bigSkyProcessingState=t?"processing":"processed",n.classList.remove("big-sky__is-processing"),n.classList.remove("big-sky__has-processed"),n.classList.add(t?"big-sky__is-processing":"big-sky__has-processed"),t||(delete n.dataset.bigSkyProcessingState,l(e.clientId,{className:e.attributes?.className?.split(" ").filter((e=>!e.startsWith("big-sky__"))).join(" ")})))},setMapLocationInBlocks:m,scrollToBlock:b,scrollToFirstBlockByName:(e,t="start",o=!1)=>{const i=n(e);i.length>0&&b(i[0],t,o)},getFirstChildBlockByName:w,getParentRootPatternBlock:e=>{const n=t(e);if(!n)return null;if(n.attributes?.metadata?.patternCategory)return n;const o=i(e,"core/group");if(!o)return;let a=null;return o.forEach((e=>{const n=t(e);n?.attributes?.metadata?.patternCategory&&(a=n)})),a},getParentRootTemplatePartBlock:_,isTemplatePart:e=>{const n=_(e);return n?"core/template-part"===n.name:"core/template-part"===t(e).name},copyBlockWithInnerBlocks:x,getFirstChildBlockByClientIdDOMElement:e=>{const{canvasiFrameWindow:n}=Xt(),o=n.document.getElementById(`block-${e}`);return t(o.querySelector('[data-type="core/group"]').getAttribute("data-block"))},fixInvalidBlock:C,findSiteLogoBlock:()=>{const e=p("header"),t=a(e),n=p("footer"),o=a(n),i=e=>{for(const t of e){if("core/site-logo"===t.name)return t;if(t.innerBlocks&&t.innerBlocks.length>0){const e=i(t.innerBlocks);if(e)return e}}};return i([...t,...o])},getEditorBlock:T}}function cn(){const e="big-sky__dummy-section alignfull",{getBlocks:t,getBlocksByName:n}=(0,g.useSelect)(v.store),{setZoomLevel:o,resetZoomLevel:i}=rn((0,g.useDispatch)(v.store)),{__unstableSetEditorMode:a,replaceInnerBlocks:r,updateBlockAttributes:s,replaceBlock:c,__unstableMarkNextChangeAsNotPersistent:l}=(0,g.useDispatch)(v.store),{delaySettings:u,isEditorIframeLoaded:d}=(0,g.useSelect)((e=>({delaySettings:e(wt).getDelaySettings(),isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded()}))),{setHeaderSectionIsReady:p}=(0,g.useDispatch)(wt),{getTemplatePartClientID:h,getContentBlockClientID:m,scrollToBlock:y}=sn(),b=(0,g.useRegistry)(),w=new URLSearchParams(window.location.search).get("canvas"),_=(e,n)=>{const o=e.blocks[0],i=I(e),a=t(i).map((e=>e.clientId));a[n]&&T(o,a[n])},x=async(e,n,o)=>{const i=e.blocks[0];function a(){const o=I(e);return t(o).map((e=>e.clientId))[n]}i.supports={color:{background:!0},...i.supports},o||(y(a(),"center"),await ut(500)),"header"===e.category||"footer"===e.category?b.batch((()=>{l(),r(I(e),[i],!1)})):b.batch((()=>{l(),c(a(),i)})),o||await ut(750)},C=(0,f.useCallback)((()=>{if(!d||"view"===w)return;const{canvasiFrameRoot:e}=Xt();let t=window.innerWidth;if(t>1850?t=1850:t<980&&(t=980),e){const n=-1e-5*t+1.035;e.style.setProperty("--block-editor-selected-block-scale",n)}}),[w,d]),S=({isEmpty:t=!0,className:n=""}={})=>(0,k.createBlock)("core/group",{className:`${e} ${t?"big-sky__is-empty-dummy":""} ${n}`},[(0,k.createBlock)("core/paragraph",{placeholder:" "})]),E=async({count:e,replaceTemplateParts:n=!0})=>{if(0===e)return;const o=Array.from({length:e}).map(S),i=m(),a=h("header"),s=h("footer");if(n&&a){const e=t(a);e?.[0]?.innerBlocks?.[0]?.attributes?.metadata?.remotePatternId||(l(),r(a,[o.shift()]))}if(n&&s){const e=t(s);e?.[0]?.innerBlocks?.[0]?.attributes?.metadata?.remotePatternId||(l(),r(s,[o.shift()]))}const c=t(i);c?.[0]?.innerBlocks?.[0]?.attributes?.metadata?.remotePatternId||(l(),r(i,o))},T=(t,n)=>{["header","footer"].includes(t.attributes?.metadata?.patternCategory)||l(),r(n,[t],!1),l(),s(t.clientId,{style:{...t.attributes.style,color:{background:void 0}}}),l(),s(n,{className:`${e} big-sky__has-dummy-blocks `})},I=e=>"header"===e?.category?h("header"):"footer"===e?.category?h("footer"):m(),A=(0,f.useCallback)((e=>{const{canvasiFrameRoot:t}=Xt();if(t)for(const[n,o]of Object.entries(e))t.style.setProperty(n,o)}),[]),P=e=>{e.preventDefault(),e.stopImmediatePropagation()};return{canvasMode:w,addPatternsToCanvas:async(e,t=!0,n=!1)=>{await E({count:e.length,replaceTemplateParts:t});const{headerPattern:o,bodyPatterns:i,footerPattern:a}=(e=>{const t=e.find((e=>"header"===e.pattern.category)),n=e.find((e=>"footer"===e.pattern.category)),o=e.filter((e=>"header"!==e.pattern.category&&"footer"!==e.pattern.category));return{headerPattern:t,bodyPatterns:o,footerPattern:n}})(e);await ut(u.onboarding.afterBlockProcessed),o&&_(o.pattern,0),a&&_(a.pattern,0);for(let e=0;e<i.length;e++)_(i[e].pattern,e);o&&(await o.resolver,await x(o.pattern,0,n),p(!0));for(let e=0;e<i.length;e++){const{pattern:t,resolver:o}=i[e];await o,n||await ut(u.onboarding.afterBlockProcessed),await x(t,e,n)}a&&(await a.resolver,n||await ut(u.onboarding.afterBlockProcessed),await x(a.pattern,0,n)),await ut(u.onboarding.afterBlockProcessed),(()=>{const{canvasiFrameWindow:e}=Xt();e?.scrollTo({top:0,behavior:"smooth"})})()},setStyleProperties:A,clearTemplateParts:()=>new Promise((e=>{let t=()=>{};const o=()=>{const o=n("core/template-part");if(o.length>0){t();for(const e of o)l(),r(e,[(0,k.createBlock)("core/paragraph",{placeholder:" "})]);e()}};t=(0,g.subscribe)(o),o()})),clearBlocks:()=>new Promise((e=>{let n=()=>{};const o=()=>{t(m()).length>0&&(n(),l(),r(m(),[(0,k.createBlock)("core/paragraph",{placeholder:" "})]),e())};n=(0,g.subscribe)(o),o()})),createDummySection:S,insertDummySections:E,setIframeScale:C,zoomOut:async()=>{const{canvasiFrameRoot:e}=Xt();o&&o(.5),a("zoom-out");const{canvasiFrameBody:t}=Xt();return t&&t.addEventListener("dblclick",P,!0),await Promise.resolve(),e&&await Promise.all(e.getAnimations().map((e=>e.finished))),window.dispatchEvent(new Event("resize")),await ut(0)},zoomIn:async()=>{const{canvasiFrameRoot:e}=Xt();i&&i(),a("edit"),await Promise.resolve(),e&&await Promise.all(e.getAnimations().map((e=>e.finished))),window.dispatchEvent(new Event("resize"));const{canvasiFrameBody:t}=Xt();return t&&t.removeEventListener("dblclick",P),await ut(0)}}}const ln=window.wp.mediaUtils;var un=n(789);const dn=async e=>{if((0,un.checkIfBrowserSupported)()){const t=function(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]);let i=o.length;const a=new Uint8Array(i);for(;i--;)a[i]=o.charCodeAt(i);return new File([a],"screenshot.jpg",{type:n})}(await(0,un.takeScreenshot)()),n=t=>{const n=t[0].url;"string"==typeof n&&n.startsWith("http")&&V(e,`<img style="max-width: 100%" src="${n}" />`,M.SCREENSHOT)},o=e=>{K.error("file error",e)};await(0,ln.uploadMedia)({filesList:[t],onFileChange:n,onError:o})}};function pn(){const{isSessionLogged:e,shouldLogSessions:t,sessionId:n}=(0,g.useSelect)((e=>({sessionId:e(wt).getSessionId(),shouldLogSessions:e(wt).shouldLogSessions(),isSessionLogged:e(wt).isSessionLogged()}))),o=(0,g.useDispatch)(wt).setSessionLogged;async function i(e,t="",o="",i=""){if(await a())return await V(n,e,t,o,i)}async function a(){return!!e||!!t&&(await Qt(n),o(!0),!0)}return{logSession:a,logScreenshot:async function(){if(await a())return await dn(n)},logMessage:async function(e){if(await a())return await async function(e,t){if(!e)return;let n=t.content;return t.role===M.COMPONENT?n=`Component: &lt;${n.type.name}/&gt;`:"string"!=typeof n&&(n=JSON.stringify(n)),await V(e,n,t.role,t.id,t.parentId)}(n,e)},logAction:i,logError:async function(e){return"object"==typeof e&&(e=JSON.stringify(e)),await i(e,M.ERROR)},logUserChoice:async function(e,t,n){return await i(e,M.USER_CHOICE,t,n)},logUserMessage:async function(e,t,n){return await i(e,M.USER,t,n)},logToolCall:async function(e,t=""){return await i(e,M.TOOL_CALL,t)},logAssistantMessage:async function(e,t=""){return await i(e,M.ASSISTANT,t)},logResponseAction:async function(e,t){return await i(e,M.RESPONSE_ACTIONS,"",t)}}}var gn=n(942);const hn=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})}),fn=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"m3 12 1 8h1.5l-1-8H3Zm15.8-2h-4.4l.8-3.6c.3-1.3-.7-2.4-1.9-2.4h-.2c-.6 0-1.2.3-1.6.8l-5 6.6c-.3.4-.4.8-.4 1.2v.2l.7 5.4v.2c.2.9 1 1.5 1.9 1.5h8.2c.9 0 1.7-.6 1.9-1.4l1.8-6c.4-1.3-.6-2.6-1.9-2.6Zm.5 2.1-1.8 6c0 .2-.3.4-.5.4H8.8c-.3 0-.5-.2-.5-.4l-.7-5.4v-.4l5-6.6c0-.1.2-.2.4-.2h.2c.3 0 .6.3.5.6l-.8 3.6c-.1.4 0 .9.3 1.3s.7.6 1.2.6h4.4c.3 0 .6.3.5.6Z"})}),mn=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M19.8 4h-1.5l1 8h1.5l-1-8ZM17 5.8c-.1-1-1-1.8-2-1.8H6.8c-.9 0-1.7.6-1.9 1.4l-1.8 6C2.7 12.7 3.7 14 5 14h4.4l-.8 3.6c-.3 1.3.7 2.4 1.9 2.4h.2c.6 0 1.2-.3 1.6-.8l5-6.6c.3-.4.5-.9.4-1.5L17 5.7Zm-.9 5.9-5 6.6c0 .1-.2.2-.4.2h-.2c-.3 0-.6-.3-.5-.6l.8-3.6c.1-.4 0-.9-.3-1.3s-.7-.6-1.2-.6H4.9c-.3 0-.6-.3-.5-.6l1.8-6c0-.2.3-.4.5-.4h8.2c.3 0 .5.2.5.4l.7 5.4v.4Z"})}),yn=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{fill:"none",d:"M5.75 12.75V18.25H11.25M12.75 5.75H18.25V11.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"square"})}),bn=window.wp.commands,wn={};function vn(){const e=(0,f.useCallback)((async e=>{if(!wn[e]){let t;try{t=await E({path:"/wpcom/v2/big-sky/v1/geo-coordinates?address="+encodeURIComponent(e),method:"GET"}),K.info("Geocode Response",t)}catch(e){return K.error("Geocode Error",e),null}const n=t?.features?.[0]?.geometry?.coordinates;wn[e]=n?n.reverse():n}return wn[e]}),[]);return{getCoordinates:e}}const kn=function(){const{getBlock:e,getBlocksByName:t}=(0,g.useSelect)((e=>({getBlock:e(v.store).getBlock,getBlocksByName:e(v.store).getBlocksByName}))),{updateBlockAttributes:n}=(0,g.useDispatch)(v.store),{getSiteMetadata:o,setSiteMetadata:i}=tn(),{getCoordinates:a}=vn(),{findBlock:r}={findBlock:async e=>{const{userRequest:t=""}=e,n=`Find the most relevant block in the page structure${t?` given the user's request: ${t}`:""}. Consider each block's location and surrounding content to determine relevance.`,o=await(async(e="",t={})=>{const{html:n,clientIdMap:o}=xt(),i=(e=>{if(e)return e.replace(/[\t\n\r]/g," ").replace(/\s{2,}/g," ").trim()})(n);return await Ct(i,o,e,t)})(n);return o.success&&o.data.matches?.length&&o.data.matches.map((e=>({...e,clientId:o.clientIdMap[e.clientId]}))).filter((e=>e.clientId))||[]}},{setBlockIsProcessing:s}=sn(),c=(0,g.useSelect)((e=>{var t;const n=e(Zt.store).getEntityRecord("root","site");return{siteTitle:null!==(t=n?.title)&&void 0!==t?t:""}})),l=async t=>{const{address:i}=t,{siteLocation:a}=o(),c=a?.name;(await r({userRequest:`Update the address to ${i}. Only consider physical address locations.`})).forEach((t=>{const o=e(t.clientId);if(!["core/heading","core/paragraph","wp:jetpack/address"].includes(o.name))return;s(!0);const a=o.attributes.content||"",r=d(a?.text||a),l=d(c?.name||c);if(r.includes(l)){const e=new RegExp(p(c).replace(/[\s,]+/g,"[\\s,]*"),"gi"),t=a.replace(e,null!=i?i:"");n(o.clientId,{content:t})}else n(o.clientId,{content:i});s(!1)}))},u=async o=>{const{address:i,coordinates:r,isUndo:s}=o,l=s?r:await a(i);if(l||s)return t("jetpack/map").forEach((t=>{var o,a;const r=e(t),s=l?[{placeTitle:null!=i?i:"",title:c.siteTitle||(null!=i?i:""),caption:"",id:`place.${Math.random()}`,coordinates:{latitude:l[0],longitude:l[1]}}]:[];n(r.clientId,{mapCenter:{lat:null!==(o=l?.[0])&&void 0!==o?o:0,lng:null!==(a=l?.[1])&&void 0!==a?a:0},points:s})})),l},d=e=>e.replace(/[\s,]+/g,"").toLowerCase(),p=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{updateAddress:async e=>{const{address:t}=e;await l(e);const n=await u(e);return i({siteLocation:{name:t,coordinates:n}},!0),(0,m.__)("Updated address.","big-sky")},validateAddressArgs:e=>!(!e||!e.address),updateAddressOnPage:l,updateMapMarker:u}},xn=window.wp.router,Cn=window.wp.compose;function Sn(){var e;const t=A(),n="site-editor"===t?.screen,o="post"===t?.screen,i=null!==(e=t?.screen)&&void 0!==e?e:"",a=(0,g.useSelect)((e=>e(h.store).getCurrentPostType())),r=(0,g.useSelect)((e=>e(h.store).getCurrentPostId()));return{isSiteEditor:n,isPostEditor:o,screen:i,postType:a,isPagePostType:"page"===a,currentScreen:t,postId:r,previousPostId:(0,Cn.usePrevious)(r)}}function En(){const{isThinking:e,pendingToolCallbacks:t}=(0,g.useSelect)((e=>({isThinking:e(wt).getIsThinking(),pendingToolCallbacks:e(wt).getPendingToolCallbacks()})));return{isThinking:e||t>0}}var Tn=n(833);const In=n.n(Tn)()("dops:analytics");let An,Pn;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;const Mn={initialize:function(e,t,n){Mn.setUser(e,t),Mn.setSuperProps(n),Mn.identifyUser()},setGoogleAnalyticsEnabled:function(e,t=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){Pn={ID:e,username:t}},setSuperProps:function(e){An=e},assignSuperProps:function(e){An=Object.assign(An||{},e)},mc:{bumpStat:function(e,t){const n=function(e,t){let n="";if("object"==typeof e){for(const t in e)n+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);In("Bumping stats %o",e)}else n="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),In('Bumping stat "%s" in group "%s"',t,e);return n}(e,t);Mn.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+n+"&t="+Math.random())},bumpStatWithPageView:function(e,t){const n=function(e,t){let n="";if("object"==typeof e){for(const t in e)n+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);In("Built stats %o",e)}else n="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),In('Built stat "%s" in group "%s"',t,e);return n}(e,t);Mn.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+n+"&t="+Math.random())}},pageView:{record:function(e,t){Mn.tracks.recordPageView(e),Mn.ga.recordPageView(e,t)}},purchase:{record:function(e,t,n,o,i,a,r){Mn.ga.recordPurchase(e,t,n,o,i,a,r)}},tracks:{recordEvent:function(e,t){t=t||{},0===e.indexOf("akismet_")||0===e.indexOf("jetpack_")?(An&&(In("- Super Props: %o",An),t=Object.assign(t,An)),In('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])):In('- Event name must be prefixed by "akismet_" or "jetpack_"')},recordJetpackClick:function(e){const t="object"==typeof e?e:{target:e};Mn.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){Mn.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){In("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};Mn.ga.initialized||(Pn&&(e={userId:"u-"+Pn.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),Mn.ga.initialized=!0)},recordPageView:function(e,t){Mn.ga.initialize(),In("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t}))},recordEvent:function(e,t,n,o){Mn.ga.initialize();let i="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";void 0!==n&&(i+=" [Option Label: "+n+"]"),void 0!==o&&(i+=" [Option Value: "+o+"]"),In(i),this.googleAnalyticsEnabled&&window.ga("send","event",e,t,n,o)},recordPurchase:function(e,t,n,o,i,a,r){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:o,currency:r}),window.ga("ecommerce:addItem",{id:e,name:t,sku:n,price:i,quantity:a}),window.ga("ecommerce:send")}},identifyUser:function(){Pn&&window._tkq.push(["identifyUser",Pn.ID,Pn.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},Nn=Mn,On="jetpack_big_sky",Rn=/^[a-z_][a-z0-9_]*$/;function Dn(e,t){Rn.test(e)||console.error(`${t} names must match pattern: ^[a-z_][a-z0-9_]*$`)}function Ln(){const e=(0,g.select)(wt);return e.getIsHandoff()?"handoff":e.getSiteMetadata()?.isOnboarded?"editor":"onboarding"}function Bn(){var e;const t=(0,g.select)(Zt.store).getEntityRecord("root","site")?.page_on_front,n=A(),o=n.postId===t;return{post_id:n.postId,title:(0,g.select)(h.store).getEditedPostAttribute("title"),is_home_page:o,screen:null!==(e=n.screen)&&void 0!==e?e:"site-editor"}}function Fn(e,t={}){Dn(e,"Event");const n={...t,...Bn(),sessionid:wt.instantiate().store.getState().sessionId,session_type:P()?"free-trial-session":"paid-user-session",phase:Ln(),is_test:I()};(function(e){Object.keys(e).forEach((e=>{Dn(e,"Property")}))})(n),Nn.tracks.recordEvent(`${On}_${e}`,{...n})}const jn=()=>{const[e,t]=(0,f.useState)(!1),n=(0,f.useRef)(!1),{postType:o,postId:i}=(0,g.useSelect)((e=>({postType:e(h.store).getCurrentPostType(),postId:e(h.store).getCurrentPostId()}))),{isSavingPost:a}=(0,g.useSelect)((e=>({isSavingPost:e(Zt.store).isSavingEntityRecord("postType",o,i)})));return(0,f.useEffect)((()=>{a&&!n.current&&(t(!1),n.current=!0),!a&&n.current&&(t(!0),Fn("post_saved"),n.current=!1)}),[a]),e};var $n=n(744),Un={grad:.9,turn:360,rad:360/(2*Math.PI)},Hn=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},zn=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Gn=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},qn=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Vn=function(e){return{r:Gn(e.r,0,255),g:Gn(e.g,0,255),b:Gn(e.b,0,255),a:Gn(e.a)}},Wn=function(e){return{r:zn(e.r),g:zn(e.g),b:zn(e.b),a:zn(e.a,3)}},Yn=/^#([0-9a-f]{3,8})$/i,Kn=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Jn=function(e){var t=e.r,n=e.g,o=e.b,i=e.a,a=Math.max(t,n,o),r=a-Math.min(t,n,o),s=r?a===t?(n-o)/r:a===n?2+(o-t)/r:4+(t-n)/r:0;return{h:60*(s<0?s+6:s),s:a?r/a*100:0,v:a/255*100,a:i}},Xn=function(e){var t=e.h,n=e.s,o=e.v,i=e.a;t=t/360*6,n/=100,o/=100;var a=Math.floor(t),r=o*(1-n),s=o*(1-(t-a)*n),c=o*(1-(1-t+a)*n),l=a%6;return{r:255*[o,s,r,r,c,o][l],g:255*[c,o,o,s,r,r][l],b:255*[r,r,c,o,o,s][l],a:i}},Zn=function(e){return{h:qn(e.h),s:Gn(e.s,0,100),l:Gn(e.l,0,100),a:Gn(e.a)}},Qn=function(e){return{h:zn(e.h),s:zn(e.s),l:zn(e.l),a:zn(e.a,3)}},eo=function(e){return Xn((n=(t=e).s,{h:t.h,s:(n*=((o=t.l)<50?o:100-o)/100)>0?2*n/(o+n)*100:0,v:o+n,a:t.a}));var t,n,o},to=function(e){return{h:(t=Jn(e)).h,s:(i=(200-(n=t.s))*(o=t.v)/100)>0&&i<200?n*o/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,o,i},no=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oo=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,io=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ao=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ro={string:[[function(e){var t=Yn.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?zn(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?zn(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=io.exec(e)||ao.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Vn({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=no.exec(e)||oo.exec(e);if(!t)return null;var n,o,i=Zn({h:(n=t[1],o=t[2],void 0===o&&(o="deg"),Number(n)*(Un[o]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return eo(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,o=e.b,i=e.a,a=void 0===i?1:i;return Hn(t)&&Hn(n)&&Hn(o)?Vn({r:Number(t),g:Number(n),b:Number(o),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,o=e.l,i=e.a,a=void 0===i?1:i;if(!Hn(t)||!Hn(n)||!Hn(o))return null;var r=Zn({h:Number(t),s:Number(n),l:Number(o),a:Number(a)});return eo(r)},"hsl"],[function(e){var t=e.h,n=e.s,o=e.v,i=e.a,a=void 0===i?1:i;if(!Hn(t)||!Hn(n)||!Hn(o))return null;var r=function(e){return{h:qn(e.h),s:Gn(e.s,0,100),v:Gn(e.v,0,100),a:Gn(e.a)}}({h:Number(t),s:Number(n),v:Number(o),a:Number(a)});return Xn(r)},"hsv"]]},so=function(e,t){for(var n=0;n<t.length;n++){var o=t[n][0](e);if(o)return[o,t[n][1]]}return[null,void 0]},co=function(e,t){var n=to(e);return{h:n.h,s:Gn(n.s+100*t,0,100),l:n.l,a:n.a}},lo=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},uo=function(e,t){var n=to(e);return{h:n.h,s:n.s,l:Gn(n.l+100*t,0,100),a:n.a}},po=function(){function e(e){this.parsed=function(e){return"string"==typeof e?so(e.trim(),ro.string):"object"==typeof e&&null!==e?so(e,ro.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return zn(lo(this.rgba),2)},e.prototype.isDark=function(){return lo(this.rgba)<.5},e.prototype.isLight=function(){return lo(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Wn(this.rgba)).r,n=e.g,o=e.b,a=(i=e.a)<1?Kn(zn(255*i)):"","#"+Kn(t)+Kn(n)+Kn(o)+a;var e,t,n,o,i,a},e.prototype.toRgb=function(){return Wn(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Wn(this.rgba)).r,n=e.g,o=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+o+", "+i+")":"rgb("+t+", "+n+", "+o+")";var e,t,n,o,i},e.prototype.toHsl=function(){return Qn(to(this.rgba))},e.prototype.toHslString=function(){return t=(e=Qn(to(this.rgba))).h,n=e.s,o=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+o+"%, "+i+")":"hsl("+t+", "+n+"%, "+o+"%)";var e,t,n,o,i},e.prototype.toHsv=function(){return e=Jn(this.rgba),{h:zn(e.h),s:zn(e.s),v:zn(e.v),a:zn(e.a,3)};var e},e.prototype.invert=function(){return go({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),go(co(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),go(co(this.rgba,-e))},e.prototype.grayscale=function(){return go(co(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),go(uo(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),go(uo(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?go({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):zn(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=to(this.rgba);return"number"==typeof e?go({h:e,s:t.s,l:t.l,a:t.a}):zn(t.h)},e.prototype.isEqual=function(e){return this.toHex()===go(e).toHex()},e}(),go=function(e){return e instanceof po?e:new po(e)},ho=[],fo=function(e){e.forEach((function(e){ho.indexOf(e)<0&&(e(po,ro),ho.push(e))}))},mo=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},yo=function(e){return.2126*mo(e.r)+.7152*mo(e.g)+.0722*mo(e.b)};function bo(e){e.prototype.luminance=function(){return e=yo(this.rgba),void 0===(t=2)&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0;var e,t,n},e.prototype.contrast=function(t){void 0===t&&(t="#FFF");var n,o,i,a,r,s,c,l=t instanceof e?t:new e(t);return a=this.rgba,r=l.toRgb(),n=(s=yo(a))>(c=yo(r))?(s+.05)/(c+.05):(c+.05)/(s+.05),void 0===(o=2)&&(o=0),void 0===i&&(i=Math.pow(10,o)),Math.floor(i*n)/i+0},e.prototype.isReadable=function(e,t){return void 0===e&&(e="#FFF"),void 0===t&&(t={}),this.contrast(e)>=(r=void 0===(a=(n=t).size)?"normal":a,"AAA"===(i=void 0===(o=n.level)?"AA":o)&&"normal"===r?7:"AA"===i&&"large"===r?3:4.5);var n,o,i,a,r}}function wo(){const{getBlockVariations:e}=(0,g.useSelect)(k.store),{__experimentalGetCurrentThemeGlobalStylesVariations:t}=(0,g.useSelect)(Zt.store),n=(0,g.useSelect)((e=>e(Zt.store).__experimentalGetCurrentThemeGlobalStylesVariations())),{getGeneratedVariations:o}=(0,g.useSelect)(wt),i=(0,f.useCallback)((()=>{const e=n||t(),i=e?.filter((e=>u(e)))||[];return o&&o()?.length>0?[...o(),...i]:i}),[n,t,o]),a=(0,f.useCallback)((()=>{const e=n||t(),i=e?.filter((e=>d(e)))||[];if(o&&o()?.length>0){const e=o().filter((e=>d(e)));if(e.length>0)return[...e,...i]}return i}),[n,t,o]),r=(0,f.useCallback)((e=>{const t=i();return t?.find((t=>t.title===e))}),[i]),s=(0,f.useCallback)(((e,t)=>{if(t.startsWith("#"))return t;const n=r(e),o=t?.match(/\d+/)[0];return n?.settings?.color?.palette?.theme?.find((e=>o===e.slug.match(/\d+/)[0]))?.color}),[r]),c=(0,f.useCallback)(((e,t)=>{const n=r(t);let o=!1;if(o=e.includes("default")?n?.styles?.color?.background||!1:n?.styles?.blocks?.["core/group"]?.variations?.[e]?.color?.background||!1,!o)return!1;const i=s(t,o);return!!i&&{themeVar:o,hex:i}}),[r,s]),l=(0,f.useCallback)(((e,t)=>{const n=r(t);let o=!1;if(o=e.includes("default")?n?.styles?.color?.text||!1:n?.styles?.blocks?.["core/group"]?.variations?.[e]?.color?.text||!1,!o)return!1;const i=s(t,o);return!!i&&{themeVar:o,hex:i}}),[r,s]),u=e=>e?.settings?.color&&!e?.settings?.typography,d=e=>e?.settings?.typography&&!e?.settings?.color,p=(0,f.useCallback)((e=>{let t;switch(e){case"color":t=i();break;case"font":t=a();break;default:throw new Error("Invalid variation type")}return t?.length?t.reduce(((e,t)=>{const n=t?.["x-big-sky-meta"]?.keywords;return n&&n.forEach((t=>{e.includes(t)||e.push(t)})),e}),[]):[]}),[i,a]),h=(0,f.useCallback)((()=>e("core/social-link")),[e]);return{MAX_VARIATIONS_SHOWN:10,getColorVariations:i,getFontVariations:a,getColorVariationByTitle:r,getFontVariationByTitle:e=>{const t=a();return t?.find((t=>t.title===e))},getHexColorFromThemeVar:s,getSectionVariationBackgroundColor:c,getSectionVariationTextColor:l,isColorVariation:u,isFontVariation:d,getVariationKeywords:p,getSocialLinkVariations:h}}fo([bo]);const vo="AI Website Builder Custom",ko="Custom Color",_o=(e,t)=>{let n;var o;return go(e).isLight()?(o=t,n=Object.values(o).reduce(((e,t)=>go(t.color).brightness()<go(e.color).brightness()?t:e))):n=(e=>Object.values(e).reduce(((e,t)=>go(t.color).brightness()>go(e.color).brightness()?t:e)))(t),n},xo=e=>e?e.sort().join("-").replace(/#/g,"").toUpperCase():"",Co=({theme:e,color:t})=>{e?.settings?.color||(e.settings.color={}),e?.settings?.color?.palette||(e.settings.color.palette={}),e?.settings?.color?.palette?.theme||(e.settings.color.palette.theme=[]);const n=Math.max(...e.settings.color.palette.theme.map((e=>parseInt(e.slug.split("-")[1]))))+1,o={color:t,name:`${ko} ${n}`,slug:`theme-${n}`};return e.settings.color.palette.theme.push(o),o},So=({styles:e,palette:t,path:n=[],currentVariationBackgroundVar:o="",currentVariationTextVar:i=""})=>{if(n.includes("elements")&&n.includes("button")){if(e?.color?.background){const n=t.find((t=>e.color.background.includes(t.slug))).color,i=t.find((e=>o.includes(e.slug))).color;if(go(n).contrast(go(i))<4.5){const n=_o(i,t);if(e.color.background=`var(--wp--preset--color--${n.slug})`,e?.[":hover"]?.color?.background){const t=go(n.color).isLight();e[":hover"].color.background=t?`color-mix(in srgb, var(--wp--preset--color--${n.slug}) 85%, #000)`:`color-mix(in srgb, var(--wp--preset--color--${n.slug}) 90%, transparent)`}}}if(e?.color?.text){const n=t.find((t=>e.color.background.includes(t.slug))).color,o=t.find((t=>e.color.text.includes(t.slug))).color;if(go(n).contrast(go(o))<4.5){const o=_o(n,t);e.color.text=`var(--wp--preset--color--${o.slug})`,e?.[":hover"]?.color?.text&&(e[":hover"].color.text=`var(--wp--preset--color--${o.slug})`)}}}else{if(e?.color?.background&&e?.color?.text){o=e.color.background,i=e.color.text;const n=t.find((t=>e.color.background.includes(t.slug))).color,a=t.find((t=>e.color.text.includes(t.slug))).color;if(go(n).contrast(go(a))<4.5){const o=_o(n,t);e.color.text=`var(--wp--preset--color--${o.slug})`}}if("object"==typeof e&&null!==e)for(const[a,r]of Object.entries(e))So({styles:r,palette:t,path:[...n,a],currentVariationBackgroundVar:o,currentVariationTextVar:i})}},Eo=({theme:e,colors:t})=>{e.settings.color.palette.theme.forEach(((e,n)=>{t[`color${n+1}`]&&(e.color=t[`color${n+1}`],e.name=`${ko} ${n+1}`)})),So({styles:e.styles,palette:e?.settings?.color?.palette?.theme})},To=(e,t,n)=>{const o=go(n),i=o.isLight();let a=0,r=e;for(;a<50&&go(r).contrast(o)<t;){const{h:e,s:t,l:n}=go(r).toHsl(),o=i?-5:5,s=Math.min(Math.max(n+o,0),100);r=go({h:e,s:t,l:s}).toHex(),a++}return r},Io=({templateTheme:e,colors:t})=>{const n=Object.entries(t).map((([e,t])=>[e,t.color])).sort(((e,t)=>go(t[1]).brightness()-go(e[1]).brightness())),o={color1:n[0][1],color2:n[3][1],color3:n[1][1],color4:n[2][1]};return Eo({theme:e,colors:o}),e.title=`${vo} Light Theme - ${xo(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.color]))))}`,e},Ao=({templateTheme:e,colors:t})=>{const n=Object.entries(t).map((([e,t])=>[e,t.color])).sort(((e,t)=>go(e[1]).brightness()-go(t[1]).brightness())),o={color1:n[0][1],color2:n[3][1],color3:n[1][1],color4:n[2][1]};return Eo({theme:e,colors:o}),e.title=`${vo} Dark Theme - ${xo(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.color]))))}`,e},Po=({templateTheme:e,colors:t})=>{const n=Object.values(t).map((e=>e.user_requested?e.color:"")),o=n.every((e=>""===e));if(o)return null;const i=n.every((e=>""!==e));if(i)return null;const a=(e=>{let[t,n,o,i]=e;return t=t?go(t).toHex():(()=>{const{s:e,l:t}=go("#000000").toHsl();return go({h:0,s:Math.min(e,20),l:t}).toHex()})(),n=n?go(n).toHex():To("#808080",4.5,t),o?o=go(o).toHex():(o=(e=>{const{h:t,s:n,l:o}=go(e).toHsl(),i=Math.max(0,Math.min(100,o+(10*Math.random()-5))),a=Math.max(0,Math.min(100,n+(10*Math.random()-5)));return go({h:t,s:a,l:i}).toHex()})(t),!go(o).contrast(go(t))<=2&&(o=((e,t)=>{const{h:n,s:o,l:i}=go(t).toHsl(),{s:a,l:r}=go(e).toHsl(),s=Math.max(0,Math.min(100,o+(a-o))),c=Math.max(0,Math.min(100,i+(r-i)));return go({h:n,s,l:c}).toHex()})(o,t))),i=i?go(i).toHex():To("#c0c0c0",4.5,t),[t,n,o,i]})(n).reduce(((e,t,n)=>(e[`color${n+1}`]=t,e)),{});return Eo({theme:e,colors:a}),e.title=`${vo} HSL Theme - ${xo(a)}`,e},Mo=()=>[Io,Ao,Po],{GlobalStylesContext:No,useGlobalSetting:Oo,useGlobalStyle:Ro,useGlobalStylesReset:Do}=rn(v.privateApis);function Lo(e,t){const n=e?.replace(/\s/g,"");if("var(--wp--preset--color--"!==n?.slice(0,25))return e;const o=n.slice(25,-1);return t.settings.color.palette.theme.find((e=>e.slug===o)).color}function Bo(){const{currentColor:e,currentFont:t,isOnboarded:n}=tn().getSiteMetadata(),{setInitializedCustomScheme:o,pushGeneratedVariations:i,setCurrentColor:a,setCurrentFont:r,setUserStyleWithSettings:s,setCurrentPaletteColors:c}=(0,g.useDispatch)(wt),[l,u]=Do(),{getBlockAttributes:d,isDistractionFree:p}=(0,g.useSelect)((e=>({getBlockAttributes:e(v.store).getBlockAttributes,isDistractionFree:e(v.store).getSettings().isDistractionFree})),[]),{updateBlockAttributes:h}=(0,g.useDispatch)(v.store),{editEntityRecord:m,saveEditedEntityRecord:y}=(0,g.useDispatch)(Zt.store),{setCurrentColor:b,setCurrentFont:w}=tn(),{setUserConfig:k}=(0,f.useContext)(No),{globalStylesId:_,getEntityRecord:x,getEditedEntityRecord:C}=(0,g.useSelect)((e=>({globalStylesId:e(Zt.store).__experimentalGetCurrentGlobalStylesId(),getEntityRecord:e(Zt.store).getEntityRecord,getEditedEntityRecord:e(Zt.store).getEditedEntityRecord}))),{getColorVariations:S,getFontVariations:E,getColorVariationByTitle:T}=wo(),I=(0,g.useSelect)((e=>e(Zt.store).__experimentalGetCurrentThemeGlobalStylesVariations()),[]),{getCurrentColor:A,getCurrentFont:P,getInitializedCustomScheme:M,getUserStyleWithSettings:N,getCustomVariationTemplates:O,isEditorIframeLoaded:R}=(0,g.useSelect)((e=>{const t=e(wt);return{currentPaletteColors:t.getCurrentPaletteColors(),getCurrentColor:t.getCurrentColor,getCurrentFont:t.getCurrentFont,getInitializedCustomScheme:t.getInitializedCustomScheme,getUserStyleWithSettings:t.getUserStyleWithSettings,getCustomVariationTemplates:t.getCustomVariationTemplates,isEditorIframeLoaded:t.getIsEditorIframeLoaded(),isEditorReady:t.getIsEditorReady()}})),[D]=Oo("color.palette.core"),[L]=Oo("color.palette.theme"),[B]=Oo("color.palette.custom"),{isPostEditor:F}=Sn(),j=(0,f.useMemo)((()=>[...B||[],...L||[],...D||[]]),[B,L,D]),[$]=Ro("",void 0,"user",{shouldDecodeEncode:!1}),[U,H]=Ro("",void 0,"all",{shouldDecodeEncode:!1});(0,f.useEffect)((()=>{["blocks","color","elements","typography"].every((e=>$?.hasOwnProperty(e)))&&s($)}),[$,s]);const z=(0,f.useCallback)((()=>[U?.css,e=>H({...N(),css:e})]),[U?.css,N,H]),G=(0,f.useMemo)((()=>C("root","globalStyles",_)),[C,_]),q=(0,f.useCallback)((()=>C("root","globalStyles",_)),[C,_]),V=(0,f.useCallback)((e=>{var t;const n=T(e),o=Object.entries(null!==(t=n?.styles?.blocks?.["core/group"]?.variations)&&void 0!==t?t:{}).map((([e,t])=>({name:e,background:t?.color?.background,text:t?.color?.text,elements:t?.elements})));return o.find((e=>"default"===e.name))||o.unshift({name:"section-default",background:n?.styles?.color?.background,text:n?.styles?.color?.text,elements:n?.styles?.elements}),o}),[T]),W=(0,f.useCallback)((({rootBlocks:e,background_color:t,text_color:n,button_color:o,button_text_color:i,sectionToUpdate:a=null,inMemory:r=!1,ignoreCoverHeadings:s=!1})=>{t=t?.slug||t?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||t,n=n?.slug||n?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||n,o=o?.slug||o?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||o,i=i?.slug||i?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||i;const c=[],l=(e,t=!1)=>{const a=[];let c;c=r?e.attributes:d(e.clientId);const u={...c};switch(e.name){case"core/button":case"jetpack/button":i&&(r?e.attributes.textColor=i:u.textColor=i),o&&(r?e.attributes.backgroundColor=o:u.backgroundColor=o),(o||i)&&a.push({clientId:e.clientId,attributes:u});break;case"core/heading":!n||t&&s||(r?e.attributes.textColor=n:u.textColor=n,a.push({clientId:e.clientId,attributes:u}));break;case"core/paragraph":case"core/site-title":case"core/post-title":n&&(r?e.attributes.textColor=n:u.textColor=n,a.push({clientId:e.clientId,attributes:u}));break;case"jetpack/subscriptions":i&&(r?e.attributes.textColor=i:u.textColor=i),o&&(r?e.attributes.buttonBackgroundColor=o:u.buttonBackgroundColor=o),(o||i)&&a.push({clientId:e.clientId,attributes:u});break;case"core/cover":t=!0}return e.innerBlocks.forEach((e=>{a.push(...l(e,t))})),a};e.forEach((e=>{let o;if(o=r?e.attributes:d(e.clientId),a){const e=o.className?.match(/is-style-(\S+)\b/);if(e&&e[1]!==a)return}const i={...o};t&&(r?e.attributes.backgroundColor=t:i.backgroundColor=t),n&&(r?e.attributes.textColor=n:i.textColor=n),(t||n)&&c.push({clientId:e.clientId,attributes:i}),c.push(...l(e,!1))})),r||c.forEach((e=>{h(e.clientId,e.attributes)}))}),[d,h]),Y=(0,f.useCallback)((({color:e,rootBlocks:t,ignoreCoverHeadings:n=!1,inMemory:o=!1,sectionToUpdate:i=null})=>{V(e).forEach((e=>{i&&e.name!==i||W({rootBlocks:t,background_color:e.background,text_color:e.text,button_color:e.elements?.button?.color?.background,button_text_color:e.elements?.button?.color?.text,sectionToUpdate:e.name,ignoreCoverHeadings:n,inMemory:o})}))}),[V,W]),K=(0,f.useCallback)((n=>{const{color:o,font:i,undoIgnore:s=!1}=n;let l=o||A()||e,u=i||P()||t;const d=S();d?.find((e=>e.title===l))||(l=d[Math.floor(Math.random()*d.length)]?.title);const p=(null!=d?d:I)?.find((e=>e.title===l));if(o){b(l),a(l);const e=p?.settings?.color?.palette?.theme;c(e)}const g=E();g?.find((e=>e.title===u))||(u=g[Math.floor(Math.random()*g.length)]?.title);const h=(null!=g?g:I)?.find((e=>e.title===u));if(i&&(w(u),r(u)),k((()=>{const e={arrayMerge:(e,t)=>t};return{settings:[p?.settings,h?.settings].filter(Boolean).reduce(((t,n)=>$n(t,n,e)),{}),styles:[p?.styles,h?.styles].filter(Boolean).reduce(((t,n)=>$n(t,n,e)),{})}}),{undoIgnore:s}),m("root","globalStyles",_,{title:l},{undoIgnore:!0}),F){const{canvasiFrameDocument:e}=Xt();let t=e.getElementById("big-sky-colors");t||(t=e.createElement("style"),t.setAttribute("id","big-sky-colors"),e.body.appendChild(t));const n=[];C("root","globalStyles",_).settings.color.palette.theme.forEach((e=>{n.push(`.has-${e.slug}-background-color {\n\t\t\t\t\t\tbackground-color: ${e.color} !important;\n\t\t\t\t\t}`),n.push(`.has-${e.slug}-color {\n\t\t\t\t\t\tcolor: ${e.color} !important;\n\t\t\t\t\t}`)})),t.textContent=n.join("\n")}return{selectedColorVariation:l,selectedFontVariation:u}}),[e,t,m,S,A,P,C,E,_,F,b,a,w,r,c,k,I]);(0,f.useEffect)((()=>{if(!R||p)return;const e=e=>{const t=e.target.closest(".edit-site-global-styles-variations_item");if(t){const e=t.getAttribute("aria-label");m("root","globalStyles",_,{title:e},{undoIgnore:!0}),b(e),a(e)}},t=new window.MutationObserver((t=>{const n=t.find((e=>e.addedNodes.length>0&&Array.from(e.addedNodes).some((e=>e.classList?.contains("edit-site-global-styles-color-palette-panel")))));if(n){const t=Array.from(n.addedNodes).find((e=>e.classList?.contains("edit-site-global-styles-color-palette-panel")));t&&!t.hasAttribute("data-has-click-listener")&&(t.addEventListener("click",e),t.setAttribute("data-has-click-listener","true"))}})),n=document.querySelector(".interface-interface-skeleton__sidebar");return n&&t.observe(n,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),()=>{t.disconnect()}}),[R,p,m,_,b,a]);const J=(0,f.useCallback)((e=>{const t=T(e);return t?.styles?.color?.background}),[T]),X=(0,f.useCallback)((e=>{const t=T(e);return t?.styles?.color?.text}),[T]),Z=(0,f.useCallback)((e=>{var t;const n=T(e),o=Object.entries(null!==(t=n?.styles?.blocks?.["core/group"]?.variations)&&void 0!==t?t:{}).map((([e,t])=>({name:e,label:e,background:Lo(t?.color?.background,n),text:Lo(t?.color?.text,n)})));return o.find((e=>"default"===e.name))||o.unshift({name:"default",label:"Default",background:Lo(n?.styles?.color?.background,n),text:Lo(n?.styles?.color?.text,n)}),o}),[T]),Q=(0,f.useCallback)((({custom_colors:e})=>{const t=O(),n=[],o=Mo();for(const i of o){const o=JSON.parse(JSON.stringify(t[0]));n.push(i({templateTheme:o,colors:e}))}const a=n.filter((e=>null!==e));return i(a),a}),[O,i]);return(0,f.useEffect)((()=>{if(!O().length||M()||!n||!R&&!F)return;const t=JSON.parse(JSON.stringify(G));t&&(t.title=e?.startsWith(vo)?e:vo,i([t])),c(j),o(!0)}),[e,j,O,x,M,_,n,i,o,c,G,K,R,F]),{currentTheme:G,getCurrentTheme:q,resetStyles:()=>{l&&(u(),m("root","globalStyles",_,{id:_,settings:{},styles:{}}),y("root","globalStyles",_))},setStyles:K,saveStylesEntityRecord:async()=>{await y("root","globalStyles",_)},themeColors:L,paletteColors:j,hexToRgb:e=>{let t=0,n=0,o=0;return 4===e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],o="0x"+e[3]+e[3]):7===e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],o="0x"+e[5]+e[6]),[+t,+n,+o].join(",")},getVariationBackgroundColor:J,getVariationTextColor:X,getVariationSectionColors:Z,useCustomCss:z,getThemeColors:()=>L,createCustomSchemeVariations:Q,getCustomVariationTemplateCopy:()=>JSON.parse(JSON.stringify(O()[0])),updateRootBlocksStyles:W,updateRootBlocksStylesByColor:Y,getVariationSectionValues:V}}const Fo=window.wp.hooks;function jo(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function $o(e){return"#"+e.map(jo).join("")}function Uo(e){return e?(t=e,Array.isArray(t[0])?e:[e]):[];var t}function Ho(e,t,n){for(var o=0;o<n.length;o++)if(zo(e,t,n[o]))return!0;return!1}function zo(e,t,n){switch(n.length){case 3:if(function(e,t,n){return 255!==e[t+3]||e[t]===n[0]&&e[t+1]===n[1]&&e[t+2]===n[2]}(e,t,n))return!0;break;case 4:if(function(e,t,n){return e[t+3]&&n[3]?e[t]===n[0]&&e[t+1]===n[1]&&e[t+2]===n[2]&&e[t+3]===n[3]:e[t+3]===n[3]}(e,t,n))return!0;break;case 5:if(function(e,t,n){var o=n[0],i=n[1],a=n[2],r=n[3],s=n[4],c=e[t+3],l=Go(c,r,s);return r?!(c||!l)||!!(Go(e[t],o,s)&&Go(e[t+1],i,s)&&Go(e[t+2],a,s)&&l):l}(e,t,n))return!0;break;default:return!1}}function Go(e,t,n){return e>=t-n&&e<=t+n}function qo(e,t,n){for(var o={},i=n.dominantDivider||24,a=n.ignoredColor,r=n.step,s=[0,0,0,0,0],c=0;c<t;c+=r){var l=e[c],u=e[c+1],d=e[c+2],p=e[c+3];if(!a||!Ho(e,c,a)){var g=Math.round(l/i)+","+Math.round(u/i)+","+Math.round(d/i);o[g]?o[g]=[o[g][0]+l*p,o[g][1]+u*p,o[g][2]+d*p,o[g][3]+p,o[g][4]+1]:o[g]=[l*p,u*p,d*p,p,1],s[4]<o[g][4]&&(s=o[g])}}var h=s[0],f=s[1],m=s[2],y=s[3],b=s[4];return y?[Math.round(h/y),Math.round(f/y),Math.round(m/y),Math.round(y/b)]:n.defaultColor}function Vo(e,t,n){for(var o=0,i=0,a=0,r=0,s=0,c=n.ignoredColor,l=n.step,u=0;u<t;u+=l){var d=e[u+3],p=e[u]*d,g=e[u+1]*d,h=e[u+2]*d;c&&Ho(e,u,c)||(o+=p,i+=g,a+=h,r+=d,s++)}return r?[Math.round(o/r),Math.round(i/r),Math.round(a/r),Math.round(r/s)]:n.defaultColor}function Wo(e,t,n){for(var o=0,i=0,a=0,r=0,s=0,c=n.ignoredColor,l=n.step,u=0;u<t;u+=l){var d=e[u],p=e[u+1],g=e[u+2],h=e[u+3];c&&Ho(e,u,c)||(o+=d*d*h,i+=p*p*h,a+=g*g*h,r+=h,s++)}return r?[Math.round(Math.sqrt(o/r)),Math.round(Math.sqrt(i/r)),Math.round(Math.sqrt(a/r)),Math.round(r/s)]:n.defaultColor}function Yo(e){return Ko(e,"defaultColor",[0,0,0,0])}function Ko(e,t,n){return void 0===e[t]?n:e[t]}function Jo(e){return function(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement}(e)?"canvas":function(e){return Zo&&e instanceof OffscreenCanvas}(e)?"offscreencanvas":function(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}(e)?"imagebitmap":e.src}function Xo(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement}var Zo="undefined"!=typeof OffscreenCanvas,Qo="undefined"==typeof window;function ei(e){return Error("FastAverageColor: "+e)}function ti(e,t){t||console.error(e)}var ni=function(){function e(){this.canvas=null,this.ctx=null}return e.prototype.getColorAsync=function(e,t){if(!e)return Promise.reject(ei("call .getColorAsync() without resource"));if("string"==typeof e){if("undefined"==typeof Image)return Promise.reject(ei("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=t&&t.crossOrigin||"",n.src=e,this.bindImageEvents(n,t)}if(Xo(e)&&!e.complete)return this.bindImageEvents(e,t);var o=this.getColor(e,t);return o.error?Promise.reject(o.error):Promise.resolve(o)},e.prototype.getColor=function(e,t){var n=Yo(t=t||{});if(!e)return ti(a=ei("call .getColor() without resource"),t.silent),this.prepareResult(n,a);var o=function(e,t){var n,o=Ko(t,"left",0),i=Ko(t,"top",0),a=Ko(t,"width",e.width),r=Ko(t,"height",e.height),s=a,c=r;return"precision"===t.mode||(a>r?(n=a/r,s=100,c=Math.round(s/n)):(n=r/a,c=100,s=Math.round(c/n)),(s>a||c>r||s<10||c<10)&&(s=a,c=r)),{srcLeft:o,srcTop:i,srcWidth:a,srcHeight:r,destWidth:s,destHeight:c}}(function(e){if(Xo(e)){var t=e.naturalWidth,n=e.naturalHeight;return e.naturalWidth||-1===e.src.search(/\.svg(\?|$)/i)||(t=n=100),{width:t,height:n}}return function(e){return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement}(e)?{width:e.videoWidth,height:e.videoHeight}:{width:e.width,height:e.height}}(e),t);if(!(o.srcWidth&&o.srcHeight&&o.destWidth&&o.destHeight))return ti(a=ei('incorrect sizes for resource "'.concat(Jo(e),'"')),t.silent),this.prepareResult(n,a);if(!this.canvas&&(this.canvas=Qo?Zo?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas))return ti(a=ei("OffscreenCanvas is not supported in this browser"),t.silent),this.prepareResult(n,a);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return ti(a=ei("Canvas Context 2D is not supported in this browser"),t.silent),this.prepareResult(n);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=o.destWidth,this.canvas.height=o.destHeight;try{this.ctx.clearRect(0,0,o.destWidth,o.destHeight),this.ctx.drawImage(e,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);var i=this.ctx.getImageData(0,0,o.destWidth,o.destHeight).data;return this.prepareResult(this.getColorFromArray4(i,t))}catch(o){var a;return ti(a=ei("security error (CORS) for resource ".concat(Jo(e),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),t.silent),!t.silent&&console.error(o),this.prepareResult(n,a)}},e.prototype.getColorFromArray4=function(e,t){t=t||{};var n=e.length,o=Yo(t);if(n<4)return o;var i,a=n-n%4,r=4*(t.step||1);switch(t.algorithm||"sqrt"){case"simple":i=Vo;break;case"sqrt":i=Wo;break;case"dominant":i=qo;break;default:throw ei("".concat(t.algorithm," is unknown algorithm"))}return i(e,a,{defaultColor:o,ignoredColor:Uo(t.ignoredColor),step:r,dominantDivider:t.dominantDivider})},e.prototype.prepareResult=function(e,t){var n=e.slice(0,3),o=[e[0],e[1],e[2],e[3]/255],i=function(e){return(299*e[0]+587*e[1]+114*e[2])/1e3<128}(e);return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+n.join(",")+")",rgba:"rgba("+o.join(",")+")",hex:$o(n),hexa:$o(e),isDark:i,isLight:!i,error:t}},e.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},e.prototype.bindImageEvents=function(e,t){var n=this;return new Promise((function(o,i){var a=function(){c();var a=n.getColor(e,t);a.error?i(a.error):o(a)},r=function(){c(),i(ei('Error loading image "'.concat(e.src,'"')))},s=function(){c(),i(ei('Image "'.concat(e.src,'" loading aborted')))},c=function(){e.removeEventListener("load",a),e.removeEventListener("error",r),e.removeEventListener("abort",s)};e.addEventListener("load",a),e.addEventListener("error",r),e.addEventListener("abort",s)}))},e}();async function oi(e,t=1024,n=1024){const o=document.createElement("img");o.width=t/2,o.height=n/2;const i=window.URL.createObjectURL(e),a=new Promise((e=>{const t=()=>{window.URL.revokeObjectURL(i),o.removeEventListener("load",t),e()};o.addEventListener("load",t)}));return o.src=i,await a,o}function ii(e=1024,t=1024){const n=document.createElement("canvas");return n.width=e,n.height=t,n}function ai(e,t,n){const o=`/* START Big Sky */\n.wp-block-site-logo .custom-logo[src*="${new window.URL(n).pathname}"] {\n\tbackground-color: currentcolor;\n\t-webkit-mask-image: url('${n}');\n\t-webkit-mask-position: center center;\n\t-webkit-mask-size: cover;\n\t-webkit-mask-repeat: no-repeat;\n\tmask-image: url('${n}');\n\tmask-position: center center;\n\tmask-size: cover;\n\tmask-repeat: no-repeat;\n\tobject-position: -1024px -1024px;\n}\n\n/* END Big Sky */`;e.includes(o)||t(e.replace(/\/\* START Big Sky \*\/.*\/\* END Big Sky \*\//s,"").trim()+`\n\n${o}`)}function ri(){return ri.fastAverageColor||(ri.fastAverageColor=new ni),ri.fastAverageColor}const si="#ffffff",ci=async e=>{if(!e)return si;const{r:t,g:n,b:o,a:i}=go(si).toRgb();try{const a=(0,Fo.applyFilters)("media.crossOrigin",void 0,e);return(await ri().getColorAsync(e,{defaultColor:[t,n,o,255*i],silent:!0,crossOrigin:a})).hex}catch(e){return si}},li=["jpeg","jpg","png","gif","svg"],ui=e=>new RegExp(`\\.(${li.join("|")})$`,"i").test(e);function di(){const{getImageStyle:e}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{getBlock:e(v.store).getBlock,getBlocksByName:e(v.store).getBlocksByName,selectedBlock:t(),isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded(),isHandoff:e(wt).getIsHandoff(),getImageStyle:e(wt).getImageStyle}})),{getBlockSupport:t}=(0,g.useSelect)(k.store),n=(0,g.useRegistry)(),{editEntityRecord:o}=(0,g.useDispatch)(Zt.store),{updateBlockAttributes:i}=(0,g.useDispatch)(v.store),{setBlockIsProcessing:a}=sn(),{generateImage:r,addCachedImage:s}=(0,g.useDispatch)(wt),{getSurroundingContentOfBlock:c}=sn(),{getThemeColors:l}=Bo(),{useCustomCss:u}=Bo(),[d,p]=u(),h=e=>["core/image","core/site-logo","core/cover","core/media-text"].includes(e.name),f=e=>!!t(e.name,"background.backgroundImage"),y=e=>!!e&&("core/cover"===e.name||f(e)),b=e=>!!e&&(h(e)||f(e)),w=e=>h(e)||f(e)&&E(e),_=async(e,t)=>{for(const n of e){if(b(n)){const e=n.clientId;i(e,t[e]),a(n,!1)}n.innerBlocks?.length>0&&await _(n.innerBlocks,t)}},x=async({topic:e,numImages:t=80,aspectRatio:n=!1,excludedImageURLs:o=[]})=>{const i=await(0,g.dispatch)(wt).nextStockPhoto(e,t,n,o);return i?.URL&&s(i?.URL),i?.URL},C=async({block:t,topic:n,style:o})=>{const i=l().map((e=>e.color)),a=`Create a minimalistic background image to fit a versatile ${n} theme, and match the following color palette: ${i.join(", ")}.\n\t\tThe center of the image should be mostly empty for content placement, while the edges feature abstract, subtle design elements that evoke a sense of simplicity.\n\t\tAvoid using specific objects or textures to ensure the theme can be interpreted broadly. The image should be without any text or prominent focal points.`;return S({block:t,description:n,customPrompt:a,style:o||e()||"photographic",size:"landscape"})},S=async({block:e,description:t,style:n,size:o=!1,customPrompt:r=!1,retry:s=!1})=>{if(!e||!b(e))return(0,m.__)("I cannot generate an image for the currently selected block.","big-sky");const l=await ye(!s);if(!l)return(0,m.__)("I am unable to perform your request.","big-sky");const u=e?.clientId?c(e):"";let d;r?d=r:(d=`Please create an image based on this content: ${t||u}.`,d+=" The image should not contain any text.");const p=e.attributes.aspectRatio;let g,h,f;const y={square:{width:1024,height:1024},portrait:{width:768,height:1024},landscape:{width:1024,height:768}};o?f=y[o]:"1"!==p&&p?([g,h]=p.split("/").map(Number),f=g/h>1?y.landscape:y.portrait):f=y.square;const w={prompt:d,style:n,model:"flux",token:l.token};let v,k=!1;try{if(v=await fetch(`https://public-api.wordpress.com/wpcom/v2/sites/${l.blogId}/ai-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,...f})}),v.status>=300){if(!s)return S({block:e,description:t,style:n,size:o,customPrompt:r,retry:!0});K.error("Error calling Image Generation API: ",v),k=!0}}catch(i){if(!s)return S({block:e,description:t,style:n,size:o,customPrompt:r,retry:!0});K.error(i),k=!0}if(k)return a(e,!1),(0,m.__)("I encountered an error while processing your request. Please try again.","big-sky");const _=await v.blob();let x=null;for(await(0,ln.uploadMedia)({filesList:[new File([_],`${t||"untitled"}.png`,{type:"image/png"})],onError:({message:e})=>K.error(e),onFileChange:([n])=>{if(n.id){const o=new Image;o.src=n.url,o.addEventListener("load",(()=>{const o=T(e,n.url,t);i(e.clientId,o),a(e,!1),x=n.url})),o.addEventListener("error",(()=>{a(e,!1)}))}}});!x;)await new Promise((e=>setTimeout(e,100)));return x},E=e=>!!e.attributes?.style?.background?.backgroundImage?.url,T=(e,n,o)=>{const i={};return["core/image","core/cover","core/site-logo","core/media-text"].includes(e.name)?("core/media-text"===e.name?(i.mediaUrl=n||"",i.mediaAlt=o||""):(i.url=n||"",i.alt=o||""),"core/cover"===e.name&&100===e.attributes.dimRatio&&(i.dimRatio=50),i):(t(e.name,"background.backgroundImage",!1)&&(i.style={...e.attributes.style,background:{...e.attributes.style?.background,backgroundImage:n?{source:"file",url:decodeURIComponent(n)}:void 0}}),i)};return{setImagesInBlocks:async(e,t,o=!0,r={},s=!1,c=[],l=!1)=>{const u=[];let d=0;const p=async e=>{for(const n of e){if(l?w(n):b(n))if(y(n)&&!s)try{const e=C({block:n,topic:t});u.push(e)}catch(e){K.error("Error generating cover image: ",e),u.push(x({topic:t,aspectRatio:n.attributes?.aspectRatio,excludedImageURLs:c}))}else u.push(x({topic:t,aspectRatio:n.attributes?.aspectRatio,excludedImageURLs:c}));n.innerBlocks?.length>0&&p(n.innerBlocks)}},g=(e,n)=>{for(const s of e){if(l?w(s):b(s)){const e=T(s,n[d],t);d++,o?(s.attributes={...s.attributes,...e},r[s.clientId]=e):(i(s.clientId,e),a(s,!1))}s.innerBlocks?.length>0&&g(s.innerBlocks,n,d)}};p(e);const h=await Promise.all(u);if(n.batch((()=>{g(e,h)})),o)for(let e=0;e<2;e++)x({topic:t,excludedImageURLs:c})},getStockImageURL:x,setImages:()=>{},generateLogoWithAI:async({block:e,description:t})=>{var i;const s=`You are an expert at creating line drawing logos for business websites.\n\n\t\tAll of the logos you create must follow these rules:\n\n\t\t- This is a text-free logo. No letters, words, numbers, symbols, or any typographic elements should be present in any form.\n\t\t- The logo must show a single person, place, or object that represents the following description (whilst still being a text-free logo): ${null!==(i=t?.description)&&void 0!==i?i:t}.\n\t\t- The logo must always be a simple, black vector line drawing. Never use color.`,c=await r({prompt:s,size:"1024x1024",response_format:"b64_json",image_format:"PNG"}),l=c?.data?.[0]?.b64_json;if(l)try{const i=function(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return new Blob([n],{type:"image/png"})}(l),r=await async function(e,t=1.5){const n=await oi(e),o=ii(),i=o.getContext("2d");i.drawImage(n,0,0,o.width,o.height);const a=i.getImageData(0,0,o.width,o.height),{data:r}=a;for(let e=0;e<r.length;e+=4){const n=r[e],o=window.Math.round((n-128)*t)+128,i=window.Math.max(window.Math.min(o,255),0);r[e+3]=255-i,r[e]=0,r[e+1]=0,r[e+2]=0}return i.putImageData(a,0,0),await new Promise((e=>o.toBlob(e)))}(i),s=await async function(e){const t=await oi(e),n=ii(),o=n.getContext("2d");o.drawImage(t,0,0,n.width,n.height);const i=o.getImageData(0,0,n.width,n.height),{data:a}=i;let r=1/0,s=-1/0,c=1/0,l=-1/0;for(let e=0;e<n.width;e++)for(let t=0;t<n.height;t++)a[4*(t*n.width+e)+3]&&(e<r&&(r=e),e>s&&(s=e),t<c&&(c=t),t>l&&(l=t));let u=1+s-r,d=1+l-c;if(u<d){const e=(d-u)/2;u=d,r-=Math.floor(e)}else if(d<u){const e=(u-d)/2;d=u,c-=Math.floor(e)}return n.setAttribute("width",u),n.setAttribute("height",d),o.putImageData(i,-r,-c,r,c,u,d),await new Promise((e=>n.toBlob(e)))}(r);return await(0,ln.uploadMedia)({filesList:[new File([s],"site_logo_bsky.png",{type:"image/png"})],additionalData:{"meta[big_sky_generated_logo]":-1},onError:({message:e})=>K.error(e),onFileChange:([t])=>{if(t?.id){n.batch((()=>{ai(d,p,t.url),o("root","site",void 0,{site_logo:t.id})}));const{canvasiFrameRoot:i}=Xt();i?.style?.setProperty("--site-logo-url",`url(${t.url})`),e&&a(e,!1)}}}),(0,m.sprintf)(
// Translators: Placeholder represents the description of the image requested by the user.
// Translators: Placeholder represents the description of the image requested by the user.
(0,m.__)("I have generated a new logo of: %s","big-sky"),t)}catch(e){return K.error("Error:",e),(0,m.__)("I encountered an error while processing your request. Please try again.","big-sky")}},generateImageWithAI:S,generateBackgroundImageWithAI:C,getNewStockImage:async({block:e,topic:t})=>{if(!b(e))return(0,m.__)("I cannot generate an image for the currently selected block.","big-sky");const n=await x({topic:t,aspectRatio:e.attributes?.aspectRatio});if(!n)return a(e,!1),(0,m.__)("I could not retrieve a new stock image. Please try again.","big-sky");const o=T(e,n,t);return i(e.clientId,o),a(e,!1),(0,m.sprintf)(
// Translators: Placeholder represents the topic of the image requested by the user.
// Translators: Placeholder represents the topic of the image requested by the user.
(0,m.__)("I have inserted a new stock image of: %s","big-sky"),t)},canGenerateImage:b,updateImagesInBlocks:_,buildAttrToUpdateImage:T,shouldGeneratePatternImage:w,supportsBackgroundImage:f,canUseBackgroundImages:y}}const pi=JSON.parse('{"V":["Designed with <a href=\\"https://wordpress.com\\" rel=\\"nofollow\\">WordPress</a>"]}');function gi(){const{getCachedContent:e}=(0,g.useSelect)((e=>{const{getCachedContent:t}=e(wt);return t(),{getCachedContent:t}}),[]),{buildAttrToUpdateImage:t,shouldGeneratePatternImage:n}=di(),{updateBlockAttributes:o}=(0,g.useDispatch)(v.store),i=(t,n,a={"core/heading":0,"core/paragraph":0,"core/button":0})=>{const r=e(),s=n.sectionCategory;if(ot.includes(s))return nt[s].replaceContent(t,r?.[s]);if(t.innerBlocks?.length>0)return void t.innerBlocks.forEach((e=>i(e,n,a)));if("core/heading"!==t.name&&"core/paragraph"!==t.name&&"core/button"!==t.name)return;const c=`${s}-${t.name.replace("core/","")}`,l=r[c]?r[c]:[],u=n.selectedSectionContent[c];let d;u?.length>0&&u?.length-1>=a[t.name]?(d=u[a[t.name]],a[t.name]++):(d=l[a[t.name]],a[t.name]++),"core/heading"!==t.name&&"core/paragraph"!==t.name||(n.conceptSection?t.attributes.content=d:o(t.clientId,{content:d})),"core/button"===t.name&&(n.conceptSection?t.attributes.text=d:o(t.clientId,{text:d})),l?.length-1===a[t.name]&&(a[t.name]=0)},a=(e,t,n)=>{if(ot.includes(t))return[];switch(e.name){case"core/heading":if(e.attributes.content){const o=`${t}-heading`;n[o]=[...n[o]?n[o]:[],"string"==typeof e.attributes.content?e.attributes.content:e.attributes.content?.text]}break;case"core/paragraph":if(e.attributes.content){const o=`${t}-paragraph`;n[o]=[...n[o]?n[o]:[],"string"==typeof e.attributes.content?e.attributes.content:e.attributes.content?.text]}break;case"core/button":if(e.attributes.text){const o=`${t}-button`;n[o]=[...n[o]?n[o]:[],"string"==typeof e.attributes.text?e.attributes.text:e.attributes.text?.originalHTML]}}return e.innerBlocks?.length>0&&e.innerBlocks.forEach((e=>a(e,t,n))),n},r=(e,t)=>{const n=e/t;return Math.abs(n-1)<.1?"square":n>1?"landscape":"portrait"},s=(i,a,c=[])=>{const l=e();let u=l.images?l.images:[];const d=a?.selectedSectionImages||[],p=d.map((e=>{const t=e.match(/image-pexels-(\d+)/);return t?t[1]:null})).filter(Boolean);if(u=[...d,...u.filter((e=>{const t=e.match(/photos\/(\d+)\/pexels-photo/);return!t||!p.includes(t[1])}))],n(i)){const e=(e=>{if(!e)return null;if("1"===e)return 1;const[t,n]=e.split("/").map(Number);return t&&n?t/n:null})((e=>{if(e.attributes?.aspectRatio)return e.attributes.aspectRatio;const t=e.attributes?.width,n=e.attributes?.height;if(t&&n)return`${t}/${n}`;if(e.attributes?.className){const t=e.attributes.className.match(/aspect-(\d+\/\d+)/);if(t)return t[1]}return"16/9"})(i)),n=e?r(e,1):null,s=u.filter((e=>!c.includes(e)));let l;if(n){const e=e=>{try{const t=new URL(e),n=parseInt(t.searchParams.get("width")||0),o=parseInt(t.searchParams.get("height")||0);return n&&o?{width:n,height:o}:null}catch(e){return null}};l=s.find((t=>{const o=e(t);return!!o&&r(o.width,o.height)===n}))}l=l||s[0]||u[0],c.push(l);const d=t(i,l);a.conceptSection?i.attributes={...i.attributes,...d}:o(i.clientId,d)}i.innerBlocks?.length>0&&i.innerBlocks.forEach((e=>s(e,a,c)))},c=(e,t)=>{switch(e.name){case"core/image":case"core/cover":e.attributes.url&&t.push(e.attributes.url);break;case"core/group":e.attributes.style?.background?.backgroundImage?.url&&t.push(e.attributes.style?.background?.backgroundImage?.url)}return e.innerBlocks?.length>0&&e.innerBlocks.forEach((e=>c(e,t))),t};return{updateSectionContent:i,getPatternContent:a,updatePatternImages:s,getPatternImages:c}}function hi({description:e,sectionInfo:t,reason:n,_pageTitle:o,_pageDescription:i,customSubject:a,contentChunk:r,language:s}){let c=`The site description is: ${e}`;t?.name&&(c+=`The section name is: ${t.name}\n\n`),n&&(c+=`The reason this section has been chosen: ${n}\n\n`),o&&(c+=`The page title is: ${o}\n\n`),i&&(c+=`The description of the page is: ${i}, so content should be relevant to this.\n\n`);const l=`The content to update is: ${JSON.stringify(r)}`;return a?function({siteContext:e,language:t,content:n,userSubject:o}){return`\n\tYou are a website copy editor and can create, edit and replace content for a website based on a site description and a users specific request. \n\t\n\t<site_context>\n\t\t${e}\n\t</site_context>\n\n\t<language>\n\t\tHere is the language you should use for responses unless explicitly instructed otherwise:\n\t\t${t}\n\t</language>\n\n\t<instructions>\n\t\t1. The content you choose should always be relevant to the site and section information provided above, and the user's specific request.\n\t\t2. Avoid overly flowery language and meaningless buzz words/phrases.\n\t\t3. The new copy you write is ALWAYS mapped to the same id from the 'i' property as in the original array of objects\n\t\t4. Generate new copy according to the following guidelines:\n\t\t\t* Try and keep the string as close to the requested length as possible - this is indicated by the 'ln' property, but can be overridden by the user request, eg. "make this longer"',\n\t\t\t* If the "t" property is "h1" this is a main heading: the main heading should be written in title case.\n\t\t\t* If the "t" property is "h2" this is a secondary heading: secondary headings should be written in sentence case (not title case).\n\t\t\t* If the "t" property is "p" this is a paragraph its content should relate to the nearest "t" content proceeding it.\n\t\t\t* If the "t" property is "b" this is a button so the text must be a maximum length of 15 characters.\n\t\t\t* You will write this new copy entirely by yourself using your own knowledge. You do not need to call any external tools or functions to do this.\n\t\t\t* Only ever call replace_content.\n\t\t\t* Leave the content of your response as null.\n\t\t\t* Return the updated array of objects as a JSON object.\n\t</instructions>\n\n\t<restrictions>\n\t\t1. NEVER explain your choices to the user.\n\t\t2. NEVER ask the user to confirm your choices.\n\t\t3. NEVER make the string more than 2 characters longer or shorter than the requested length.\n\t</restrictions>\n\n\t<request_format>\n\tThe content to update will be provided as an array of JSON objects in the following format:\n\t\t{\n\t\t\t"t":"the type of content"\n\t\t\t"i": "a unique identifier for the content"\n\t\t\t"ln":"number of characters to make the content as close as possible to"\n\t\t\t"e":"the content to update"\n\t\t},\n\t<request_format>\n\n\n\t<examples>\n\t\tSite description:\t"A New York City coffee shop called Joe's Java"\n\t\tSection name: "About"\n\t\tPage title: "Home"\n\t\tPage description: "A home page for a New York City coffee shop called Joe's Java"\n\t\tThe subject requested by the user: "Make this more humerous"\n\t\t## Content request and response example\n\t\tContent before:\n\t\t\t{ "content":\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "123",\n\t\t\t\t\t\t"t": "p",\n\t\t\t\t\t\t"ln": "79",\n\t\t\t\t\t\t"e": "We will serve you the best coffee in New York City with exceptional service."\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\tContent after:\n\t\t\t{ "content":\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "456",\n\t\t\t\t\t\t"t": "p",\n\t\t\t\t\t\t"e": "We will brew you the strongest coffee in town  no beans left behind"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t</examples>\n\n\t<user_request>\n\t\t${n}\n\t\t${o}\n\t</user_request>\n\t`}({siteContext:c,language:s,content:l,userSubject:`\nThe subject requested by the user: ${a}\n\n`}):function({siteContext:e,language:t,content:n}){return`\n\tYou are a website copy editor and can produce relevant content for a website based on a site description . \n\t\n\t<site_context>\n\t\t${e}\n\t</site_context>\n\n\t<language>\n\t\tHere is the language you should use for responses unless explicitly instructed otherwise:\n\t\t${t}\n\t</language>\n\n\t<instructions>\n\t\t1. The content you choose should always be relevant to the site and section information provided above.\n\t\t2. Avoid overly flowery language and meaningless buzz words/phrases.\n\t\t3. The new copy you write is ALWAYS mapped to the same id from the 'i' property as in the original array of objects\n\t\t4. Generate new copy according to the following guidelines:\n\t\t\t* You love the challenge of creating a string of a certain length that still matches the other requirements so you take the ln value of each entry very seriously. You write a string as close to this number of characters as possible.',\n\t\t\t* If the "t" property is "h1" this is a main heading: the main heading should be written in title case.\n\t\t\t* If the "t" property is "h2" this is a secondary heading: secondary headings should be written in sentence case (not title case).\n\t\t\t* If the "t" property is "p" this is a paragraph its content should relate to the nearest "t" content proceeding it.\n\t\t\t* If the "t" property is "b" this is a button so the text must be a maximum length of 15 characters.\n\t\t\t* You will write this new copy entirely by yourself using your own knowledge. You do not need to call any external tools or functions to do this.\n\t\t\t* Only ever call replace_content.\n\t\t\t* Leave the content of your response as null.\n\t\t\t* Return the updated array of objects as a JSON object.\n\t</instructions>\n\n\t<restrictions>\n\t\t1. NEVER explain your choices to the user.\n\t\t2. NEVER ask the user to confirm your choices.\n\t\t3. NEVER make the string more than 2 characters longer or shorter than the requested length.\n\t</restrictions>\n\n\t<request_format>\n\tThe content to update will be provided as an array of JSON objects in the following format:\n\t\t{\n\t\t\t"t":"the type of content"\n\t\t\t"i": "a unique identifier for the content"\n\t\t\t"ln":"number of characters to make the content as close as possible to"\n\t\t},\n\t<request_format>\n\n\n\t<examples>\n\t\tSite description:\t"A New York City coffee shop called Joe's Java"\n\t\tSection name: "About"\n\t\tPage title: "Home"\n\t\tPage description: "A home page for a New York City coffee shop called Joe's Java"\n\t\tReason: "This section has been added to the home page to provide information about the coffee shop"\n\t\t## Content request and response example\n\t\tContent before:\n\t\t\t{ "content":\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "123",\n\t\t\t\t\t\t"t": "h2",\n\t\t\t\t\t\t"ln": "29",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "456",\n\t\t\t\t\t\t"t": "p",\n\t\t\t\t\t\t"ln": "74",\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\tContent after:\n\t\t\t{ "content":\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "123",\n\t\t\t\t\t\t"t": "h2",\n\t\t\t\t\t\t"e": "Joe's Java's promise to you"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "456",\n\t\t\t\t\t\t"t": "p",\n\t\t\t\t\t\t"e": "We will serve you the best coffee in New York City with exceptional service."\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t## String length examples\n\t\tlength requested: 10\n\t\t\t* good: "About Jim"\n\t\t\t* bad: "About Jim: your sport coaching expert"\n\t\tlength requested: 25\n\t\t\t* good: "Your reroofing specialists"\n\t\t\t* bad: "Reroofing experts"\n\t\tlength requested: 155\n\t\t\t* good: "Get ready to transform your body and boost your confidence with customized training programs and expert guidance from Stacey, your dedicated fitness trainer."\n\t\t\t* bad: "Get ready to transform your body and boost your confidence with customized training programs"\n\t</examples>\n\n\tREMEMBER: You need to match the 'ln' value of each entry as closely as possible while still following the other guidelines - length is the most important thing.\n\n\t<content>\n\t\t${n}\n\t</content>\n\t`}({siteContext:c,language:s,content:l})}function fi(e=6){return{type:"function",function:{name:"generate_dummy_posts",description:`Return the dummy posts for ${e} posts`,parameters:{type:"object",properties:{posts:{type:"array",items:{type:"object",properties:{title:{type:"string",description:"The title of the post"},content:{type:"string",description:"The content of the post"},category:{type:"string",description:"The category of the post"},image_search:{type:"string",description:"The image search of the post"}},required:["title","content","category","image_search"],additionalProperties:!1}}},required:["posts"],additionalProperties:!1},strict:!0}}}function mi(){const e=(0,g.useRegistry)(),{getBlock:t}=(0,g.useSelect)(v.store),{siteDescription:n}=tn().getSiteMetadata(),{getCachedContent:o}=(0,g.useSelect)(wt),{basicChatModel:i}=(0,g.useSelect)((e=>({basicChatModel:e(wt).getBasicChatModel()}))),{runChatCompletion:a,addCachedContent:r}=(0,g.useDispatch)(wt),{updateBlockAttributes:s}=(0,g.useDispatch)(v.store),{setBlockIsProcessing:c}=sn(),{getPatternContent:l,updateSectionContent:u}=gi();async function d({patternType:e,siteDescription:t,siteLocation:o,pageDescription:s,topic:c,conceptSection:l,reasonForSection:u,numOfSections:p,hasRetried:g=!1}){const h=nt[e].name,f=nt[e].getPrompts({conceptSection:l,siteLocation:o,siteDescription:n,pageDescription:s,numOfSections:p,topic:c});let m="";u&&(m=`The reason for this section is: ${u}, on the topic of ${c}.`);let y="";s&&(y=`The description of the page that this section appears in is: ${s}, so the content should be relevant to this.`);const b=[{role:"system",content:f.system},{role:"user",content:`The site description is: ${t}.\n\n\t\t\t\t\t${m}.\n\n\t\t\t\t\t${y}\n\n\t\t\t\t\t${f.user}`}],w=await a(i,b,null,.1,"json_object");try{let n=JSON.parse(w?.choices?.[0]?.message?.content);return["menu","events","services","testimonials","contact","footer"].includes(e)&&("object"==typeof n&&(n=Object.values(n)[0]),Array.isArray(n)||(n=[n])),n?(r({category:h,content:n}),n):(g||(K.info(`CONTENT TOOL: ${h} data invalid, retrying.`),d({patternType:e,siteDescription:t,siteLocation:o,conceptSection:l,reasonForSection:u,numOfSections:p,hasRetried:!0})),K.error(`CONTENT TOOL: ${h} data missing in response after retry, events may not be updated.`),null)}catch(n){if(!g)return d({patternType:e,siteDescription:t,siteLocation:o,conceptSection:l,reasonForSection:u,numOfSections:p,hasRetried:!0});K.error(`CONTENT TOOL: JSON parsing error for ${h} data, content may be missing.`)}return null}return{generateDummyPostContent:async function({siteDescription:e}){const t=[{role:"system",content:`You are an expert at generating blog posts based on a description of the website.\n\t\t\t\t\tGenerate 6 blog posts for this website based on this description: ${e}.\n\t\t\t\t\tThe post title should be no longer than five words.\n\t\t\t\t\tThe post content should be a paragraph of at least three sentences, but no more than five sentences. Use long descriptive sentences, as if you are writing a blog post.\n\t\t\t\t\tThe post category should be no longer than two words.\n\t\t\t\t\tThe image_search should be a short description of the image you would use for the post, no longer than three words.\n\t\t\t\t\tReturn all 6 posts in a single response.`}],n=[fi(6)];try{const e=await a(i,t,n,.1);if(!e?.choices?.[0]?.message?.tool_calls)throw new Error("Invalid response format from OpenAI");return[...e.choices[0].message.tool_calls.map((e=>"generate_dummy_posts"!==e.function.name?[]:JSON.parse(e.function.arguments).posts))].flat()}catch(e){throw K.error("[Generate Dummy Posts] Error:",e),e}},replaceContent:async function({blockClientId:p,conceptSection:g,siteDescription:h,siteLocation:f,reasonForSection:y,topic:b,pageTitle:w,sectionCategory:v,requestedSubject:k,language:_,selectedConcept:x,newPage:C,numOfSections:S,noCache:E=!1,inMemory:T=!0,startIndex:I=-1,sectionHeading:A,replaceHeading:P=!0,pageDescription:M}={}){const N=!!g,O=o();if(ot.includes(v)&&N){const e=nt[v].isCachedContentValid||at;if(O?.[v]&&e(O[v])&&!C&&!E)return nt[v].replaceContent({rootBlock:g[0],data:O[v],updateBlockAttributes:T?null:s,sectionHeading:A,replaceHeading:P,startIndex:I});O?.[v]&&!e(O[v])&&await r({category:v,content:[],clear:!0});const t=await d({patternType:v,siteDescription:h,pageDescription:M,siteLocation:f,conceptSection:g,reasonForSection:y,numOfSections:S,topic:b});return nt[v].replaceContent({rootBlock:g[0],data:t,updateBlockAttributes:T?null:s,replaceHeading:P,sectionHeading:A,startIndex:I})}if(O?.[v]&&!C)return u(g[0],{sectionCategory:v,selectedSectionContent:O[v],conceptSection:!0});if(v&&Object.keys(O).find((e=>e.includes(v)))&&!C){let e={};const t=x?x.patterns.find((e=>e.category===v)):null;return t&&(e=t.blocks[0]?l(t.blocks[0],v,{}):{}),u(g[0],{sectionCategory:v,selectedSectionContent:e,conceptSection:!0})}const{content:R,sectionData:D}=await(async({blockClientId:e,conceptSection:n,language:o})=>{const i=!!n;let a,r=[];if(n){const e=n[0];r=n,a={name:e.attributes?.metadata?.name,patternCategory:e.attributes?.metadata?.patternCategory}}else r=[t(e)];const s=xe(r).filter((e=>!pi.V.some((t=>e.example?.includes(t)))));return i||s.forEach((e=>{c(e,!0)})),{content:Ce(s,i,o),sectionData:a}})({blockClientId:p,conceptSection:g,language:_});let L;return L=async function o({chunk:l,sectionInfo:u,customSubject:d,reason:p,_pageTitle:g,_pageDescription:f,retry:y=!1}){const b=[{role:"system",content:hi({description:n||h,sectionInfo:u,reason:p,_pageTitle:g,_pageDescription:f,customSubject:d,contentChunk:{content:l.contentForRequest},language:_||St})}],w=await a(i,b,null,.1,"json_object"),v=w?.choices?.[0]?.message?.content;if(v)try{const n=JSON.parse(v);return n.content?((n,o,i,a)=>{n.filter((e=>"SPARE"===e.i)).forEach((e=>r({category:a,type:e.t,content:e.e})));const l=n.filter((e=>"SPARE"!==e.i)).map((e=>({clientId:o.clientIdMap[e.i],text:Ae(e.e),type:e.t})));return e.batch((()=>{l?.forEach((e=>{const n={};a&&r({category:a,type:e.type,content:e.text});const l=t(e.clientId);if(l&&(c(l,!0),"core/heading"===l.name||"core/paragraph"===l.name?n.content=e.text:"core/site-title"===l.name||"core/button"===l.name&&(n.text=e.text),s(e.clientId,{...n}),c(l,!1)),i){const t=o.blockMap[e.clientId];t&&("core/button"===t.name?t.attributes.text=e.text:t.attributes.content=e.text)}}))})),(0,m.__)("Replaced content.","big-sky")})(n.content,l,N,D?.patternCategory):y?(K.info("CONTENT TOOL: content missing in response, some content may not be updated."),(0,m.__)("I encountered an error while processing your request. Please try again.","big-sky")):(K.info("CONTENT TOOL: content missing in response, retrying with chunk of content."),o({chunk:l,sectionInfo:D,retry:!0}))}catch(e){return y?(K.info("CONTENT TOOL: JSON parsing error some content may be missing"),(0,m.__)("I encountered an error while processing your request. Please try again.","big-sky")):o({chunk:l,sectionInfo:D,retry:!0})}}(N||!p?{chunk:R,sectionInfo:D,customSubject:b||k,reason:y,_pageTitle:w,_pageDescription:M}:{chunk:R,customSubject:k,_pageTitle:w,_pageDescription:M}),await L},getPatternTypeContent:d,getLastAvailableContentByClassName:function(e,t){const n=Ee(e,t);return n?"string"==typeof n.attributes.content?n.attributes.content:n.attributes.content?.originalHTML:null}}}async function yi(e){try{return await E({path:`/wp/v2/posts?tags=${e}&status=private`,method:"GET"})}catch(e){K.error("Error fetching dummy posts: ",e)}}async function bi(e){if(!e)return;const t={posts:e};try{return await E({path:"/wpcom/v2/big-sky/v1/dummy-posts",method:"POST",data:t})}catch(e){return K.error("Error creating dummy posts: ",e),!1}}async function wi(){try{return await E({path:"/wp/v2/tags?search=dummy-post",method:"GET"})}catch(e){K.error("Error fetching dummy post tag: ",e)}}async function vi(){try{return await E({path:"/wp/v2/tags?name=dummy-post",method:"POST"})}catch(e){K.error("Error creating dummy post tag: ",e)}}const ki=JSON.parse('[{"header":"section-2","body":["section-2","section-default","section-default","section-1","section-default"],"footer":"section-3"},{"header":"section-default","body":["section-default","section-2","section-2","section-default","section-default"],"footer":"section-default"},{"header":"section-2","body":["section-2","section-default","section-default","section-default","section-default","section-default"],"footer":"section-3"}]'),_i=6;function xi(e){const t=[];return e.forEach((e=>{"core/image"===e.name&&e.attributes.url&&e.attributes.id&&t.push(e),t.push(...xi(e.innerBlocks))})),t}const Ci=(e,t)=>{let n=1;for(let t=0;t<e.length;t++)n=(17*n+e.charCodeAt(t))%2147483647;return n%t};function Si(){const{ITEMS_KEY:e,ITEM_KEY:t,SECTIONS_KEY:n,SECTION_KEY:o}=j,{insertBlock:i,replaceBlock:a,removeBlocks:r,updateBlockAttributes:s,__unstableMarkNextChangeAsNotPersistent:c}=(0,g.useDispatch)(v.store),{editEntityRecord:l}=(0,g.useDispatch)(Zt.store),{setBlockRemovalRules:u}=rn((0,g.useDispatch)(v.store)),{getBlocks:d,getBlockIndex:p,getBlocksByName:y,getBlockAttributes:b,getBlock:w,getSelectedBlockClientId:_}=(0,g.useSelect)(v.store),{getFirstChildBlockByName:x,getParentRootPatternBlock:C,getTemplatePartClientID:S,setMapLocationInBlocks:E,fixInvalidBlock:T}=sn(),{getBlockRemovalRules:I}=rn((0,g.useSelect)(v.store)),{generateLogoWithAI:A,getStockImageURL:P,setImagesInBlocks:M}=di(),{getRemotePatterns:N,userLocale:O,getPageTitlePatterns:R}=(0,g.useSelect)((e=>{const t=e(wt),n=t.getUserLocale();return t.getRemotePatterns(n),{getRemotePatterns:t.getRemotePatterns,userLocale:n,getPageTitlePatterns:e(wt).getPageTitlePatterns}})),{getCurrentTheme:D}=(0,g.useSelect)(Zt.store),L=jn(),B=function(){const{homePageId:e}=(0,g.useSelect)((e=>({homePageId:e(Zt.store).getEntityRecord("root","site")?.page_on_front})),[]),{currentPostId:t}=(0,g.useSelect)((e=>({currentPostId:e(h.store).getCurrentPostId()})));return(0,f.useMemo)((()=>!t&&!e||t===e),[t,e])}(),{generateDummyPostContent:$,replaceContent:U}=mi(),{updatePatternImages:H,getPatternImages:z}=gi(),{getSiteMetadata:G,setSiteMetadata:q}=tn(),{getCurrentTheme:V}=Bo(),{currentPostId:W}=(0,g.useSelect)((e=>({currentPostId:e(h.store).getCurrentPostId()}))),Y=(0,f.useCallback)((()=>{const e=y("core/post-content")[0];return d(e)}),[y,d]),J=e=>{const t=N(O);return t?.find((t=>t.ID===e))},X=(0,f.useCallback)(((e={})=>{const t=e.ids||[W],n=e.blocks||[Y()],o=e.persist||!1;if(0===n.filter((e=>e.length>0)).length)return;const i={},a=d(S("header")),r=a?.[0],s=d(S("footer")),c=s?.[0];t.forEach(((e,t)=>{const o=n[t]||[],a=[r,...o,c].filter((e=>e?.attributes?.metadata)).map((e=>({id:e.attributes?.metadata?.remotePatternId||"",category:e.attributes?.metadata?.patternCategory||"",slug:e.attributes?.metadata?.patternCategory||"",reason:e.attributes?.metadata?.reason||""})));i[e]=a}));const{patterns:l}=G(),u="object"!=typeof l||Array.isArray(l)?{}:l;Object.keys(i).forEach((e=>{const t=u[e]||[],n=i[e];i[e]=n.map((e=>{const n=t.find((t=>t.id===e.id));return n?.reason&&!e.reason?{...e,reason:n.reason}:e}))})),q({patterns:{...u,...i}},o)}),[W,d,Y,G,S,q]),Z=(0,f.useCallback)(((e,t,n=null,o=!0)=>i(e,t,n,o)),[i]),Q=(0,f.useCallback)((e=>`${D().stylesheet}//${e}`),[D]),ee=(0,f.useCallback)((async(e,t)=>{await l("postType","wp_template_part",e,{blocks:t,content:(0,k.serialize)(t)}),X()}),[l,X]),te=(0,f.useCallback)((async(e,t)=>{const n=t.attributes?.metadata?.patternCategory;if(["header","footer"].includes(n)){const e=[t];await ee(Q(n),e)}else a(e,t),X()}),[Q,ee,a,X]),ne=(0,f.useCallback)(((e,t,n,o=!0)=>{const i=I();u([]);const a=[],s=y("core/post-content")[0];let l=null;const g="replace"===n;if(g&&!t){const e=d(s).map((e=>e.clientId));r(e,o)}return e.forEach(((e,i)=>{const r=e.blocks[0];["header","footer"].includes(r.attributes?.metadata?.patternCategory)||c(),l||(l=r),g&&t?te(t,r):s?Z(r,t&&"before"===n?p(t):t?p(t)+i+1:void 0,s,o):Z(r,i,null,o),a.push(r.clientId)})),X(),u(i),a}),[c,p,I,d,y,Z,r,te,u,X]),oe=({availablePatterns:e,category:t,siteLocation:n,isAskingForMap:o=!1,isAskingForForm:i=!1,pageSlug:a})=>{const r=e?.filter((e=>e.category===t));let s=r;switch(t){case"contact":n?.name||(s=s.filter((e=>!e.html.toLowerCase().match(/is-contact-address(?!-)/)))),n?.coordinates||(s=s.filter((e=>!e.html.toLowerCase().includes("wp:jetpack/map")))),o&&(s=s.filter((e=>e.html.toLowerCase().includes("wp:jetpack/map")))),i&&(s=s.filter((e=>e.html.toLowerCase().includes("wp:jetpack/contact-form"))));break;case"footer":n?.name||(s=s.filter((e=>!e.html.toLowerCase().includes("is-footer-address"))))}return B&&!["about","contact"].includes(a)&&(s=s.filter((e=>!Object.keys(e.categories).includes("page")))),"about"===a&&(s=s.filter((e=>Object.keys(e.categories).includes("page")&&Object.keys(e.categories).includes("about")))),s.length?s:r},ie=e=>(0,k.rawHandler)({HTML:e}),ae=async({blocks:e,siteDescription:t,topic:n})=>{for(const o of e){if("core/query"===o.name){let e=null,n=await wi();if(n?.length?e=n?.[0]?.id:(n=await vi(),e=n?.id),!e)return void K.error("No Dummy Post Tag");const i=await yi(e);if(!i?.length){const e=await $({siteDescription:t}),n=e.map((async e=>{e.featured_image=await P({topic:e.image_search,aspectRatio:o.attributes?.aspectRatio,numImages:1})}));await Promise.all(n),await bi(e)}const a=Math.floor(1e5+4e5*Math.random());o.attributes.query.exclude=[a],s(o.clientId,{query:{...o.attributes.query,exclude:[a]}})}ae({blocks:o.innerBlocks,siteDescription:t,topic:n})}},re=async({pageTitle:e,section:t,siteDescription:n,pageDescription:o,topic:i,siteLocation:a,selectedConcept:r,categories:s,newPage:c=!1,noCache:l=!1,pages:u=[],excludedImageURLs:d=[]})=>Promise.all([U({conceptSection:t.blocks,sectionCategory:t.category,reasonForSection:t.reason,siteDescription:n,siteLocation:a,selectedConcept:r,topic:i,pageTitle:e,pageDescription:o,newPage:c,noCache:l}),ae({blocks:t.blocks,siteDescription:n,topic:i}),pe(t,i,r,c,d)]).then((()=>{he(t,s,u),fe(t),ge(t,a),ce(t)})),se=(e,t=[],n=!0)=>{if(!e?.length)return;let o,i=e.filter((e=>!t.includes(e.ID)));if(t?.length){const n=t[t.length-1];i=i.filter((e=>!e.disallow_after.includes(n))),o=e.filter((e=>!e.disallow_after.includes(n)))}return 0!==i.length||n?(o=i.length?i:o,o[Math.floor(Math.random()*o.length)]):void 0},ce=async e=>{const t=x(e.blocks[0],"core/cover");if(!t)return;const n=await ci(t.attributes.url),o=V()?.settings?.color?.palette?.theme,i=_o(n,o);t.attributes.customOverlayColor=n,t.attributes.isUserOverlayColor=!1,t.attributes.overlayColor=void 0,t.attributes.style={...t.attributes.style,color:{text:i?.color},elements:{heading:{color:{text:`var(--wp--preset--color--${i?.slug})`}}}}},le=(e,t,n)=>{let o=ie(e.html);if(xi(o).forEach((e=>{e.attributes.id=null})),(o.length>1||"core/group"!==o[0]?.name)&&(o=[(0,k.createBlock)("core/group",{align:"full"},o)]),o[0]?.attributes?.style?.spacing||(o[0].attributes.style={...o[0].attributes?.style,spacing:{margin:{top:"0",bottom:"0"}}}),o[0].attributes.metadata={...o[0].attributes?.metadata,name:ke.find((e=>e.slug===t))?.title,patternCategory:t,remotePatternId:e.ID},"intro"===t&&x(o[0],"core/cover"))return o;let i=o[0].attributes.className||"";return i=i.replaceAll(F,"").trim(),o[0].attributes.className=i?i+` is-style-${n}`:`is-style-${n}`,o},ue=e=>{const t=b(e);return t?.metadata?.patternCategory||t?.slug},de=e=>{const t=C(e.clientId);return ue(t?t.clientId:e.clientId)},pe=async(e,t,n,o=!1,i=[])=>{if(["team"].includes(e.category))return;if(n){var a,r;const t=_(),o=null!==(a=null!==(r=n.patterns.find((n=>n.category===e.category&&n.blocks[0].clientId===t)))&&void 0!==r?r:n.patterns.find((t=>t.category===e.category)))&&void 0!==a?a:e,s=z(o.blocks[0],[]);return H(e.blocks[0],{selectedSectionImages:s,conceptSection:!0},i)}const s={};return await M(e.blocks,t,!0,s,o,i,!0),s},ge=(e,t)=>{E(e.blocks,t)},he=async(e,t,n)=>{if("intro"!==e?.category&&"about"!==e?.category&&"header"!==e?.category)return;const o=e=>{if("core/button"===e.name)return e;if(e.innerBlocks?.length)for(const t of e.innerBlocks){const e=o(t);if(e)return e}return!1},i=o(e.blocks[0]);if(!i)return;if("header"===e?.category){const e=n?.length?n[Math.floor(Math.random()*n.length)]:null;if(!e)return;return i.attributes.url=e?.slug,void(i.attributes.text=e?.name)}const a=n?.find((t=>t.slug===e.ctaLink));return a&&"intro"===e?.category||a&&"about"===e?.category?(i.attributes.url=a.slug,void(i.attributes.text=a.name)):t.find((e=>"events"===e.slug))?(i.attributes.url="#events-section",void(i.attributes.text=(0,m.__)("Upcoming Events","big-sky"))):t.find((e=>"services"===e.slug))?(i.attributes.url="#services-section",void(i.attributes.text=(0,m.__)("Our Services","big-sky"))):(t.find((e=>"pricing"===e.slug))&&(i.attributes.url="#pricing-section",i.attributes.text=(0,m.__)("Pricing","big-sky")),void(t.find((e=>"posts"===e.slug))&&(i.attributes.url="#posts-section",i.attributes.text=(0,m.__)("Read more","big-sky"))))},fe=e=>{e.blocks[0].attributes.anchor=e.category+"-section"},me=async({templatePart:e,siteDescription:t,siteLocation:n,topic:o,templatePartBlocks:i,isQuickOnboarding:a,pages:r})=>Promise.all([U({conceptSection:i,siteDescription:t,sectionCategory:e,siteLocation:n}),"header"===e&&!a&&A({description:o})]).then((()=>{he({category:e,blocks:i},[],r)}));return(0,f.useEffect)((()=>{L&&X({persist:!0})}),[L]),{DEFAULT_NUM_CONCEPTS:_i,ITEM_KEY:t,ITEMS_KEY:e,SECTION_KEY:o,SECTIONS_KEY:n,insertPattern:Z,insertPatterns:ne,replacePattern:te,filterByCategory:oe,convertToBlocks:ie,composePatterns:({title:e,categories:t,topic:n,siteDescription:o,siteLocation:i,pageDescription:a,numberOfConcepts:r=_i,selectedConcept:s,newPage:c=!1,noCache:l=!1,isAskingForMap:u=!1,isAskingForForm:d=!1,chosenPatterns:p=[],pages:g=[],pageSlug:h})=>{const f=[];if(!t||0===t.length)return[];const m=ki[Ci(o||"style-variation-set",ki.length)],{siteLocation:y,pageTitlePatternId:b}=G(),w=s?.patterns.map((e=>e.ID))||[],v=N(O);for(let e=0;e<r;e++){f[e]=[];const n=t.length>1;let o=0;if(c){const t=R(O),n=t.find((e=>e.ID===b))||t[0];o=o>=m?.body.length?0:o;const i=m?.body[o],a=le(n,"page-title",i);o++,f[e].push({ID:n.ID,category:"page-title",blocks:a})}t.forEach((t=>{const a=p.find((e=>e.category===t.slug))?.id,r=a?v.find((e=>e.ID===a)):se(oe({availablePatterns:v,category:t.slug,siteLocation:i||y,isAskingForMap:u,isAskingForForm:d,pageSlug:h}),w,n);if(void 0!==r){o=o>=m?.body.length?0:o;const n=m?.body[o],i=le(r,t.slug,n);f[e].push({ID:r.ID,category:t.slug,reason:t.reason,ctaLink:t.ctaLink,title:r.title,blocks:i}),w.push(r.ID),o++}}))}return f.map((r=>{const u=[],d=[];for(const p of r)u.push({section:p,resolver:re({pageTitle:e,pageDescription:a,selectedConcept:s,section:p,siteDescription:o,topic:n,siteLocation:i,concept:r,categories:t,newPage:c,noCache:l,pages:g,excludedImageURLs:d})});return{id:we(),patterns:r,resolvers:u}}))},composeTemplatePartPattern:({templatePart:e,siteDescription:t,siteLocation:n,topic:o,pattern:i=null,isQuickOnboarding:a=!1,pages:r=[]})=>{if(!y("core/template-part"))return;const s=ki[Ci(t||"style-variation-set",ki.length)],c="header"===e?"header":"footer",l=N(O);"number"==typeof i&&(i=l.find((e=>e.ID===i)));const u=i||se(oe({availablePatterns:l,category:c}));if(u){const i=ie(u.html);i[0].attributes.metadata={...i[0].attributes?.metadata,name:ke.find((e=>e.slug===c))?.title,patternCategory:c,remotePatternId:u.ID};const l=s[c];let d=i[0].attributes.className||"";return d=d.replaceAll(F,"").trim(),i[0].attributes.className=d?d+` is-style-${l}`:`is-style-${l}`,{pattern:{ID:u.ID,blocks:i,category:c,title:u.title.replace(new RegExp(c+":","i"),"")+" ("+u.ID+")"},resolver:me({templatePart:e,siteDescription:t,siteLocation:n,topic:o,templatePartBlocks:i,isQuickOnboarding:a,pages:r})}}},setImagesInConcept:async(e,t)=>{const n={};for(const o of e)await M(o.blocks,t,!0,n,void 0,void 0,!0);return n},setImagesInSection:pe,getRootBlocksOfPostContent:Y,initializePattern:le,getOtherPatternsInCategory:e=>{const t=b(e);return t?.metadata&&t?.metadata?.patternCategory?N(O).filter((e=>e.category===t?.metadata?.patternCategory)):[]},getPatternCategory:ue,getParentPatternCategory:de,getPatternById:J,createConceptFromCurrentCanvas:()=>{const e=Y().map((e=>{const t=ue(e.clientId),n=J(e.attributes?.metadata?.remotePatternId);return{ID:n?.ID,category:t,title:n?.title,blocks:[e]}}));return{id:we(),patterns:e,resolvers:[]}},createConceptFromSelectedBlock:e=>{const t=e||_(),n=w(t),o=de(n),i=J(w(n.clientId).attributes?.metadata.remotePatternId),a={ID:i.ID,category:o,title:i.title,blocks:[n]};return{id:we(),patterns:[a],resolvers:[]}},createConceptFromHTML:(e,t)=>{const n=ie(e),o=T(n[0]),i={ID:we(),category:t,title:(0,m.__)("Generated Pattern","big-sky"),blocks:[o]};return{id:we(),patterns:[i],resolvers:[]}},getAvailablePatternCategories:()=>{const e=N(O),t=new Set;return e.forEach((e=>{t.add(e.category)})),Array.from(t).filter((e=>e))},getPattern:e=>["header","footer"].includes(e)?w(S(e)):Y().find((t=>ue(t.clientId)===e)),replaceTemplatePart:async(e,t)=>{const n=Q(e);await ee(n,t)},syncSiteMetadataPatterns:X,setCTAInSection:he}}function Ei(){const{saveEditedEntityRecord:e}=(0,g.useDispatch)(Zt.store),t=(0,g.useSelect)((e=>e(Zt.store).__experimentalGetDirtyEntityRecords()),[]);return(0,f.useCallback)((async()=>{for(const{kind:n,name:o,key:i}of t)await e(n,o,i)}),[t,e])}const Ti=async()=>await E({path:"/wp/v2/pages?per_page=-1&status=publish,future,draft,pending,private",method:"GET"}),{useHistory:Ii}=rn(xn.privateApis),Ai=[];function Pi(){const{pages:e,homePageId:t}=(0,g.useSelect)((e=>({pages:e(Zt.store).getEntityRecords("postType","page",{per_page:-1,status:"publish,future,draft,pending,private"})||Ai,homePageId:e(Zt.store).getEntityRecord("root","site")?.page_on_front})),[]),n=A(),o=(0,g.useRegistry)(),{saveEntityRecord:i,deleteEntityRecord:a,editEntityRecord:r}=(0,g.useDispatch)(Zt.store),{close:s}=(0,g.useDispatch)(bn.store),{postId:c,previousPostId:l}=Sn(),{deleteMarkedMessages:u}=Jt(),{isThinking:d}=En(),{getBlocksByName:p}=(0,g.useSelect)(v.store),{setBlockEditingMode:h}=(0,g.useDispatch)(v.store),{getGlobalNavigation:y,renameNavigationItemById:b}=function(){const e=(0,g.useRegistry)(),{saveEntityRecord:t}=(0,g.useDispatch)(Zt.store),n=(0,f.useCallback)((async()=>{const{navigationId:t}=e.select(wt).getSiteMetadata();return t?await e.resolveSelect(Zt.store).getEditedEntityRecord("postType","wp_navigation",t):null}),[e]),o=(0,f.useCallback)((async(n,o,i)=>{if(n)try{var a;const r=await e.resolveSelect(Zt.store).getEditedEntityRecord("postType","wp_navigation",n);if(!r)return;const s=null!==(a=r.blocks)&&void 0!==a?a:(0,k.parse)(r.content),c=e=>i(e)?{...e,attributes:{...e.attributes,label:o}}:e.innerBlocks?.length?{...e,innerBlocks:e.innerBlocks.map(c)}:e;return await t("postType","wp_navigation",{id:n,blocks:s.map(c),content:(0,k.serialize)(s.map(c))},{throwOnError:!0})}catch(e){throw K.error("[Navigation] Error updating navigation:",e),e}}),[e,t]);return{getGlobalNavigation:n,renameNavigationItemById:(0,f.useCallback)((async(e,t,n,i)=>{if(t)return o(e,n,(e=>e.attributes.id===t&&(!i||e.attributes.label===i)))}),[o]),renameNavigationItemByLabel:(0,f.useCallback)((async(e,t,n)=>{if(t)return o(e,n,(e=>e.attributes.label===t))}),[o])}}(),w=(0,f.useCallback)((async()=>{const e=await Ti();if(!e)return;const n=e.filter((e=>e.id!==t&&e.meta?.big_sky_generated)).map((e=>a("postType","page",e.id,{force:!0})));await Promise.all(n)}),[t,a]),_=Ii(),{addPatternsToCanvas:x}=cn(),{composePatterns:C,syncSiteMetadataPatterns:S}=Si(),E=Ei(),T=async({postId:e,postType:t})=>{if("post"===n.screen)window.location.href=`/wp-admin/post.php?post=${e}&action=edit`;else{const o=`/${t}/${e}`;"site-editor"===n.screen?(await _.navigate(o+"?canvas=edit"),await s()):window.location.href=`/wp-admin/site-editor.php?p=${encodeURIComponent(o)}&canvas=edit`}},I=(0,f.useCallback)((()=>(e||[]).filter((e=>""!==e.title.rendered.trim())).map((e=>({id:e.id,slug:e.slug,title:e.title.rendered,status:e.status,isHomePage:e.id===t,isCurrentPage:e.id===n.postId})))),[e,t,n]),P=(0,f.useCallback)((async(e,{force:t=!0}={})=>{let n=!0;try{await a("postType","page",e,{force:t});const s=await y(),c=s?.id;if(c){const t=await o.resolveSelect(Zt.store).getEditedEntityRecord("postType","wp_navigation",c);if(t){var i;const o=null!==(i=t.blocks)&&void 0!==i?i:(0,k.parse)(t.content);try{const t=o.filter((t=>t.attributes.id!==e));await r("postType","wp_navigation",c,{id:c,blocks:t,content:(0,k.serialize)(t)})}catch(e){K.error(e),n=!1}}}return{success:!0,navigationUpdateSuccess:n}}catch(e){return K.error(e),e}}),[y,o,r,a]),M=(0,f.useCallback)((async e=>P(e,{force:!1})),[P]),N=(0,f.useCallback)((()=>{_.back()}),[_]);(0,f.useEffect)((()=>{if(l){if(c!==l){const e=p("core/post-content");h(e?.[0]?.clientId,"default")}c===l||d||u()}}),[c,u,l,d,p,h]);const O=(0,f.useCallback)((async(e,t)=>{try{let n;const o=await i("postType","page",{id:e,title:t}),a=await y();return a?.id&&(n=await b(a.id,e,t)),{success:!0,pageId:e,newTitle:t,updatedPage:o,updatedNavigation:n}}catch(e){return K.error(e),{success:!1,error:e}}}),[i,y,b]);return{createPage:async({title:e,categories:t,topic:n,siteDescription:a,siteLocation:s,loadInEditor:c=!1,menuOrder:l=1,existingPageId:u=null,pageDescription:d=null,slug:p=null,navigationId:g=null})=>{try{if(c){const{canvasiFrameBody:o}=Xt();o.classList.add("big-sky__is-creating-page");const r=await i("postType","page",{status:"publish",title:e,slug:p||e||(0,m.__)("No title","big-sky")},{throwOnError:!0});await T({postId:r.id,postType:r.type}),await ut(3e3);const c=C({title:e,categories:t,topic:n,siteDescription:a,siteLocation:s,numberOfConcepts:1,newPage:!0,noCache:!0,pageSlug:p}),l=c[0].patterns.map(((e,t)=>({pattern:e,resolver:c[0].resolvers[t].resolver})));return o.classList.remove("big-sky__is-creating-page"),await x(l,!1),r}const f=C({title:e,categories:t,topic:n,siteDescription:a,siteLocation:s,numberOfConcepts:1,newPage:!0,noCache:!0,pageDescription:d,pageSlug:p,isAskingForForm:"contact"===p}),y=f[0].resolvers.map((e=>e.resolver)).flat();await Promise.all(y);const b=f[0].patterns.map((e=>e.blocks)).flat(),w={status:"publish",title:e,content:(0,k.serialize)(b),slug:p||e||(0,m.__)("No title","big-sky"),menu_order:l,meta:{big_sky_generated:!0}};u&&(w.id=u);const v=await i("postType","page",w,{throwOnError:!0});if(g){var h;const e=await o.resolveSelect(Zt.store).getEditedEntityRecord("postType","wp_navigation",g),t=null!==(h=e.blocks)&&void 0!==h?h:(0,k.parse)(e.content);e&&await r("postType","wp_navigation",g,{blocks:[...t,(0,k.createBlock)("core/navigation-link",{label:v.title.rendered,type:"page",id:v.id,url:v.link,kind:"post-type"})],content:e=>{var t;return(0,k.serialize)(null!==(t=e.blocks)&&void 0!==t?t:[])}})}return{newPage:v,rootBlocks:b}}catch(e){K.error(e)}},deletePage:P,deleteAllBigSkyPagesExceptHome:w,getPages:I,goToPage:T,saveAndGoToPage:async e=>{S({ids:[n.postId],persist:!0}),await E(),await T({postId:e,postType:"page"})},goBackPage:N,homePageId:t,renamePage:O,trashPage:M}}function Mi(){const{getLastEditorState:e,getEditedEntityRecord:t}=(0,g.useSelect)((e=>{const t=e(wt),n=e(Zt.store);return{getLastEditorState:t.getLastEditorState,getEditedEntityRecord:n.getEditedEntityRecord}})),{getCurrentTheme:n,setStyles:o}=Bo(),{modifyGeneratedVariation:i,setLastEditorState:a}=(0,g.useDispatch)(wt),{replaceInnerBlocks:r}=(0,g.useDispatch)(v.store),{editEntityRecord:s,saveEntityRecord:c}=(0,g.useDispatch)(Zt.store),{undo:l}=(0,g.useDispatch)(h.store),{getRootBlocksState:u,getSectionRootClientId:d}=sn(),{getCurrentColor:p,getCurrentFont:m}=(0,g.useSelect)(wt),{currentColor:y,currentFont:b,siteLocation:w}=tn().getSiteMetadata(),{replaceTemplatePart:k}=Si(),{setSiteLocation:_}=tn(),{deletePage:x,renamePage:C}=Pi(),{getColorVariationByTitle:S}=wo(),{updateMapMarker:E}=kn(),T=(0,f.useCallback)((()=>{const e=t("root","site",void 0),o=p()||y,i=JSON.parse(JSON.stringify(S(o)||n()));a({blocks:u(),color:{name:o,theme:i},font:m()||b,siteLocation:w,siteLogo:e.site_logo})}),[t,p,y,S,n,a,u,m,b,w]),I=(0,f.useCallback)((t=>{t||(t=[]);const n=e();a({...n,checkpointKeys:[...new Set([...n?.checkpointKeys||[],...t])]})}),[e,a]),A=(0,f.useCallback)((t=>{const n=e();a({...n,newPageId:t})}),[e,a]),P=(0,f.useCallback)(((t,n,o)=>{const i=e();a({...i,pageRename:{pageId:t,oldTitle:n,newTitle:o}})}),[e,a]),M=(0,f.useCallback)(((t,n,{shouldRestoreNavigation:o=!1}={})=>{const i=e();a({...i,pageRemoval:{pageId:t,pageTitle:n,shouldRestoreNavigation:o}})}),[e,a]),N=(0,f.useCallback)((()=>{const t=e();if(t){if(t.checkpointKeys.includes($.COLOR)||t.checkpointKeys.includes($.FONT)){const e={};t.checkpointKeys.includes($.COLOR)&&(i(t.color.name,t.color.theme),e.color=t.color.name),t.checkpointKeys.includes($.FONT)&&(e.font=t.font),o(e)}if(t.checkpointKeys.includes($.BLOCKS)&&(k("header",t?.blocks?.headerBlocks),k("footer",t?.blocks?.footerBlocks),r(d(),t?.blocks?.contentBlocks)),t.checkpointKeys.includes($.LOCATION)&&(_(t.siteLocation),E({address:t.siteLocation.name,coordinates:t.siteLocation.coordinates,isUndo:!0})),t.checkpointKeys.includes($.LOGO)&&s("root","site",void 0,{site_logo:t.siteLogo}),t.checkpointKeys.includes($.PAGE)){if(t.newPageId&&x(t.newPageId),t.pageRename){const{pageId:e,oldTitle:n}=t.pageRename;C(e,n)}if(t.pageRemoval){const{pageId:e,shouldRestoreNavigation:n}=t.pageRemoval;c("postType","page",{id:e,status:"publish"}),n&&l()}}}}),[e,o,i,k,d,r,_,E,s,x,C,c,l]);return{getLastEditorState:e,setCheckpoint:T,addCheckpointKeys:I,restoreCheckpoint:N,addNewPageToCheckpoint:A,addPageRenameToCheckpoint:P,addPageRemovalToCheckpoint:M}}function Ni({onAfterUndo:e=()=>{},id:t}){const[n,o]=(0,f.useState)(!1),[i,a]=(0,f.useState)(null),{zoomIn:r,zoomOut:c}=cn(),{setBlockBeforeChanges:l,setCurrentToolCall:u,setChatComponents:d,incrementFocusInput:p}=(0,g.useDispatch)(wt),{getLastEditorState:b,restoreCheckpoint:w}=Mi(),{logResponseAction:k}=pn(),{close:_}=(0,g.useDispatch)(bn.store),{assistantSay:x}=Jt(),{isInMosaicView:C}=(0,g.useSelect)((e=>({isInMosaicView:e(bn.store).isOpen()&&"page"===e(h.store).getCurrentPostType()}))),{lastUserMessageId:S,sessionId:T}=(0,g.useSelect)((e=>{const t=[...e(wt).getMessages()].reverse().find((e=>"user"===e.role));return{lastUserMessageId:t?.id,sessionId:e(wt).getSessionId()}}),[]),I=(0,g.useSelect)((e=>rn(e(v.store)).getZoomLevel()),[]),A=(0,f.useCallback)((()=>{r(),u(""),l(null),d([])}),[r,u,l,d]),P=(0,f.useCallback)((async()=>{Fn("undo_action",{user_message_id:S}),k("Undo",S);try{await w();try{await Promise.resolve(e())}catch(e){K.error("onAfterUndo callback failed:",e)}await x((0,m.__)("Ok, I've undone that.","big-sky"))}catch(e){K.error("Failed to restore checkpoint:",e),x((0,m.__)("Sorry, I wasn't able to undo that.","big-sky"))}finally{A(),p()}}),[S,k,w,A,p,e,x]);(0,f.useEffect)((()=>{o(I<1)}),[]);const M=I<1,N=(0,f.useCallback)((e=>{Fn(`response_action_thumbs_${e}`,{user_message_id:S}),E({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(T)+"/rate",method:"POST",data:{message_id:t,rating:e}}),a(e)}),[t,S,T]),O=(0,f.useMemo)((()=>{const e=b();return e?.checkpointKeys?.length>0}),[b]);return(0,s.createElement)("div",{className:"big-sky__completed-plan"},O&&(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Undo","big-sky")},(0,s.createElement)("span",null,(0,s.createElement)(y.Icon,{icon:hn,onClick:P}))),(0,s.createElement)(y.Tooltip,{text:(0,m.__)("This was helpful!","big-sky")},(0,s.createElement)("span",null,(0,s.createElement)(y.Icon,{icon:fn,onClick:()=>!i&&N("up"),style:{cursor:i?"default":"pointer",opacity:i&&"up"!==i?.5:1,fill:"up"===i?"#00a32a":void 0,transition:"fill 0.2s ease"},className:"big-sky__feedback-icon big-sky__feedback-icon--up"}))),(0,s.createElement)(y.Tooltip,{text:(0,m.__)("This was not helpful","big-sky")},(0,s.createElement)("span",null,(0,s.createElement)(y.Icon,{icon:mn,onClick:()=>!i&&N("down"),style:{cursor:i?"default":"pointer",opacity:i&&"down"!==i?.5:1,fill:"down"===i?"#cc1818":void 0,transition:"fill 0.2s ease"},className:"big-sky__feedback-icon big-sky__feedback-icon--down"}))),n&&(0,s.createElement)(y.Tooltip,{text:M?(0,m.__)("Zoom in","big-sky"):(0,m.__)("Zoom out","big-sky")},(0,s.createElement)("span",null,(0,s.createElement)(y.Icon,{icon:yn,onClick:()=>{M?(C&&_(),r()):c()},className:gn("big-sky__zoom-icon",{"is-zoomed-out":M})}))))}function Oi(e){return{key:e.key||e.actionName||e,actionName:e.actionName||e,description:e.description||"",type:e.type}}function Ri({logUserChoice:e,clearSuggestions:t,setHasRetried:n,respond:o,userSay:i,action:a,shouldClear:r=!0}){return()=>{const s=a?.message?a.message:a.actionName&&a.description?`${a.actionName} - ${a.description}`:a.description||a.actionName||a;e(s),n(!1),r&&t(),o?o(s):i(s)}}function Di(){const{clearSuggestions:e,setHasRetriedChatRequest:t}=(0,g.useDispatch)(wt),{logUserChoice:n}=pn();return{clearSuggestions:e,setHasRetriedChatRequest:t,logUserChoice:n}}const Li=({actions:e,animationVariants:t={},showSpotlight:n=!1})=>{const o=(0,f.useRef)(),[i,a]=(0,f.useState)({x:0,y:0}),[r,c]=(0,f.useState)({});let l,u,d=!1;const{isOnboarded:p}=tn().getSiteMetadata(),g=(0,f.useCallback)((()=>{e.forEach((e=>{const t=document.querySelector(`[data-action-key="${e.key}"]`);if(t){const n=t.getBoundingClientRect();c((t=>({...t,[e.key]:n})))}}))}),[e]);(0,f.useEffect)((()=>{const e=e=>{a({x:e.clientX,y:e.clientY}),g()},t=()=>{g()};return window.addEventListener("mousemove",e),window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("scroll",t,!0)}}),[e,g]);const h=e=>{if(!e)return"none";const t=Math.sqrt(Math.pow(i.x-(e.left+e.width/2),2)+Math.pow(i.y-(e.top+e.height/2),2));if(t>300)return"none";const n=Math.max(0,.5*(1-t/300)),o=i.x-e.left,a=i.y-e.top;return m?`radial-gradient(circle at ${o}px ${a}px,\n\t\t\t\trgba(147,112,219,${.7*n}) 0%,\n\t\t\t\trgba(147,112,219,${.5*n}) 30%,\n\t\t\t\trgba(147,112,219,0) 80%)`:`radial-gradient(circle at ${o}px ${a}px,\n\t\t\t\trgba(255,255,255,${.6*n}) 0%,\n\t\t\t\trgba(255,255,255,${.4*n}) 30%,\n\t\t\t\trgba(255,255,255,0) 80%)`},m=e.some((e=>"string"==typeof e?.type&&e.type?.startsWith("confirmation")||e.actionName===N));return(0,s.createElement)("div",{"data-testid":"chat-actions",className:gn("big-sky__chat-actions",{"has-confirmation-actions":m})},(0,s.createElement)("div",{className:gn("big-sky__chat-actions__carousel",{draggable:e.length>1}),ref:o,role:"region",tabIndex:0,...e.length>1&&{onPointerDown:e=>{d=!0,o.current.classList.add("active"),l=e.pageX-o.current.offsetLeft,u=o.current.scrollLeft},onPointerLeave:()=>{d=!1,o.current.classList.remove("active")},onPointerUp:()=>{d=!1,o.current.classList.remove("active")},onPointerMove:e=>{if(!d)return;e.preventDefault();const t=2*(e.pageX-o.current.offsetLeft-l);o.current.scrollLeft=u-t,g()}}},e.map(((e,o)=>(0,s.createElement)(y.__unstableMotion.button,{initial:t.initial||{},animate:t.animate||{},exit:t.exit||{},transition:{...t.transition||{},delay:o*(t.transition?.delay||0)},key:e.key,"data-action-key":e.key,style:{...(n||m&&!p)&&{backgroundImage:h(r[e.key])},position:"relative",overflow:"hidden"},onClick:t=>{"suggested"===e.action_type?Fn("chat_suggestion_click",{action_key:e.key}):(Fn("chat_action_click",{action_key:e.key}),t.target.closest(".big-sky__chat-actions__carousel__item").disabled=!0),e.onClick()},className:gn("big-sky__chat-actions__carousel__item",{"confirmation-action":"confirmation"===e.type,"confirmation-action-destructive":"confirmationDestructive"===e.type}),title:`${e.actionName} ${e.description}`},(0,s.createElement)("h5",null,e.actionName),e.description&&(0,s.createElement)("p",null,e.description))))))};function Bi({actions:e=[],animationVariants:t={},showSpotlight:n=!1}){return e?.length?(0,s.createElement)(Li,{key:e[0]?.key,actions:e,animationVariants:t,showSpotlight:n}):null}function Fi({args:e,respond:t}){const{suggestions:n}=(0,g.useSelect)((e=>({suggestions:e(wt).getSuggestions()}))),{clearSuggestions:o,setHasRetriedChatRequest:i,logUserChoice:a}=Di(),{assistantSay:r,userSay:c}=Jt(),{isThinking:l=!1}=En()||{},u=e||n;if((0,f.useEffect)((()=>{(e?.message||u?.message)&&r(u.message)}),[r,u,e]),l||!u?.actions||0===u.actions.length)return null;const d=u.actions.map((n=>{const r=Oi(n);return{...r,onClick:n.onClick||Ri({logUserChoice:a,clearSuggestions:o,setHasRetried:i,respond:t,userSay:c,action:r,shouldClear:!e})}}));return(0,s.createElement)(Bi,{key:d.map((e=>e.key)).join("-"),actions:d,animationVariants:{initial:{opacity:0,y:0},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{ease:[.42,.24,.02,1],duration:1,delay:.05}}})}const ji={id:b.PLANNER,description:"An assistant that breaks down complex tasks into a series of steps that can be executed by specialized assistants.",instructions:e=>(e=>{const t=`You are a planning assistant for a website builder platform.\nYour role is to break down user requests into a series of steps that can be executed by specialized assistants.\nThese assistants are meant to be invisible to the user, so you should not mention them in your responses.\n\n${Pt}\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n<current_plan_context>\n${(e=>{var t,n;return e?.currentPlan?`\n<original_request>\n${null!==(t=e.currentPlan.originalRequest)&&void 0!==t?t:"No original request"}\n</original_request>\n\n<steps_context>\n${n=e.currentPlan.steps,n?n.map(((e,t)=>`\n- Step ${t+1}:\n  - Request: ${e.request}\n  - Fulfilled: ${!!e.fulfilled}`)).join("\n"):"No steps"}\n</steps_context>\n`:"No current plan"})(e)}\n</current_plan_context>\n\n<page_structure>\n${(()=>{const{summary:e}=xt();if(!e)return"No page structure information available";const t=`Here is the page structure skeleton. Do not reference the ID of the selected block in your response to the user\n\n${e}`;return t.length>2e3?`This page has a complex structure. Below is a summary with focus on the selected block's context:\n\n${t}`:t})()}\n</page_structure>\n\n<current_page_context>\n${(e=>e?.currentPage?`\n\t\t\tTitle: ${e.currentPage.title}\n\t\t\tid: ${e.currentPage.id}`:"No current page")(e)}\n</current_page_context>\n\nHere are the available assistants and their capabilities:\n\n<all_assistants>\n${At}\n</all_assistants>\n\nHere is the language you should use for the progress messages unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions for Planning:\n\n1. Construct a plan with steps to handle the request.\n\t- If the request is to add a new block (for example, an image or a paragraph), create a new plan with a single step to call the blocks assistant. The single step should include an colors specified. The targeted block is the clientId of the highest level block that fulfills the request.\n\t- If the request is to edit blocks:\n\t  - If the request contains one or more remove requests and one or more add/edit requests, create a multi-step plan with each step calling the blocks assistant. The targeted block for each step is the clientId of the highest level block that fulfills the request.\n\t  - If the request contains only one type of request, create a new plan with a single step to call the blocks assistant. The targeted block is the clientId of the highest level block that fulfills the request.\n\t- If the request is to add a new page, create a new plan with a single step to call the page assistant\n\t- If the request is to start over, create a new plan with a single step to call the site admin assistant\n2. For each step:\n\t- Construct a request for the assistant that is clear and concise, and includes all necessary information for the assistant to complete the task.\n\t- Construct a progress message that is a very brief message (AT MOST 2-3 words) about what this step is doing. Be concise and do not include lengthy details from the request. Do not include any closing punctuation.\n\t- If the request refers to something as "this", use the selected block context and page structure to determine what kind of block the request is referring to. Pay special attention to the SELECTED BLOCK CONTEXT section in the page structure, which shows the path and siblings of the selected block.\n\t- If a request is targeting a block and you are not sure which one ALWAYS assume it is the selected block and use the [SELECTED BLOCK] clientId from the page structure context.\n\t- If the request is describing something on the page to update, change, or generate, use the page structure to determine the location of the block.\n\t- If the request is asking to add a pattern at a specific location, use the page structure to determine the location of the block to add the pattern to. If the location is not specified, use the selected block context to determine the location of the block to add the pattern to.\n3. If there is a current plan:\n\t- If the user has requested something that is not in the plan, create a new plan with the new step with "isNewPlan" set to true\n\t- If the user has requested a change to one of the step or has provided clarifying information, modify the step accordingly and move it to the beginning of the plan with "isNewPlan" set to false\n4. If there is no current plan, set "isNewPlan" to true\n\nExamples:\n\nRequest:\n"I want to update the color of the Learn More button to blue and make the font more modern"\nResponse:\n"message": {\n\t"role": "assistant",\n\t"content": null,\n\t"tool_calls": [\n\t\t{\n\t\t\t"id": "call_id",\n\t\t\t"type": "function",\n\t\t\t"function": {\n\t\t\t\t"name": "execute_plan",\n\t\t\t\t"arguments": "{"steps":[{"assistantId":"big-sky-color","request":"Update the color of the Learn More button to blue","fulfilled":false},{"assistantId":"big-sky-font","request":"Make the font more modern","fulfilled":false}],"originalRequest":"I want to update the color of the Learn More button to blue and make the font more modern","isNewPlan":true}"\n\t\t\t}\n\t\t}\n\t],\n}\n\nRequest:\n"bold the review paragraphs, italicize the testimonial generated by AI text, make all reviews 5 stars except the second one, make that 3 stars"\nResponse:\n"message": {\n\t"role": "assistant",\n\t"content": null,\n\t"tool_calls": [\n\t\t{\n\t\t\t"id": "call_id",\n\t\t\t"type": "function",\n\t\t\t"function": {\n\t\t\t\t"name": "execute_plan",\n\t\t\t\t"arguments": "{"steps":[{"assistantId":"big-sky-blocks","request":"bold the review paragraphs, italicize the testimonial generated by AI text, make all reviews 5 stars except the second one, make that 3 stars","clientId":"abcd","fulfilled":false}],"originalRequest":"bold the review paragraphs, italicize the testimonial generated by AI text, make all reviews 5 stars except the second one, make that 3 stars","isNewPlan":true}"\n\t\t\t}\n\t\t}\n\t],\n}\n\nRequest:\n"add a new image of a cat"\nResponse:\n"message": {\n\t"role": "assistant",\n\t"content": null,\n\t"tool_calls": [\n\t\t{\n\t\t\t"id": "call_id",\n\t\t\t"type": "function",\n\t\t\t"function": {\n\t\t\t\t"name": "execute_plan",\n\t\t\t\t"arguments": "{"steps":[{"assistantId":"big-sky-blocks","request":"add a new image of a cat","clientId":"abcd","fulfilled":false}],"originalRequest":"add a new image of a cat","isNewPlan":true}"\n\t\t\t}\n\t\t}\n\t],\n}\n\nRequest:\n"add a new button that is red and has the text Order Now"\nResponse:\n"message": {\n\t"role": "assistant",\n\t"content": null,\n\t"tool_calls": [\n\t\t{\n\t\t\t"id": "call_id",\n\t\t\t"type": "function",\n\t\t\t"function": {\n\t\t\t\t"name": "execute_plan",\n\t\t\t\t"arguments": "{"steps":[{"assistantId":"big-sky-blocks","request":"add a new red button with text Order Now","clientId":"abcd","fulfilled":false}],"originalRequest":"add a new button that is red and has the text Order Now","isNewPlan":true}"\n\t\t\t}\n\t\t}\n\t],\n}\n\nRequest:\n"remove the image and add a two column layout with each column having an image and a paragraph"\nResponse:\n"message": {\n\t"role": "assistant",\n\t"content": null,\n\t"tool_calls": [\n\t\t{\n\t\t\t"id": "call_id",\n\t\t\t"type": "function",\n\t\t\t"function": {\n\t\t\t\t"name": "execute_plan",\n\t\t\t\t"arguments": "{"steps":[{"assistantId":"big-sky-blocks","request":"remove the image","clientId":"abcd","fulfilled":false},{"assistantId":"big-sky-blocks","request":"add a two column layout with each column having an image and a paragraph","clientId":"abcd","fulfilled":false}],"originalRequest":"remove the image and add a two column layout with each column having an image and a paragraph","isNewPlan":true}"\n\t\t\t}\n\t\t}\n\t],\n}\n\nRequest:\n"change this image to a mountain landscape"\nResponse:\n"message": {\n\t"role": "assistant",\n\t"content": null,\n\t"tool_calls": [\n\t\t{\n\t\t\t"id": "call_id",\n\t\t\t"type": "function",\n\t\t\t"function": {\n\t\t\t\t"name": "execute_plan",\n\t\t\t\t"arguments": "{"steps":[{"assistantId":"big-sky-image","request":"change this image to a mountain landscape","clientId":"abcd","fulfilled":false}],"originalRequest":"change this image to a mountain landscape","isNewPlan":true}"\n\t\t\t}\n\t\t}\n\t],\n}\n\nImportant Guidelines:\n- If you think you need to call an assistant, do it immediately without any other response to the user.\n- If a request cannot be handled by an assistant, create a single step plan to call the help assistant with the execute_plan tool WITHOUT announcing it to the user.\n- If a request is outside the scope of your assistant's capabilities, create a single step plan to call the help assistant with the execute_plan tool WITHOUT announcing it to the user.\n- If the user has requested a change to a specific page, eg. "Show new layouts for contacts page", and that is not the current page always call the page assistant to navigate to the requested page as the first step in the plan\n- Keep plans simple and focused\n- Only include steps that can be handled by an assistant\n- Make sure each step's input includes all necessary information\n- Validate each step before creating the plan by confirming the assistant ID is valid\n- Each step should have a clear, focused purpose\n- Never include the help assistant in multi-step plans\n- If a request refers to "this" or "selected", use the selected block type and surrounding page structure to determine what kind of block the request is referring to. Pay special attention to the SELECTED BLOCK in the page structure, which also shows the path and siblings of the selected block.\n- ALWAYS set message content to null when calling the execute_plan tool\n- NEVER communicate the plan as a message to the user. If you have a plan, you MUST call the execute_plan tool.\n- ${Et}\n- ALWAYS take the targeted block clientId from the page_structure context.\n- If the step is targeting a block, its clientId must match exactly a clientId from the page_structure context.\n- NEVER take the targeted block clientId from previous tool call messages.\n- After creating a plan, always call the execute_plan tool\n\nWhen you receive a request:\n1. If the request is unclear or too complex, create a single step plan to call the help assistant and use the execute_plan tool WITHOUT announcing it to the user\n2. Always call the execute_plan tool to execute the plan if you have created one\n3. Only respond directly to the user if the request is a general question that doesn't require any assistant actions`;return t})(e),tags:[b.PLANNER],toolkits:[Mt],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t,registerContext:n,setAwaitingUserInput:o,setPendingPlan:i}=(0,g.useDispatch)(wt),{getSiteMetadata:a}=tn(),{getPages:r}=Pi();!function(){const{executeStep:e}=function(){const{zoomIn:e}=cn(),{runChatCompletion:t}=(0,g.useDispatch)(wt),{addThinkingMessage:n}=Jt(),{scrollToBlock:o}=sn(),{logToolCall:i}=pn(),{chatModel:a,getContexts:r,getCallbacks:s}=(0,g.useSelect)((e=>({chatModel:e(wt).getAdvancedChatModel(),getAssistant:e(wt).getAssistant,getContexts:e(wt).getContexts,getCallbacks:e(wt).getCallbacks}))),c=e=>r()[e],l=(0,f.useCallback)((async(e,t,n,o)=>{const i=s();if(i[e]&&i[e][t])return await i[e][t]({...n,__original_request:o});throw new Error(`Callback ${t} not found`)}),[s]);return{executeStep:async r=>{const{assistantId:s,request:u,clientId:d,userConfirmed:p}=r;d&&(await e(),o(d,"start",!1,50));const g=(e=>{const t=Lt(e);return"function"==typeof t.instructions?t.instructions(c(e)):t.instructions})(s),h=[{role:"system",content:g},{role:"user",content:u}];p&&h.push({role:"system",content:"User has confirmed"});const f=(e=>{const t=Lt(e),n=t?.toolkits[0];if(!n)throw new Error("Toolkit not found");const o=("function"==typeof n?.tools?n.tools(c(e)):n.tools).map((e=>(e.parameters&&void 0!==e.strict&&(e.parameters.additionalProperties=!e.strict),{type:"function",function:e})));return o})(s),m=await t(a,h,f),y=m?.choices?.[0]?.message?.tool_calls;if(!y||0===y.length){const e=m?.choices?.[0]?.message?.content;return e||void K.error("No text or tool call response from AI.")}for(const[e,t]of y.entries()){const o=t.function.arguments;try{const a=JSON.parse(o);r.progressMessage&&n(r.assistantId,r.progressMessage),d&&(a.clientId=d),i(t.function);const c=await l(s,t.function.name,a,u);if(e===y.length-1)return c}catch(e){K.error(`Error running callback for ${t.function.name}: ${e.message}`)}}}}}(),{addThinkingMessage:t,assistantSay:n,deleteMarkedMessages:o,setPlanRunning:i,addAssistantMessage:a}=Jt(),{withPendingToolCallback:r}=Ot(),{isPostEditor:c}=Sn(),{setPendingPlan:l,setAwaitingUserInput:u,addMessageToDelete:d,setChatComponents:p}=(0,g.useDispatch)(wt),{pendingPlan:h,awaitingUserInput:b,isEditorIframeLoaded:w}=(0,g.useSelect)((e=>({pendingPlan:e(wt).getPendingPlan(),awaitingUserInput:e(wt).getAwaitingUserInput(),isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded()}))),{setCheckpoint:v,addCheckpointKeys:k}=Mi(),_=(0,f.useCallback)((()=>{l(null),u(!1),i(!1)}),[l,u,i]),x=(0,f.useCallback)(((e,t)=>{t<e.steps.length-1&&(u(!1),l({...e,steps:e.steps.map(((e,n)=>n===t?{...e,fulfilled:!0}:e)),isNewPlan:!1})),p([]),o()}),[u,l,p,o]),C=(0,f.useCallback)(((e,t)=>(0,s.createElement)(y.Button,{className:"big-sky-next-step-button",isPrimary:!0,onClick:()=>{x(e,t)}},"Move to Next Step")),[x]),S=(0,f.useCallback)(((e,t)=>{p([C(e,t)])}),[C,p]),E=(0,f.useCallback)((async(e,t)=>{_();const i=[];e&&i.unshift((0,s.createElement)(Fi,{key:"suggestions",args:e})),i.length>0&&p(i);const a=await n((0,s.createElement)(Ni,{key:"completed-plan",onAfterUndo:o,id:t}),{role:M.RESPONSE_ACTIONS});d({id:a?.message?.id})}),[_,n,o,d,p]),T=(0,f.useCallback)((async s=>{i(!0);let{steps:c}=s;(s.isNewPlan&&!s.steps.some((e=>e.fulfilled))||s.forceNewCheckpoint)&&v();const p=c.findIndex((e=>!e.fulfilled));if(-1===p)return void await E([],s.__original_id);const g=c.filter((e=>!e.fulfilled)).length>=2;try{t(c[p].assistantId);const h=await r((async()=>await e(c[p])))(c[p]);if(o(),"string"==typeof h)return a(c[p].assistantId,h),void i(!1);if("object"==typeof h&&h.awaitingUserInput){if(u(!0),k(h.checkpointKeys),h.message&&a(c[p].assistantId,h.message),h.component){const e=await n(h.component);d({id:e?.message?.id})}return h.unfulfilled||(c=c.map(((e,t)=>t===p?{...e,fulfilled:!0}:e)),l({...s,steps:c}),g?S(s,p):await E(h?.suggestions,s.__original_id)),void i(!1)}h?.message&&a(c[p].assistantId,h.message),k(h?.checkpointKeys),l({...s,steps:c.map(((e,t)=>t===p?{...e,fulfilled:!0}:e)),forceNewCheckpoint:!!h?.forceNewCheckpoint}),g||await E(h?.suggestions,s.__original_id),await ut(1e3)}catch(e){console.error("Error executing step:",e),n((0,m.__)("There was an error executing the plan. Please try again.","big-sky"))}}),[l,u,n,r,i,_]);(0,f.useEffect)((()=>{h&&!b&&(w||c)&&T(h)}),[b,T,h,r,w,c])}();const c=r().find((e=>e.isCurrentPage)),{getFullPageStructure:l,pendingPlan:u}=(0,g.useSelect)((e=>({getFullPageStructure:e(wt).getFullPageStructure,pendingPlan:e(wt).getPendingPlan()})));(0,f.useEffect)((()=>{t(b.PLANNER,{execute_plan:e({name:"execute_plan",action:async e=>{const{clientIdMap:t}=l();e.steps=e.steps.map((e=>({...e,clientId:t[e.clientId]}))),o(!1),i(e)},closeChatWhenDone:()=>!1})})}),[t]),(0,f.useEffect)((()=>{const e=a(),t={currentPlan:u,site:{siteTitle:e.siteTitle,siteDescription:e.siteDescription,siteLocation:e.siteLocation,topic:e.topic},currentPage:{title:c?.title,id:c?.id}};n(b.PLANNER,t)}),[n,u,a,c?.title,c?.id])}},$i=new je({template:"{{? it.additionalContext }}\n{{\n\tconst {\n\t\tsiteGoals,\n\t\tsiteType,\n\t\ttopic,\n\t\tsiteDescription,\n\t\tsiteTitle,\n\t\tsiteLocation,\n\t\tcolorRequest\n\t} = it.additionalContext;\n}}\n{{? siteGoals }}The user has indicated that their goals with the site are to {{~siteGoals :item}}{{=item}}, {{~}}{{?}}\n{{? siteType }}The site type is {{=siteType}}.{{?}}\n{{? topic }}The site's topic is {{=topic}}.{{?}}\n{{? siteDescription }}The site's description is: {{=siteDescription}}{{?}}\n{{? siteTitle }}The site's title is \"{{=siteTitle}}\".{{?}}\n{{? siteLocation?.name }}The site's location is {{=siteLocation.name}}.{{?}}\n{{? colorRequest }}The user has requested the following color scheme: {{=colorRequest}}{{?}}\n{{?}}",inputVariables:["additionalContext"]}),Ui={foodAndBeverage:{slug:"foodAndBeverage",description:"Food or beverage service establishment such as a restaurant, cafe, bar, fastfood"},blog:{slug:"blog",description:"Regular content publication and articles"},personal:{slug:"personal",description:"Personal website or resume"},music:{slug:"music",description:"For musicians, bands, or music creators business or porfolio"},art:{slug:"art",description:"For artists, painters, or creators business or portfolio"},photography:{slug:"photography",description:"For photographers or visual artists business or portfolio`"},fashion:{slug:"fashion",description:"For fashion designers or clothing brands, or fashion designer portfolio"},portfolio:{slug:"portfolio",description:"Showcase of work, projects, or creative content that does not fall under music, art, photograpy or fashion"},technology:{slug:"technology",description:"For technology companies or products"},education:{slug:"education",description:"For educational institutions or courses"},health:{slug:"health",description:"For health and wellness businesses or products"},travel:{slug:"travel",description:"For travel agencies, hotels, or tourism businesses"},construction:{slug:"construction",description:"For construction companies or contractors"},realEstate:{slug:"realEstate",description:"For real estate agencies or properties"},law:{slug:"law",description:"For law firms or legal services"},nonProfit:{slug:"nonProfit",description:"For non-profit organizations or charities"},events:{slug:"events",description:"For event planners, organizers, or venues"},government:{slug:"government",description:"For government agencies or public services"},saas:{slug:"saas",description:"For software as a service companies"},news:{slug:"news",description:"For news organizations or media outlets"},business:{slug:"business",description:"For a business or company website that does not fit any of the other categories"},other:{slug:"other",description:"For other types of websites"}},Hi=Object.values(Ui).map((e=>e.slug)),zi=Ue.format({role:"You are a website design analyst at Automattic, the company behind WordPress.com, and an expert at using tools to obtain the required specifications for a new website design.",context:"The required specifications to build a site are: siteType, topic, siteDescription, and siteTitle.",examplesDescription:"Guide the user to provide a site description that is suitable for the type of site they need",examples:["- Business site: \n\t- Peak Performance Consulting: Strategic advisory and leadership development for executives, enhancing business growth and efficiency.\n\t- FitLife Tracker: A mobile app offering personalized workouts, nutrition tracking, and progress monitoring for fitness enthusiasts.\n\t- Brew Haven Caf: A cozy coffee shop with artisanal blends, fresh pastries, and a welcoming atmosphere for relaxation and socializing.\n\t","- Blogs: \n\t- The Tech Innovator: For tech enthusiasts and professionals, offering in-depth articles and news on emerging technologies and trends.\n\t- Healthy Living Daily: For health-conscious individuals, providing tips, recipes, and stories to inspire a balanced, healthy lifestyle.\n\t","- Portfolios: \n\t- Alex Parker Design: Showcasing innovative graphic design projects, including branding and web design, highlighting creative expertise and visual storytelling.\n\t- Emma Stone Photography: Featuring a curated collection of stunning portraits, landscapes, and editorial photography, demonstrating technical skill and artistic vision.\n\t","- Personal: \n\t- Jim Smithers: Providing a biography and work history along with a list of side projects.\n\t- SciFi Memorabilia: Showcasing my personal sci-fi memorabilia collection for other sci-fi fans to enjoy.\n\t"],do:["Use the make_suggestions tool when:\n\t\t\t\t- the user is explicitly asking for suggestions.\n\t\t\t\t- the user cannot or is not sure how to answer a question about a specification.\n\t\t\t\t- the site specs are complete and the user is asking for suggestions to change a specification.","Use the confirm_site_specs tool when:\n\t\t\t\t- you have all the required specifications.\n\t\t\t\t- the user has asked for changes to the specifications.",'Check the results of the confirm_site_specs tool carefully. Some responses may seem like a confirmation to continue, but they may actually be asking for changes, for example:\n\t\t\t\t- "make my site interesting" could be take to indicate "go ahead make my site, and make it interesting" but this includes extra details that are not part of the required specifications, so you should ask for clarification.',"Ask for a physical location if the user has not provided one and it seems relevant to the site they are building, for example:\n\t\t\t\t- If the user is building a site for a local business, like a butcher, baker, restaurant, cafe, or gym, etc.\n\t\tIf user asks for a suggestion with location, call make_suggestions with the biggest city shopping district relevant to the language they are using.","Check each of the user's responses carefully for information that can be used to fill in these specifications. A response may contain multiple pieces of information that can be used to fill in multiple specifications.","Fill in the siteLocationName specification if a response contains partial location information","Use only the information provided by the user to complete the specifications.","Ask only one question per message, and keep the question under 40 words.","Suggest a site description that is suitable for the type of site the user needs if they continue to provide vague or unclear responses.","Restate the previous question and ask for clarification if a user response is unclear.",`ALWAYS chose the relevant siteType from ${JSON.stringify(Ui)}`],dont:["Ask more than one question per message.","Respond with a question or comment over 40 words.","Ask for a physical location if the user is building a site that is not location-specific, like a blog.","Ask the user to confirm your individual specification parameter choices.","Ask the user directly to confirm the specifications you have gathered. ALWAYS use the confirm_site_specs tool to confirm the specifications. When calling the confirm_site_specs tool your message content should be null.","Ask the user what sort of sections or content they want on their website, or what sort of style or layout they want. Only ask questions that will help you fill in the required specifications.","Ask what type of website a user needs if it can be deduced from the user's responses, for example:\n\t\t\t - If a user says they want to a site for their shop, cafe, restaurant, gym, etc. you can assume they need an business site.\n\t\t\t - If a user says they want a site to share their thoughts, experiences, or knowledge, you can assume they need a blog site.\n\t\t\t - If a user says they want a site to showcase their work, you can assume they need a portfolio site.","Discuss products or services that are not provided by Automattic, Inc. or WordPress.com.",'Answer malicious questions nor questions unrelated to designing their new website. Do not explain concepts. Instead of answering the question, direct the user back to the website design process using\n\t\t\t something from the content of their question, for example:\n\t\t\t - User request: "Can you help me with my taxes?"\n\t\t\t - Your response: "That is a tricky one. Do you want me to help you set up a website where you can share helpful tips you have learnt about paying tax?"\n\t\t\t - User request: "What is the best way to win chess?"\n\t\t\t - Your response: "Set up a blog site and write about your chess learning journey. Reflecting on your play this way could help you improve. Do you want me to help you set up a website for this?"',"Provide a summary of the site specifications in any of your responses. The confirm_site_specs tool is the only way to confirm the specifications."]}),Gi={name:"spec",tools:()=>[{name:"confirm_site_specs",description:"Confirms that the gathered specifications are correct. The required specifications to build a site are: siteType, topic, siteDescription, and siteTitle. The content of your message should ALWAYS be null.",parameters:{type:"object",properties:{siteType:{type:"string",description:"The type of site being created. Prefer making assumptions about the siteType based on information the user provides rather than asking the user direct. For example a site that sounds like a business, eg. for a consultancy, gymn, florist, or plumber assume the siteType is 'business'. For a site that sounds like a food and beverage establishment, eg. a restaurant, cafe, bar, fastfood, assume the siteType is 'foodAndBeverage'. For a site like a photography portfolio assume the siteType is 'portfolio'. For a site like a daily journal about travel assume the siteType is 'blog'. Only ask the user for clarification as a last resort if you really can't determine the siteType from the information provided. If you do ask the user for clarification, provide a list of options from the available site types.",enum:Hi},topic:{type:"string",description:"Your task is to determine the main topic of the site using no more than two words. It should not be something generic like ecommerce, and should not be the site name. Avoid using ambiguous terms that have multiple meanings. For businesses and professional sites always use the primary business type as the topic, for example with 'a law firm specializing in divorce' set topic as 'law firm' not 'divorce', or for 'a doctor who treats drug addiction' use 'doctor' not 'drug addiction'"},siteDescription:{type:"string",description:"Never ask for this. It is a summary of the sites specifications gathered so far e.g. 'A technical bookshop called TechReads, specialising in machine learning books'. If the user has not provided enough information for you to create a useful description ask follow up questions to flesh it out. Do not include the location in the description. Use the user's language."},siteTitle:{type:"string",description:"The title of the site. Look for obvious titles in the information provided, for example: If a business name is provided this should be used. eg. for 'I want a site for my coffee shop Java Jivin' the siteTitle should be 'Java Jivin'. If an explicit title is provided, use that. eg. for 'I want a site for my photography portfolio called My Photos' the siteTitle should be 'My Photos'. If there is an obvious title just use it and don't ask for confirmation. If you can't determine the title, ask the user to provide one."},siteLocationName:{type:["string","null"],description:"The physical location of the business or person as a single string. Ask for this if the user has not provided one and it seems like something that should have a location, eg. a bar, a coffee shop, a restaurant, a gym, etc. This should only be a location on a map in a readable form. e.g. 123 Main Street, Los Angeles, CA, USA. Use the post code if provided but do not ask for it. If you cannot determine the location, do not include this. Ask for an actual street address if it seems like a something that should have one and it hasn't been provided already. If the type of site doesn't seem like it should have a location, don't ask for this."},colorRequest:{type:["string","null"],description:'Any colors that the user has specified. If the request is descriptive convert into actual colors, eg. "I want the colors of the american flag" should become "red white blue"'},requestedPages:{type:["string","null"],description:"Any pages that the user has specified as a comma separated string. Leave blank if the user has not explicitly specified any pages."}},required:["siteType","topic","siteDescription","siteTitle","siteLocationName","colorRequest","requestedPages"]},strict:!0},{name:"make_suggestions",description:"Makes suggestions for a particular request.",parameters:{type:"object",properties:{message:{type:"string",description:"The message to display to the user. This will be phrased in terms of a suggestion relevant to the context, eg. 'Here are some suggestions for a site title'."},inputPlaceholder:{type:"string",description:"The placeholder text for the input field. For example, if providing suggestions for a business name, the inputPlaceholder could be 'Enter a different business name'. Do not include any comment about selecting from the provided actions."},actions:{type:"array",description:"Provides a few options for the user to choose from. For example, if a user is asking for business name suggestions for their coffee shop, the actions could be [ 'Java Jivin', 'Java Jive', 'Java Jive Cafe' ]. If they are wanting to know what you can help with for site design the acitons might be ['Change colors', 'Change fonts', 'Add a new page']Keep your suggestions to a maximum of 2 and under 20 characters",items:{type:"object",properties:{actionName:{type:"string",description:"The title of the action. Keep it very short."},description:{type:"string",description:"The description of the suggestion. Briefly describe the suggestion in context for the user."}}}}},required:["message","inputPlaceholder","actions","description"]}}]},qi={id:b.SPEC,description:"An assistant that gathers and confirms information about the site specs.",instructions:e=>(e=>`<context>\n\t\t\t\t${$i.format(e)}\n\t\t\t</context>\n\n\t\t\t${zi}`)(e),tags:[b.SPEC],toolkits:[Gi],toolkitHook:function(){const{setSuggestions:e,registerCallbacks:t,registerContext:n}=(0,g.useDispatch)(wt),{getSiteMetadata:o,setSiteMetadata:i}=tn(),a=(0,g.useSelect)((e=>e(wt).getAdditionalContext())),{createToolCallback:r}=Ot(),s=o(),{deleteMarkedMessages:c}=Jt();(0,f.useEffect)((()=>{t(b.SPEC,{confirm_site_specs:r({name:"confirm_site_specs",action:async e=>{c();const t={siteType:e.siteType,topic:e.topic,siteTitle:e.siteTitle,siteDescription:e.siteDescription,defaultImageStyle:e.imageStyle,colorRequest:e.colorRequest,siteLocation:{name:e.siteLocationName},requestedPages:e.requestedPages};return i(t,!1,!0),(0,m.__)("Confirm your site details:","big-sky")},validator:async e=>{if(!(e&&e.siteType&&e.topic&&e.siteTitle&&e.siteDescription))throw new Error((0,m.__)("There was an error gathering your site details. Please try again.","big-sky"));return!0}}),make_suggestions:r({name:"make_suggestions",action:async t=>{t.message&&t.actions&&(c(),e(t))}})})}),[t]),(0,f.useEffect)((()=>{n&&(a||s.siteTitle)&&n(b.SPEC,{additionalContext:{...a,...s},...s})}),[a,n,s])}},Vi=(e=[])=>({name:"upsert_social_link",description:"Call this if the user asks to add or update a social link. The url must be provided by the user. The service must be in the provided list of supported services.",parameters:{type:"object",properties:{service:{type:"string",description:"The requested service of the social link.",enum:e},url:{type:"string",description:"The URL of the social link."}},required:["service","url"]},strict:!0}),Wi={name:"content",tools:e=>[Vi(e.socialLinks?.services),{name:"update_address",description:"Update the contact address for the website/business",parameters:{type:"object",properties:{address:{type:"string",description:"The address to update."}},required:["address"]},strict:!0},{name:"translate_content",description:"Translate all text content on the current page to a specified target language.\n\t\tIf a user requests translation but doesn't specify a language, ask for clarification.\n\t\tThe translation will preserve formatting, technical terms, and brand names.\n\t\tCommon language codes/names that can be used:\n\t\t- Spanish (es)\n\t\t- French (fr)\n\t\t- German (de)\n\t\t- Italian (it)\n\t\t- Portuguese (pt)\n\t\t- Japanese (ja)\n\t\t- Chinese (zh)\n\t\t- Korean (ko)\n\t\t- Russian (ru)\n\t\tetc.",parameters:{type:"object",properties:{targetLanguage:{type:"string",description:'The target language to translate the content into. Can be a language name (e.g., "Spanish") or language code (e.g., "es").'},isGlobal:{type:"boolean",description:"Whether the translation is for the entire page"}},required:["targetLanguage","isGlobal"]},strict:!0},{name:"rewrite_content",description:'Rewrite the content to match a user request.\n\t\t\tIf a user requests a change in tone but doesn\'t provide a specific tone, ask for clarification.\n\t\t\tIf the user requests a "tone" that is still ambiguous, ask what they mean by that.\n\t\t\tDo not return any content in your response.'}]};const Yi={id:b.CONTENT,description:"An assistant that handles content generation and editing.",instructions:e=>function(e){return`\nYou are an expert content writer and editor at Automattic, specializing in website content creation, editing, translation, and content management. Your primary goal is to help users improve their website content.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\n1. Use the appropriate tools for content management:\n   - Block Content:\n     * Content changes: rewrite_content tool\n     * Text translation: translate_content tool (requires target language)\n   - Contact Information:\n     * Address updates: update_address tool\n     * Social links: upsert_social_link tool\n\n2. Important requirements:\n   - Use site description for generated content\n   - ${Et}\n   - For content requests that ask to use content from another website, inform the user that you can't do that.\n\n3. Restrictions:\n   - Never suggest plugin installations\n   - Don't mention clientId in responses\n`}(e),tags:[b.CONTENT],toolkits:[Wi],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t,registerContext:n}=(0,g.useDispatch)(wt),{upsertSocialLink:o,validateSocialLinkArgs:i}=function(){const{getBlock:e,getBlocksByName:t}=(0,g.useSelect)(v.store),{insertBlock:n,updateBlockAttributes:o}=(0,g.useDispatch)(v.store),{scrollToBlock:i}=sn(),{getSocialLinkVariations:a}=wo();return{upsertSocialLink:({service:a,url:r})=>{const s=t("core/social-links");let c="";return s.forEach(((t,s)=>{const l=e(t),u=l.innerBlocks.find((e=>"core/social-link"===e.name&&e.attributes.service===a));if(u)o(u.clientId,{url:r}),c="Updated",0===s&&i(u.clientId,"center",!0);else{const e=(0,k.createBlock)("core/social-link",{url:r,service:a});n(e,l.innerBlocks.length,t,0===s),c="Added"}})),(0,m.sprintf)(
// Translators: %1$s is the action (Added/Updated).
// Translators: %1$s is the action (Added/Updated).
(0,m.__)("%1$s social link.","big-sky"),c)},validateSocialLinkArgs:e=>{if(!e)throw new Error((0,m.__)("Sorry, I can't perform this action at this time.","big-sky"));const{service:t}=e,n=a().find((e=>e.name===t));if(!n)throw new Error((0,m.__)("Sorry, the provided social media service is not supported.","big-sky"));return!0}}}(),{updateAddress:a}=kn(),{replaceContent:r}=mi(),{topic:s,siteTitle:c,siteDescription:l,siteLocation:u}=tn().getSiteMetadata(),{getSocialLinkVariations:d}=wo(),{translateContent:p,validateTranslateContentArgs:h}=function(){const{getBlock:e}=(0,g.useSelect)(v.store),{getRootBlocks:t,setBlockIsProcessing:n}=sn(),{runChatCompletion:o}=(0,g.useDispatch)(wt),{updateBlockAttributes:i}=(0,g.useDispatch)(v.store),{basicChatModel:a}=(0,g.useSelect)((e=>({basicChatModel:e(wt).getBasicChatModel()}))),r=({isGlobal:n,clientId:o,targetLanguage:i})=>{let a;if(n)a=t();else if(o){const t=e(o);if(!t)throw new Error((0,m.__)("Block not found for translation.","big-sky"));a=[t]}const r=xe(a).filter((e=>!pi.V.some((t=>e.example?.includes(t)))));if(!r?.length)throw new Error((0,m.__)("No translatable content found.","big-sky"));const s=Ce(r,!1,i);if(!s?.contentForRequest?.length)throw new Error((0,m.__)("No translatable content found.","big-sky"));return{content:r,blocks:a,requestData:s}};return{translateContent:async function({targetLanguage:t,isGlobal:s,clientId:c}={}){const{content:l,requestData:u}=r({targetLanguage:t,isGlobal:s,clientId:c}),d={content:u.contentForRequest};l.forEach((e=>{n(e,!0)}));const p=[{role:"system",content:'You are a professional translator with expertise in multiple languages. Your task is to translate content while preserving the original meaning, tone, and style.\n\nFollow these guidelines:\n1. Maintain the same level of formality as the original text\n2. Preserve any technical terms or brand names in their original form\n3. Ensure translations are culturally appropriate\n4. Keep formatting and special characters intact\n5. Maintain similar length where possible\n6. Preserve any HTML or markdown formatting\n7. Do not translate HTML entities (e.g., &amp;, &quot;, etc.)\n8. Preserve any special characters used in WordPress blocks\n\nReturn the translations in JSON format with the following structure:\n{\n  "content": [\n    {\n      "i": "clientId",\n      "e": "translated text"\n    }\n  ]\n}'},{role:"user",content:`Please translate the following content to ${t}: ${JSON.stringify(d)}`}],g=await o(a,p,null,.2,"json_object"),h=g?.choices?.[0]?.message?.content;if(h)try{const t=JSON.parse(h);if(!t.content)throw new Error((0,m.__)("Translation failed. Please try again.","big-sky"));return function(t,n){return t.filter((e=>"SPARE"!==e.i)).forEach((t=>{const o={},a=n.clientIdMap[t.i];if(!a)return;const r=e(a);r&&("core/heading"===r.name||"core/paragraph"===r.name?o.content=Ae(t.e):"core/button"===r.name&&(o.text=Ae(t.e)),i(a,o))})),(0,m.__)("Translated content","big-sky")}(t.content,u)}catch(e){throw new Error((0,m.__)("Translation failed. Please try again.","big-sky"))}finally{l.forEach((e=>{n(e,!1)}))}},validateTranslateContentArgs:e=>{const{targetLanguage:t,isGlobal:n,clientId:o}=e;if(!t)throw new Error((0,m.__)("Please specify the target language for translation.","big-sky"));if(!n&&!o)throw new Error((0,m.__)("Please select a block to translate.","big-sky"));return r({isGlobal:n,clientId:o,targetLanguage:t}),!0}}}(),{getBlocksByName:y,getBlock:w}=(0,g.useSelect)((e=>{const{getBlocksByName:t,getBlock:n}=e(v.store);return{getBlocksByName:t,getBlock:n}})),{setBlockBeforeChanges:_}=(0,g.useDispatch)(wt),x={rewrite_content:e({name:"rewrite_content",action:async e=>{const t=y("core/post-content")[0],n=e.clientId||t;return _(w(n)),{message:await r({blockClientId:n,requestedSubject:e.__original_request}),checkpointKeys:[$.BLOCKS]}}}),translate_content:e({name:"translate_content",action:async e=>({message:await p(e),checkpointKeys:[$.BLOCKS]}),validator:e=>h(e)}),upsert_social_link:e({name:"upsert_social_link",action:e=>({message:o(e),checkpointKeys:[$.BLOCKS]}),validator:e=>i(e)}),update_address:e({name:"update_address",action:async e=>({message:await a(e),checkpointKeys:[$.LOCATION,$.BLOCKS]})})};(0,f.useEffect)((()=>{t(b.CONTENT,x)}),[t]),(0,f.useEffect)((()=>{const e=d(),t={site:{siteTitle:c,siteDescription:l,siteLocation:u,topic:s},socialLinks:{services:e.map((e=>e.name))}};n(b.CONTENT,t)}),[n,c,l,s])}};var Ki,Ji;!function(e){e.Bold="Bold",e.Playful="Playful",e.Sophisticated="Sophisticated",e.Dark="Dark"}(Ki||(Ki={})),function(e){e.Bold="Bold",e.BoldText="BoldText",e.BoldDark="BoldDark",e.Sophisticated="Sophisticated",e.SophisticatedDark="SophisticatedDark",e.Playful="Playful",e.PlayfulQuirky="PlayfulQuirky",e.Pastel="Pastel"}(Ji||(Ji={}));const Xi={[Ji.Bold]:{singleHue:[{background:1,text:5,button:[3,5,1],buttonText:[1,5]},{background:2,text:5,button:[3,5,1],buttonText:[1,5]},{background:3,text:[1,5],button:[1,5],buttonText:[3,5,1]},{background:5,text:1,button:[3,1],buttonText:[1,5]}],multiHue:[{background:1,text:[5,1],button:3,buttonText:[1,5]},{background:3,text:[1,5],button:[1,5],buttonText:[1,5]},{background:2,text:[1,5],button:[1,5],buttonText:[1,5]},{background:5,text:1,button:[2,3],buttonText:[1,5]}]},[Ji.BoldDark]:{singleHue:[{background:5,text:1,button:[3,2,1],buttonText:[1,5]},{background:4,text:1,button:[3,2,1],buttonText:[1,5]},{background:3,text:[5,1],button:[1,5],buttonText:[3,1,5]},{background:1,text:5,button:[3,2,1],buttonText:[1,5]}],multiHue:[{background:5,text:1,button:[3,2,1,5],buttonText:[5,3,2,1]},{background:3,text:[5,1],button:[2,5,1],buttonText:[3,1,5]},{background:2,text:[5,3,1],button:[5,3,1],buttonText:[2,1,5]},{background:4,text:[1,5],button:[3,2,1,5],buttonText:[5,3,2,1]}]},[Ji.BoldText]:{singleHue:[{background:1,text:[3,5],button:[3,5,1],buttonText:[1,5]},{background:2,text:[5,1],button:[3,5,1],buttonText:[1,5]},{background:3,text:[3,1,5],button:[3,1,5],buttonText:[1,5]},{background:4,text:[3,2,1],button:[3,5,1],buttonText:[1,5]}],multiHue:[{background:1,text:[3,5],button:[3,5,1],buttonText:[1,5]},{background:3,text:[3,5,1],button:[3,5,1],buttonText:[3,5,1]},{background:2,text:[3,5,1],button:[3,5,1],buttonText:[1,5]},{background:4,text:[3,1],button:[2,3,1],buttonText:[1,5]}]},[Ji.Sophisticated]:{singleHue:[{background:2,text:[5,1],button:[4,5,1],buttonText:[5,1]},{background:1,text:[5,1],button:[4,5,1],buttonText:[1,5]},{background:4,text:[1,5],button:[3,5,1],buttonText:[5,1]},{background:5,text:[1,5],button:[3,5,1],buttonText:[5,1]}],multiHue:[{background:2,text:[5,1],button:[3,4,5,1],buttonText:[5,1]},{background:3,text:[2,1,5],button:[2,1,5],buttonText:[3,5,1]},{background:4,text:[2,1,5],button:[3,5,1],buttonText:[5,1]},{background:5,text:[2,1,5],button:[2,3,4,5,1],buttonText:[5,1]}]},[Ji.SophisticatedDark]:{singleHue:[{background:4,text:[1,5],button:[2,1,5],buttonText:[1,5]},{background:5,text:[1,5],button:[2,1,5],buttonText:[1,5]},{background:3,text:[1,5],button:[2,1,5],buttonText:[1,5]},{background:1,text:5,button:[4,2],buttonText:[1,5]}],multiHue:[{background:4,text:[1,5],button:[2,1,5],buttonText:[1,5]},{background:2,text:[1,5],button:[1,5],buttonText:[5,1]},{background:3,text:[1,5],button:[2,1,5],buttonText:[1,5]},{background:5,text:[1,5],button:[1,5],buttonText:[5,1]}]},[Ji.Playful]:{singleHue:[{background:1,text:5,button:[3,2,4,5],buttonText:[2,5]},{background:4,text:[2,1,5],button:[2,1,5],buttonText:[5,2]},{background:3,text:[1,5],button:[1,5],buttonText:[2,5]},{background:5,text:[2,1,5],button:[3,1,5],buttonText:[5,2]}],multiHue:[{background:1,text:5,button:[3,2,4,5],buttonText:[1,5]},{background:4,text:[2,1,5],button:[2,1,5],buttonText:[5,2]},{background:3,text:[1,5],button:[1,5],buttonText:[3,2,5]},{background:5,text:[1,5],button:[3,4,1,5],buttonText:[5,2]}]},[Ji.PlayfulQuirky]:{singleHue:[{background:2,text:[4,5,1],button:[1,4,5],buttonText:[3,1,5]},{background:4,text:[3,5,1],button:[3,4,5],buttonText:[4,5,1]},{background:4,text:[3,5,1],button:[3,4,5],buttonText:[4,5,1]},{background:4,text:[3,5,1],button:[3,4,5],buttonText:[4,5,1]}],multiHue:[{background:2,text:[4,5,1],button:[1,4,5],buttonText:[1,5]},{background:4,text:[3,5,1],button:[3,4,5],buttonText:[4,5,1]},{background:3,text:[5,1],button:[4,5,1],buttonText:[4,5,1]},{background:4,text:[5,1],button:[3,4,5],buttonText:[4,5,1]}]},[Ji.Pastel]:{singleHue:[{background:2,text:[5,1],button:[4,5,1],buttonText:[5,1]},{background:4,text:[5,1],button:[4,5,1],buttonText:[1,5]},{background:3,text:[1,5],button:[3,5,1],buttonText:[5,1]},{background:5,text:[1,5],button:[3,5,1],buttonText:[5,1]}],multiHue:[{background:2,text:[5,1],button:[4,5,1],buttonText:[5,1]},{background:3,text:[1,5],button:[3,5,1],buttonText:[5,1]},{background:4,text:[5,1],button:[4,5,1],buttonText:[1,5]},{background:5,text:[1,5],button:[3,5,1],buttonText:[5,1]}]}};var Zi=Object.defineProperty,Qi=(e,t)=>{for(var n in t)Zi(e,n,{get:t[n],enumerable:!0})};function ea(e,t=Math.random){const n=[...e];let o,i=n.length;for(;0!=i;)o=Math.floor(t()*i),i--,[n[i],n[o]]=[n[o],n[i]];return n}Qi({},{lerp:()=>ta,makeCurveEasings:()=>ia,pointOnCurve:()=>oa,scaleSpreadArray:()=>na,shuffleArray:()=>ea});var ta=(e,t,n)=>t+e*(n-t),na=(e,t,n=0,o=ta)=>{if(!e||e.length<2)throw new Error("valuesToFill array must have at least two values.");if(t<1&&n>0)throw new Error("Target size must be at least 1");if(t<e.length&&0===n)throw new Error("Target size must be greater than or equal to the valuesToFill array length.");if(n<=0){const n=t-e.length,i=e.map((e=>[e]));for(let t=0;t<n;t++){const n=t%(e.length-1);if(n>=0&&n<i.length){const e=i[n];e&&e.push(null)}}for(let e=0;e<i.length-1;e++){const t=i[e],n=i[e+1];if(!t||!n)continue;const a=t[0],r=n[0];if(void 0!==a&&void 0!==r)for(let e=1;e<t.length;e++){const n=e/t.length;t[e]=o(n,a,r)}}return i.flat()}const i=[],a=n,r=1-n;for(let n=0;n<t;n++){const s=a+(1===t?.5:n/(t-1))*(r-a);let c=0;const l=e.map(((t,n)=>n/(e.length-1)));for(let e=1;e<l.length;e++){const t=l[e];if(void 0!==t&&s<=t){c=e-1;break}e===l.length-1&&(c=e-1)}c=Math.min(Math.max(0,c),e.length-2);const u=l[c]||0,d=l[c+1]||1;let p=0;d>u&&(p=(s-u)/(d-u));const g=e[c],h=e[c+1];if(void 0===g||void 0===h)throw new Error(`Invalid segment values at index ${c}`);const f=o(p,g,h);i.push(f)}return i},oa=(e,t)=>n=>{const o=Math.PI/2,i=o/1,a=n;let r=0,s=0;if("lam"===e){const e=a*o,n=2/(2+20*t),i=Math.cos(e),c=Math.sin(e);r=Math.sign(i)*Math.abs(i)**n,s=Math.sign(c)*Math.abs(c)**n}else if("arc"===e)s=Math.cos(-Math.PI/2+n*i+t),r=Math.sin(Math.PI/2+n*i-t);else if("pow"===e)r=Math.pow(1-a,1-t),s=Math.pow(a,1-t);else if("powY"===e)r=Math.pow(1-a,t),s=Math.pow(a,1-t);else if("powX"===e)r=Math.pow(a,t),s=Math.pow(a,1-t);else{if("function"!=typeof e)throw new Error(`pointOnCurve() curveAccent parameter is expected to be "lam" | "arc" | "pow" | "powY" | "powX" or a function but \`${e}\` given.`);{const[o,i]=e(n,t);r=o,s=i}}return{x:r,y:s}},ia=(e,t)=>{const n=oa(e,t);return{sEasing:e=>n(e).x,lEasing:e=>n(e).y}};function aa(e){return(e%360+360)%360}function ra(e){if(1==(e=aa(e)/360)||0===e)return e;const t=1/6,n=(e=1+e%1)%t/t*Math.PI/2,[o,i]=[t*Math.cos(n),t*Math.sin(n)];return 360*[i,1/3-o,1/3+i,2/3-o,2/3+i,1-o][Math.floor(6*e)%6]}Qi({},{colorHarmonies:()=>sa,colorToCSS:()=>da,harveyHue:()=>ra,hsv2hsl:()=>la,normalizeHue:()=>aa,uniqueRandomHues:()=>ca});var sa={complementary:e=>[aa(e),aa(e+180)],splitComplementary:e=>[aa(e),aa(e+150),aa(e-150)],triadic:e=>[aa(e),aa(e+120),aa(e+240)],tetradic:e=>[aa(e),aa(e+90),aa(e+180),aa(e+270)],monochromatic:e=>[aa(e),aa(e)],doubleComplementary:e=>[aa(e),aa(e+180),aa(e+30),aa(e+210)],compound:e=>[aa(e),aa(e+180),aa(e+60),aa(e+240)],analogous:e=>[aa(e),aa(e+30),aa(e+60),aa(e+90),aa(e+120),aa(e+150)]};function ca({startHue:e=0,total:t=9,minHueDiffAngle:n=60,rndFn:o=Math.random}={}){n=Math.min(n,360/t);const i=e||360*o(),a=Array.from({length:Math.round(360/n)},((e,t)=>(i+t*n)%360));let r=ea(a,o);return r.length>t&&(r=r.slice(0,t)),r}var la=([e,t,n])=>{const o=n-n*t/2,i=Math.min(o,1-o);return[e,0===i?0:(n-o)/i,o]},ua={oklch:e=>[100*e[2]+"%",100*e[1]+"%",e[0]],lch:e=>[100*e[2]+"%",100*e[1]+"%",e[0]],hsl:e=>[e[0],100*e[1]+"%",100*e[2]+"%"],hsv:e=>{const[t,n,o]=la(e);return[t,100*n+"%",100*o+"%"]}},da=(e,t="oklch")=>`${"hsv"===t?"hsl":t}(${ua[t](e).join(" ")})`;function pa({total:e=9,hStart:t=360*Math.random(),hStartCenter:n=.5,hEasing:o=e=>e,hCycles:i=1,sRange:a=[.4,.35],sEasing:r=e=>Math.pow(e,2),lRange:s=[.1*Math.random(),.9],lEasing:c=e=>Math.pow(e,1.5),transformFn:l=([e,t,n])=>[e,t,n],hueList:u}={}){const d=s[1]-s[0],p=a[1]-a[0],g=u&&u.length>0?u.length:e;return Array.from({length:g},((e,h)=>{const f=h/(g-1),m=1/g,y=u?u[h]:aa(t+(1-o(f,m)-n)*(360*i)),b=a[0]+p*r(f,m),w=s[0]+d*c(f,m);return l([y,b,w],h)}))}function ga(e,t,n,o){return 2===e.length?function(e,t,n,o){return Array.from({length:n},((n,i)=>{const a=o[i];if(a){const{palette:n,fromIndex:o}=a;return 1===n?e[o]:t[o]}return e[i]}))}(n(e[0],0),n(e[1],1),t,o):n(e[0],0)}Math.random(),Math.random(),Math.random()<.5||Math.random(),Math.random()<.5||Math.random();const ha={[Ji.Bold]:function(e,t=5){return ga(e,t,((n,o)=>{const[i,a,r]=e[o],s=i+15;return pa({total:t,hStart:s,hStartCenter:.5,hEasing:e=>e*e,hCycles:-.2,sRange:[.4,.75],lRange:[0,1],sEasing:e=>e,lEasing:e=>e*e,transformFn:([e,t,n],o)=>"number"==typeof o&&2===o?[i,a,Math.min(1,.85*r)]:"number"==typeof o&&3===o?[.5*s+16,.25*t,Math.min(1,1.7*n)]:n<.25?[e,.15*t,n]:[e,t,n]}).reverse()}),{1:{palette:2,fromIndex:2}})},[Ji.BoldDark]:function(e,t=5){return ga(e,t,((n,o)=>{const[i,a,r]=e[o];return pa({total:t,hStart:i+15,hStartCenter:.5,hEasing:e=>e*e,hCycles:0,sRange:[0,.2],lRange:[0,.95],sEasing:e=>e,lEasing:e=>1-Math.cos(e*Math.PI/2),transformFn:([e,t,n],o)=>{if("number"==typeof o&&2===o){let e=r;return e=r<.5?Math.min(1,1.4*r):Math.min(1,1.2*r),e=Math.max(.5,e),[i,a,e]}return"number"==typeof o&&2===o?[i,a,Math.min(1,1.2*r)]:[e,t,n]}}).reverse()}),{1:{palette:2,fromIndex:2}})},[Ji.BoldText]:function(e,t=5){return ga(e,t,((n,o)=>{const[i,a,r]=e[o],s=i+15;return pa({total:t,hStart:s,hStartCenter:.5,hEasing:e=>e*e,hCycles:-.2,sRange:[.85,.85],lRange:[0,1],sEasing:e=>e,lEasing:e=>e*e,transformFn:([e,t,n],o)=>"number"==typeof o&&2===o?[i,a,Math.min(1,.5*r)]:"number"==typeof o&&3===o?[.5*s+96,.2*t,Math.min(1,1.675*n)]:n<.25?[e,.15*t,n]:[e,t,n]}).reverse()}),{1:{palette:2,fromIndex:2}})},[Ji.Playful]:function(e,t=5){const n=(n,o)=>{const[i,a,r]=e[o];return pa({total:t,hStart:i,hStartCenter:.5,hEasing:e=>e,hCycles:.15,sRange:[.6,.6],lRange:[.96,.175],sEasing:e=>e,lEasing:e=>-(Math.cos(Math.PI*e)-1)/2,transformFn:([e,t,n],o)=>{const s=(i+120)%360,c=(i+40)%360;if("number"==typeof o)switch(o){case 0:return[i,a,n];case 1:return[e,Math.min(1,1.2*a),Math.min(1,1.075*n)];case 2:return[i,Math.min(1,.8*a),r];case 3:return[s,Math.min(1,1.2*a),Math.max(0,1*n)];case 4:return[c,a,Math.max(0,.7*n)];default:return[e,t,n]}return[e,t,n]}})},o={1:{palette:2,fromIndex:1},3:{palette:2,fromIndex:2}};return 2===e.length?ga([[e[0][0]+260,e[0][1],e[0][2]],[e[1][0]+10,e[1][1],e[1][2]]],t,n,o):ga([[e[0][0]+260,e[0][1],e[0][2]]],t,n,o)},[Ji.PlayfulQuirky]:function(e,t=5){const n=137.508;return ga(e,t,((o,i)=>{const[a,r,s]=e[i];return pa({total:t,hStart:a+10,hStartCenter:.6,hEasing:e=>e*e,hCycles:.1,sRange:[.3,1],lRange:[.025,.965],sEasing:e=>e,lEasing:e=>e*e,transformFn:([e,t,o],i,a)=>{if("number"==typeof i)switch(i){case 3:return[(e+12*Math.sin(e*Math.PI/90))%360,Math.max(.7,Math.min(1,.7*t)),Math.max(.55,Math.min(.5,.7*o+.1))];case 2:{const i=(e+n)%360;let r=o;a&&a[3]&&(r=a[3][2]);let s=r>.5?Math.max(0,r-.4):Math.min(1,r+.3);return i>=50&&i<=170&&(s=r>.5?Math.max(0,r-.5):Math.min(1,r+.5)),[i,t,s]}case 1:return[(e-n+360)%360,Math.min(1,1.15*t),Math.max(0,Math.min(1,1.15*o))]}return[e,t,o]}}).reverse()}),{2:{palette:2,fromIndex:1}})},[Ji.Sophisticated]:function(e,t=5){return ga(e,t,((n,o)=>{const[i,a,r]=e[o];return pa({total:t,hStart:i,hStartCenter:1,hEasing:e=>Math.sin(e*Math.PI/2),hCycles:.01,sRange:[.15,.15],lRange:[.125,.91],sEasing:e=>Math.sin(e*Math.PI/2),lEasing:e=>-(Math.cos(Math.PI*e)-1)/2,transformFn:([e,t,n],o)=>"number"==typeof o&&1===o?[i,Math.min(1,.5*a),Math.min(1,.5*r)]:"number"==typeof o&&2===o?[e,t,1.45*n]:[e,t,n]}).reverse()}),{2:{palette:2,fromIndex:3}})},[Ji.SophisticatedDark]:function(e,t=5){return ga(e,t,((n,o)=>{const[i,a,r]=e[o];return pa({total:t,hStart:i,hStartCenter:.5,hEasing:e=>Math.sin(e*Math.PI/2),hCycles:.01,sRange:[.125,.2],lRange:[.097,.9],sEasing:e=>Math.sin(e*Math.PI/2),lEasing:e=>e*e,transformFn:([e,t,n],o)=>"number"==typeof o&&3===o?[i,Math.min(1,2*t),Math.min(1,1.1*n)]:"number"==typeof o&&2===o?[i,Math.min(1,2*t),Math.min(1,1*n)]:[e,t,n]}).reverse()}),{1:{palette:2,fromIndex:2}})},[Ji.Pastel]:function(e,t=5){return ga(e,t,((n,o)=>{const[i,a,r]=e[o];return pa({total:t,hStart:i-20,hStartCenter:.46,hEasing:e=>-(Math.cos(Math.PI*e)-1)/2,hCycles:.15,sRange:[.1,.25],lRange:[.35,.985],sEasing:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,lEasing:e=>-(Math.cos(Math.PI*e)-1)/2,transformFn:([e,t,n],o)=>"number"==typeof o&&1===o?[(i+120)%360,t,Math.min(1,.9*r)]:"number"==typeof o&&0===o?[e,t,.35*n]:[e,t,n]}).reverse()}),{3:{palette:2,fromIndex:2},4:{palette:2,fromIndex:4}})}},fa={[Ki.Bold]:[Ji.Bold,Ji.BoldText,Ji.BoldDark],[Ki.Playful]:[Ji.Playful,Ji.PlayfulQuirky],[Ki.Sophisticated]:[Ji.Sophisticated,Ji.SophisticatedDark,Ji.Pastel],[Ki.Dark]:[Ji.BoldDark,Ji.SophisticatedDark]};fo([bo]);const ma={TEXT_ON_BG:4.5,BUTTON_BG_ON_BG:4.5,BUTTON_TEXT_ON_BG:3.75};function ya(e,t,n,o,i,a){const r=go(e[t-1]);if(!r.isValid())return console.warn(`Invalid background color at index ${t}`+(void 0!==i&&void 0!==a?` (Palette: ${i}, Variation: ${a})`:"")),n[0];for(const t of n){const n=e[t-1];if(void 0!==n){if(r.contrast(go(n))>=o)return t}else console.warn(`Missing color at index ${t}`+(void 0!==i&&void 0!==a?` (Palette: ${i}, Variation: ${a})`:""))}return n[0]}function ba([e,t,n]){n*=100,t*=100,n/=100;const o=(t/=100)*Math.min(n,1-n),i=t=>{const i=(t+e/30)%12,a=n-o*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*a).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`}function wa({personality:e,paletteType:t,topic:n,hues:o,description:i,specificColors:a,colorCount:r=5,ignorePersonality:s}){if(!s&&!fa[e].includes(t))throw new Error(`Invalid palette type ${t} for personality ${e}`);a&&(a=a.filter((e=>{if(!e)return!1;const t=e.trim().toLowerCase();return"#fff"!==t&&"#ffffff"!==t&&"#000"!==t&&"#000000"!==t})));let c=(0,ha[t])(o[0],r).map(ba);a&&(c=function(e,t){if(!t||0===t.length)return e;const n=[...e];return t.length>=1&&(n[2]=t[0]),t.length>=2&&(n[1]=t[1]),n}(c,a));const l=function(e){return Array.isArray(e)&&Array.isArray(e[0])&&void 0!==e[0][0]?.h?e[0].map((e=>[e.h,e.s/100,e.l/100])):Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[0][0])&&"number"==typeof e[0][0][0]?e[0]:Array.isArray(e)&&Array.isArray(e[0])&&"number"==typeof e[0][0]?e:[]}(o),u=function(e,t){const n=Xi[e],o=t.length>1;return n?o?n.multiHue:n.singleHue:[]}(t,l),d=u.map((e=>{const t=Array.isArray(e.background)?e.background[0]:e.background;return function(e,t,n,o){const i=Array.isArray(t.text)?t.text:[t.text],a=Array.isArray(t.button)?t.button:[t.button],r=Array.isArray(t.buttonText)?t.buttonText:[t.buttonText],s=ya(e,t.background,i,ma.TEXT_ON_BG,n,o),c=ya(e,t.background,a,ma.BUTTON_BG_ON_BG,n,o),l=ya(e,c,r,ma.BUTTON_TEXT_ON_BG,n,o);return{background:t.background,text:s,button:c,buttonText:l}}(c,{background:t,text:e.text,button:e.button,buttonText:e.buttonText})}));return{colors:c,description:i,hues:o,parameters:{},personality:e,paletteType:t,topic:n,variations:d}}fo([bo]);const va=()=>({name:"color_palette_generator",description:'\nFirst, check if the prompt contains specific color requests. This includes:\n- Explicit color hex codes (e.g., "#FF0000")\n- References to brands, sports teams, flags, or other well-known entities (e.g., "Lakers colors", "American flag colors", "Coca-Cola red")\nIf the prompt contains any of these:\n1. Extract the specific colors mentioned, or look up the official or commonly associated colors for the referenced brand, team, flag, or entity\n2. ALWAYS use "Bold" personality\n3. IMPORTANT: Always convert the specific colors to HSL objects (with h, s, l) and include them in the hues array\n4. IMPORTANT: Always add the hex color values to the specificColors array\n\nFor natural color descriptions (without specific color requests):\nIf the description requests specific colors (e.g., "red and green") or clearly implies a multicolor palette (such as "beach vibes" or "earthy"), or if the description references a scene or setting with multiple distinct elements (e.g., "yoga at the beach" with sand and water), extract the main color HSLs (as many as requested, up to 2).\nDo not include any hex color values in the specificColors array.\n\nWhen a prompt requests a specific color by name (e.g., "sage green", "sky blue", "burnt orange"), you MUST translate that color name into a full HSL value (h, s, l) that reflects the typical appearance and tone of that color. Do not use default or random s/l values. Instead, use your knowledge of color theory and the following examples as a guide:\n\nExample color name to HSL translations:\n- "sky blue"  { "h": 197, "s": 71, "l": 73 }\n- "burnt orange"  { "h": 25, "s": 86, "l": 41 }\n- "sage green"  { "h": 120, "s": 19, "l": 74 }\n- "lavender"  { "h": 265, "s": 52, "l": 78 }\n- "rose red"  { "h": 350, "s": 74, "l": 53 }\n\nFor any other color name, use your best judgment to select h, s, and l values that match the typical muted, soft, vibrant, or dark tone as described or implied by the prompt. If the prompt describes a tone (e.g., "muted", "soft", "vibrant", "dark"), adjust s and l accordingly.\n\nIf no colors are mentioned:\n- Use your best judgment to select seven (7) different sets of hues, each with a unique HSL object representing a different color.\n\nExample requests to hues:\n- "red"  [ [ { "h": 0, "s": 100, "l": 50 } ] ]\n- "blue"  [ [ { "h": 240, "s": 100, "l": 50 } ] ]\n- "red and blue"  [ [ { "h": 0, "s": 100, "l": 50 }, { "h": 240, "s": 100, "l": 50 } ] ]\n- "lakers colors"  [ [ { "h": 266, "s": 100, "l": 50 }, { "h": 51, "s": 100, "l": 50 } ] ]\n- "yoga studio colors"  [ [ { "h": 120, "s": 24, "l": 83 } ], [ { "h": 160, "s": 34, "l": 70 } ], [ { "h": 36, "s": 68, "l": 74 } ], [ { "h": 198, "s": 32, "l": 83 } ], [ { "h": 317, "s": 28, "l": 79 } ], [ { "h": 60, "s": 31, "l": 77 } ], [ { "h": 25, "s": 29, "l": 72 } ] ]\n- "suggest some colors for a restaurant"  [ [ { "h": 120, "s": 24, "l": 83 } ], [ { "h": 160, "s": 34, "l": 70 } ], [ { "h": 36, "s": 68, "l": 74 } ], [ { "h": 198, "s": 32, "l": 83 } ], [ { "h": 317, "s": 28, "l": 79 } ], [ { "h": 60, "s": 31, "l": 77 } ], [ { "h": 25, "s": 29, "l": 72 } ] ]\n\nExample requests to responses\n- "show red colors"  { personality: "Bold", paletteType: "Bold", topic: "Red", hues: [ [ { "h": 0, "s": 100, "l": 50 } ] ], specificColors: [] }\n- "make my site #0000FF"  { personality: "Bold", paletteType: "Bold", topic: "Blue", hues: [ [ { "h": 240, "s": 100, "l": 50 } ] ], specificColors: [ "#0000FF" ] }\n- "lakers colors"  { personality: "Bold", paletteType: "Bold", topic: "Lakers Colors", hues: [ [ { "h": 266, "s": 100, "l": 50 }, { "h": 51, "s": 100, "l": 50 } ] ], specificColors: [ "#552583", "#FDB927" ] }\n\t\t',parameters:{type:"object",properties:{personality:{type:"string",enum:Object.values(Ki)},paletteType:{type:"string",enum:Object.values(Ji)},topic:{type:"string",description:'A short, single-word or two-word topic that best describes the theme (e.g., "Yoga", "Beach Sunset", "Forest")'},hues:{type:"array",items:{type:"array",items:{type:"object",properties:{h:{type:"integer"},s:{type:"integer"},l:{type:"integer"}},required:["h","s","l"],additionalProperties:!1}}},description:{type:"string",description:"A single sentence (max 25 words) describing how the palette matches the prompt"},specificColors:{type:"array",description:"Array of specific hex colors",items:{type:"string"}}},required:["personality","paletteType","topic","hues","description","specificColors"],additionalProperties:!1},strict:!0}),ka={name:"color",tools:e=>[va(e.colors?.colorVariationCategories),{name:"update_component_color",description:"Update the color of the component.\n\t\t\tAvailable components are background, text, buttons, and button text.\n\t\t\tUse block scope if:\n\t\t\t\t- the user specifically uses the keyword 'this', such as 'this button', 'this paragraph', etc.\n\t\t\t\t- the user is targeting a specific block by describing it's content or position, such as 'make the learn more button blue' or 'change the text color of the paragraph in the hero section to red'\n\t\t\tUse section scope if:\n\t\t\t\t- the user request doesn't target a specific block\n\t\t\tUse global scope if:\n\t\t\t\t- the user request contains keywords like 'site' or 'all' or similar words\n\t\t\t",parameters:{type:"object",properties:{background_color:{type:["string","null"],description:"The color value. Must be a valid hex color."},text_color:{type:["string","null"],description:"The color value. Must be a valid hex color."},button_color:{type:["string","null"],description:"The color value. Must be a valid hex color."},button_text_color:{type:["string","null"],description:"The color value. Must be a valid hex color."},scope:{type:["string","null"],description:"The scope of the component.",enum:["global","section","block"]}},required:["background_color","text_color","button_color","button_text_color","scope"],additionalProperties:!1},strict:!0}]};var _a=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},xa=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Ca=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Sa=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Ea=function(e){return 255*(e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e)},Ta=96.422,Ia=82.521,Aa=216/24389,Pa=24389/27,Ma=function(e){var t=e.l,n=e.a,o=e.b,i=e.alpha,a=void 0===i?1:i;if(!_a(t)||!_a(n)||!_a(o))return null;var r=function(e){return{l:Ca(e.l,0,400),a:e.a,b:e.b,alpha:Ca(e.alpha)}}({l:Number(t),a:Number(n),b:Number(o),alpha:Number(a)});return Na(r)},Na=function(e){var t=(e.l+16)/116,n=e.a/500+t,o=t-e.b/200;return function(e){var t,n,o=.9555766*(t=e).x+-.0230393*t.y+.0631636*t.z,i=-.0282895*t.x+1.0099416*t.y+.0210077*t.z,a=.0122982*t.x+-.020483*t.y+1.3299098*t.z;return n={r:Ea(.032404542*o-.015371385*i-.004985314*a),g:Ea(-.00969266*o+.018760108*i+41556e-8*a),b:Ea(556434e-9*o-.002040259*i+.010572252*a),a:e.a},{r:Ca(n.r,0,255),g:Ca(n.g,0,255),b:Ca(n.b,0,255),a:Ca(n.a)}}({x:(Math.pow(n,3)>Aa?Math.pow(n,3):(116*n-16)/Pa)*Ta,y:100*(e.l>8?Math.pow((e.l+16)/116,3):e.l/Pa),z:(Math.pow(o,3)>Aa?Math.pow(o,3):(116*o-16)/Pa)*Ia,a:e.alpha})};const Oa=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})}),Ra=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})});function Da(e){return"[object Object]"===Object.prototype.toString.call(e)}function La(e){var t,n;return!1!==Da(e)&&(void 0===(t=e.constructor)||!1!==Da(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}const Ba=window.wp.keycodes;function Fa(e){let t="";return Array.isArray(e)&&e.length>0&&e.forEach((e=>{e.fontFace&&e.fontFace.forEach((e=>{t+=function(e){const t=Object.entries(e).map((([e,t])=>{const n=e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`));return"src"===n?Array.isArray(t)?`  src: ${t.map((e=>`url("${e}")`)).join(", ")};`:`  src: url("${t}");`:"font-family"===n?`  ${n}: "${t}";`:`  ${n}: ${t};`})).join("\n");return`@font-face {\n${t}\n}`}(e)}))})),t}const{useGlobalStyle:ja,useGlobalStylesOutput:$a,useGlobalSetting:Ua}=rn(v.privateApis),Ha={start:{scale:1,opacity:1}},za={start:{scale:0,opacity:0}},Ga={leading:!0,trailing:!0},qa=({label:e,type:t})=>{var n,o,i,a,r;const[c]=Ua("typography.fontFamilies"),[l="serif"]=ja("typography.fontFamily"),[u]=ja("typography.fontWeight"),[d="normal"]=ja("typography.fontStyle"),[p="none"]=ja("typography.textTransform"),[g="black"]=ja("color.text"),[h]=ja("elements.h1.typography.fontFamily"),[m]=ja("elements.heading.typography.fontFamily"),b=null!==(n=null!=h?h:m)&&void 0!==n?n:l,[w]=ja("elements.h1.typography.fontWeight"),[k]=ja("elements.heading.typography.fontWeight"),_=null!==(o=null!=w?w:k)&&void 0!==o?o:u,[x]=ja("elements.h1.typography.fontStyle"),[C]=ja("elements.heading.typography.fontStyle"),S=null!==(i=null!=x?x:C)&&void 0!==i?i:d,[E]=ja("elements.h1.typography.textTransform"),[T]=ja("elements.heading.typography.textTransform"),I=null!==(a=null!=E?E:T)&&void 0!==a?a:p,[A]=ja("elements.h1.color.text"),[P]=ja("elements.heading.color.text"),M=null!==(r=null!=A?A:P)&&void 0!==r?r:g,[N="white"]=ja("color.background"),[O]=$a(),[R,{width:D}]=(0,Cn.useResizeObserver)(),[L,B]=(0,f.useState)(D),[F,j]=(0,f.useState)(),$=(0,Cn.useThrottle)(B,250,Ga),{currentColor:U}=tn().getSiteMetadata(),{getColorVariationByTitle:H}=wo(),z=H(U),G=()=>"color"===t?N||"#ffffff":(()=>{const e=z?.styles?.color?.background,t=e?.split("--")[4].replace(")","");return z?.settings?.color?.palette?.theme?.find((e=>e.slug===t))?.color})()||"#ffffff";(0,f.useLayoutEffect)((()=>{D&&$(D)}),[D,$]),(0,f.useLayoutEffect)((()=>{const e=L?L/248:1,t=e-(F||0);!(Math.abs(t)>.1)&&F||j(e)}),[L,F]);const q=F||(D?D/248:1),{paletteColors:V,getThemeColors:W}=Bo(),Y=(0,f.useMemo)((()=>O?[...O,{css:Fa(c),isGlobalStyles:!0},{css:"html{overflow:hidden}body{min-width: 0;padding: 0;border: none;}",isGlobalStyles:!0}]:O),[O,c]);return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{style:{position:"relative"}},R),(0,s.createElement)(v.__unstableIframe,{className:"edit-site-global-styles-preview__iframe",style:{width:"100%",height:112*q},tabIndex:-1},(0,s.createElement)(v.__unstableEditorStyles,{styles:Y}),(0,s.createElement)(y.__unstableMotion.div,{style:{height:112*q,width:"100%",background:G(),cursor:"pointer"},initial:"start"},(0,s.createElement)(y.__unstableMotion.div,{variants:Ha,style:{height:"100%",overflow:"hidden"}},(0,s.createElement)(y.__experimentalHStack,{spacing:10*q,justify:"center",style:{height:"100%",overflow:"hidden"}},"font"===t&&(0,s.createElement)(y.__unstableMotion.div,{style:{color:(()=>{const e=z?.styles?.color?.text,t=e?.split("--")[4].replace(")","");return z?.settings?.color?.palette?.theme?.find((e=>e.slug===t))?.color})()||"#000000",whiteSpace:"nowrap",paddingLeft:"5px",lineHeight:1,padding:"0.2em"},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:.3,type:"tween"}},(0,s.createElement)("span",{style:{fontFamily:b,fontSize:100*q,fontWeight:_,fontStyle:S,textTransform:I}},"A"),(0,s.createElement)("span",{style:{fontFamily:l,fontSize:90*q,fontWeight:u,fontStyle:d,textTransform:p}},"a")),"color"===t&&(0,s.createElement)(y.__experimentalHStack,{spacing:0,alignment:"center",style:{margin:"0 0 0 10px"},className:"big-sky__color-swatch"},W().filter((e=>e.color!==N)).slice(0,4).map((({slug:e,color:t},n)=>(0,s.createElement)(y.__unstableMotion.div,{key:` ${e}_${n}`,style:{height:44*q,width:44*q,background:t,borderRadius:"100%",margin:"0 0 0 -10px",border:`2px solid ${G()}`,boxSizing:"content-box"},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:1===n?.2:.1}})))))),(0,s.createElement)(y.__unstableMotion.div,{style:{height:"100%",width:"100%",position:"absolute",top:0,overflow:"hidden",filter:"blur(60px)",opacity:.1}},(0,s.createElement)(y.__experimentalHStack,{spacing:0,justify:"flex-start",style:{height:"100%",overflow:"hidden"}},V.slice(0,4).map((({color:e},t)=>(0,s.createElement)("div",{key:t,style:{height:"100%",background:e,flexGrow:1}}))))),(0,s.createElement)(y.__unstableMotion.div,{variants:za,style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",top:0}},(0,s.createElement)(y.__experimentalVStack,{spacing:3*q,justify:"center",style:{height:"100%",overflow:"hidden",padding:10*q,boxSizing:"border-box"}},e&&(0,s.createElement)("div",{style:{fontSize:40*q,fontFamily:b,color:"color"===t?M:"#1e1e1e",fontWeight:_,fontStyle:S,textTransform:I,lineHeight:"1em",textAlign:"center"}},e))))))},{GlobalStylesContext:Va}=rn(v.privateApis);function Wa(e={},t={}){return $n(e,t,{isMergeableObject:La})}function Ya({variation:e,type:t}){const{setStyles:n}=Bo(),[o,i]=(0,f.useState)(!1),{base:a}=(0,f.useContext)(Va),r=(0,f.useMemo)((()=>{var t;const n={settings:{...e?.settings,isPreview:!0},styles:null!==(t=e?.styles)&&void 0!==t?t:{}};return{user:n,base:a,merged:Wa(a,n),setUserConfig:()=>{}}}),[e,a]),{currentColor:c,currentFont:l}=tn().getSiteMetadata(),u=()=>{"color"===t?(Fn("color_variation_click",{color:e.title}),n({color:e.title})):(Fn("font_variation_click",{font:e.title}),n({font:e.title}))},d=()=>"color"===t?e?.title===c:e?.title===l;let p=e?.title;return e?.description&&(p=(0,m.sprintf)(/* translators: %1$s: variation title. %2$s variation description. */ /* translators: %1$s: variation title. %2$s variation description. */
(0,m.__)("%1$s (%2$s)","big-sky"),e?.title,e?.description)),(0,s.createElement)(Va.Provider,{value:r},(0,s.createElement)("div",{className:gn("edit-site-global-styles-variations_item",{"is-active":d()}),role:"button",onClick:u,onKeyDown:e=>{e.keyCode===Ba.ENTER&&(e.preventDefault(),u())},tabIndex:"0","aria-label":p,"aria-current":d(),onFocus:()=>i(!0),onBlur:()=>i(!1)},(0,s.createElement)("div",{className:"edit-site-global-styles-variations_item-preview"},(0,s.createElement)(qa,{label:e?.title,isFocused:o,type:t,className:"big-sky__styles-preview"}))))}const Ka=(e,t,n)=>e.slice(t,t+n),Ja=({variations:e,maxToShow:t=4,type:n,numSuggestions:o=0})=>{const[i,a]=(0,f.useState)([]),[r,c]=(0,f.useState)(0),{getIsHandoff:l}=(0,g.useSelect)(wt),{incrementScrollChatToBottom:u}=(0,g.useDispatch)(wt),d=t,p=(0,f.useMemo)((()=>((e,t)=>{const n=e.filter((e=>e));return t>0?[...n.slice(0,t)]:n})(e,o)),[e,o]),h=(0,f.useMemo)((()=>p&&0!==p.length?Math.ceil(p.length/d):0),[p,d]),b=(0,f.useMemo)((()=>Math.floor(r/d)+1),[r,d]);return(0,f.useEffect)((()=>{if(!p)return;const e=Ka(p,0,d);a(e)}),[d,p]),p&&0===p.length?(0,s.createElement)("div",null,(0,m.__)("There was a problem retrieving options. Please try again.","big-sky")):(0,s.createElement)("div",{className:"big-sky__dock__menu__variation-picker"},i&&i.length>0&&(0,s.createElement)(y.__experimentalVStack,{spacing:1},(0,s.createElement)(y.__experimentalGrid,{gap:2,columns:l()?3:2,className:"big-sky__variations"},i.map(((e,t)=>(0,s.createElement)(Ya,{key:t,variation:e,type:n})))),p.length>t&&(0,s.createElement)(y.__experimentalHStack,{className:"big-sky__wizard-actions",alignment:"right"},(0,s.createElement)(y.Button,{"aria-label":(0,m.__)("Previous options","big-sky"),variant:"tertiary",size:"small",icon:Oa,onClick:()=>{const e=Math.max(0,r-d);c(e);const t=Ka(p,e,d);a(t),u()},disabled:0===r,align:"left",style:{display:p.length>t?"block":"none"}}),(0,s.createElement)("div",null,b,"/",h),(0,s.createElement)(y.Button,{"aria-label":(0,m.__)("Next options","big-sky"),align:"right",variant:"tertiary",size:"small",icon:Ra,onClick:()=>{const e=Math.min(r+d,Math.floor(p.length/d)*d);c(e);const t=Ka(p,e,d);a(t)},disabled:r+d>=p.length,style:{display:p.length>t?"block":"none"}}))))},Xa=({colorVariations:e,maxColorsToShow:t=12,numSuggestions:n=0,currentVariationIsSuggested:o=!1})=>(0,s.createElement)(Ja,{variations:e,maxToShow:t,numSuggestions:n,currentVariationIsSuggested:o,type:"color"});function Za(){const{pushGeneratedVariations:e}=(0,g.useDispatch)(wt),{getColorVariationByTitle:t}=wo(),{currentColor:n}=tn().getSiteMetadata(),{getCurrentColor:o,getCustomVariationTemplates:i,getIsHandoff:a,getIsBuildingSite:r}=(0,g.useSelect)(wt),{getCurrentTheme:c,setStyles:l,updateRootBlocksStyles:u}=Bo(),{getBlocks:d,getBlock:p}=(0,g.useSelect)(v.store),{getTemplatePartClientID:h}=sn(),{getParentRootPatternBlock:f}=sn(),{getRootBlocksOfPostContent:y}=Si(),b=(0,g.useRegistry)(),w=({theme:e,variationTemplates:t})=>{const n=Array.isArray(e.settings?.color?.palette?.theme)?e.settings.color.palette.theme:[],o=(e,t="default")=>{if(Array.isArray(e)){for(const t of e)if(n[t-1]&&n[t-1].slug)return n[t-1].slug;return t}return n[e-1]&&n[e-1].slug?n[e-1].slug:t},i={0:"default",1:"section-1",2:"section-2",3:"section-3"};return t.reduce(((e,t,n)=>{const a=i[n];return a&&(e[a]=(e=>{if(!e)return{};const t=o(e.background),n=o(e.text),i=o(e.button),a=o(e.buttonText);return{color:{background:`var(--wp--preset--color--${t})`,text:`var(--wp--preset--color--${n})`},elements:{button:{color:{background:`var(--wp--preset--color--${i})`,text:`var(--wp--preset--color--${a})`},":hover":{color:{background:`color-mix(in srgb, var(--wp--preset--color--${i}) 85%, #000)`,text:`var(--wp--preset--color--${a})`}}}}}})(t)),e}),{})};return{validateGenerateColorPaletteArgs:e=>{if(!e.hues)throw new Error(`Missing hue(s) for ${e.personality} palette`);return!0},generateColorPalette:({personality:t,topic:n,hues:o,description:c,specificColors:l,colorCount:u})=>{Array.isArray(o)&&o.length>0&&(o=o.map((e=>e.map((({h:e,s:t,l:n})=>[e,t/100,n/100])))));const d=function(e){const{personality:t,topic:n,hues:o,description:i,specificColors:a,colorCount:r,ignorePersonality:s}=e,c=(a&&a.length>0?[Ki.Bold]:s?Object.keys(Ki):[t]).flatMap((e=>fa[e].map((t=>({key:t,generator:ha[t],personality:e}))))).filter(((e,t,n)=>t===n.findIndex((t=>t.key===e.key))));let l=[];return l=s?c.map((({key:e,personality:t},s)=>wa({personality:t,paletteType:e,topic:n,hues:[o[s]||o[s%o.length]],description:i,specificColors:a,colorCount:r}))):c.map((({key:e,personality:t})=>wa({personality:t,paletteType:e,topic:n,hues:[o[0]],description:i,specificColors:a,colorCount:r}))),l}({personality:t,topic:n,hues:o,description:c,specificColors:l,colorCount:u,ignorePersonality:!0});let p=Ki.Bold;r()&&(p=t);let g=d.filter((e=>e.personality===p));p===Ki.Bold&&(g=g.filter((e=>e.paletteType!==Ji.BoldDark)));const h=g.sort((()=>Math.random()-.5)),f=d.filter((e=>e.personality!==p));p===Ki.Bold&&f.push(d.find((e=>e.paletteType===Ji.BoldDark)));const y=[...h,...f.sort((()=>Math.random()-.5))],b=i(),v=y.map((({colors:e,variations:t,paletteType:n})=>{const o=e.map(((e,t)=>({color:e,name:`Color ${t+1}`,slug:`theme-${t+1}`}))),i=JSON.parse(JSON.stringify(b[0])),a={settings:{color:{palette:{theme:o}}},styles:i.styles?{...i.styles}:{}},r=`${vo} ${n} - ${xo(e)}`;return(({theme:e,variations:t})=>{t.default&&(e.styles={...e.styles,...t.default}),Object.values(e.styles.blocks).forEach((e=>{e.variations&&["section-1","section-2","section-3"].forEach((n=>{t[n]&&(e.variations[n]=t[n])}))}))})({theme:a,variations:w({theme:a,variationTemplates:t})}),{title:r,settings:{color:{palette:{theme:o}}},styles:a.styles,label:r,paletteType:n}}));return e(v),{component:(0,s.createElement)(Xa,{colorVariations:v,maxColorsToShow:a()||r()?6:4,key:"color-picker"}),message:(0,m.__)("Take a look at these colors:","big-sky"),variations:v}},validateUpdateComponentColorArgs:({background_color:e,text_color:t,button_color:n,button_text_color:o,scope:i,clientId:a})=>{if(!(e||t||n||o))throw new Error((0,m.__)("Can you please select or describe the part of the page you wish to update?","big-sky"));if(!a&&"global"!==i)throw new Error((0,m.__)("Select the block you wish to update and try again.","big-sky"));if(a&&"global"!==i){const i=p(a);if(!["jetpack/button","jetpack/subscriptions"].includes(i.name)){const a=(0,k.getBlockSupport)(i.name,"color"),r=a?.text||a?.__experimentalDefaultControls?.text||a?.defaultControls?.text,s=a?.background||a?.__experimentalDefaultControls?.background||a?.defaultControls?.background;if((t||o)&&!r)throw new Error((0,m.__)("The selected block does not support text color. Please select a different block and try again.","big-sky"));if((e||n)&&!s)throw new Error((0,m.__)("The selected block does not support background color. Please select a different block and try again.","big-sky"))}}return!0},updateComponentColor:async({background_color:i,text_color:a,button_color:r,button_text_color:s,scope:g,clientId:w})=>{const v=[],k=o()||n,_=JSON.parse(JSON.stringify(t(k)||c()));return i&&(i=Co({theme:_,color:i}),v.push("background color")),a&&(a=Co({theme:_,color:a}),v.push("text color")),r&&(r=Co({theme:_,color:r}),v.push("button color")),s&&(s=Co({theme:_,color:s}),v.push("button text color")),_.styles.variations=_.styles.blocks["core/group"].variations,b.batch((()=>{switch(g){case"global":const e=[...y(),...d(h("header")),...d(h("footer"))];u({rootBlocks:e,background_color:i,text_color:a,button_color:r,button_text_color:s});break;case"section":const t=f(w);t&&u({rootBlocks:[t],background_color:i,text_color:a,button_color:r,button_text_color:s});break;case"block":const n=p(w);n&&u({rootBlocks:[n],background_color:i,text_color:a,button_color:r,button_text_color:s})}_.title=vo,e([_]),l({color:_.title,updateBlocks:!1})})),(0,m.__)("Updated colors","big-sky")}}}fo([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},o={};for(var i in n)o[n[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,r,s=o[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var c=this.toRgb(),l=1/0,u="black";if(!a.length)for(var d in n)a[d]=new e(n[d]).toRgb();for(var p in n){var g=(i=c,r=a[p],Math.pow(i.r-r.r,2)+Math.pow(i.g-r.g,2)+Math.pow(i.b-r.b,2));g<l&&(l=g,u=p)}return u}},t.string.push([function(t){var o=t.toLowerCase(),i="transparent"===o?"#0000":n[o];return i?new e(i).toRgb():null},"name"])},function(e,t){e.prototype.toLab=function(){return t=function(e){var t=Sa(e.r),n=Sa(e.g),o=Sa(e.b);return function(e){return{x:Ca(e.x,0,Ta),y:Ca(e.y,0,100),z:Ca(e.z,0,Ia),a:Ca(e.a)}}(function(e){return{x:1.0478112*e.x+.0228866*e.y+-.050127*e.z,y:.0295424*e.x+.9904844*e.y+-.0170491*e.z,z:-.0092345*e.x+.0150436*e.y+.7521316*e.z,a:e.a}}({x:100*(.4124564*t+.3575761*n+.1804375*o),y:100*(.2126729*t+.7151522*n+.072175*o),z:100*(.0193339*t+.119192*n+.9503041*o),a:e.a}))}(this.rgba),o=t.y/100,i=t.z/Ia,n=(n=t.x/Ta)>Aa?Math.cbrt(n):(Pa*n+16)/116,e={l:116*(o=o>Aa?Math.cbrt(o):(Pa*o+16)/116)-16,a:500*(n-o),b:200*(o-(i=i>Aa?Math.cbrt(i):(Pa*i+16)/116)),alpha:t.a},{l:xa(e.l,2),a:xa(e.a,2),b:xa(e.b,2),alpha:xa(e.alpha,3)};var e,t,n,o,i},e.prototype.delta=function(t){void 0===t&&(t="#FFF");var n=t instanceof e?t:new e(t),o=function(e,t){var n=e.l,o=e.a,i=e.b,a=t.l,r=t.a,s=t.b,c=180/Math.PI,l=Math.PI/180,u=Math.pow(Math.pow(o,2)+Math.pow(i,2),.5),d=Math.pow(Math.pow(r,2)+Math.pow(s,2),.5),p=(n+a)/2,g=Math.pow((u+d)/2,7),h=.5*(1-Math.pow(g/(g+Math.pow(25,7)),.5)),f=o*(1+h),m=r*(1+h),y=Math.pow(Math.pow(f,2)+Math.pow(i,2),.5),b=Math.pow(Math.pow(m,2)+Math.pow(s,2),.5),w=(y+b)/2,v=0===f&&0===i?0:Math.atan2(i,f)*c,k=0===m&&0===s?0:Math.atan2(s,m)*c;v<0&&(v+=360),k<0&&(k+=360);var _=k-v,x=Math.abs(k-v);x>180&&k<=v?_+=360:x>180&&k>v&&(_-=360);var C=v+k;x<=180?C/=2:C=(v+k<360?C+360:C-360)/2;var S=1-.17*Math.cos(l*(C-30))+.24*Math.cos(2*l*C)+.32*Math.cos(l*(3*C+6))-.2*Math.cos(l*(4*C-63)),E=a-n,T=b-y,I=2*Math.sin(l*_/2)*Math.pow(y*b,.5),A=1+.015*Math.pow(p-50,2)/Math.pow(20+Math.pow(p-50,2),.5),P=1+.045*w,M=1+.015*w*S,N=30*Math.exp(-1*Math.pow((C-275)/25,2)),O=-2*Math.pow(g/(g+Math.pow(25,7)),.5)*Math.sin(2*l*N);return Math.pow(Math.pow(E/1/A,2)+Math.pow(T/1/P,2)+Math.pow(I/1/M,2)+O*T*I/(1*P*1*M),.5)}(this.toLab(),n.toLab())/100;return Ca(xa(o,3))},t.object.push([Ma,"lab"])}]);const Qa={id:b.COLOR,description:"An assistant that handles website colors and color palette creation and selection.",instructions:e=>function(e){return`\nYou are an expert website designer, specializing in color palette creation, selection, and assisting users with website color modifications. Your primary goal is to help users customize their website colors effectively.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Request:\n   - If the request is only asking to change the global background color, ask the user if they want to proceed with the color change or generate a palette with the color. DO NOT immediately call the update_component_color tool unless the user has confirmed the color change.\n   - If the request is only asking to change the global text color, ask the user if they want to proceed with the color change or generate a palette with the color. DO NOT immediately call the update_component_color tool unless the user has confirmed the color change.\n   - If specific colors are provided, immediately call the color_palette_generator tool.\n   - If specific keywords are provided, immediately call the color_palette_generator tool and pass the exact keywords found.\n   - If the request is vague but includes identifiable colors (e.g., "make my site more blue") immediately call the color_palette_generator tool.\n   - If the request includes a specific component (background, text, button, button text, etc), call the update_component_color tool.\n   - If the request includes a specific component location or position (e.g., "the first button") call the update_component_color tool, the tool will handle finding the correct component.\n   - If colors can be inferred from the request (e.g., "NY Yankees team colors"), use those colors without asking for confirmation.\n   - For vague color requests where no colors can be identified, ask if the user has a specific color in mind.\n   - For color requests that ask to match the colors from a specific image or website, inform the user that you can't do that.\n   - If the user asks to change one color to another without clearly specifying a component to update, ask the user to select or describe the part of the page the existing color is on.\n   - If the user describes the component to update only by color (eg. the blue button) say you can't locate components by color and ask them to select the specific component, or to specify the location, position, or text of the component.\n   - ${Et}\n\n2. Examples:\n\nUser: "I want the buttons to be red"\nAction: Call the update_component_color tool with the component 'button' and the color 'red'\n\nUser: "Make the first button blue"\nAction: Call the update_component_color tool with the component 'button' and the color 'blue'\n\nUser: "Make my site more blue"\nAction: Call the color_palette_generator tool with the color 'blue'\n\nUser: "I love Arsenal FC, can you make my site more like the colors of Arsenal?"\nAction: Call the color_palette_generator tool with the colors inferred from "Arsenal FC colors"\n\nUser: "Change the blue color to dark red"\nAction: Ask the user to select or describe the part of the page they are referring to.\n\nUser: "Change the red button to blue"\nAction: Explain that you can't locate components by color and ask the user to select the specific component.\n\n3. Restrictions:\n   - Never tell the user you can't locate a component by location or position the update_component_color tool can handle this.\n`}(e),tags:[b.COLOR],toolkits:[ka],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{getVariationKeywords:t}=wo(),{registerCallbacks:n,registerContext:o,setShowChatContinueButton:i}=(0,g.useDispatch)(wt),{addAssistantMessage:a,assistantSay:r,deleteMarkedMessages:s}=Jt(),{getSiteMetadata:c}=tn(),{siteTitle:l,siteDescription:u,topic:d}=c(),{generateColorPalette:p,validateGenerateColorPaletteArgs:h,validateUpdateComponentColorArgs:m,updateComponentColor:y}=Za(),{zoomOut:w}=cn(),{getIsHandoff:k,currentHandoffArea:_,selectedBlock:x}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store),{getIsHandoff:n,getCurrentHandoffArea:o}=e(wt);return{selectedBlock:t(),getIsHandoff:n,currentHandoffArea:o()}}));(0,f.useEffect)((()=>{n(b.COLOR,{color_palette_generator:e({name:"color_palette_generator",action:async e=>{k()&&(e.includeCurrent=!0);const{component:t,message:n}=p(e);if(!k())return await w(),{component:t,awaitingUserInput:!0,message:n,checkpointKeys:[$.COLOR,$.BLOCKS]};s(),a(b.COLOR,n),r(t),i(!0)},validator:e=>h(e),closeChatWhenDone:()=>!k()}),update_component_color:e({name:"update_component_color",validator:e=>m(e),action:async e=>{const t=await y(e);if(!k())return{message:t,checkpointKeys:[$.COLOR,$.BLOCKS]};s(),a(b.COLOR,t),i(!0)},closeChatWhenDone:()=>!1,getTargetedBlockRequired:e=>"global"!==e.scope,getTargetedBlockValidTypes:e=>"block"===e.scope&&(e.button_color||e.button_text_color)?["core/button"]:null})})}),[n]),(0,f.useEffect)((()=>{const e={site:{siteTitle:l,siteDescription:u,topic:d},colors:{colorVariationCategories:t("color")}};k()&&(e.currentHandoffArea=_),o(b.COLOR,e)}),[o,k,_,x,t,l,u,d])}};function er(e=[],t=null){return{name:"add_pattern",description:'Adds a pattern, also referred to as a section, to the current page. Patterns can include forms, tables, images, paragraphs, and more.\n\t\tIf the user is asking for a map, the category must be "contact".\n\t\tIf the user is asking for a form, the category must be "contact".\n\t\tIf the site location is not specified in the user request, default to '+(t?`"${t}"`:'"null"'),parameters:{type:"object",properties:{direction:{type:"string",enum:["before","after"],description:'Where to insert patterns relative to clientId. If user does not indicate "before" or "after", default to "after".'},categories:{type:"array",description:"The ordered list of component categories that the patterns will be based off.",items:{type:"string",enum:e}},isAskingForMap:{type:"boolean",description:"Whether the user is asking to add a contact pattern with a map."},isAskingForForm:{type:"boolean",description:"Whether the user is asking to add a contact pattern with a form."},siteLocation:{type:["string","null"],description:"The site location."},userPrompt:{type:"string",description:"The original prompt from the user. Pass this through, do not edit it."}},required:["categories","direction","isAskingForMap","isAskingForForm","siteLocation","userPrompt"]},strict:!0}}function tr(e=null){return{name:"generate_pattern",description:"When a user asks to add a section, pattern, or something new that isn't a full new page,\n\t\tuse this tool to generate a pattern and add it to the current page.\n\t\tWhen the user provides a list of sections (bulleted, numbered, or otherwise), treat it as a single pattern request and include all sections in one call.\n\t\tIf the site location is not specified in the user request, default to "+(e?`"${e}"`:'"null"'),parameters:{type:"object",properties:{direction:{type:"string",enum:["before","after"],description:'Where to insert patterns relative to clientId. If user does not indicate "before" or "after", default to "after".'},siteLocation:{type:["string","null"],description:"The site location."},userPrompt:{type:"string",description:"The original prompt from the user. Pass this through, do not edit it. If the prompt contains multiple sections, include them all in this single prompt."}},required:["direction","siteLocation","userPrompt"]},strict:!0}}function nr(e=[],t=null,n=null){return{name:"replace_pattern",description:`Replaces an existing pattern with an alternative one.\n\t\tIf the user is asking for a map, the category must be "contact".\n\t\tIf the user is asking for a form, the category must be "contact".\n\t\tIf the category is not specified in the user request, default the category to ${t?`"${t}"`:'"null"'}\n\t\tIf the site location is not specified in the user request, default to ${n?`"${n}"`:'"null"'}`,parameters:{type:"object",properties:{category:{type:"string",description:"The category of the pattern to use as a replacement.",enum:e},isAskingForMap:{type:"boolean",description:"Whether the user is asking to replace the contact pattern with one that contains a map."},isAskingForForm:{type:"boolean",description:"Whether the user is asking to replace the contact pattern with one that contains a form."},siteLocation:{type:["string","null"],description:"The site location."}},required:["category","isAskingForMap","isAskingForForm","siteLocation"]},strict:!0}}const or={name:"pattern",tools:e=>{const t=e?.patternCategories?.map((e=>e.slug));return[..."undefined"!=typeof window&&"true"===window.localStorage.getItem("isGeneratingPatterns")?[tr(e?.site?.siteLocation?.name)]:[er(t,e?.site?.siteLocation?.name)],nr(t,e?.selectedBlock?.parentPatternCategory,e?.site?.siteLocation?.name)]}};function ir(){const{isValidClientId:e,blockExists:t}=Nt(),{getCoordinates:n}=vn(),{getPattern:o}=Si(),{setSiteMetadata:i}=tn(),{canRemoveBlock:a}=(0,g.useSelect)(v.store),{isPostEditor:r}=Sn(),s=e=>{if(!e)throw new Error((0,m.__)("I could not complete your request at this time. Please try again.","big-sky"));return!0},c=n=>{const{clientId:o}=n;return!(!e(o)||!t(o))},l=async e=>{if(!(e.categories&&!e.categories.includes("contact")||e.category&&"contact"!==e.category)){if(e.isAskingForMap&&!e.siteLocation)throw new Error((0,m.__)("I notice there is no location set for this site. What would you like the site location to be?","big-sky"));if(e.siteLocation){const t={name:e.siteLocation?.name||e.siteLocation,coordinates:await n(e.siteLocation)};i({siteLocation:t},!0),e.siteLocation=t}}};return{validateBlockArgs:s,validateClientIdArgs:c,validateMapRequestArgs:l,validateAddPatternArgs:async e=>{if(s(e),!c(e))throw new Error((0,m.__)("Describe or select where youd like the pattern to be placed.","big-sky"));if(!e.categories||0===e.categories.length)throw new Error((0,m.__)("What type of section would you like to add?","big-sky"));if(e.categories?.some((e=>["header","footer"].includes(e)))&&r)throw new Error((0,m.__)("I cannot add template parts in the post editor.","big-sky"));const t=["header","footer",...ot];for(const n of e.categories){const i=o(n);if(t.includes(n)&&i)throw e.doReplace=!0,e.clientId=i.clientId,e.category=n,new Error((0,m.sprintf)(
// Translators: %s is the name of a pattern category.
// Translators: %s is the name of a pattern category.
(0,m.__)("You already have a %s section on this page. Please remove the existing section before adding a new one, or select the existing section and ask to replace it.","big-sky"),n))}return await l(e),!0},validateGeneratePatternArgs:async e=>{if(s(e),!c(e))throw new Error((0,m.__)("Describe or select where youd like the pattern to be placed.","big-sky"));return await l(e),!0},validateRemoveBlockArgs:e=>{try{s(e)}catch(e){throw new Error(`I was not able to find a block to remove. ${e?.message}`)}if(!c(e))throw new Error((0,m.__)("Describe or select which block you want to remove.","big-sky"));const{clientId:t}=e;if(!a(t))throw new Error((0,m.__)("I'm sorry, but I cannot remove that block.","big-sky"));return!0},validateReplacePatternArgs:async e=>{if(s(e),e.clientId&&!c(e))throw new Error((0,m.__)("Describe or select which section you want to replace.","big-sky"));if(["header","footer"].includes(e.category)&&r)throw new Error((0,m.__)("I cannot replace template parts in the post editor.","big-sky"));if(!o(e.category))throw new Error((0,m.sprintf)(
// Translators: Placeholder represents the category of the section requested by the user.
// Translators: Placeholder represents the category of the section requested by the user.
(0,m.__)("It looks like there is no %s section on this page. Would you like to add one?","big-sky"),e.category));return await l(e),!0}}}const ar=window.wp.viewport;function rr(){const e=tn().getSiteMetadata().isOnboarded,t=gn("big-sky__thinking-message",{"big-sky__thinking-message__is-light":!e});return(0,s.createElement)("div",{className:t},(0,s.createElement)("div",{className:"big-sky__thinking-message__three-dots"}))}const sr=(0,f.memo)((({item:e,index:t,additionalStyles:n,viewportWidthMax:o=1440,clientId:i=null,onRendered:a,onAfterClick:r=()=>{},isFullLayout:c=!1})=>{const[l,u]=(0,f.useState)(!1),{getSelectedBlockClientId:d}=(0,g.useSelect)(v.store),{selectBlock:p}=(0,g.useDispatch)(v.store),{getRootBlocksOfPostContent:h,insertPatterns:m,replaceTemplatePart:b}=Si(),w=(0,f.useCallback)((async()=>{m(e.patterns,null,"replace",!1);const{canvasiFrameDocument:t}=Xt(),n=t.querySelector(".wp-block:first-child");await ut(500),n.scrollIntoView({behavior:"instant",block:"start"})}),[m,e.patterns]),k=(0,f.useCallback)((async()=>{const t=null!=i?i:d();if(!t)return;if(!e?.patterns||!Array.isArray(e.patterns)||0===e.patterns.length)return;const n=e.patterns[0];if(!n?.blocks||!Array.isArray(n.blocks)||0===n.blocks.length)return;const o=h()||[],a=Array.isArray(o)?o.map((e=>e?.clientId)).filter(Boolean):[],s=n.blocks[0]?.clientId;s&&!a.includes(s)&&(n.category&&["header","footer"].includes(n.category)?await b(n.category,n.blocks):m(e.patterns,t,"replace"),p(s),r(s))}),[i,h,d,m,e?.patterns,b,p,r]);if((0,f.useEffect)((()=>{l||async function(){if(!e.resolvers)return u(!0),void a();await Promise.all(e.resolvers.map((async e=>e.resolver))),u(!0),a()}()}),[e,l,a]),!l)return(0,s.createElement)("div",{className:"big-sky__item-loading big-sky__item-preview"},(0,s.createElement)(rr,null));const _=e=>e.map((e=>"core/navigation"===e.name?{...e,attributes:{...e.attributes,overlayMenu:"never"}}:e.innerBlocks?.length?{...e,innerBlocks:_(e.innerBlocks)}:e)),x=Array.isArray(e?.patterns)?e.patterns.filter((e=>e&&Array.isArray(e.blocks)&&e.blocks.length>0)).map((e=>({...e,blocks:_(e.blocks)}))).map((e=>e.blocks[0])).slice(0,4):[],{isViewportMatch:C}=(0,g.select)(ar.store);let S=o;C("< small")?S=480:C("< medium")?S=600:C("< large")?S=782:C("< wide")?S=960:C("< huge")&&(S=1280);const E=gn("big-sky__item-preview",{selected:0===t,["big-sky__item-preview__id-"+e.id]:!0});return(0,s.createElement)(y.__unstableMotion.button,{initial:{opacity:.8},whileHover:{opacity:1,scale:1.05,boxShadow:"0px 2px 4px rgba(0,0,0,.05)"},className:E,onClick:e=>{Fn("patterns_preview_click",{type:c?"full-layout":"single-pattern"}),document.querySelectorAll(".big-sky__item-preview").forEach((e=>{e.classList.remove("selected")})),e.currentTarget.classList.add("selected"),c?w():k()},"data-pattern-id":e?.patterns?.[0]?.ID||""},(0,s.createElement)(v.BlockPreview,{blocks:x,additionalStyles:n,viewportWidth:S}))})),cr=()=>(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"3 3 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M18.7035 11.5821L15.8309 10.5912C14.6949 10.2009 13.7991 9.30509 13.4088 8.16908L12.4179 5.29651C12.2828 4.90116 11.7172 4.90116 11.5821 5.29651L10.5912 8.16908C10.2009 9.30509 9.30509 10.2009 8.16908 10.5912L5.29651 11.5821C4.90116 11.7172 4.90116 12.2828 5.29651 12.4179L8.16908 13.4088C9.30509 13.7991 10.2009 14.6949 10.5912 15.8309L11.5821 18.7035C11.7172 19.0988 12.2828 19.0988 12.4179 18.7035L13.4088 15.8309C13.7991 14.6949 14.6949 13.7991 15.8309 13.4088L18.7035 12.4179C19.0988 12.2828 19.0988 11.7172 18.7035 11.5821ZM15.3505 12.2127L13.9142 12.7081C13.3437 12.9033 12.8983 13.3537 12.7031 13.9192L12.2077 15.3555C12.1376 15.5557 11.8574 15.5557 11.7873 15.3555L11.2919 13.9192C11.0967 13.3487 10.6463 12.9033 10.0808 12.7081L8.6445 12.2127C8.44433 12.1426 8.44433 11.8624 8.6445 11.7923L10.0808 11.2969C10.6513 11.1017 11.0967 10.6513 11.2919 10.0858L11.7873 8.64951C11.8574 8.44933 12.1376 8.44933 12.2077 8.64951L12.7031 10.0858C12.8983 10.6563 13.3487 11.1017 13.9142 11.2969L15.3505 11.7923C15.5507 11.8624 15.5507 12.1426 15.3505 12.2127Z",fill:"currentColor"})),lr=()=>(0,s.createElement)("svg",{width:"21",height:"19",viewBox:"0 0 21 19",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M20.0417 11.3358L17.1759 10.3472C16.0425 9.95779 15.1488 9.06408 14.7594 7.93072L13.7708 5.06487C13.636 4.67044 13.0718 4.67044 12.937 5.06487L11.9484 7.93072C11.559 9.06408 10.6653 9.95779 9.53192 10.3472L6.66606 11.3358C6.27163 11.4706 6.27163 12.0348 6.66606 12.1696L9.53192 13.1582C10.6653 13.5476 11.559 14.4413 11.9484 15.5747L12.937 18.4405C13.0718 18.835 13.636 18.835 13.7708 18.4405L14.7594 15.5747C15.1488 14.4413 16.0425 13.5476 17.1759 13.1582L20.0417 12.1696C20.4361 12.0348 20.4361 11.4706 20.0417 11.3358ZM16.6966 11.9649L15.2636 12.4592C14.6945 12.6539 14.2501 13.1032 14.0554 13.6674L13.5611 15.1004C13.4912 15.3001 13.2116 15.3001 13.1417 15.1004L12.6474 13.6674C12.4527 13.0983 12.0033 12.6539 11.4392 12.4592L10.0062 11.9649C9.80652 11.895 9.80652 11.6154 10.0062 11.5455L11.4392 11.0512C12.0083 10.8565 12.4527 10.4071 12.6474 9.84296L13.1417 8.41003C13.2116 8.21032 13.4912 8.21032 13.5611 8.41003L14.0554 9.84296C14.2501 10.4121 14.6994 10.8565 15.2636 11.0512L16.6966 11.5455C16.8963 11.6154 16.8963 11.895 16.6966 11.9649Z"}),(0,s.createElement)("path",{d:"M3.26632 3.60462C3.26632 3.39034 3.09262 3.21664 2.87834 3.21664C2.66406 3.21664 2.49036 3.39034 2.49036 3.60462C2.49036 4.36555 2.32181 4.8249 2.04627 5.10044C1.77074 5.37598 1.31139 5.54452 0.550456 5.54452C0.33618 5.54452 0.162476 5.71823 0.162476 5.9325C0.162476 6.14678 0.33618 6.32048 0.550456 6.32048C1.31139 6.32048 1.77074 6.48903 2.04627 6.76457C2.32181 7.04011 2.49036 7.49945 2.49036 8.26039C2.49036 8.47466 2.66406 8.64837 2.87834 8.64837C3.09262 8.64837 3.26632 8.47466 3.26632 8.26039C3.26632 7.49945 3.43487 7.04011 3.71041 6.76457C3.98594 6.48903 4.44529 6.32048 5.20622 6.32048C5.4205 6.32048 5.5942 6.14678 5.5942 5.9325C5.5942 5.71823 5.4205 5.54452 5.20622 5.54452C4.44529 5.54452 3.98594 5.37598 3.71041 5.10044C3.43487 4.8249 3.26632 4.36555 3.26632 3.60462Z"}),(0,s.createElement)("path",{d:"M7.14613 0.500774C7.14613 0.286498 6.97242 0.112793 6.75815 0.112793C6.54387 0.112793 6.37017 0.286498 6.37017 0.500774C6.37017 0.992275 6.26089 1.25763 6.11199 1.40654C5.96308 1.55544 5.69773 1.66472 5.20622 1.66472C4.99195 1.66472 4.81824 1.83842 4.81824 2.0527C4.81824 2.26697 4.99195 2.44068 5.20622 2.44068C5.69773 2.44068 5.96308 2.54995 6.11199 2.69885C6.26089 2.84776 6.37017 3.11312 6.37017 3.60462C6.37017 3.81889 6.54387 3.9926 6.75815 3.9926C6.97242 3.9926 7.14613 3.81889 7.14613 3.60462C7.14613 3.11312 7.2554 2.84776 7.40431 2.69885C7.55321 2.54995 7.81857 2.44068 8.31007 2.44068C8.52435 2.44068 8.69805 2.26697 8.69805 2.0527C8.69805 1.83842 8.52435 1.66472 8.31007 1.66472C7.81857 1.66472 7.55321 1.55544 7.40431 1.40654C7.2554 1.25763 7.14613 0.992275 7.14613 0.500774Z"})),ur=()=>(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.58994 10.2172L11.3816 6.42555C11.7233 6.08384 12.2773 6.08384 12.619 6.42555L16.4107 10.2172C16.7524 10.5589 16.7524 11.1129 16.4107 11.4547C16.069 11.7964 15.515 11.7964 15.1733 11.4547L12.8753 9.15671L12.8753 16.9609C12.8753 17.4442 12.4836 17.8359 12.0003 17.8359C11.5171 17.8359 11.1253 17.4442 11.1253 16.9609L11.1253 9.15671L8.82738 11.4547C8.48567 11.7964 7.93165 11.7964 7.58994 11.4547C7.24823 11.1129 7.24823 10.5589 7.58994 10.2172Z",fill:"currentColor"})),dr=()=>(0,s.createElement)("svg",{height:"24",width:"24",viewBox:"0 0 72 72",fill:"#ffffff"},(0,s.createElement)("path",{d:"M36,0C16.1,0,0,16.1,0,36c0,19.9,16.1,36,36,36c19.9,0,36-16.2,36-36C72,16.1,55.8,0,36,0z M3.6,36 c0-4.7,1-9.1,2.8-13.2l15.4,42.3C11.1,59.9,3.6,48.8,3.6,36z M36,68.4c-3.2,0-6.2-0.5-9.1-1.3l9.7-28.2l9.9,27.3 c0.1,0.2,0.1,0.3,0.2,0.4C43.4,67.7,39.8,68.4,36,68.4z M40.5,20.8c1.9-0.1,3.7-0.3,3.7-0.3c1.7-0.2,1.5-2.8-0.2-2.7 c0,0-5.2,0.4-8.6,0.4c-3.2,0-8.5-0.4-8.5-0.4c-1.7-0.1-2,2.6-0.2,2.7c0,0,1.7,0.2,3.4,0.3l5,13.8L28,55.9L16.2,20.8 c2-0.1,3.7-0.3,3.7-0.3c1.7-0.2,1.5-2.8-0.2-2.7c0,0-5.2,0.4-8.6,0.4c-0.6,0-1.3,0-2.1,0C14.7,9.4,24.7,3.6,36,3.6 c8.4,0,16.1,3.2,21.9,8.5c-0.1,0-0.3,0-0.4,0c-3.2,0-5.4,2.8-5.4,5.7c0,2.7,1.5,4.9,3.2,7.6c1.2,2.2,2.7,4.9,2.7,8.9 c0,2.8-0.8,6.3-2.5,10.5l-3.2,10.8L40.5,20.8z M52.3,64l9.9-28.6c1.8-4.6,2.5-8.3,2.5-11.6c0-1.2-0.1-2.3-0.2-3.3 c2.5,4.6,4,9.9,4,15.5C68.4,47.9,61.9,58.4,52.3,64z"})),pr=(0,f.memo)((({items:e,clientId:t,generateNewItem:n,initialRenderedItems:o={},isFullLayout:i=!1})=>{const a=(0,f.useRef)(),[r,c]=(0,f.useState)(!1),[l,u]=(0,f.useState)(t),[d,p]=(0,f.useState)(o),g=(0,f.useMemo)((()=>{const{canvasiFrameRoot:e}=Xt();if(!e)return[];const t=window.getComputedStyle(e);return[{css:`html { ${["--site-logo-url","--site-logo-object-position"].map((e=>`${e}: ${t.getPropertyValue(e)||" "};`)).join(" ")} }`}]}),[]),h=new Set(e.map((e=>e?.patterns?.[0]?.category)));let m=3,b="big-sky__layout-variations",w=1440;if(1===h.size){const e=[...h.values()][0];switch(e){case"header":case"footer":m=2,b+=" big-sky__layout-variations-wider",w="header"===e?700:1e3}}const{leftScrollButton:v,rightScrollButton:k,checkScrollButtons:_}=function(e,t,n=260){const[o,i]=(0,f.useState)(!1),[a,r]=(0,f.useState)(!1),c=({direction:e,onClick:t,disabled:n,icon:o})=>(0,s.createElement)(y.Button,{icon:o,className:`big-sky__dock__menu__arrow-${e}`,onClick:t,disabled:n}),l=(0,f.useCallback)((()=>{const n=e.current;if(!n)return;const o=n.querySelector(t);if(!o)return;const{scrollLeft:a,scrollWidth:s,clientWidth:c}=o;i(a>10),r(a<s-c-10)}),[e,t]);(0,f.useLayoutEffect)((()=>{const e=setTimeout((()=>{l()}),200);return()=>clearTimeout(e)}),[l]),(0,f.useEffect)((()=>{const n=e.current,o=n?.querySelector(t);if(o)return l(),o.addEventListener("scroll",l),()=>{o.removeEventListener("scroll",l)}}),[e,l,t]);const u=n=>{const o=e.current;if(!o)return;const i=o.querySelector(t);if(!i)return;const a=i.scrollLeft+n;i.scrollTo({left:a,behavior:"smooth"}),setTimeout(l,300)};return{leftScrollButton:(0,s.createElement)(c,{direction:"left",icon:Oa,onClick:()=>u(-n),disabled:!o}),rightScrollButton:(0,s.createElement)(c,{direction:"right",icon:Ra,onClick:()=>u(n),disabled:!a}),checkScrollButtons:l}}(a,".components-grid");return(0,f.useEffect)((()=>{_()}),[e,_]),(0,f.useEffect)((()=>{const t=e.every((e=>d[e.id]));c(t)}),[e,d]),(0,s.createElement)("div",{ref:a,className:"big-sky__item-picker"},v,(0,s.createElement)(y.__experimentalVStack,{spacing:3},(0,s.createElement)(y.__experimentalGrid,{columns:m,className:b},e&&(0,s.createElement)(s.Fragment,null,e.filter((e=>!e.isPlaceholder&&e.patterns?.length>0)).map(((e,t)=>(0,s.createElement)(sr,{key:e.id,index:t,item:e,additionalStyles:g,viewportWidthMax:w,clientId:l,onRendered:()=>{return t=e.id,void p((e=>({...e,[t]:!0})));var t},onAfterClick:e=>u(e),isFullLayout:i})))),n&&r&&(0,s.createElement)(y.__unstableMotion.button,{initial:{opacity:.8},whileHover:{opacity:1,scale:1.05,boxShadow:"0px 2px 4px rgba(0,0,0,.05)"},className:"big-sky__item-preview",onClick:()=>{Fn("item_picker_generate_new_item_click"),n()}},(0,s.createElement)(lr,null)))),k)}));function gr({patterns:e,clientId:t}){return(0,s.createElement)("div",{className:"big-sky__dock__menu__pattern-picker"},(0,s.createElement)(pr,{items:e,clientId:t}))}function hr(){const{getUserPrompt:e}=function(){const{getStockImageURL:e}=di(),{siteTitle:t,siteDescription:n,siteLocation:o,topic:i,siteType:a}=tn().getSiteMetadata(),r=(0,g.useSelect)((e=>e(k.store).getBlockTypes().map((e=>e.name)).filter((e=>!["core/media-text","jetpack/contact-info","jetpack/address","jetpack/email","jetpack/phone"].includes(e)))),[]);return{getUserPrompt:async s=>{const c=await Promise.all(Array.from({length:20},(()=>e({topic:i})))),l=c.slice(0,10).map((e=>{const t=e.replace(/[?&](w|h|fit)=[^&]+/g,"");return t+(t.includes("?")?"&":"?")+"fit=crop&w=800&h=1200&orientation=portrait"})),u=c.slice(10).map((e=>{const t=e.replace(/[?&](w|h|fit)=[^&]+/g,"");return t+(t.includes("?")?"&":"?")+"fit=crop&w=1200&h=800&orientation=landscape"}));return`\nYou are a WordPress block pattern generator specializing in creating complex, structured content patterns using a container-based approach. Your task is to analyze the given information and generate a WordPress block pattern that meets the specified requirements.\n\nFirst, let's review the key information you'll be working with:\n\n1. Available Images:\n<portrait_image_urls>\n${l.join("\n")}\n</portrait_image_urls>\n\n<landscape_image_urls>\n${u.join("\n")}\n</landscape_image_urls>\n\n2. Website Configuration:\n<website_details>\nTitle: ${t}\nDescription: ${n}\nLocation: ${o?.name}\nTopic: ${i}\nType: ${a}\n</website_details>\n\n3. Allowed Blocks:\n<allowed_blocks>\n${r.join(", ")}\n</allowed_blocks>\n\n4. Pattern Examples:\n<pattern_examples>\nExample 1:\n\n\x3c!-- wp:group {"metadata":{"categories":["services"],"name":"Services Offered","patternName":"assembler/services-1","patternCategory":"services","remotePatternId":16816},"align":"full","className":"alignfull is-style-section-3 is-style-section-3","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|40","bottom":"var:preset|spacing|40"}}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div class="wp-block-group alignfull is-style-section-3" id="services-section"\n\tstyle="margin-top:0;margin-bottom:0;padding-top:var(--wp--preset--spacing--40);padding-bottom:var(--wp--preset--spacing--40)">\n\t\x3c!-- wp:group {"align":"wide"} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:columns {"metadata":{"name":"Items"},"align":"wide","style":{"spacing":{"blockGap":{"top":"var:preset|spacing|40","left":"var:preset|spacing|30"}}}} --\x3e\n\t\t<div class="wp-block-columns alignwide">\x3c!-- wp:column {"style":{"spacing":{"blockGap":"48px"}}} --\x3e\n\t\t\t<div class="wp-block-column">\x3c!-- wp:heading {"style":{"layout":{"selfStretch":"fixed","flexSize":"100%"}}} --\x3e\n\t\t\t\t<h2 class="wp-block-heading">Services</h2>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:spacer {"height":"var:preset|spacing|10","style":{"spacing":{"margin":{"top":"0","bottom":"0"}}}} --\x3e\n\t\t\t\t<div style="margin-top:0;margin-bottom:0;height:var(--wp--preset--spacing--10)" aria-hidden="true"\n\t\t\t\t\tclass="wp-block-spacer"></div>\n\t\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"48px"}}} --\x3e\n\t\t\t<div class="wp-block-column">\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="http://localhost:8888/wp-content/uploads/2024/10/image-4f108a85-05f3-4857-abe1-713cdc60f694.jpg"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">One-on-one sessions focused on personal growth and transition.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="https://images.pexels.com/photos/7108352/pexels-photo-7108352.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">Interactive workshops designed to foster community and shared learning.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"48px"}}} --\x3e\n\t\t\t<div class="wp-block-column">\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="https://images.pexels.com/photos/6255633/pexels-photo-6255633.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">Support for navigating major life changes with clarity and confidence.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="https://images.pexels.com/photos/9870134/pexels-photo-9870134.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">Guidance in setting and achieving personal goals with ongoing support.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:columns --\x3e\n\n\t\t\x3c!-- wp:spacer {"height":"10px"} --\x3e\n\t\t<div style="height:10px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\t\x3c!-- /wp:spacer --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 2:\n\n\x3c!-- wp:group {"metadata":{"categories":["link-in-bio"],"patternName":"assembler/link-in-bio-2","remotePatternId":16715},"align":"full","className":"is-style-section-3","style":{"dimensions":{"minHeight":"100vh"},"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50","left":"var:preset|spacing|60","right":"var:preset|spacing|60"},"blockGap":"24px","margin":{"top":"0","bottom":"0"}}},"layout":{"type":"constrained","contentSize":"360px","wideSize":"520px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmin-height: 100vh;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-right: var( --wp--preset--spacing--60 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t\tpadding-left: var( --wp--preset--spacing--60 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center","level":3,"style":{"typography":{"fontSize":"18px"}}} --\x3e\n\t<h3 class="wp-block-heading has-text-align-center" style="font-size: 18px">\n\t\tDark fiction redefined\n\t</h3>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:heading {"textAlign":"center","level":1,"align":"wide","style":{"typography":{"fontSize":"75px"}}} --\x3e\n\t<h1\n\t\tclass="wp-block-heading alignwide has-text-align-center"\n\t\tstyle="font-size: 75px"\n\t>\n\t\tExplore unsettling tales\n\t</h1>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"large","linkDestination":"none","className":"is-style-rounded","style":{"layout":{"selfStretch":"fill","flexSize":null},"spacing":{"margin":{"top":"-24px"}}}} --\x3e\n\t<figure\n\t\tclass="wp-block-image size-large is-style-rounded"\n\t\tstyle="margin-top: -24px"\n\t>\n\t\t<img\n\t\t\tsrc="https://images.pexels.com/photos/8390338/pexels-photo-8390338.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\talt="dark fiction"\n\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t/>\n\t</figure>\n\t\x3c!-- /wp:image --\x3e\n\n\t\x3c!-- wp:social-links {"size":"has-normal-icon-size","className":"is-style-logos-only","style":{"spacing":{"blockGap":{"left":"12px"}}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center"}} --\x3e\n\t<ul class="wp-block-social-links has-normal-icon-size is-style-logos-only">\n\t\t\x3c!-- wp:social-link {"url":"#","service":"wordpress"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"bluesky"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"instagram"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"x"} /--\x3e\n\t</ul>\n\t\x3c!-- /wp:social-links --\x3e\n\n\t\x3c!-- wp:buttons {"style":{"spacing":{"padding":{"top":"32px","bottom":"0px"},"blockGap":{"top":"16px"}}},"layout":{"type":"flex","flexWrap":"wrap"}} --\x3e\n\t<div\n\t\tclass="wp-block-buttons"\n\t\tstyle="padding-top: 32px; padding-bottom: 0px"\n\t>\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Discover</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Join us</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Dive in</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Read more</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\t</div>\n\t\x3c!-- /wp:buttons --\x3e\n\n\t\x3c!-- wp:spacer {"height":"40px"} --\x3e\n\t<div style="height: 40px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\x3c!-- /wp:spacer --\x3e\n\n\t\x3c!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"14px"}}} --\x3e\n\t<p class="has-text-align-center" style="font-size: 14px">\n\t\tExperience narratives that blend the uncanny with profound themes,\n\t\trevealing the inherent darkness in our world.\n\t</p>\n\t\x3c!-- /wp:paragraph --\x3e\n</div>\n\n\nExample 3:\n\x3c!-- wp:group {"metadata":{"remotePatternId":16199},"align":"full","className":"is-style-section-1","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"},"blockGap":"var:preset|spacing|30"}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-1"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center"} --\x3e\n\t<h2 class="wp-block-heading has-text-align-center">Emerging Artists</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:columns {"metadata":{"name":"Team members"},"align":"wide","style":{"spacing":{"blockGap":{"top":"var:preset|spacing|60","left":"var:preset|spacing|20"}}}} --\x3e\n\t<div class="wp-block-columns alignwide">\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/1839919/pexels-photo-1839919.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tMonthly Exhibitions\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/3700245/pexels-photo-3700245.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tMinimalist Design\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/4067759/pexels-photo-4067759.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tArt that Inspires\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/2372979/pexels-photo-2372979.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tGallery Events\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\t</div>\n\t\x3c!-- /wp:columns --\x3e\n</div>\n\n\nExample 4:\n\n\x3c!-- wp:group {"metadata":{"name":"Event Listings","patternCategory":"events","remotePatternId":15238},"align":"full","className":"is-style-section-3","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|40"},"blockGap":"var:preset|spacing|20"}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--40 );\n\t"\n>\n\t\x3c!-- wp:heading {"align":"wide"} --\x3e\n\t<h2 class="wp-block-heading alignwide">Event Listings</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:group {"metadata":{"name":"Items"},"align":"wide","style":{"spacing":{"blockGap":"0"}}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tUpcoming Shows\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">Catch Sonic Pulse live!</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tGet ready for an experience!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Buy Tickets</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tJoin Us For An Epic Night\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">\n\t\t\t\t\t\t\tFeel the thrill of the music!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tBe part of the electrifying vibe.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Get Tickets</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tDon't Miss The Action\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">\n\t\t\t\t\t\t\tSonic Pulse is set to amaze.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tExperience the fusion live!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Tickets Here</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tJoin The Pulse\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">Let's rock the night away!</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tBe part of our electrifying scene.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Reserve Now</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="padding-top: 32px; padding-bottom: 32px"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tUnleash The Energy\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">Get immersed in the sound.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tJoin us for a night of excitement.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Join Us</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 5:\n\n\x3c!-- wp:group {"metadata":{"categories":[],"patternName":"core/block/5951","remotePatternId":16719},"align":"full","className":"is-style-section-3","style":{"dimensions":{"minHeight":"100vh"},"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50","left":"var:preset|spacing|60","right":"var:preset|spacing|60"},"blockGap":"48px","margin":{"top":"0","bottom":"0"}}},"layout":{"type":"constrained","contentSize":"320px","wideSize":"680px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmin-height: 100vh;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-right: var( --wp--preset--spacing--60 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t\tpadding-left: var( --wp--preset--spacing--60 );\n\t"\n>\n\t\x3c!-- wp:image {"id":null,"aspectRatio":"3/4","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"border":{"radius":{"topLeft":"200px","topRight":"200px","bottomLeft":"0px","bottomRight":"0px"},"top":{"width":"8px"},"right":{"width":"8px"},"bottom":{"width":"32px"},"left":{"width":"8px"}}}} --\x3e\n\t<figure class="wp-block-image size-full has-custom-border">\n\t\t<img\n\t\t\tsrc="https://images.pexels.com/photos/3794188/pexels-photo-3794188.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\talt="philosophical podcast"\n\t\t\tstyle="\n\t\t\t\tborder-top-left-radius: 200px;\n\t\t\t\tborder-top-right-radius: 200px;\n\t\t\t\tborder-bottom-left-radius: 0px;\n\t\t\t\tborder-bottom-right-radius: 0px;\n\t\t\t\tborder-top-width: 8px;\n\t\t\t\tborder-right-width: 8px;\n\t\t\t\tborder-bottom-width: 32px;\n\t\t\t\tborder-left-width: 8px;\n\t\t\t\taspect-ratio: 3/4;\n\t\t\t\tobject-fit: cover;\n\t\t\t"\n\t\t/>\n\t</figure>\n\t\x3c!-- /wp:image --\x3e\n\n\t\x3c!-- wp:group {"align":"wide","style":{"spacing":{"blockGap":"8px"}},"layout":{"type":"default"}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:heading {"textAlign":"center","level":1,"align":"wide","style":{"typography":{"fontSize":"80px"}}} --\x3e\n\t\t<h1\n\t\t\tclass="wp-block-heading alignwide has-text-align-center"\n\t\t\tstyle="font-size: 80px"\n\t\t>\n\t\t\tExplore new ideas\n\t\t</h1>\n\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\x3c!-- wp:heading {"textAlign":"center","style":{"typography":{"fontSize":"18px"}}} --\x3e\n\t\t<h2\n\t\t\tclass="wp-block-heading has-text-align-center"\n\t\t\tstyle="font-size: 18px"\n\t\t>\n\t\t\tJoin the conversation\n\t\t</h2>\n\t\t\x3c!-- /wp:heading --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n\n\t\x3c!-- wp:social-links {"size":"has-normal-icon-size","className":"is-style-logos-only","style":{"spacing":{"blockGap":{"left":"12px"}}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center"}} --\x3e\n\t<ul class="wp-block-social-links has-normal-icon-size is-style-logos-only">\n\t\t\x3c!-- wp:social-link {"url":"#","service":"instagram"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"bluesky"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"x"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"spotify"} /--\x3e\n\t</ul>\n\t\x3c!-- /wp:social-links --\x3e\n\n\t\x3c!-- wp:buttons {"style":{"spacing":{"blockGap":{"top":"8px"}}},"layout":{"type":"flex","flexWrap":"wrap"}} --\x3e\n\t<div class="wp-block-buttons">\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Listen now</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Read blogs</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Join Discord</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Follow us</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\t</div>\n\t\x3c!-- /wp:buttons --\x3e\n\n\t\x3c!-- wp:spacer {"height":"24px"} --\x3e\n\t<div style="height: 24px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\x3c!-- /wp:spacer --\x3e\n\n\t\x3c!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"14px"}}} --\x3e\n\t<p class="has-text-align-center" style="font-size: 14px">\n\t\tDive into thought-provoking discussions on our podcast.\n\t</p>\n\t\x3c!-- /wp:paragraph --\x3e\n</div>\n\n\nExample 6:\n\n\x3c!-- wp:group {"metadata":{"remotePatternId":16194},"align":"full","className":"is-style-section-3","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"},"blockGap":"var:preset|spacing|30"}},"layout":{"type":"constrained","justifyContent":"center","contentSize":"1000px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center"} --\x3e\n\t<h2 class="wp-block-heading has-text-align-center">\n\t\tWelcome to Brushstrokes\n\t</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"grid","columnCount":2,"minimumColumnWidth":null}} --\x3e\n\t<div class="wp-block-group">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"3/4","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/383568/pexels-photo-383568.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 3/4;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tExplore new perspectives\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/2079670/pexels-photo-2079670.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 1;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tDiscover modern art\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/2261165/pexels-photo-2261165.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 1;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tMeet emerging talents\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"2/3","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/1839919/pexels-photo-1839919.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 2/3;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tFeatured exhibits\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 7:\n\n\x3c!-- wp:group {"metadata":{"categories":["posts"],"name":"Blog Posts","patternName":"assembler/posts-4","patternCategory":"posts","remotePatternId":16787},"align":"full","className":"alignfull is-style-section-1","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"blockGap":"var:preset|spacing|30","padding":{"top":"var:preset|spacing|40","bottom":"var:preset|spacing|40"}}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-1"\n\tid="posts-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--40 );\n\t\tpadding-bottom: var( --wp--preset--spacing--40 );\n\t"\n>\n\t\x3c!-- wp:heading {"align":"wide","style":{"layout":{"selfStretch":"fixed","flexSize":"100%"}}} --\x3e\n\t<h2 class="wp-block-heading alignwide">Cozy vibes</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:query {"queryId":1,"query":{"perPage":3,"pages":0,"offset":0,"postType":"post","order":"desc","orderBy":"date","author":"","search":"","exclude":[],"sticky":"","inherit":false,"taxQuery":null,"parents":[],"format":[],"status[0]":"publish","status[1]":"private"},"align":"wide"} --\x3e\n\t<div class="wp-block-query alignwide">\n\t\t\x3c!-- wp:post-template {"style":{"spacing":{"blockGap":"var:preset|spacing|40"}},"layout":{"type":"grid","columnCount":3}} --\x3e\n\t\t\x3c!-- wp:columns {"verticalAlignment":"center","style":{"spacing":{"blockGap":{"top":"var:preset|spacing|30","left":"var:preset|spacing|20"},"margin":{"top":"0","bottom":"0"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-columns are-vertically-aligned-center"\n\t\t\tstyle="margin-top: 0; margin-bottom: 0"\n\t\t>\n\t\t\t\x3c!-- wp:column {"verticalAlignment":"center"} --\x3e\n\t\t\t<div class="wp-block-column is-vertically-aligned-center">\n\t\t\t\t\x3c!-- wp:post-featured-image {"isLink":true,"aspectRatio":"1"} /--\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\t\x3c!-- wp:column {"verticalAlignment":"center"} --\x3e\n\t\t\t<div class="wp-block-column is-vertically-aligned-center">\n\t\t\t\t\x3c!-- wp:post-title {"level":3,"isLink":true,"fontSize":"medium"} /--\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:columns --\x3e\n\t\t\x3c!-- /wp:post-template --\x3e\n\t</div>\n\t\x3c!-- /wp:query --\x3e\n</div>\n\n\nExample 8:\n\n\x3c!-- wp:group {"metadata":{"remotePatternId":16188},"align":"full","className":"is-style-section-2","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|40","bottom":"var:preset|spacing|40"}}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-2"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--40 );\n\t\tpadding-bottom: var( --wp--preset--spacing--40 );\n\t"\n>\n\t\x3c!-- wp:group {"align":"wide","style":{"spacing":{"blockGap":"var:preset|spacing|20"}},"layout":{"type":"grid","columnCount":null,"minimumColumnWidth":"22rem"}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/7602900/pexels-photo-7602900.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tArtisan furniture design\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Handcrafted and modern pieces.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/14792097/pexels-photo-14792097.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tOur collaborative spirit\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Designed to inspire creativity.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/29795426/pexels-photo-29795426.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tSustainable practices\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Ethically sourced materials.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/3621210/pexels-photo-3621210.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tMinimalist aesthetics\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Timeless design approach.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/447592/pexels-photo-447592.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tShowcasing our collections\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Discover our unique offerings.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/29775281/pexels-photo-29775281.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tExperience the difference\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Crafted with care.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 9:\n\n\x3c!-- wp:group {"metadata":{"name":"Menu","patternCategory":"menu","remotePatternId":16697},"align":"full","className":"is-style-section-2","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"},"blockGap":"var:preset|spacing|40"}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-2"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center"} --\x3e\n\t<h2 class="wp-block-heading has-text-align-center">Our ramen selection</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:group {"metadata":{"name":"Section"},"align":"wide","style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"constrained"}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Items"},"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">\n\t\t\t\t\tDive into authentic flavors\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tWe offer a variety of traditional ramen dishes crafted with\n\t\t\t\t\thouse-made broth and the freshest ingredients.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price","style":{"layout":{"selfStretch":"fit","flexSize":null}}} --\x3e\n\t\t\t\t<p class="is-menu-item-price">Menu</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">\n\t\t\t\t\tSignature bowls\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tExperience unique recipes that highlight the essence of\n\t\t\t\t\tJapanese ramen culture.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">See our options</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">\n\t\t\t\t\tDaily specials\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tJoin us for our amazing daily specials that showcase\n\t\t\t\t\tseasonal ingredients and flavors.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">Explore</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">Beverages</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tChoose from a selection of Japanese beverages to complement\n\t\t\t\t\tyour meal.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">Drink menu</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">Desserts</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tFinish your meal with a taste of our delightful Japanese\n\t\t\t\t\tdesserts.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">See desserts</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 10:\n\n\x3c!-- wp:group {"metadata":{"categories":["link-in-bio"],"patternName":"assembler/link-in-bio-1","remotePatternId":16725},"align":"full","className":"is-style-section-3","style":{"dimensions":{"minHeight":"100vh"},"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50","left":"var:preset|spacing|60","right":"var:preset|spacing|60"},"blockGap":"32px","margin":{"top":"0","bottom":"0"}}},"layout":{"type":"constrained","contentSize":"340px","wideSize":"580px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmin-height: 100vh;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-right: var( --wp--preset--spacing--60 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t\tpadding-left: var( --wp--preset--spacing--60 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center","level":3,"style":{"typography":{"fontSize":"18px"}}} --\x3e\n\t<h3 class="wp-block-heading has-text-align-center" style="font-size: 18px">\n\t\tExplore tales of terror\n\t</h3>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:heading {"textAlign":"center","level":1,"align":"wide","style":{"typography":{"fontSize":"95px"}}} --\x3e\n\t<h1\n\t\tclass="wp-block-heading alignwide has-text-align-center"\n\t\tstyle="font-size: 95px"\n\t>\n\t\tJoin the darkness\n\t</h1>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:social-links {"size":"has-normal-icon-size","className":"is-style-logos-only","style":{"spacing":{"blockGap":{"left":"12px"}}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center"}} --\x3e\n\t<ul class="wp-block-social-links has-normal-icon-size is-style-logos-only">\n\t\t\x3c!-- wp:social-link {"url":"#","service":"wordpress"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"bluesky"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"instagram"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"x"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"spotify"} /--\x3e\n\t</ul>\n\t\x3c!-- /wp:social-links --\x3e\n\n\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"layout":{"selfStretch":"fill","flexSize":null},"border":{"width":"2px"}}} --\x3e\n\t<figure class="wp-block-image size-full has-custom-border is-style-rounded">\n\t\t<img\n\t\t\tsrc="https://images.pexels.com/photos/5078105/pexels-photo-5078105.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\talt="horror fiction"\n\t\t\tstyle="border-width: 2px; aspect-ratio: 1; object-fit: cover"\n\t\t/>\n\t</figure>\n\t\x3c!-- /wp:image --\x3e\n\n\t\x3c!-- wp:buttons {"style":{"spacing":{"blockGap":{"top":"16px"},"padding":{"top":"8px"}}},"layout":{"type":"flex","flexWrap":"wrap"}} --\x3e\n\t<div class="wp-block-buttons" style="padding-top: 8px">\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Listen now</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Read stories</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Shop merch</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Subscribe</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\t</div>\n\t\x3c!-- /wp:buttons --\x3e\n\n\t\x3c!-- wp:spacer {"height":"40px"} --\x3e\n\t<div style="height: 40px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\x3c!-- /wp:spacer --\x3e\n\n\t\x3c!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"14px"}}} --\x3e\n\t<p class="has-text-align-center" style="font-size: 14px">\n\t\tDive into the abyss of horror fiction and explore dark narratives that\n\t\thaunt the mind.\n\t</p>\n\t\x3c!-- /wp:paragraph --\x3e\n</div>\n\n</pattern_examples>\n\nNow, let's break down the process of generating the WordPress block pattern:\n\n1. Pattern Examples Analysis:\n<thought_process>\n- Review all provided pattern examples carefully\n- Note unique layout approaches and structural variations\n- Identify creative container relationships and hierarchies\n- List interesting compositional techniques that could be adapted\n- Look for non-standard groupings and unconventional arrangements\n</thought_process>\n\n2. Analyze the pattern structure:\n<thought_process>\n- Examine the user prompt: ${s}\n- Extract and note any specific numerical requirements (e.g., "top 5", "3 sections")\n- List the main components needed for this pattern based on the user prompt\n- Determine how these components relate to the website configuration and topic\n- Outline the overall structure and hierarchy of the pattern\n- List specific blocks you plan to use based on the allowed blocks and pattern examples\n</thought_process>\n\n3. Create container hierarchy:\n<thought_process>\n- Design a container structure that accommodates all necessary components\n- Ensure container structure exactly matches any numerical requirements from the user prompt\n- List each container with a unique and descriptive ID\n- Describe how containers are nested logically and efficiently\n- Outline how each container, no matter how small, will be broken down into sub-phases\n</thought_process>\n\n4. Plan content grouping:\n<thought_process>\n- List the content divided into logical, independently renderable groups\n- Specify which container each content group will be associated with\n- Ensure content groups match any numerical requirements specified in the user prompt\n- Describe how content groups relate to each other and the overall pattern structure\n- Identify which pattern example's layout approach could be adapted\n- Note specific structural elements to incorporate from that example\n- Explain how the chosen layout serves the content purpose\n</thought_process>\n\nNow, generate the WordPress block pattern following these rules:\n\n1. Container Syntax:\n   Phase 1 must use:\n   \x3c!-- CONTAINER_ID:unique_name type="container-type" --\x3e\n\n   Subsequent phases must wrap content with:\n   \x3c!-- CONTAINER_REF:unique_name --\x3e\n   [content]\n   \x3c!-- /CONTAINER_REF:unique_name --\x3e\n\n2. Phase Structure:\n   - Start each phase with /begin-phase-[number] and end with /end-phase-[number]\n   - Block Structure Requirements:\n     1. Every phase must be complete and valid\n     2. Every phase must contain both opening and closing tags\n     3. No partial blocks or incomplete HTML allowed\n     4. No splitting blocks across phases\n     5. No orphaned HTML tags\n     6. Phase 1 must only contain CONTAINER_ID markers\n     7. All content phases must be wrapped in CONTAINER_REF tags\n\n3. Content Phases:\n- Each content phase fills ONE complete container\n- Must be wrapped in correct CONTAINER_REF tags\n- Must be completely self-contained\n- Place individual column blocks in separate containers and phases\n\n4. Layout Requirements:\n- Avoid defaulting to basic column-based layouts unless specifically requested\n- Draw inspiration from provided pattern examples' structural approaches\n- Choose a layout style that best serves the content and user intent\n\n5. Content Rules\n   - wp:heading blocks should always include "align":"wide" in their attributes\n   - wp:columns blocks should contain images with the same orientation, all portrait or all landscape\n   - Use wp:spacer blocks to add space between sections of the pattern\n   - The outermost wp:group block must include one of these className variations randomly chosen: "is-style-section-default", "is-style-section-1", "is-style-section-2", "is-style-section-3"\n   - If the user wants a subscription form, use the jetpack/subscriptions block if available\n\n6. Generation Rules:\n   - Phase 1: Output outermost container with CONTAINER_ID markers\n   - Phase 2+: Fill each container with content wrapped in CONTAINER_REF tags\n   - Each content container must be filled in order\n   - Max 50 lines per phase\n   - Layout Selection:\n     * Review pattern examples for diverse layout approaches\n     * Choose a layout style that differs from basic column structures\n     * Adapt interesting techniques from example patterns\n     * Consider the specific content type and purpose when selecting layout\n   - Numerical Requirements:\n     * Create exactly the number of containers specified in the user prompt\n     * Fill all numerically-specified containers completely\n     * Never generate fewer items than specifically requested\n\n6. Image Guidelines:\n   - Never use inline height/width styles in the image block\n   - Always retain all image attributes in the URL\n   - Do not mix portrait and landscape images in patterns\n   - Keep images the same size across columns\n   - Use the correct format:\n     \x3c!-- wp:image {"sizeSlug":"full","linkDestination":"none"} --\x3e\n     <figure class="wp-block-image size-full">\n       <img src="[IMAGE_URL]" alt="[Alt]"/>\n     </figure>\n     \x3c!-- /wp:image --\x3e\n\n7. Additional Requirements:\n   - Break down each container into sub-phases for more granular control\n   - Ensure clear mapping between CONTAINER_ID and CONTAINER_REF\n   - Work from outside containers inward\n   - Generate independently renderable sections\n   - Do not use \`\`\` or any other code block formatting\n\nExample of correct pattern structure, this is only an example, please create different structures based on the user prompt:\n\n<example_pattern_structure>\n/begin-phase-1\n\x3c!-- wp:group --\x3e\n<div class="wp-block-group">\n  \x3c!-- CONTAINER_ID:intro type="content" --\x3e\n  \x3c!-- CONTAINER_ID:grid type="grid" --\x3e\n  \x3c!-- CONTAINER_ID:footer type="content" --\x3e\n</div>\n\x3c!-- /wp:group --\x3e\n/end-phase-1\n\n/begin-phase-2\n\x3c!-- CONTAINER_REF:intro --\x3e\n\x3c!-- wp:heading --\x3e\n<h2>Title</h2>\n\x3c!-- /wp:heading --\x3e\n\x3c!-- /CONTAINER_REF:hero --\x3e\n/end-phase-2\n\n/begin-phase-3\n\x3c!-- CONTAINER_REF:grid --\x3e\n\x3c!-- wp:columns --\x3e\n<div class="wp-block-columns">\n  \x3c!-- wp:column --\x3e\n  <div class="wp-block-column">\n    \x3c!-- CONTAINER_ID:col1 type="content" --\x3e\n  </div>\n  \x3c!-- /wp:column --\x3e\n  \x3c!-- wp:column --\x3e\n  <div class="wp-block-column">\n    \x3c!-- CONTAINER_ID:col2 type="content" --\x3e\n  </div>\n  \x3c!-- /wp:column --\x3e\n</div>\n\x3c!-- /wp:columns --\x3e\n\x3c!-- /CONTAINER_REF:grid --\x3e\n/end-phase-3\n\n/begin-phase-4\n\x3c!-- CONTAINER_REF:footer --\x3e\n\x3c!-- wp:paragraph --\x3e\n<p>Footer content</p>\n\x3c!-- /wp:paragraph --\x3e\n\x3c!-- /CONTAINER_REF:footer --\x3e\n/end-phase-4\n</example_pattern_structure>\n\nIMPORTANT:\n - Generate the complete pattern in a single response without asking for permission to continue or checking if more phases should be added. Generate ALL phases needed to complete the pattern, including all requested items and content. Every content phase must be properly wrapped in CONTAINER_REF tags that match their corresponding CONTAINER_ID markers.\n - Don't use any introduction text or any other text other than the phases and content.\n - DO NOT mix portrait and landscape image orientations in patterns.\n\n Begin generating the WordPress block pattern now, following the phase structure and rules outlined above. Remember to use the allowed blocks, consider the website configuration, and incorporate the available images appropriately.`}}}(),{extractPhase:t,parseSSEChunk:n}=function(){const{processPhase:e}=function(){const[e,t]=(0,f.useState)(!1),{replaceBlock:n,insertBlock:o,clearSelectedBlock:i}=(0,g.useDispatch)(v.store),{getBlock:a}=(0,g.useSelect)(v.store),{fixInvalidBlock:r,getContentBlockClientID:s}=sn(),{setGeneratedPatternAsString:c,setGeneratedPatternAsBlocks:l,setGeneratedPatternChunksAsJSON:u,setGeneratedRootPatternClientId:d}=(0,g.useDispatch)(wt),{generatedPatternAsString:p,generatedPatternChunksAsJSON:h,generatedPatternDummySectionClientId:m,generatedRootPatternClientId:y}=(0,g.useSelect)((e=>({generatedPatternAsString:e(wt).getGeneratedPatternAsString(),generatedPatternChunksAsJSON:e(wt).getGeneratedPatternChunksAsJSON(),generatedPatternDummySectionClientId:e(wt).getGeneratedPatternDummySectionClientId(),generatedRootPatternClientId:e(wt).getGeneratedRootPatternClientId()}))),b=(0,f.useCallback)((e=>{e?.length&&s()&&(y&&a(y)?n(y,e[0]):o(e[0],void 0,m),i())}),[s,y,a,n,o,i,m]),w=(0,f.useCallback)((e=>{if(!e)return;const t=e.replace(/<!--\s*CONTAINER_ID:([^\s]+)(?:\s+type="[^"]*")?\s*-->/g,""),n=(0,k.parse)(t).map((e=>r(e)));return y?n[0].clientId=y:d(n[0].clientId),l(n),n}),[r,y,d,l]),_=(0,f.useCallback)((e=>{if(!e?.length)return;let t="";return e.forEach((e=>{const{phase:n,containers:o}=e;o.forEach((e=>{if(1===n)return void(t=e.content);const o=new RegExp(`\x3c!-- CONTAINER_ID:${e.refId}(?:\\s+type="[^"]*")?\\s*--\x3e`,"g");t.match(o)&&(t=t.replace(o,e.content))}))})),t!==p?(c(t),t):void 0}),[c,p]);return(0,f.useEffect)((()=>{!e&&h?.length&&(async()=>{t(!0);try{const e=_(h);if(e){const t=w(e);t?.length&&b(t)}}finally{t(!1)}})()}),[h,_,w,b,e]),{processPhase:({content:e,phaseNumber:t})=>{const n=e.split("\n").filter((e=>{const t=e.trim();return t.startsWith("\x3c!-- wp:")||t.startsWith("\x3c!-- CONTAINER")||t.startsWith("\x3c!-- /wp:")||t.startsWith("\x3c!-- /CONTAINER")||t.length>0&&!t.startsWith("\x3c!--")&&!t.endsWith("--\x3e")})).join("\n").trim(),o=/<!--\s*CONTAINER_REF:([^\s]+)\s*-->((?:(?!<!--\s*(?:\/)?CONTAINER_REF)[\s\S])*?)<!--\s*\/CONTAINER_REF:[^\s]+\s*-->/g,i=[];let a;for(;null!==(a=o.exec(n));)i.push({refId:a[1],content:a[2].trim()});0===i.length&&i.push({refId:"root",content:n}),u({phase:t,containers:i})}}}();return{extractPhase:(t,n)=>{try{const o=((e,t)=>{const n=`/begin-phase-${t}`,o=`/end-phase-${t}`,i=e.indexOf(n);if(-1===i)return{success:!1};const a=e.indexOf(o,i);return-1===a?{success:!1}:{success:!0,content:e.substring(i+n.length,a).trim()}})(t,n);if(!o.success)return null;const i=(e=>e?e.includes("\x3c!-- wp:")?{isValid:!0}:{isValid:!1,message:"Content may be malformed: no block markers found"}:{isValid:!1,message:"Content is empty"})(o.content);if(!i.isValid)return console.warn(`Phase ${n} ${i.message}`),null;const a=((e,t)=>{const n=[...e.matchAll(/<!-- CONTAINER_ID:([^\s]+)/g)].map((e=>e[1])),o=[...e.matchAll(/<!-- CONTAINER_REF:([^\s]+)/g)].map((e=>e[1])),i=[];for(const e of o)n.includes(e)||t.includes(`\x3c!-- CONTAINER_ID:${e}`)||i.push(`References undefined container: ${e}`);return{isValid:0===i.length,warnings:i}})(o.content,t);a.isValid||a.warnings.forEach((e=>console.warn(`Phase ${n} ${e}`))),e({content:o.content,phaseNumber:n})}catch(e){return console.error(`Error extracting phase ${n}:`,e),null}},parseSSEChunk:e=>{try{const t=e.split("\n");let n="";for(const e of t)if(e.startsWith("data: "))try{const t=JSON.parse(e.slice(6));"content_block_delta"===t.type&&"text_delta"===t.delta?.type&&(n+=t.delta.text)}catch(e){console.warn("Invalid JSON in SSE chunk:",e)}return n}catch(e){return console.error("Error parsing SSE chunk:",e),""}}}}(),{zoomOut:o,createDummySection:i}=cn(),{insertBlock:a,replaceBlock:r,clearSelectedBlock:s}=(0,g.useDispatch)(v.store),{setCurrentToolCall:c}=(0,g.useDispatch)(wt),{withPendingToolCallback:l}=Ot(),{getSiteMetadata:u,setSiteMetadata:d}=tn(),{logAnthropicUsage:p}=(0,g.useDispatch)(wt),{getContentBlockClientID:h,scrollToBlock:m,getParentRootPatternBlock:y}=sn(),{setGeneratedPatternAsString:b,setGeneratedPatternAsBlocks:w,setGeneratedPatternChunksAsJSON:_,setGeneratedPatternDummySectionClientId:x,setGeneratedRootPatternClientId:C}=(0,g.useDispatch)(wt),{getBlock:S,getBlockIndex:T,getBlockParentsByBlockName:I,getBlocksByName:A,getBlocks:P}=(0,g.useSelect)((e=>({getBlock:e(v.store).getBlock,getBlockIndex:e(v.store).getBlockIndex,getBlockParentsByBlockName:e(v.store).getBlockParentsByBlockName,getBlocksByName:e(v.store).getBlocksByName,getBlocks:e(v.store).getBlocks}))),M=(e,n)=>{let o=1;for(;;)if(n.has(o))o++;else{if(null===t(e,o))break;n.add(o),o++}return e};return{generatePattern:async({userPrompt:t,clientId:g,direction:f})=>{const v=((e,t)=>{const n=o(),r=A("core/post-content")[0],s=S(I(e,["core/template-part","core/post-content"])[0]);let c;if("core/template-part"===s?.name)"header"===s.attributes.slug?c=0:"footer"===s.attributes.slug&&(c=P(h()).length);else{const n="before"===t?0:1,o=y(e);c=o?T(o.clientId)+n:T(e)+n}const l=i({isEmpty:!1,className:"big-sky__is-loading-dummy__generated-pattern"});a(l,c,r);let u=!1;return n.then((()=>{u||(u=!0,m(l.clientId,"center"))})),x(l.clientId),l.clientId})(g,f);c("generate_pattern");const k=t;return s(),await l((async()=>{try{const t=await e(k);console.log(t);const o=await(async e=>{const t=await fetch("/wp-json/wpcom/v2/big-sky/v1/anthropic/messages",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":E.nonceMiddleware.nonce},body:JSON.stringify({model:"claude-3-5-sonnet-20241022",max_tokens:8e3,temperature:.2,messages:[{role:"user",content:e}],stream:!0})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t})(t),i=await(async e=>{const t=new TextDecoder;let o="";const i=new Set;let a="",r=0,s=0;try{for(;;){const{done:c,value:l}=await e.read();if(c)break;a+=t.decode(l,{stream:!0});const u=a.split("\n\n");a=u.pop()||"";for(const e of u)if(e.trim()){const t=n(e);t&&(o+=t,o=M(o,i));try{const[,t]=e.split("\n").map((e=>e.replace(/^[^:]+: /,"")));if(t){const e=JSON.parse(t);"message_start"===e.type&&e.message?.usage?.input_tokens&&(r=e.message.usage.input_tokens),"message_delta"===e.type&&"end_turn"===e.delta?.stop_reason&&(s=e.usage?.output_tokens||0)}}catch(e){}}}return(r>0||s>0)&&p("claude-3-5-sonnet-20241022",{input_tokens:r,output_tokens:s}),o}finally{e.releaseLock()}})(o.body.getReader());return((e,t)=>{if(!e)return;const n=S(e),o=S(n?.innerBlocks?.[1]?.clientId);o&&(((e,t)=>{const n=u(),o=t.length>40?t.substring(0,40)+"...":t,i=Date.now().toString().slice(-5),a=parseInt("999"+i,10);e.attributes={...e.attributes,metadata:{remotePatternId:a.toString(),patternCategory:"generated"}};const r={category:"generated",title:o,content:e};n.patterns[a]||(n.patterns[a]=[]),n.patterns[a].push(r),d(n)})(o,t),r(n.clientId,o),b(""),w([]),_([]),x(null),C(null))})(v,k),i}catch(e){throw K.error("Error generating pattern:",e),e}}))()}}}const fr={id:b.PATTERN,description:"An assistant that handles adding, removing, and replacing patterns and sections.",instructions:e=>function(e){const t="undefined"!=typeof window&&"true"===window.localStorage.getItem("isGeneratingPatterns")?" - For generating new patterns/sections on pages call generate_pattern":"";return`\nYou are an expert website designer at Automattic, specializing in pattern and section management for WordPress sites. Your primary goal is to help users customize their website patterns and sections effectively or route their queries to appropriate assistance.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n<pattern_categories>\n${JSON.stringify(e.patternCategories?.map((e=>`${e.slug}: ${e.description}`)))}\n</pattern_categories>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Request:\n   - For new patterns, use the add_pattern tool with appropriate categories.\n   - For pattern replacement, use the replace_pattern tool.\n   - For map requests, verify site location and use the "contact" category.\n   - For duplicate section errors, offer remove or replace options.\n   ${t}\n   - For changing section/pattern designs call replace_pattern.\n   - If the user mentions "menu bar" or "navigation bar" it relates to the header so use the header category.\n   - ${Et}\n\n2. Examples:\n   User: "Add a contact form"\n   Action: Call add_pattern with form category\n\n   User: "Replace this section with a map"\n   Action: Call replace_pattern with contact category and isAskingForMap true\n\n   User: "Replace this section with a form"\n   Action: Call replace_pattern with contact category and isAskingForForm true\n\n   User: "Make the menu bar different"\n   Action: Call replace_pattern with header category\n\n   User: "Change navigation bar"\n   Action: Call replace_pattern with header category\n\n3. Restrictions:\n   - Validate pattern categories before operations.\n   - Prevent duplicate unique sections.\n\nRemember to immediately execute appropriate tool calls.\n`}(e),tags:["big-sky-pattern"],toolkits:[or],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t,registerContext:n}=(0,g.useDispatch)(wt),{selectedBlock:o}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),{getSiteMetadata:i}=tn(),{siteTitle:a,siteDescription:r,topic:c,siteLocation:l}=i(),{getParentPatternCategory:u}=Si(),{addPattern:d}=function(){const{insertPatterns:e,composePatterns:t}=Si(),{getSiteMetadata:n}=tn(),{zoomIn:o,zoomOut:i,createDummySection:a}=cn(),{insertBlock:r}=(0,g.useDispatch)(v.store),{validateAddPatternArgs:c}=ir(),{getContentBlockClientID:l,scrollToBlock:u,getParentRootPatternBlock:d}=sn(),{getBlock:p,getBlockIndex:h,getBlockParentsByBlockName:f,getBlocksByName:y,getBlocks:b}=(0,g.useSelect)((e=>({getBlock:e(v.store).getBlock,getBlockIndex:e(v.store).getBlockIndex,getBlockParentsByBlockName:e(v.store).getBlockParentsByBlockName,getBlocksByName:e(v.store).getBlocksByName,getBlocks:e(v.store).getBlocks,getSelectedBlock:e(v.store).getSelectedBlock})));return{addPattern:async({clientId:g,categories:w,direction:v,siteLocation:k,isAskingForMap:_,isAskingForForm:x})=>{try{await c({clientId:g,categories:w,direction:v,siteLocation:k,isAskingForMap:_,isAskingForForm:x});const{topic:C,siteDescription:S,siteLocation:E}=n(),T=i(),I=y("core/post-content")[0],A=p(f(g,["core/template-part","core/post-content"])[0]);let P;if("core/template-part"===A?.name)"header"===A.attributes.slug?P=0:"footer"===A.attributes.slug&&(P=b(l()).length);else{const e="before"===v?0:1,t=d(g);P=t?h(t.clientId)+e:h(g)+e}const M=a();r(M,P,I);let N=!1;T.then((()=>{N||(N=!0,u(M.clientId,"center"))}));const O=t({categories:[{slug:w[0]}],topic:C,siteLocation:k||E,siteDescription:S,numberOfConcepts:1,isAskingForMap:_,isAskingForForm:x});if(!O)return o(),{component:null,message:(0,m.__)("I'm having trouble finding options for that. Please try a different request.","big-sky")};const R=O.flatMap((e=>e.resolvers.map((e=>e.resolver))));await Promise.all(R);const D="true"!==window.localStorage.getItem("isGeneratingPatterns")?t({categories:[{slug:w[0]}],topic:C,siteLocation:k||E,siteDescription:S,selectedConcept:O[0],isAskingForMap:_,isAskingForForm:x}):[],L=O.flatMap((e=>e.resolvers.map((e=>e.resolver))));await Promise.all(L),await ut(2e3),e(O[0].patterns,M.clientId,"replace"),N||(N=!0,u(O[0].patterns[0].blocks[0].clientId,"center",!0));const B="true"===window.localStorage.getItem("isGeneratingPatterns"),F=B?[]:[...O,...D];let j;return B||(j=(0,s.createElement)(gr,{patterns:F,key:"pattern-picker"})),{component:j,message:(0,m.sprintf)(
// Translators: Placeholder represents the category of the section requested by the user.
// Translators: Placeholder represents the category of the section requested by the user.
(0,m.__)("Retrieved %s section options","big-sky"),w[0])}}catch(e){throw e}}}}(),{replacePattern:p}=function(){const{getSiteMetadata:e}=tn(),{zoomIn:t,zoomOut:n}=cn(),{getPattern:o,composePatterns:i,getPatternCategory:a,createConceptFromCurrentCanvas:r,createConceptFromSelectedBlock:c,setCTAInSection:l}=Si(),{getFirstChildBlockByClientIdDOMElement:u,getParentRootTemplatePartBlock:d,setBlockIsProcessing:p,scrollToBlock:h,getParentRootPatternBlock:f}=sn(),{setIsToolContainerVisible:y}=(0,g.useDispatch)(wt),{__unstableGetEditorMode:b}=(0,g.useSelect)((e=>({__unstableGetEditorMode:e(v.store).__unstableGetEditorMode}))),{validateReplacePatternArgs:w}=ir();return{replacePattern:async({clientId:g,category:v,siteLocation:k,isAskingForMap:_,isAskingForForm:x})=>{try{await w({clientId:g,category:v,siteLocation:k,isAskingForMap:_,isAskingForForm:x});const{topic:C,siteLocation:S,siteDescription:E}=e();let T,I;if("zoom-out"!==b()&&n(),g&&"undefined"!==g){const e=d(g);T=e?u(e.clientId):f(g),I=a(T.clientId)}I!==v&&(T=o(v),["header","footer"].includes(v)&&(T=u(T.clientId))),p(T,!0),h(T.clientId,"center");const A=r(),P=i({categories:[{slug:v}],topic:C,siteLocation:k||S,siteDescription:E,selectedConcept:A,isAskingForMap:_,isAskingForForm:x});if(!P)return p(T,!1),t(),(0,m.__)("I'm having trouble finding options for that. Please try a different request.","big-sky");const M=P.flatMap((e=>e.resolvers.map((e=>e.resolver))));await Promise.all(M);const N=c(T.clientId);P.unshift(N),await ut(2e3),p(T,!1),"header"===v&&P.flatMap((e=>e.patterns)).forEach((e=>l({category:e.category,blocks:e.blocks})));const O=(0,s.createElement)(gr,{clientId:T.clientId,patterns:P,key:"pattern-picker"});return y(!0),{component:O,message:(0,m.sprintf)(
// Translators: Placeholder represents the category of the section requested by the user.
// Translators: Placeholder represents the category of the section requested by the user.
(0,m.__)("Retrieved %s section options","big-sky"),v)}}catch(e){throw e}}}}(),{generatePattern:h}=hr(),{validateAddPatternArgs:y,validateGeneratePatternArgs:w,validateReplacePatternArgs:k}=ir(),{getIsHandoff:_}=(0,g.useSelect)((e=>{const{getIsHandoff:t}=e(wt);return{getIsHandoff:t}}));(0,f.useEffect)((()=>{t(b.PATTERN,{..."true"===window.localStorage.getItem("isGeneratingPatterns")?{generate_pattern:e({name:"generate_pattern",action:async e=>({message:await h(e),checkpointKeys:[$.BLOCKS]}),validator:w,closeChatWhenDone:()=>!_()})}:{add_pattern:e({name:"add_pattern",action:async e=>{const{component:t,message:n}=await d(e);return{component:t,awaitingUserInput:!!t,message:n,checkpointKeys:[$.BLOCKS,$.LOCATION]}},validator:y,closeChatWhenDone:()=>!_()})},replace_pattern:e({name:"replace_pattern",action:async e=>{const{message:t,component:n}=await p(e);return{component:n,awaitingUserInput:!0,message:t,checkpointKeys:[$.BLOCKS,$.ADDRESS]}},validator:k,closeChatWhenDone:()=>!_(),getTargetedBlockRequired:()=>!0})})}),[t]);let x=null;o&&(x=u(o)),(0,f.useEffect)((()=>{const e={selectedBlock:{parentPatternCategory:x},site:{siteTitle:a,siteDescription:r,siteLocation:l,topic:c},patternCategories:ke};n(b.PATTERN,e)}),[n,o,c,x,a,r,l])}},mr=(e=[])=>({name:"show_font_picker",description:"Call this if the user asks for anything to do with site fonts. If font keywords are provided, use it as is. If a user requests all fonts, do not return keywords or fonts.",parameters:{type:"object",properties:{fonts:{type:["array","null"],description:"The requested font(s). Default to null if not supplied in the user request.",items:{type:"string",description:"A font name."}},keywords:{type:["array","null"],description:"The requested keywords of the font. Default to null if not supplied in the user request. The more keywords, the more specific the font. If none of the keyword match user request, try to pick a combination that represents the intent.",items:{type:"string",enum:e.slice(0,250)}}},required:["fonts","keywords"]},strict:!0}),yr={name:"font",tools:e=>[mr(e?.keywords)]},br=({fontVariations:e,maxFontsToShow:t=12})=>(0,s.createElement)(Ja,{variations:e,maxToShow:t,type:"font"});function wr(e,t){if(!e||0===e.length)return[];if(!t||0===t.length)return[];const n=e.includes("serif"),o=e.includes("sans-serif"),i=[];return t.forEach((t=>{if(t&&t.keywords&&Array.isArray(t.keywords)&&t.keywords.length>0){if(n&&!t.keywords.includes("serif"))return;if(o&&!t.keywords.includes("sans-serif"))return;const a=e.filter((e=>t.keywords.includes(e))).length;a>0&&i.push({font:t,matchCount:a})}})),i.sort(((e,t)=>t.matchCount-e.matchCount)),i.map((e=>e.font))}function vr(e,t,n=6){if(!e.keywords||!Array.isArray(e.keywords))return t.slice(0,n);const o=e.keywords.includes("serif")?"sans-serif":"serif",i=e.keywords.includes("heading")?"body":"heading",a=t.filter((e=>!(!e.keywords||!Array.isArray(e.keywords))&&e.keywords.includes(i))).slice(0,n);return 0===a.length?t.filter((e=>!(!e.keywords||!Array.isArray(e.keywords))&&e.keywords.includes(o))).slice(0,n):a}function kr(e){const t=e[0],n=e[1],o=function(e){if(!(e&&e.font_family_settings&&e.font_family_settings.fontFace&&Array.isArray(e.font_family_settings.fontFace)))return"400";const t=e.font_family_settings.fontFace.filter((e=>{const t=parseInt(e.fontWeight,10);return!isNaN(t)&&t>=500}));return t.length>0?t[Math.floor(Math.random()*t.length)].fontWeight:"400"}(t),i=function(e){const t=e.font_family_settings.fontFace.map((e=>e.fontWeight)).filter((e=>Number(e)<=600&&Number(e)>=200));return t[Math.floor(Math.random()*t.length)]}(n),a=Boolean(Math.round(Math.random())),r=a?t:n,s=a?o:i,c={title:`${t.font_family_settings.name} ${o} + ${n.font_family_settings.name} ${i}`,$schema:"https://schemas.wp.org/trunk/theme.json",version:3,category:"font",keywords:[],settings:{typography:{fontFamilies:e.map((e=>e.font_family_settings))}},styles:{typography:{fontFamily:n.font_family_settings.name,fontWeight:i,fontStyle:"normal"},elements:{heading:{typography:{fontFamily:t.font_family_settings.name,fontWeight:o,fontStyle:"normal"}},button:{typography:{fontFamily:r.font_family_settings.name,fontWeight:s,fontStyle:"normal"}}}}};return c}function _r(){const{getCurrentFont:e}=(0,g.useSelect)(wt),{getFontVariationByTitle:t,getFontVariations:n}=wo(),{currentFont:o}=tn().getSiteMetadata(),{isPostEditor:i}=Sn(),{getCurrentPostId:a}=(0,g.useSelect)((e=>({getCurrentPostId:e(h.store).getCurrentPostId}))),{pushGeneratedVariations:r}=(0,g.useDispatch)(wt);return{showFontPicker:async i=>{const a=e()||o,{keywords:s=[],fonts:c=[],includeCurrent:l=!0,initialGeneration:u=!1}=i;let d,p=[];l&&(d=t(a),d&&p.push(d));const h=function({keywords:e,chosenFonts:t=[],getFontVariations:n}){let o=[];const i=(0,m.__)("There are no fonts available.","big-sky"),a=n()||[];return 0===a.length?{fontVariationsToShow:o,message:i}:(t&&t.length?o=a.filter((e=>t.includes(e.title))):e&&e.length&&(o=a.map((t=>{const n=(t["x-big-sky-meta"]?.keywords||[]).filter((t=>e.includes(t)));return{...t,matchingKeywords:n.length}})).sort(((e,t)=>t.matchingKeywords-e.matchingKeywords)).filter((e=>e.matchingKeywords>0))),[...new Set(o)])}({chosenFonts:c,keywords:s,getFontVariations:n});if(p.push(...h),!u){let e=await async function(e,t){const n=(0,g.select)(wt).getGoogleFonts();if(!n||!n.font_families)return console.warn("Google Fonts data not available in store"),[];const o=function(e=[],t=[],n=[],o=12){const i=[];if(e?.length){const o=function(e,t){return e&&e.length>0?e.map((e=>t.find((t=>t.font_family_settings.name.toLowerCase()===e.toLowerCase()))||null)).filter(Boolean):[]}(e,n),a=t?.length?t:o?.flatMap((e=>e.keywords)).slice(0,5),r=wr(a,n);if(o?.length)if(1===o.length){const e=vr(o[0],n);e?.length>0&&(e.forEach((e=>{i.push([o[0],e])})),e.forEach((e=>{i.push([e,o[0]])})))}else{const e=vr(o[0],r),t=vr(o[1],r);i.push([o[0],o[1]]),i.push([o[1],o[0]]),i.push([o[0],e[0]]),i.push([o[1],t[0]])}}if(t?.length){const e=wr(t,n).slice(0,o),a=n.slice(0,30).sort((()=>Math.random()-.5));for(let t=0;t<o;t++)e[t]&&i.push([e[t],a[t]])}return i}(e,t,n.font_families||[]),i=function(e){const t=[];for(const n of e)t.push(kr(n));return t}(o);return i}(c,s);p?.length&&(e=e.slice(0,B-p.length)),p.push(...e),r(e);const t=e.flatMap((e=>e.settings.typography.fontFamilies));!function(e){const t=Fa(e),n=document.querySelector('iframe[name="editor-canvas"]');if(n&&n.contentDocument){const e=document.createElement("style");e.textContent=t,n.contentDocument.head.appendChild(e)}}(t)}l&&d&&(p=p.filter(((e,t)=>0===t||e.title!==d.title)));const y=0===p.length?(0,m.__)("No fonts found please provide a different font or keyword","big-sky"):(0,m.__)("Suggested fonts","big-sky");return{component:(0,f.createElement)(br,{fontVariations:p,key:"font-picker",maxFontsToShow:L}),message:y}},validateArguments:e=>{if(i)throw new Error((0,m.sprintf)(/* translators: %1$s: Markdown link to the site editor. */ /* translators: %1$s: Markdown link to the site editor. */
(0,m.__)("Changing site fonts can only be done in the [Site Editor](%1$s).","big-sky"),`/wp-admin/site-editor.php?canvas=edit&p=%2Fpage%2F${a()} "${z.TARGET}=_self"`));if(!e)throw new Error((0,m.__)("There was an error when finding the fonts. Please try again.","big-sky"));const{keywords:t,fonts:n}=e;if(!t&&!n)throw new Error((0,m.__)("Please provide a font or a category to view font options.","big-sky"));return!0}}}const xr={id:b.FONT,description:"An assistant that handles font selection.",instructions:e=>function(e){return`\nYou are an expert website designer, specializing in font selection and helping users modify their website fonts. Your primary goal is to help users customize their website fonts effectively or route their queries to appropriate assistance.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Request:\n   - If specific fonts/keywords provided, immediately call show_font_picker tool.\n   - If style can be inferred (e.g., "like New York Times"), call show_font_picker with 3 keywords inferred from the style.\n   - For vague requests ("show me fonts"), infer keywords from the site context\n   - Pass fonts parameter as null if not specified\n   - Pass keywords parameter as null if not specified\n   - ${Et}\n   - For font requests that ask to match fonts on a specific image or website, inform the user that you can't do that.\n\n2. Examples:\n\nUser: "Use christmas fonts"\nAction: Call show_font_picker with fonts=null, keywords=["christmas", "holiday"]\n\nUser: "Add japane-inspired fonts"\nAction: Call show_font_picker with fonts=null, keywords=["japanese-inspired", "eastern"]\n\nUser: "I like valentine's fonts"\nAction: Call show_font_picker with fonts=null, keywords=["valentine's", "love"]\n\nUser: "I want the Roboto font"\nAction: Call show_font_picker with fonts=["Roboto"], keywords=null\n\nUser: "Show me serif fonts"\nAction: Call show_font_picker with fonts=null, keywords=["serif"]\n\nUser: "Make my site look professional"\nAction: Call show_font_picker with fonts=null, keywords=["professional"]\n\nUser: "I want fonts that are easy to read"\nAction: Call show_font_picker with fonts=null, keywords=["readable", "clear", "simple"]\n\nUser: "Can you give me a curly font?"\nAction: Call show_font_picker with fonts=null, keywords=["curly"]\n`}(e),tags:[b.FONT],toolkits:[yr],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t,registerContext:n,setShowChatContinueButton:o}=(0,g.useDispatch)(wt),{addAssistantMessage:i,deleteMarkedMessages:a,assistantSay:r}=Jt(),{getSiteMetadata:s}=tn(),{siteTitle:c,siteDescription:l,topic:u}=s(),{showFontPicker:d,validateArguments:p}=_r(),{zoomOut:h}=cn(),{googleFonts:m,googleKeywords:y}=(0,g.useSelect)((e=>{const{getGoogleFonts:t,getGoogleFontsKeywords:n}=e(wt);return{googleKeywords:n(),googleFonts:t()}})),{getIsHandoff:w,currentHandoffArea:v}=(0,g.useSelect)((e=>{const{getIsHandoff:t,getCurrentHandoffArea:n}=e(wt);return{getIsHandoff:t,currentHandoffArea:n()}}));(0,f.useEffect)((()=>{t(b.FONT,{show_font_picker:e({name:"show_font_picker",action:async e=>{const{component:t,message:n}=await d(e);if(!w())return await h(),{component:t,awaitingUserInput:!0,message:n,checkpointKeys:[$.FONT]};a(),i(b.FONT,n),r(t),o(!0)},validator:e=>p(e),closeChatWhenDone:()=>!w()})})}),[t]),(0,f.useEffect)((()=>{const e={site:{siteTitle:c,siteDescription:l,topic:u},keywords:y};w()&&(e.currentHandoffArea=v),n(b.FONT,e)}),[n,w,v,c,l,u,m])}},Cr={name:"layout",tools:()=>[{name:"show_layout_picker",description:"Show a site layout picker to the user."}]};function Sr({concepts:e,selectedConcept:t,onGenerateNewConcept:n,isFullLayout:o=!1}){const[i,a]=(0,f.useState)(e);return(0,s.createElement)("div",{className:"big-sky__dock__menu__layout-picker"},(0,s.createElement)("div",{className:"components-grid"},(0,s.createElement)(pr,{key:"site-layout-picker",items:i,selectedItem:t,generateNewItem:async()=>{const e=await n(i);a(e)},isFullLayout:o})))}function Er(){const{getSiteMetadata:e,getPagePatterns:t}=tn(),{composePatterns:n,createConceptFromCurrentCanvas:o}=Si(),i=(0,f.useCallback)(((i,a)=>{const{topic:r,siteDescription:s,siteLocation:c}=e(),l=t(),u=o();return[...i,...n({categories:l.filter((e=>"header"!==e.slug&&"footer"!==e.slug)),topic:r,siteDescription:s,siteLocation:c,numberOfConcepts:1,selectedConcept:u,newPageLayouts:a})]}),[t,o,n,e]),a=(0,f.useCallback)((({categories:a=null,numberOfConcepts:r=3,newPageLayouts:c=!1})=>{const{topic:l,siteDescription:u,siteLocation:d}=e(),p=t(),g=o(),h=p.filter((e=>"header"!==e.slug&&"footer"!==e.slug)),f=[g,...n({categories:a||h,topic:l,siteDescription:u,siteLocation:d,numberOfConcepts:r,selectedConcept:g,newPageLayouts:c})].filter(((e,t,n)=>t===n.findIndex((t=>t.id===e.id))));return{component:(0,s.createElement)(Sr,{concepts:f,selectedConcept:g,key:"site-layout-picker",isFullLayout:!0,onGenerateNewConcept:e=>i(e,c)}),message:(0,m.__)("Generated layouts","big-sky")}}),[e,t,o,n,i]);return{showSiteLayouts:a,composeNewConcept:i}}const Tr={id:b.LAYOUT,description:"Helps with all requests related to switching the page layout.",instructions:e=>function(e){return`\nYou are an expert website designer at Automattic, specializing in layout customization and helping users modify their website layouts. Your role is to assist users with layout changes or route their queries appropriately.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Request:\n   - Call show_layout_picker tool immediately.\n   - Don't respond with anything else.\n   - ${Et}\n\n2. Examples:\n\nUser: "I want a sidebar on my homepage"\nAction: Call show_layout_picker tool\n\nUser: "I don't like the layout of my site, can you help me?"\nAction: Call show_layout_picker tool\n\n3. Restrictions:\n   - Don't display analysis in output\n`}(e),tags:[b.LAYOUT],toolkits:[Cr],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t,registerContext:n}=(0,g.useDispatch)(wt),{getSiteMetadata:o}=tn(),{siteTitle:i,siteDescription:a,siteLocation:r,topic:s}=o(),{zoomOut:c}=cn(),{isPostEditor:l}=Sn(),{getIsHandoff:u,currentHandoffArea:d}=(0,g.useSelect)((e=>{const{getIsHandoff:t,getCurrentHandoffArea:n}=e(wt);return{getIsHandoff:t,currentHandoffArea:n()}})),{showSiteLayouts:p}=Er(),h=()=>{if(l)throw new Error((0,m.__)("Changing site layout is not available in the post editor.","big-sky"));return!0};(0,f.useEffect)((()=>{t(b.LAYOUT,{show_layout_picker:e({name:"show_layout_picker",action:async e=>{const{component:t,message:n}=p(e);return await c(),{component:t,awaitingUserInput:!0,message:n,checkpointKeys:[$.BLOCKS]}},validator:h,closeChatWhenDone:()=>!u()})})}),[t]),(0,f.useEffect)((()=>{const e={site:{siteTitle:i,siteDescription:a,siteLocation:r,topic:s}};u()&&(e.currentHandoffArea=d),n(b.LAYOUT,e)}),[n,u,d,i,a,r,s])}};function Ir({styles:e=[],defaultStyle:t="photographic"}){return{name:"generate_image",description:"Generate a new image using AI.",parameters:{type:"object",properties:{description:{type:"string",description:'The description of the new image. Do not include any text about replacing the image or something similar, only what the content of the image should be. For example, if the user request is "replace this image with a dog", the description should be "dog".'},style:{type:"string",description:`The style of an AI image. If the user does not specify a style for the AI image, default to ${t}`,enum:e}},required:["description","style"]},strict:!0}}const Ar={name:"image",tools:e=>[Ir({styles:e.images?.styles,defaultStyle:e.images?.defaultStyle}),{name:"get_stock_image",description:"Get a new stock image.",parameters:{type:"object",properties:{description:{type:"string",description:'The description of the new image. Do not include any text about replacing the image or something similar, only what the content of the image should be. For example, if the user request is "replace this image with a dog", the description should be "dog".'}},required:["description"]},strict:!0},{name:"generate_site_logo",description:"Generate a new site logo with AI.",parameters:{type:"object",properties:{description:{type:"string",description:"The description of the new site logo."}},required:["description"]},strict:!0},{name:"upload_image",description:"Allow the user to upload a new image."},{name:"upload_site_logo",description:"Allow the user to upload a new site logo image."},{name:"delete_image",description:"Delete an existing image from the block or remove the background image from the block."}]},Pr=JSON.parse('["3d-model","analog-film","anime","cinematic","comicbook","craft-clay","digital-art","enhance","fantasy-art","isometric","line-art","lowpoly","neonpunk","origami","photographic","pixel-art","texture"]');const Mr={id:b.IMAGE,description:"Helps with all requests related to image generation and replacement, block background images, and site logo generating and replacement.",instructions:(e={})=>function(e){return`\nYou are an expert website designer specializing in image replacement and optimization. Your primary goal is to help users customize their website images.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Request:\n   For image uploads:\n   - Call 'upload_image' with clientId, image file, and description if the user has provided one.\n\n   For logo changes:\n   - If uploading own logo: Call 'upload_site_logo', do not follow up with your own message\n   - If generating a logo: Call 'generate_site_logo' with description\n   - If unclear: Ask if they want to generate a new logo or upload their own\n\n   For background images:\n   - You handle ALL background image requests for individual blocks (Group, Cover, etc.)\n   - Do NOT handle site-wide or theme background requests (defer to help assistant)\n   - Identify if the request mentions adding/changing background for a specific block/section\n   - For AI images: Call 'generate_image'\n   - For stock images: Call 'get_stock_image'\n\n   For image changes:\n   - If the user is asking to replace an image with a specific description, then generate an image for them.\n   - If not specific: Ask if they want to generate a new image or upload their own\n   - If uploading own image: Call 'upload_image' with clientId\n   - If generating an image: Call 'generate_image' with description\n   - Identify the image description, if it is not provided ask for it\n   - Determine if AI or stock image is requested (ALWAYS default to AI if unspecified)\n   - For AI images: note any style preferences (use default if unspecified)\n   - For AI images: Call 'generate_image'\n   - For stock images: Call 'get_stock_image'\n\n   ${Et}\n\n2. Restrictions:\n   - If the user is asking to use an image from another website, inform the user that you can't do that.\n   - Immediately call appropriate tool or request necessary information\n\n3. Examples:\n\nUser: "I want to change my logo"\nAction: Ask if they want to generate a new logo or upload their own\n\nUser: "I want to change an image"\nAction: Ask if they want to generate a new image or upload their own\n\nUser: "Make a new AI image to replace the one I have selected"\nAction: Ask for the description of the new image\n\nUser: "Generate an AI logo for my coffee shop"\nAction: Call generate_site_logo tool with description "coffee shop logo"\n\nUser: "Replace with an AI image of mountains"\nAction: Call generate_image tool with clientId, "mountains", and default style\n\nUser: "Change the image to old school computer terminal"\nAction: Call generate_image tool with clientId, "old school computer terminal"\n\nUser: "I need a stock photo of a beach"\nAction: Call get_stock_image tool with clientId and "beach"\n\nUser: "How do I add a background?"\nAction: Ask which block they want to add a background to\n\nUser: "Set this section's background to mountains"\nAction: Call the appropriate tool with description "mountains"\n\nUser: "Can you make the background a beach scene?"\nAction: Call the appropriate tool with description "beach scene"\n\nUser: "Remove the background"\nAction: Call delete_image\n\nUser: "Add a background to this block"\nAction: Call the appropriate tool and ask for description\n\nUser: "Upload an image"\nAction: Call upload_image tool with the image file, the clientId and the description\n`}(e),tags:[b.IMAGE],toolkits:[Ar],toolkitHook:function(){const{validateArguments:e,getValidImageBlocks:t}=function(){const{getBlock:e}=(0,g.useSelect)(v.store),{getBlockSupport:t}=(0,g.useSelect)(k.store);return{validateArguments:n=>{if(!n?.clientId)throw new Error((0,m.__)("Please select a block and try again.","big-sky"));const o=e(n.clientId);if(!o)throw new Error((0,m.__)("The selected block could not be found.","big-sky"));const i="core/image"===o.name,a="core/cover"===o.name,r="core/media-text"===o.name;if(i)return!0;if(a||r)return!0;if(t(o.name,"background.backgroundImage",!1))return!0;throw new Error((0,m.__)("The selected block does not support images. Please select an image block or a block that supports background images (e.g. Group or Cover).","big-sky"))},getValidImageBlocks:e=>{const n=["core/image","core/cover","core/media-text"];return t(e,"background.backgroundImage")&&n.push(e),n}}}(),{createToolCallback:n,withPendingToolCallback:o}=Ot(),{addAssistantMessage:i}=Jt(),{registerCallbacks:a,registerContext:r}=(0,g.useDispatch)(wt),{generateImage:s}=function(){const{generateImageWithAI:e,generateBackgroundImageWithAI:t,canUseBackgroundImages:n}=di(),{setSiteMetadata:o}=tn(),{getBlock:i}=(0,g.useSelect)(v.store),{setBlockBeforeChanges:a}=(0,g.useDispatch)(wt),{setBlockIsProcessing:r}=sn();return{generateImage:async s=>{const{clientId:c,description:l,style:u}=s,d=i(c);let p;return a(d),o({defaultImageStyle:u}),r(d,!0),p=n(d)?await t({block:d,topic:l,style:u}):await e({description:l,style:u,block:d}),r(d,!1),p}}}(),{getStockImage:c}=function(){const{getNewStockImage:e}=di(),{getBlock:t}=(0,g.useSelect)(v.store),{setBlockBeforeChanges:n}=(0,g.useDispatch)(wt),{setBlockIsProcessing:o}=sn();return{getStockImage:async i=>{const{clientId:a,description:r}=i,s=t(a);n(s),o(s,!0);const c=await e({topic:r,block:s});return o(s,!1),c}}}(),{generateSiteLogo:l}=function(){const{generateLogoWithAI:e}=di(),{getBlock:t}=(0,g.useSelect)(v.store),{setBlockIsProcessing:n,findSiteLogoBlock:o}=sn(),{setBlockBeforeChanges:i}=(0,g.useDispatch)(wt);return{generateSiteLogo:async a=>{const r=o();if(!r)return{error:"No site logo block found"};i(r),n(t(r.clientId),!0);const s=await e({description:a,block:r});return n(t(r.clientId),!1),s}}}(),{uploadImage:u}=function(){const{setBlockIsProcessing:e}=sn(),{getBlocksByName:t,getBlock:n}=(0,g.useSelect)(v.store),{updateBlockAttributes:o}=(0,g.useDispatch)(v.store),{buildAttrToUpdateImage:i}=di(),{analyzeImage:a}=function(){const{runChatCompletion:e}=(0,g.useDispatch)(wt);return{analyzeImage:async({imageBase64:t,mimeType:n})=>{const o=[{role:"user",content:[{type:"text",text:`Define the alt text for the image.\n- Keep it concise. No more than 100 characters.\n- Return ONLY the alt text with no preamble.\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${"undefined"!=typeof window&&window.bigSkyInitialState?.userLanguage?window.bigSkyInitialState.userLanguage:"English (United States)"}\n</language>`},{type:"image_url",image_url:{url:`data:${n};base64,${t}`}}]}];try{const t=await e("llama3-11b",o),n=t?.choices?.[0]?.message?.content;return n||(K.error("No content in model response for image analysis."),null)}catch(e){return K.error("Error analyzing image:",e),null}}}}();return{uploadImage:(r,s,c)=>new Promise(((l,u)=>{try{const d=r?n(r):t("core/image")[0];d&&e(d,!0);const p=new FileReader;p.onload=async()=>{const t=p.result.split(",")[1],n=s.type;c||(c=await a({imageBase64:t,mimeType:n})),(0,ln.uploadMedia)({filesList:[s],onError:({message:e})=>{K.error(e),u((0,m.__)("Error uploading media.","big-sky"))},onFileChange:([t])=>{if(t?.id&&d){const n=i(d,t.url,c);o(d.clientId,n),e(d,!1),l((0,m.__)("Updated the image.","big-sky"))}}})},p.onerror=()=>{u((0,m.__)("Error reading image file.","big-sky"))},p.readAsDataURL(s),d||l((0,m.__)("Uploaded the image. However, I couldn't find an image block.","big-sky"))}catch(e){K.error("Error:",e),u((0,m.__)("I encountered an error while processing your request. Please try again.","big-sky"))}}))}}(),{uploadSiteLogo:d}=function(){const{scrollToFirstBlockByName:e,findSiteLogoBlock:t,setBlockIsProcessing:n}=sn(),{editEntityRecord:o}=(0,g.useDispatch)(Zt.store);return{uploadSiteLogo:i=>new Promise(((a,r)=>{try{const s=t();e("core/site-logo"),(0,ln.uploadMedia)({filesList:[i],onError:({message:e})=>{K.error(e),r((0,m.__)("Error uploading media.","big-sky"))},onFileChange:([e])=>{s&&n(s,!0),e?.id&&(o("root","site",void 0,{site_logo:e.id}),s&&(n(s,!1),a((0,m.__)("Updated the site logo","big-sky"))))}}),s||a((0,m.__)('Updated the site logo. However, neither the header nor footer contains a site logo.\n\nTo change the header/footer layouts, ask to "**replace the header/footer section**".',"big-sky"))}catch(e){K.error("Error:",e),r((0,m.__)("I encountered an error while processing your request. Please try again.","big-sky"))}}))}}(),{deleteImage:p}=function(){const{updateBlockAttributes:e}=(0,g.useDispatch)(v.store),{getBlock:t}=(0,g.useSelect)(v.store),{getBlockSupport:n}=(0,g.useSelect)(k.store),{buildAttrToUpdateImage:o}=di();return{deleteImage:async({clientId:i})=>{const a=t(i),r=n(a?.name,"background.backgroundImage"),s=o(a,void 0,void 0);return e(i,s),r?(0,m.__)("Removed background image","big-sky"):(0,m.__)("Removed image","big-sky")}}}(),{defaultImageStyle:h,topic:y,siteTitle:w,siteDescription:_,siteLocation:x}=tn().getSiteMetadata(),{getInputtedFiles:C,inputtedFiles:S,onInputtedFilesAction:E}=(0,g.useSelect)((e=>{const{getInputtedFiles:t,getOnInputtedFilesAction:n}=e(wt);return{getInputtedFiles:t,inputtedFiles:t(),onInputtedFilesAction:n()}})),{setShowThread:T,setOnInputtedFilesAction:I,setInputtedFiles:A}=(0,g.useDispatch)(wt),{fulfillCurrentStep:P}=(()=>{const{setAwaitingUserInput:e,setPendingPlan:t}=(0,g.useDispatch)(wt),{pendingPlan:n}=(0,g.useSelect)((e=>({pendingPlan:e(wt).getPendingPlan()}))),o=(0,f.useCallback)((()=>{if(!n)return;const o=n.steps.findIndex((e=>!e.fulfilled));t({...n,steps:n.steps.map(((e,t)=>t===o?{...e,fulfilled:!0}:e)),isNewPlan:!1}),e(!1)}),[n,t,e]);return{fulfillCurrentStep:o}})(),{addCheckpointKeys:M}=Mi();(0,f.useEffect)((()=>{a(b.IMAGE,{generate_image:n({name:"generate_image",action:async e=>(await s(e),{message:(0,m.__)("Generated image.","big-sky"),checkpointKeys:[$.BLOCKS]}),validator:t=>e(t),getTargetedBlockRequired:()=>!0,getTargetedBlockValidTypes:()=>t}),get_stock_image:n({name:"get_stock_image",action:async e=>(await c(e),{message:(0,m.__)("Returned stock image.","big-sky"),checkpointKeys:[$.BLOCKS]}),validator:t=>e(t),getTargetedBlockRequired:()=>!0,getTargetedBlockValidTypes:()=>t}),generate_site_logo:n({name:"generate_site_logo",action:async e=>(await l(e),{message:(0,m.__)("Generated site logo.","big-sky"),checkpointKeys:[$.LOGO]}),getTargetedBlockRequired:()=>!1,getTargetedBlockValidTypes:()=>["core/site-logo"]}),upload_image:n({name:"upload_image",action:async e=>{const{clientId:t,description:n}=e,o=C()?.[0];return o?{message:await O({doFulfill:!1,clientId:t,description:n}),awaitingUserInput:!0,unfulfilled:!0}:(I({action:"upload_image",clientId:t,description:n}),T(!0),{message:(0,m.__)("Drag your image into this chat box.","big-sky"),awaitingUserInput:!0,unfulfilled:!0})}}),upload_site_logo:n({name:"upload_site_logo",action:async()=>{const e=C()?.[0];return e?await N({doFulfill:!1}):(I({action:"upload_site_logo"}),T(!0),{message:(0,m.__)("Drag your logo into this chat box.","big-sky"),awaitingUserInput:!0,unfulfilled:!0})}}),delete_image:n({name:"delete_image",action:async e=>({message:await p(e),checkpointKeys:[$.BLOCKS]}),validator:t=>e(t),getTargetedBlockRequired:()=>!0,getTargetedBlockValidTypes:()=>t})})}),[a]),(0,f.useEffect)((()=>{const e={images:{styles:Pr,defaultStyle:h},site:{siteTitle:w,siteDescription:_,siteLocation:x,topic:y}};r(b.IMAGE,e)}),[r,h,y,w,_,x]);const N=(0,f.useCallback)((async({doFulfill:e=!0})=>{const t=C()?.[0],n=t.name;if(A([]),!ui(n))return I({action:"upload_site_logo"}),{message:(0,m.sprintf)(
// Translators: %s is a comma-separated list of allowed file types.
// Translators: %s is a comma-separated list of allowed file types.
(0,m.__)("Please provide a valid image file. Allowed file types: %s","big-sky"),li.join(", ")),awaitingUserInput:!0,unfulfilled:!0};I({}),await o((async()=>{const n=await d(t.file);i(b.IMAGE,n),M([$.LOGO]),e&&P()}))()}),[C,I,o,d,i,P,A,M]),O=(0,f.useCallback)((async({doFulfill:e=!0,clientId:t,description:n})=>{const a=C()?.[0],r=a.name;if(A([]),!ui(r))return I({action:"upload_image"}),{message:(0,m.sprintf)(
// Translators: %s is a comma-separated list of allowed file types.
// Translators: %s is a comma-separated list of allowed file types.
(0,m.__)("Please provide a valid image file. Allowed file types: %s","big-sky"),li.join(", ")),awaitingUserInput:!0,unfulfilled:!0};I({}),await o((async()=>{const o=await u(t,a.file,n);i(b.IMAGE,o),M([$.IMAGE]),e&&P()}))()}),[C,I,o,u,i,P,A,M]);(0,f.useEffect)((()=>{if(S?.length&&E?.action)switch(E.action){case"upload_site_logo":N({doFulfill:!0});break;case"upload_image":O({doFulfill:!0,clientId:E.clientId,description:E.description})}}),[S,E,O,N])}},Nr=Mr;function Or(e=[]){const t=e.find((e=>e.isHomePage)),n=e.find((e=>e.isCurrentPage));return{name:"navigate_to_page",description:`Navigate to and edit a page based on user input.\n\t\tHome page: "${t?.title}" (ID: ${t?.id})\n\t\tCurrent page: "${n?.title}" (ID: ${n?.id})\n\t\tIf already on requested page, respond: "You're already on the page."\n\t\tFor unclear requests or non-existent pages, ask for clarification.\n\t\tIf page doesn't exist, offer to create a new one.\n\t\tDo not return any content in your response.`,parameters:{type:"object",properties:{page:{type:"string",description:"The title:postId of the page.",enum:[...e.map((e=>`${e.title}:${e.id}`))]}},required:["page"]},additionalProperties:!1,strict:!0}}function Rr(e=[]){const t=e.find((e=>e.isHomePage)),n=e.find((e=>e.isCurrentPage));return{name:"rename_page",description:`Rename an existing page with a new title. \n\t\t\tHome page: "${t?.title}" (ID: ${t?.id})\n\t\t\tCurrent page: "${n?.title}" (ID: ${n?.id})\n\t\t\tSelect the page from the available pages list. \n\t\t\tDo not use this tool if the page does not exist in the list.`,parameters:{type:"object",properties:{page:{type:"string",description:'The page to rename, in format "title:postId".',enum:[...e.map((e=>`${e.title}:${e.id}`))]},newTitle:{type:"string",description:"The new title for the page."}},required:["page","newTitle"]},strict:!0}}function Dr(e=[]){return{name:"remove_page",description:"Remove an existing page from the site.\n\t\t\tSelect the page from the available pages list.\n\t\t\tDon't list the home page in the available pages list.\n\t\t\tDo not use this tool if the page does not exist in the list.\n\t\t\tNote: The home page cannot be removed.",parameters:{type:"object",properties:{page:{type:"string",description:'The page to remove, in format "title:postId".',enum:[...e.filter((e=>!e.isHomePage)).map((e=>`${e.title}:${e.id}`))]}},required:["page"]},strict:!0}}const Lr={name:"page",tools:e=>[{name:"add_page",description:"Add a new page based on the user's description.\n\t\t\tDo not use this tool if the user requests a new section or pattern.\n\t\t\t",parameters:{type:"object",properties:{type:{type:"string",description:"The type of page to add.",enum:["about","contact","events","menu","pricing","gallery","blog","services","team","other"]},topic:{type:"string",description:"A one or two word summary of the main focus of the page. Always create this yourself, never ask the user for clarification."},title:{type:"string",description:"The title of the page that will be displayed to the users."},description:{type:"string",description:"A brief description of the page that will be used to generate the page content."},sections:{type:"array",description:`An ordered list of page sections for the given page type copied exactly from pageTypeSections: ${JSON.stringify({about:["about","about"],contact:["contact"],events:["events","about"],menu:["menu"],pricing:["pricing","about"],gallery:["gallery"],blog:["posts"],services:["services","about"],team:["team","about"],other:["about","about"]})}.`,items:{type:"object",additionalProperties:!1,required:["slug","reason"],properties:{slug:{type:"string",description:"The slug identifying the specific page section."},reason:{type:"string",description:"A brief explanation of what content would be added to this section given the page type and topic."}}}}},required:["type","title","sections","description","topic"]},strict:!0},Or(e.pages),Rr(e.pages),{name:"show_pages",description:"Show all of the sites pages.",parameters:{type:"object",properties:{showAllPages:{type:"boolean",description:"Whether to show all pages."}},required:["showAllPages"]},additionalProperties:!1,strict:!0},Dr(e.pages)]},Br={id:b.PAGE,description:"Helps with all requests related to adding a new page, and navigating between pages.",instructions:(e={})=>function(e){const t=e.pages?e.pages.map((e=>` - ${e.title}`)).join("\n"):"No Pages";return`\nYou are an expert website page manager, specializing in page creation, showing all pages, navigation, renaming, and structure optimization. Your primary goal is to help users effectively manage their website pages or route their queries to appropriate assistance.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\nHere is a list of the pages that exist on this site:\n\n<site_pages>\n${t}\n</site_pages>\n\n<current_page>\n${e.currentPageId}: ${e.currentPageTitle}\n</current_page>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle request:\n   - If the user wants to see all pages, call the show_pages tool.\n   - If it's a new page request:\n      - Call the add_page tool with the appropriate title and sections.\n      - Choose a title yourself based on the type of page the user is requesting.\n      - Only ask for clarification of the title if the user asks for a new page but does not specify a title or subject.\n      - The add_page tool provides the required section for each new page type, you do not need to ask the user for sections.\n   - If it's a rename page title request, call the rename_page tool with the newTitle.\n   - If the user wants to remove or delete a page, call the remove_page tool.\n   - For navigation requests, call the navigate_to_page tool.\n   - If a requested page doesn't exist, offer to create it.\n   - If any aspect of the request is ambiguous ask the user for clarification.\n   - ${Et}\n\n2. Examples:\n\nUser: "Create an About page"\nAction: Call add_page with the sections from pageTypeSections.about\n\nUser: "Take me to the Contact page"\nAction: Call navigate_to_page for Contact page\n\nUser: "Rename the About page title to About Us"\nAction: Call rename_page with the new title "About Us"\n\nUser: "Show me all my pages"\nAction: Call show_pages tool\n\nUser: "Remove the About page"\nAction: Call remove_page tool\n\nUser: "Remove this page"\nAction: Call remove_page tool with the page shown in <current_page>.\n\nUser: "Remove page"\nAction: Request clarification from the user about which page they want to remove. Then call remove_page with the updated information.\n\n3. Restrictions:\n\n   - Follow pageTypeSections structure strictly\n   - Don't create duplicate pages\n   - Do not allow removal of the Home page.\n   - NEVER ask about sections when adding a page. The sections are provided by the add_page tool.\n   - NEVER ask the user to confirm a title when adding a page if a subject or title is provided in the request.\n\nAlways call appropriate tools immediately or request clarification.\n`}(e),tags:[b.PAGE],toolkits:[Lr],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{addAssistantMessage:t,assistantSay:n,deleteMarkedMessages:o}=Jt(),{registerCallbacks:i,registerContext:a,setChatComponents:r,addMessageToDelete:c,setShowThread:l,setHideInput:u,incrementFocusInput:d,userSay:p}=(0,g.useDispatch)(wt),{saveAndGoToPage:y}=Pi(),{addPage:w}=function(){const{getSelectedBlock:e}=(0,g.useSelect)(v.store),{updateBlockAttributes:t}=(0,g.useDispatch)(v.store),{createPage:n}=Pi(),{syncSiteMetadataPatterns:o}=Si(),{getSiteMetadata:i}=tn(),a=(0,f.useCallback)((async a=>{const{siteDescription:r,siteLocation:s,navigationId:c}=i(),l=e(),u=["core/button"].includes(l?.name),{title:d,description:p,sections:g,topic:h}=a,{newPage:f,rootBlocks:m}=await n({title:d,categories:g,siteDescription:r,siteLocation:s,navigationId:c,pageDescription:p,topic:h});return o({ids:[f.id],blocks:[m],persist:!0}),u&&t(l.clientId,{url:`/?page_id=${f.id}`}),{title:d,categories:g,pageId:f.id}}),[n,e,i,o,t]);return{addPage:a}}(),{navigateToPage:k,validateNavigateToPageArgs:_}=function(){const{getCurrentPostId:e}=(0,g.useSelect)((e=>({getCurrentPostId:e(h.store).getCurrentPostId}))),t=e=>({pageTitle:e.split(":")[0],postId:parseInt(e.split(":")[1])});return{navigateToPage:async e=>{const{page:n}=e,{pageTitle:o,postId:i}=t(n);return{pageTitle:o,postId:i}},validateNavigateToPageArgs:n=>{const{page:o}=n,{postId:i}=t(o);if(i===e())throw new Error((0,m.__)("You are already on this page.","big-sky"));return!0}}}(),{renamePage:x,validateRenamePageArgs:C}=function(){const{getEntityRecord:e}=(0,g.useSelect)((e=>({getEntityRecord:e(Zt.store).getEntityRecord,getCurrentPostId:e(h.store).getCurrentPostId})),[]),{addPageRenameToCheckpoint:t}=Mi(),{renamePage:n}=Pi();return{renamePage:(0,f.useCallback)((async o=>{const{page:i,newTitle:a}=o,r=parseInt(i.split(":")[1],10),s=i.split(":")[0];if(!e("postType","page",r))throw new Error((0,m.__)("The page you are trying to rename does not exist.","big-sky"));return t(r,s,a),{pageId:r,oldTitle:s,newTitle:a,success:(await n(r,a,{oldTitle:s})).success}}),[e,t,n]),validateRenamePageArgs:e=>{if(!e.page||!e.newTitle)throw new Error((0,m.__)("Please provide a page and a new title.","big-sky"));return!0}}}(),{removePage:S,validateRemovePageArgs:E}=function(){const{getEntityRecord:e}=(0,g.useSelect)((e=>({getEntityRecord:e(Zt.store).getEntityRecord})),[]),{addPageRemovalToCheckpoint:t}=Mi(),{trashPage:n,goToPage:o}=Pi(),i=(0,g.useRegistry)();return{removePage:(0,f.useCallback)((async a=>{const{page:r}=a,s=parseInt(r.split(":")[1],10),c=r.split(":")[0],l=e("root","site")?.page_on_front;if(!e("postType","page",s))throw new Error((0,m.__)("The page you are trying to delete does not exist.","big-sky"));if(s===l)throw new Error((0,m.__)("Cannot delete the home page.","big-sky"));s===i.select(h.store).getCurrentPostId()&&await o({postId:l,postType:"page"});const u=await n(s);return u.success&&t(s,c,{shouldRestoreNavigation:u.navigationUpdateSuccess}),{pageId:s,pageTitle:c,success:u.success}}),[e,i,t,n,o]),validateRemovePageArgs:e=>{if(!e.page)throw new Error((0,m.__)("Please provide a page to delete.","big-sky"));return!0}}}(),{getPages:T}=Pi(),{getSiteMetadata:I}=tn(),{siteTitle:A,siteDescription:P,siteLocation:N,topic:O}=I(),{addNewPageToCheckpoint:R,addCheckpointKeys:D}=Mi(),{showSiteLayouts:L}=Er(),{zoomOut:B}=cn(),{close:F,open:j}=(0,g.useDispatch)(bn.store),{postId:U,postType:H}=Sn(),[z]=(0,Zt.useEntityProp)("postType",H,"title",U),G=(0,g.useSelect)((e=>e(bn.store).isOpen),[]),q={actionName:(0,m.__)("No","big-sky"),description:(0,m.__)("I changed my mind","big-sky"),type:"confirmation",key:"remove-page-no"},V=[{actionName:(0,m.__)("Yes","big-sky"),description:(0,m.__)("Delete the page","big-sky"),type:"confirmationDestructive",key:"remove-page-yes"},q];(0,f.useEffect)((()=>{i(b.PAGE,{add_page:e({name:"add_page",action:async e=>{const{sections:o}=e,{pageId:i}=await w(e);R(i);const a={actions:[{key:"save-and-go-to-page",actionName:(0,m.__)("Save and go to page","big-sky"),onClick:async()=>{await y(i),r([]);const{component:e,message:a}=L({newPageLayouts:!0,categories:o});B(),t(b.LAYOUT,a);const s=await n(e);c({id:s?.message?.id})}}]};return{message:(0,m.__)("Generated page","big-sky"),checkpointKeys:[$.PAGE],suggestions:a}},closeChatWhenDone:()=>!1}),show_pages:e({name:"show_pages",action:async()=>G()?{message:(0,m.__)("Your site pages are already showing","big-sky")}:(j(),{message:(0,m.__)("Showing all pages","big-sky")}),closeChatWhenDone:()=>!1}),navigate_to_page:e({name:"navigate_to_page",action:async e=>{const{postId:t}=await k(e);return G()&&F(),await ut(1e3),await y(t),{message:(0,m.__)("Navigated to page","big-sky"),forceNewCheckpoint:!0}},validator:_,closeChatWhenDone:()=>!1}),rename_page:e({name:"rename_page",action:async e=>(await x(e),{message:(0,m.__)("Renamed page","big-sky"),checkpointKeys:[$.PAGE]}),validator:e=>C(e),closeChatWhenDone:()=>!1}),remove_page:e({name:"remove_page",action:async e=>{const{page:i}=e,a=i.split(":")[0];return l(!0),u(!0),n((0,m.sprintf)(
// translators: %s is the title of the page that will be removed.
// translators: %s is the title of the page that will be removed.
(0,m.__)('Are you sure you want to delete the "%s" page?',"big-sky"),a)),r([(0,s.createElement)(Fi,{key:"suggestions",args:{actions:V},respond:async i=>{if(i.startsWith(q.actionName))return r([]),u(!1),d(),p((0,m.__)("No, I changed my mind","big-sky"));try{await p((0,m.__)("Yes, delete the page","big-sky"));const n=await S(e);D([$.PAGE]);const i=await t(b.PAGE,(0,m.sprintf)(
// translators: %s is the title of the page that was removed.
// translators: %s is the title of the page that was removed.
(0,m.__)('I deleted the "%s" page',"big-sky"),n.pageTitle),{role:M.ASSISTANT}),a=await t(b.PAGE,(0,s.createElement)(Ni,{key:"completed-plan",onAfterUndo:o}),{role:M.RESPONSE_ACTIONS});c({id:i?.message?.id}),c({id:a?.message?.id})}catch(e){n((0,m.__)("There was an error deleting the page. Please try again.","big-sky"))}finally{r([]),u(!1),d()}}})]),{awaitingUserInput:!0,unfulfilled:!0}},validator:e=>E(e),closeChatWhenDone:()=>!1})})}),[i]),(0,f.useEffect)((()=>{const e={site:{siteTitle:A,siteDescription:P,siteLocation:N,topic:O},categories:ke.map((e=>e.slug)),pages:T(),currentPageId:U,currentPageTitle:z};a(b.PAGE,e)}),[T,a,A,P,N,O,U,z])}},Fr=(e,t,n,o)=>`[${e}](${t} ${n?`"${n}=${o}"`:""})`,jr=[{slug:["what-can-i-do"],description:"An overview of all available customization and editing features for the site.",answer:`**${(0,m.__)("Here's a list of things I can help you with:","big-sky")}**\n- ${(0,m.__)("Updating text","big-sky")}\n- ${(0,m.__)("Updating an image or logo","big-sky")}\n- ${(0,m.__)("Changing your site colors","big-sky")}\n- ${(0,m.__)("Changing your site fonts","big-sky")}\n- ${(0,m.__)("Changing your site layout","big-sky")}\n- ${(0,m.__)("Adding or replacing a section","big-sky")}\n- ${(0,m.__)("Adding a new page","big-sky")}\n- ${(0,m.__)("Adding or updating a social link","big-sky")}\n- ${(0,m.__)("Updating your address","big-sky")}\n\n ${(0,m.__)("Also feel free to click around the editor and see the services I can provide!","big-sky")}`},{slug:["update-address"],description:"Instructions for updating the site address and associated map locations.",answer:`**${(0,m.__)("To update your address:","big-sky")}**\n1. ${(0,m.__)('Ask me to "Update my address to {address}"',"big-sky")}\n2. ${(0,m.__)("I'll update the address on your site and any maps that use it","big-sky")}`},{slug:["add-social-link"],description:"Guidance on adding new social media links to the site header or footer.",answer:`**${(0,m.__)("If you'd like me to add a social link to your site:","big-sky")}**\n1. ${(0,m.__)('Ask me to "Add a social link for my {social network url}"',"big-sky")}\n2. ${(0,m.__)("I'll add the new social link to the header and/or footer of your site","big-sky")}\n\n**${(0,m.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,m.__)("Click on the social links block in the editor","big-sky")}\n2. ${(0,m.__)('Click the "+" button',"big-sky")}\n3. ${(0,m.__)("Select or browse for your desired social network","big-sky")}\n4. ${(0,m.__)("Click on the added social link and enter your URL","big-sky")}`},{slug:["update-social-link"],description:"Steps for updating existing social media links in the site header or footer.",answer:`**${(0,m.__)("If you'd like me to update a social link on your site:","big-sky")}**\n1. ${(0,m.__)('Ask me to "Update the {social network} social link to {social network url}"',"big-sky")}\n2. ${(0,m.__)("I'll update the corresponding social links in the header and/or footer of your site","big-sky")}\n\n**${(0,m.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,m.__)("Click on the social link you want to update in the editor","big-sky")}\n2. ${(0,m.__)("Enter your URL","big-sky")}`},{slug:["color"],description:"Instructions for customizing the site color scheme and palette.",answer:`**${(0,m.__)("If you'd like me to help you update your site colors:","big-sky")}**\n1. ${(0,m.__)('Ask me to "Change my site colors"',"big-sky")}\n2. ${(0,m.__)('Provide me with a list of specific colors you\'d like to use, or a type of color scheme you\'d like to use (e.g. "pastel", "vibrant", "muted", etc.)',"big-sky")}\n3. ${(0,m.__)("I'll provide you a list of color palettes to choose from","big-sky")}\n\n**${(0,m.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,m.__)('Click on the "Styles" button in the top toolbar',"big-sky")}\n2. ${(0,m.__)('Click on "Browse styles"',"big-sky")}\n3. ${(0,m.__)("Select from one of the predefined color palettes","big-sky")}`},{slug:["contact-form"],description:"Help with modifying contact form fields and requirements.",answer:`**${(0,m.__)("Here are some examples you can give me to update the contact form on your site:","big-sky")}**\n- ${(0,m.__)("add a phone number field","big-sky")}\n- ${(0,m.__)("make the message field required","big-sky")}\n- ${(0,m.__)("remove the email field","big-sky")}`},{slug:["font"],description:"Guidance for updating and customizing site typography scheme and font choices.",answer:`**${(0,m.__)("If you'd like me to help you update your site fonts:","big-sky")}**\n1. ${(0,m.__)('Ask me to "Change my site fonts"',"big-sky")}\n2. ${(0,m.__)('Provide me with a list of specific fonts you\'d like to use, or a type of font scheme you\'d like to use (e.g. "serif", "sans-serif", "modern", etc.)',"big-sky")}\n3. ${(0,m.__)("I'll provide you a list of font sets to choose from","big-sky")}\n\n**${(0,m.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,m.__)('Click on the "Styles" button in the top toolbar',"big-sky")}\n2. ${(0,m.__)('Click on "Browse styles"',"big-sky")}\n3. ${(0,m.__)("Select from one of the predefined font sets","big-sky")}`},{slug:["image"],description:"Steps for updating or replacing and image or images using AI generation or manual uploads.",answer:`${(0,m.__)('You can drag images from your computer over any image in the editor to replace it, or you can select that image and click the "Replace" button in the toolbar at the top of the window.',"big-sky")}\n\n${(0,m.__)("You can also ask me to generate an image with AI or fetch a stock image.","big-sky")}`},{slug:["background-image-site"],description:"Instructions for setting a site-wide background image.",answer:`${(0,m.__)("I can't help with setting site-wide background images, but you can do this yourself:","big-sky")}\n\n**${(0,m.__)("To set a background image for your entire site:","big-sky")}**\n1. ${(0,m.__)("Go to Appearance  Editor in your dashboard","big-sky")}\n2. ${(0,m.__)('Select "Styles" from the left-side menu',"big-sky")}\n3. ${(0,m.__)('Click on the "Background" option',"big-sky")}\n4. ${(0,m.__)('Click "Add background image" to select or upload an image',"big-sky")}\n\n${Fr((0,m.__)("Learn more about changing your site's background image","big-sky"),"https://wordpress.com/support/background-image/")}`},{slug:["logo"],description:"Instructions for updating the site logo using custom uploads or AI generation.",answer:`**${(0,m.__)("If you already have a logo image you want to use:","big-sky")}**\n1. ${(0,m.__)('Ask me to "update the logo"',"big-sky")}\n2. ${(0,m.__)("Drop your logo image into the chat box and I'll do the rest!","big-sky")}\n\n**${(0,m.__)("If you want me to generate a new logo for you:","big-sky")}**\n1. ${(0,m.__)("Select the logo image in the editor","big-sky")}\n2. ${(0,m.__)('Click "Regenerate"',"big-sky")}\n3. ${(0,m.__)('Click "Make a logo using AI"',"big-sky")}`},{slug:["new-page-design"],description:'Instructions about new page designs, eg. "how do I see alternative page designs?"',answer:`**${(0,m.__)("To update your site layout:","big-sky")}**\n1. ${(0,m.__)('Ask me to "Change my site layout"',"big-sky")}\n2. ${(0,m.__)("I'll provide you with a list of layouts to choose from","big-sky")}\n3. ${(0,m.__)("To generate a new layout, click on the last empty layout in the list","big-sky")}`},{slug:["dimensions"],description:'Instructions about changing the dimensions of a block using padding, margins and spacing"',answer:`${(0,m.__)("I can't help with adjusting spacing yet, but you can adjust this yourself:","big-sky")}\n\n ${Fr((0,m.__)("Learn about editing block spacing","big-sky"),"https://wordpress.com/support/block-dimensions-settings/")}`},{slug:["edit-text"],description:"Instructions for modifying text content and bold and italic styling.",answer:`**${(0,m.__)("To update text on your site:","big-sky")}**\n1. ${(0,m.__)("Click on the text you want to change","big-sky")}\n2. ${(0,m.__)("Start typing to make changes","big-sky")}\n3. ${(0,m.__)("You'll find some tools in the top toolbar to change style and alignment","big-sky")}\n4. ${(0,m.__)("You can also ask me to generate or rewrite text","big-sky")}`},{slug:["add-section"],description:"Steps for adding new patterns and sections to the site layout.",answer:`**${(0,m.__)("To add a section to your site:","big-sky")}**\n1. ${(0,m.__)("Select a section in the editor","big-sky")}\n2. ${(0,m.__)('Click "Add Pattern"',"big-sky")}\n3. ${(0,m.__)('Specify which section you would like to add by either selecting one from the list or telling me the type of section (e.g. "menu", "services", "about", etc.)',"big-sky")}\n4. ${(0,m.__)("You can also specify if you want the new section added before or after the one selected","big-sky")}`},{slug:["replace-section"],description:"Guide for replacing existing content sections and patterns with new layouts.",answer:`**${(0,m.__)("To replace a section on your site:","big-sky")}**\n1. ${(0,m.__)("Select a section in the editor","big-sky")}\n2. ${(0,m.__)('Ask me to "Replace this section"',"big-sky")}\n3. ${(0,m.__)("I'll provide you with a list of different section options you can choose from","big-sky")}`},{slug:["group"],description:'Instructions about how to group blocks, either when adding new blocks or grouping existing blocks"',answer:`${(0,m.__)("I can't help with grouping blocks but you can do this yourself:","big-sky")}\n\n ${Fr((0,m.__)("Learn about grouping blocks","big-sky"),"https://wordpress.com/support/wordpress-editor/blocks/group-block/")}`},{slug:["domain","seo","pricing","wordpress.com","other"],description:"Fallback entries for domain, SEO, pricing and other WordPress.com related queries."},{slug:["add-block"],description:"Instructions for adding a new block to the site layout.",answer:`**${(0,m.__)("To add a block to your site:","big-sky")}**\n\n ${Fr((0,m.__)("Learn about adding blocks","big-sky"),"https://wordpress.com/support/wordpress-editor/add-content-blocks/")}`},{slug:["contact-support"],description:"When the user asks to contact customer support, provide a link to the support page.",answer:"\n"}],$r=jr.flatMap((e=>e.slug)),Ur={name:"help",tools:()=>[{name:"ask_wordpress_expert",description:"\n\t\t\tClassify the user question into one of the given answer slugs.\n\t\t\tUse this tool for all WordPress (both WordPress.com and self-hosted) questions.\n\t\t\t",parameters:{type:"object",properties:{question:{type:"string",description:"The user question to classify."},slug:{type:"string",description:"The slug of the answer to return.",enum:$r}},required:["question","slug"]},strict:!0}]};let Hr=0;function zr(){const{ask_odie:e}=function(){const{sessionId:e}=(0,g.useSelect)((e=>({isDevMode:e(wt).getIsDevMode(),sessionId:e(wt).getSessionId()}))),t=async(n,o=!1)=>{let i=(0,m.__)("I don't know the answer to that question.","big-sky");const a=await ye(!o),r=window?.JP_CONNECTION_INITIAL_STATE?.userConnectionData?.currentUser?.blogId;if(a){const s="https://public-api.wordpress.com/wpcom/v2/odie/chat/wpcom-chat-bigsky"+(Hr?`/${Hr}`:"");try{const t=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${a.token}`,"Content-Type":"application/json"},body:JSON.stringify({message:n.question,context:{selectedSiteId:r},source:"big-sky",source_user:e})}),o=await t.json(),c=o?.messages?.[0];c?.content&&(Hr=o.chat_id,i=c.content,c?.context?.sources)&&(i+=Object.values(c.context.sources.reduce(((e,t)=>(e[t.url]||(e[t.url]=t),e)),{})).map((e=>`\n\n- [${e.title}](${e.url})`)).join(""))}catch(e){if(!o)return t(n,!0);K.error("Error calling WordPress Expert API: ",e)}}return i};return{ask_odie:t}}(),t=(0,g.useSelect)((e=>({siteId:e(Zt.store).getSite()?.ID||window?.JP_CONNECTION_INITIAL_STATE?.userConnectionData?.currentUser?.blogId||"",siteUrl:window?.Jetpack_Editor_Initial_State?.siteFragment||window.location.hostname,sessionId:e(wt).getSessionId()})),[]);return{askWordPressExpert:async n=>{const o=jr.find((e=>e.slug.includes(n.slug)));let i=o?.answer;return o&&o?.answer||(i=await e(n),i+="\n\n---"),i+="\n\n"+(({siteId:e,siteUrl:t,sessionId:n})=>{const o=P()?"wapuu":"happiness-engineer";return`${(0,m.__)("If you'd like to speak to customer support, you can reach them here:","big-sky")}\n\n ${Fr((0,m.__)("Contact support","big-sky"),`https://wordpress.com/help?help-center=${o}&user-message=${encodeURIComponent(`Big Sky Session ID: ${n}`)}&site-id=${e}&site-url=${t}`,z.DATA_TRACK,"contact_support_click")}`})(t),i}}}const Gr={id:b.HELP,description:"An assistant that helps answer questions about WordPress, website building, and providing technical guidance.",instructions:()=>`\nYou are a WordPress expert at Automattic specializing in answering questions about WordPress, website building, and technical guidance.\n${Pt}\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Questions:\n   - If you are not able to determine a WordPress or website topic/area you can ask the user for clarification\n   - Include all relevant context and specific components mentioned.\n   - Always call the 'ask_wordpress_expert' tool.\n   - NEVER pretend to have completed the requested task yourself\n   - Requests to speak with a human or customer support\n   - ${Et}\n\n2. Choose a slug:\n   - Classify the user question into one of the given answer slugs\n   - When choosing a slug always use the description to help pick the most relevant slug\n   - If the answer slug cannot be inferred from the user question, try using the selected block context\n   - If the user question cannot be classified, set the slug value to 'other'\n\n4. Answer slugs\n${jr.map((e=>`- slug: ${e.slug}, description: ${e.description}`)).join("\n")}\n\n5. Examples:\n\nUser: "How do I customize my header?"\nAction: Call 'ask_wordpress_expert' tool with context about header modification\n\nUser: "What's the difference between pages and posts?"\nAction: Call 'ask_wordpress_expert' tool with context about content management\n\nUser: "Can you replace the contact section"\nAction: Call 'ask_wordpress_expert' tool with context about section or pattern replacement\n\nUser: "I need to speak with customer support"\nAction: Call 'ask_wordpress_expert' tool with support context and 'contact-support' slug\n\nUser: "Can I talk to a human?"\nAction: Call 'ask_wordpress_expert' tool with support context and 'contact-support' slug\n\n6. Restrictions:\n   - Only answer WordPress-related questions\n   - Never rephrase the user request yourself to make it a question\n   - Stick to WordPress expertise scope\n\nRemember to call appropriate tool immediately.\n`,tags:[b.HELP],toolkits:[Ur],toolkitHook:function(){const{createToolCallback:e}=Ot(),{registerCallbacks:t}=(0,g.useDispatch)(wt),{askWordPressExpert:n}=zr(),{validateArguments:o}={validateArguments:e=>{if(!e?.question)throw new Error((0,m.__)("Please provide a question to ask the WordPress expert.","big-sky"));return!0}};(0,f.useEffect)((()=>{t(b.HELP,{ask_wordpress_expert:e({name:"ask_wordpress_expert",action:async e=>({message:await n(e)}),validator:e=>o(e),closeChatWhenDone:()=>!1})})}),[t])}},qr={name:"site-admin",tools:()=>[{name:"start_over",description:'Always call this if the user wants to start over from scratch or change what their site is about.\n\t\tExamples of when to call this:\n\t\t- "Start over"\n\t\t- "I want to start fresh"\n\t\t- "Can I change what my site is about?"\n\t\t- "Let\'s start from the beginning"\n\t\t- "Reset everything"\n\t\t- "Design a website that can ..."\n\t\tAlways call this tool directly when the user expresses a desire to start over.\n\t\tNever try to reset the site yourself, or reply with a message to say you have done so.\n\t\tDo not ask follow-up questions, just call this tool directly when the user expresses a desire to start over.'}]};function Vr(){const{getCurrentPostId:e}=(0,g.useSelect)(h.store),{getEntityRecord:t}=(0,g.useSelect)(Zt.store),{savePost:n}=(0,g.useDispatch)(h.store),{saveEntityRecord:o}=(0,g.useDispatch)(Zt.store),{resetStyles:i}=Bo(),{setSiteMetadata:a}=tn(),{deleteAllBigSkyPagesExceptHome:r,goToPage:s}=Pi(),{clearBlocks:c}=cn(),{clearMessages:l,assistantSay:u,setPlanRunning:d}=Jt(),{clearSelectedSectionContent:p,resetCachedContent:f,setShowThread:y,setIsHandoff:w,setAssistant:v,setHandoffStep:k,setPendingPlan:_,setAwaitingUserInput:x,setDockView:C,setHeaderSectionIsReady:S}=(0,g.useDispatch)(wt);return{resetSite:async()=>{const u=e(),g=t("root","site")?.page_on_front;if(r(),async function(){try{return await E({path:"/wpcom/v2/big-sky/v1/dummy-posts",method:"DELETE"})}catch(e){return K.error("Error deleting dummy posts: ",e),!1}}(),i(),a({...R},!0),f(),p(),w(!1),k(0),_(null),x(!1),S(!1),d(!1),localStorage.removeItem("siteMeta"),localStorage.removeItem("buildDesigns"),l(),g!==u)return await n(),o("postType","page",{id:g,content:""}),void await s({postId:g,postType:"page"});await c(),await n()},buildNewSite:(e=(0,m.__)("You can rebuild your site from here. Either build a new site with the same details, or modify them and then rebuild.","big-sky"))=>{l(),w(!1),k(0),C(null),y(!0),v(b.SPEC),u(e)}}}const Wr={id:b.SITE_ADMIN,description:"An assistant that handles site-wide administrative tasks like resetting the site.",instructions:e=>`You are a WordPress site administration assistant, currently handling a site reset request.\n${Pt}\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nExamples:\n\nUser: "Start over"\nAction: Call start_over tool immediately\n\nUser: "I want to make a different kind of website"\nAction: Call start_over tool immediately\n\nUser: "Reset everything and start fresh"\nAction: Call start_over tool immediately\n\nUser: "Design a site that is more professional"\nAction: Call start_over tool immediately\n\nAlways call appropriate tools immediately.`,tags:[b.SITE_ADMIN],toolkits:[qr],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t}=(0,g.useDispatch)(wt),{startOver:n,startOverActions:o}=function(){const{resetSite:e}=Vr(),t=[{actionName:(0,m.__)("Yes","big-sky"),description:(0,m.__)("Permanently reset my site","big-sky"),type:"confirmationDestructive",key:"start-over-yes"},{actionName:(0,m.__)("No","big-sky"),description:(0,m.__)("I have changed my mind","big-sky"),type:"confirmation",key:"start-over-no"}];return{startOver:async n=>{n.startsWith(t[0].actionName)&&e()},startOverActions:t}}(),{setChatComponents:i,setShowThread:a,setHideInput:r}=(0,g.useDispatch)(wt),{assistantSay:c}=Jt(),{isSiteEditor:l}=Sn(),{incrementFocusInput:u}=(0,g.useDispatch)(wt),d={start_over:e({name:"start_over",action:async()=>{a(!0),l&&r(!0);const e={actions:o};if(l)return c((0,m.__)("All customizations and pages on your site will be permanently reset. Are you sure you want to start over?","big-sky")),i([(0,s.createElement)(Fi,{key:"suggestions",args:e,respond:async e=>{n(e),i([]),r(!1),u()}})]),{awaitingUserInput:!0,unfulfilled:!0};c((0,m.__)("You need to be in the site editor to start over. Please switch to the [Site Editor](/wp-admin/site-editor.php) and try again.","big-sky"))},closeChatWhenDone:()=>!1})};return(0,f.useEffect)((()=>{t(b.SITE_ADMIN,d)}),[t]),d}},Yr="surrounding";function Kr(e=null){return{name:"edit_blocks",description:`\nA natural language processing tool that modifies WordPress block editor patterns based on conversational commands. It handles both precise technical changes and broad style requests while preserving pattern integrity and block attributes.\n\nKey functions:\n- Modify layouts (repositioning, stacking elements)\n- Adjust content (add/remove sections, update items)\n- Transform styles (update design aesthetics)\n- Change structure (column arrangements, section splits)\n\nIf the site location is not specified in the user request, default to ${e?`"${e}"`:'"null"'}\n`,parameters:{type:"object",properties:{userPrompt:{type:"string",description:"The original prompt from the user describing the desired changes."},scope:{type:"string",description:'The scope of the changes being requested.\n\t\t\t\t\tIf the request is to edit a specific block directly (e.g. "change the text color of this to red"), use "target".\n\t\t\t\t\tIf the request is to add/edit blocks around a specific block (e.g. "add a paragraph after this" or "insert an image before this"), use "surrounding".\n\t\t\t\t\tIf the request is to edit a specific block as well as adjacent blocks (e.g. "make this and the next two paragraphs bold"), use "both".',enum:["target",Yr,"all"]}},required:["userPrompt","scope"]},strict:!0}}const Jr={name:"blocks",tools:e=>[Kr(e?.site?.location?.name),{name:"remove_block",description:"Removes a block or section from the page."}]},Xr=n.p+"images/placeholder.4bc89261.jpg",Zr=(e,t)=>{if(!(e.updates||e.inserts||e.deletes||e.summary))throw new Error("Response must contain either updates, insertions, or deletions, or a summary message");const n=e=>{if(!e.name&&!e.clientId)throw new Error("Block must have a name property");if(!t.includes(e.name)&&!e.clientId)throw new Error(`Block type "${e.name}" is not available`);if(e.innerBlocks)for(const t of e.innerBlocks)n(t)};if(e.updates)for(const t of e.updates){if(!t.clientId||!t.name)throw new Error("Updates must contain clientId and name");n(t)}if(e.inserts)for(const t of e.inserts){if(!t.block?.name)throw new Error("Insertions must contain block data with a name");n(t.block)}if(e.deletes){if(!Array.isArray(e.deletes))throw new Error("Deletions must be an array of clientIds");for(const t of e.deletes)if("string"!=typeof t)throw new Error("Each deletion must be a clientId string")}},Qr=(e,t,n)=>{if(!e)return t;const o={...e,...t,attributes:{...e.attributes,...t.attributes||{}}};return t.innerBlocks?o.innerBlocks=t.innerBlocks.map((t=>{const o=n[t.clientId],i=e.innerBlocks?.find((e=>e.clientId===o));return Qr(i,t,n)})):o.innerBlocks=e.innerBlocks||[],o},es=(e,t)=>{const n=e=>{const t=[];return e.headerBlocks&&t.push(...e.headerBlocks),e.footerBlocks&&t.push(...e.footerBlocks),e.contentBlocks&&t.push(...e.contentBlocks),t},o=(e,t,n="")=>{const i={},a=new Set([...Object.keys(e),...Object.keys(t)]);for(const r of a){const a=n?`${n}.${r}`:r;if(r in e&&r in t)if("object"==typeof e[r]&&null!==e[r]&&"object"==typeof t[r]&&null!==t[r]){const n=o(e[r],t[r],a);Object.keys(n).length>0&&(i[r]=n)}else JSON.stringify(e[r])!==JSON.stringify(t[r])&&(i[r]={from:e[r],to:t[r]});else r in e?i[r]={from:e[r],to:void 0}:r in t&&(i[r]={from:void 0,to:t[r]})}return i},i=n(e),a=n(t),r=a.filter((e=>!i.some((t=>t.clientId===e.clientId)))),s=i.filter((e=>!a.some((t=>t.clientId===e.clientId)))),c=[];return a.forEach((e=>{const t=i.find((t=>t.clientId===e.clientId));if(t){const n=o(t,e);Object.keys(n).length>0&&c.push({clientId:e.clientId,name:e.name,changes:n})}})),{added:r.map((e=>({clientId:e.clientId,name:e.name,attributes:e.attributes,innerBlocks:e.innerBlocks?.length||0}))),removed:s.map((e=>({clientId:e.clientId,name:e.name,attributes:e.attributes,innerBlocks:e.innerBlocks?.length||0}))),modified:c}};function ts(){const e=(0,g.useSelect)((e=>e(k.store).getBlockTypes()),[]),t=(0,f.useMemo)((()=>Array.isArray(e)?e.map((e=>e.name)):[]),[e]),{getBlock:n}=(0,g.useSelect)(v.store),{getStockImageURL:o,generateImageWithAI:i}=di(),{setBlockIsProcessing:a,getRootBlocksState:r,getSectionRootClientId:s}=sn(),{setDockView:c,setShowThread:l}=(0,g.useDispatch)(wt),{withPendingToolCallback:u}=Ot(),{replaceBlock:d,insertBlock:p,removeBlock:h}=(0,g.useDispatch)(v.store),{topic:y}=tn().getSiteMetadata(),{getLastEditorState:b}=Mi(),w=[],_=async e=>{const t=e.innerBlocks?.length?await Promise.all(e.innerBlocks.map(_)):[],n=(0,k.createBlock)(e.name,e.attributes||{},t);return"core/image"===e.name&&"ai-img-c"===e.attributes?.url&&(n.attributes.url=Xr,n.attributes.className="big-sky__is-processing",w.push(i({block:n,description:n.attributes.alt,style:"photographic"}).then((()=>{a(n,!1,!0)})).catch((e=>{console.error("[Edit Blocks] Error generating custom AI image:",e)})))),n},x=async(e,t)=>{const i=await(async e=>{const{portraitUrls:t,landscapeUrls:n}=await(async()=>{const e=await Promise.all(Array.from({length:40},(()=>o({topic:y,numImages:40}))));return{portraitUrls:e.slice(0,20).map((e=>{const t=e.replace(/[?&](w|h|fit)=[^&]+/g,"");return t+(t.includes("?")?"&":"?")+"fit=crop&w=800&h=1200&orientation=portrait"})),landscapeUrls:e.slice(20).map((e=>{const t=e.replace(/[?&](w|h|fit)=[^&]+/g,"");return t+(t.includes("?")?"&":"?")+"fit=crop&w=1200&h=800&orientation=landscape"}))}})();let i=0,a=0;const r=JSON.stringify(e).replace(/ai-img-p/g,(()=>{const e=t[i];return i++,i>t.length-1&&(i=0),e})).replace(/ai-img-l/g,(()=>{const e=n[a];return a++,a>n.length-1&&(a=0),e}));return JSON.parse(r)})(e);if(i.updates?.length)for(const e of i.updates){const{clientId:o,...i}=e,r=t[o];if(!r)throw new Error(`[Edit Blocks] Could not map compressed clientId: ${o}`);const s=n(r);if(!s)throw new Error(`[Edit BLocks] Block not found with clientId: ${r}`);a(s,!0),await ut(1e3);const c=Qr(s,i,t),l=await _(c);d(r,l),t[o]=l.clientId,a(s,!1)}if(i.inserts?.length)for(const e of i.inserts){const{parentClientId:o,index:i=0,block:a}=e,r=o?t[o]:s();if(!r)throw new Error(`[Edit Pattern] Could not map compressed parent clientId: ${o}`);if(!n(r))throw new Error(`[Edit Pattern] Parent block not found with clientId: ${r}`);const c=await _(a);p(c,i,r)}i.deletes?.length&&await(async(e,t)=>{if(e?.length)for(const o of e){const e=t[o];e?n(e)?h(e):console.error(`[Edit Blocks] Block not found for deletion with clientId: ${e}`):console.error(`[Edit Blockd] Could not map compressed clientId for deletion: ${o}`)}})(i.deletes,t),await Promise.all(w),await ut(200)};return{applyBlockEdits:async({editResults:e,reverseMap:n})=>await u((async()=>{try{Zr(e,t),await x(e,n),setTimeout((()=>{c(D.CHAT),l(!0)}),0);const o=b(),i={blocks:r()};if(JSON.stringify(o.blocks)===JSON.stringify(i.blocks))return(0,m.__)("I was not able to make the changes you requested. Either I don't have the capability to do so or I didn't understand your request. You can ask me to try again or ask me to do something else.","big-sky");const a=es(o.blocks,i.blocks);return K.info("Detailed changes:",a),e.summary}catch(e){throw K.error("[Apply Block Edits] Error:",e),e}}))()}}const ns={id:b.BLOCKS,description:"An assistant that handles editing of blocks.",instructions:e=>function(e){return`\nYou are an expert website designer at Automattic, specializing in pattern and section management for WordPress sites. Your primary goal is to help users customize their website patterns and sections effectively or route their queries to appropriate assistance.\n${Pt}\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Tt(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${St}\n</language>\n\nInstructions:\n\n1. Handle Request:\n   - For pattern or block removal, use the remove_block tool.\n   - For editing existing patterns/sections on pages call edit_blocks\n   - Handle structural operations for all block types, including image blocks\n   - ${Et}\n\n2. Task Boundaries:\n   - You are not able to modify the content of existing images, you can only add new images or move existing images\n\n3. Examples:\n   - Valid tasks: "Update the text in this paragraph", "Change the layout of this section", "Add an image of a dog on the left", "Remove this image block"\n   - Invalid tasks: "Change this image to a cat", "Upload an image here"\n\nRemember to immediately execute appropriate tool calls.\n`}(e),tags:["big-sky-blocks"],toolkits:[Jr],toolkitHook:()=>{const{createToolCallback:e}=Ot(),{registerCallbacks:t,registerContext:n}=(0,g.useDispatch)(wt),{selectedBlock:o}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),{getSiteMetadata:i}=tn(),{siteTitle:a,siteDescription:r,topic:s,siteLocation:c}=i(),{getParentPatternCategory:l}=Si(),{removeBlock:u}=function(){const{validateRemoveBlockArgs:e}=ir(),{removeBlock:t}=(0,g.useDispatch)(v.store),{getBlock:n,getSelectedBlock:o,getBlockRootClientId:i}=(0,g.useSelect)((e=>({getBlock:e(v.store).getBlock,getSelectedBlock:e(v.store).getSelectedBlock,getBlockRootClientId:e(v.store).getBlockRootClientId})));return{removeBlock:async({clientId:a})=>{try{let r=a;a||(r=o()?.clientId),e({clientId:r});const s="core/cover"===n(r)?.name?i(r):r;return n(s)&&t(s),(0,m.__)("Removed block","big-sky")}catch(e){throw e}}}}(),{editBlocks:d}=function(){const{siteTitle:e,siteDescription:t,siteLocation:n,topic:o,siteType:i}=tn().getSiteMetadata(),{pages:a}=(0,g.useSelect)((e=>({pages:e(Zt.store).getEntityRecords("postType","page",{per_page:-1,status:"publish,future,draft,pending,private"})})),[]),r=(0,f.useRef)(a);(0,f.useEffect)((()=>{r.current=a}),[a]);const{availableBlocks:s}=(0,g.useSelect)((e=>({availableBlocks:e(k.store).getBlockTypes()})),[]),{setCurrentToolCall:c}=(0,g.useDispatch)(wt),{withPendingToolCallback:l}=Ot(),{getBlock:u,getBlockParentsByBlockName:d}=(0,g.useSelect)(v.store),{advancedChatModel:p,getFullPageStructure:h}=(0,g.useSelect)((e=>({advancedChatModel:e(wt).getAdvancedChatModel(),getFullPageStructure:e(wt).getFullPageStructure}))),{runChatCompletion:m}=(0,g.useDispatch)(wt),{applyBlockEdits:y}=ts(),{getEditorBlock:b}=sn(),{logToolCall:_}=pn();return{editBlocks:async({clientId:a,userPrompt:g,scope:f})=>{var v;c("edit_blocks");const k=["core/group","core/column"];let x,C=u(a);if(f===Yr){const e=d(a,k,!0);(!k.includes(C?.name)||e.length>1)&&(x=u(e[0]))}else"all"===f&&(C=b());C||(C=b());const{clientIdMap:S}=h(),E=(({parentBlock:e,targetedBlock:t,clientIdMap:n})=>{const o=(e,t)=>{if(!e?.clientId)return e;const i=Object.keys(n).find((t=>n[t]===e.clientId));if(!i){const t=w(4);n[t]=e.clientId}const a={...e,clientId:i,isTarget:e.clientId===t.clientId};return e.innerBlocks&&(a.innerBlocks=e.innerBlocks.map((e=>o(e,t)))),a};return o(e,t)})({parentBlock:null!==(v=x)&&void 0!==v?v:C,targetedBlock:C,clientIdMap:S}),T=JSON.stringify(E,null,2);return await l((async()=>{try{const a=r.current?.map((e=>({title:e.title.rendered,url:`/${e.slug}`}))),c=s.map((e=>({name:e.name,description:e.description}))),l=[{role:"jetpack-ai",context:{blocksSummary:JSON.stringify(c),pages:JSON.stringify(a),existingPatternCode:T,siteTitle:e,siteDescription:t,siteLocation:n,topic:o,siteType:i,type:"big-sky-edit-blocks",userPrompt:g}}],u=[{type:"function",function:{name:"apply_block_edits",description:"Return the blocks to be updated",parameters:{type:"object",properties:{updates:{type:"array",description:"Blocks that need to be updated. Only use for updating of block content and attributes. Always use insert for adding new innerBlocks to an existing block.",items:{type:"object",properties:{clientId:{type:"string",description:"Client ID of block to be updated"},name:{type:"string",description:"Name of the block"},innerBlocks:{type:"array",description:"Inner blocks to be updated.",items:{type:"object",properties:{clientId:{type:"string",description:"Client ID of block"}},required:[],additionalProperties:!0}},attributes:{type:"object",description:"Attributes of the block",properties:{content:{type:"string",description:"Name of the block"}},required:[],additionalProperties:!0}},required:["clientId","name"],additionalProperties:!0}},inserts:{type:"array",description:"For new blocks that need to added to an existing parent block",items:{type:"object",properties:{parentClientId:{type:"string",description:"Client ID of parent block"},block:{type:"object",properties:{name:{type:"string",description:"Name of the block"},attributes:{type:"object",description:"Attributes of the block",properties:{content:{type:"string",description:"Name of the block"}},required:[],additionalProperties:!0},innerBlocks:{type:"array",description:"Inner blocks to be updated.",items:{type:"object",properties:{clientId:{type:"string",description:"Client ID of block"}},required:[],additionalProperties:!0}}}}},required:["parentClientId","block"],additionalProperties:!0}},deletes:{type:"array",description:"clientIds of blocks that need to be deleted",items:{type:"string",description:"clientId of block to be deleted"}},summary:{type:"string",description:"A simple, brief summary of the changes that will be shown to the user."}},required:["summary"]}}}],d=await m(p,l,u);if(!d?.choices?.[0]?.message?.tool_calls)throw new Error("Invalid response format from OpenAI");const h=d.choices[0].message.tool_calls[0];if("apply_block_edits"!==h.function.name)throw new Error(`Unexpected function call: ${h.name}`);const f=JSON.parse(h.function.arguments);return _(h.function),await y({editResults:f,reverseMap:S})}catch(e){throw K.error("[Edit Blocks] Error editing blocks:",e),e}}))()}}}(),{applyBlockEdits:p}=ts(),{validateEditBlocksArgs:h,validateApplyBlockEditsArgs:y,validateRemoveBlockArgs:_}=function(){const{isValidClientId:e,blockExists:t}=Nt(),{canRemoveBlock:n}=(0,g.useSelect)(v.store),o=e=>{if(!e)throw new Error((0,m.__)("I could not complete your request at this time. Please try again.","big-sky"));return!0},i=n=>{const{clientId:o}=n;return!(!e(o)||!t(o))};return{validateBlockArgs:o,validateClientIdArgs:i,validateEditBlocksArgs:async e=>{const{scope:t,clientId:n,userPrompt:o}=e;if("target"===t&&!n)throw new Error((0,m.__)("There was a problem making the change. Can you describe or select where youd like the changes to be placed.","big-sky"));if(!o)throw new Error((0,m.__)("There was a problem. Please try again.","big-sky"));return!0},validateApplyBlockEditsArgs:async e=>{if(o(e),!i(e))throw new Error((0,m.__)("Describe or select where youd like the pattern to be placed.","big-sky"));return!0},validateRemoveBlockArgs:e=>{try{o(e)}catch(e){throw new Error(`I was not able to find a block to remove. ${e?.message}`)}if(!i(e))throw new Error((0,m.__)("Describe or select which block you want to remove.","big-sky"));const{clientId:t}=e;if(!n(t))throw new Error((0,m.__)("I'm sorry, but I cannot remove that block.","big-sky"));return!0}}}(),{getIsHandoff:x}=(0,g.useSelect)((e=>{const{getIsHandoff:t}=e(wt);return{getIsHandoff:t}}));(0,f.useEffect)((()=>{t(b.BLOCKS,{edit_blocks:e({name:"edit_blocks",action:async e=>({message:await d(e),checkpointKeys:[$.BLOCKS]}),validator:h,closeChatWhenDone:()=>!1}),apply_block_edits:e({name:"apply_block_edits",action:async e=>({message:await p(e),checkpointKeys:[$.BLOCKS]}),validator:y,closeChatWhenDone:()=>!1}),remove_block:e({name:"remove_block",action:async e=>({message:await u(e),checkpointKeys:[$.BLOCKS]}),validator:_,closeChatWhenDone:()=>!x(),getTargetedBlockRequired:()=>!0})})}),[t]);let C=null;o&&(C=l(o)),(0,f.useEffect)((()=>{const e={selectedBlock:{parentPatternCategory:C},site:{siteTitle:a,siteDescription:r,siteLocation:c,topic:s},patternCategories:ke};n(b.BLOCKS,e)}),[n,o,s,C,a,r,c])}};[qi,Yi,Qa,fr,xr,Tr,Nr,Br,Gr,ji,Wr,ns].forEach((function(e){Rt.set(e.id,e),Dt.push(e)}));const os=Dt;function is(){return(0,s.createElement)(s.Fragment,null)}function as(e,t){const{siteType:n,topic:o,siteDescription:i,siteTitle:a,siteLocation:r}=e;return Ue.format({role:"You are a website designer and an expert at taking site specifications and choosing suitable fonts that align with industry standards and brand identity.",context:` Current site specifications:\n${JSON.stringify({siteType:n,topic:o,siteDescription:i,siteTitle:a,siteLocation:r})}\nAvailable fonts:\n${t} `,do:["Choose the best fonts for the website based on the website specifications and the available options.","Consider industry standards, brand identity, and user experience when selecting fonts.","Always use your best guess to choose the right fonts for the website based on the website description. Do not ask the user questions or for more information.","Always choose a MINIMUM of six font typesets.","Always sort the chosen font typesets starting from best match and put all chosen fonts in the fonts array.","Always call the getBuildDesigns tool. The content of your message should be null."],dont:["Explain your choices to the user.","Ask the user to confirm your choices"]})}const rs=e=>({name:"getBuildDesigns",description:"Sets site font typeset.",strict:!0,parameters:{type:"object",properties:{fonts:{type:"array",description:"The list of font typeset names that best match the site",items:{type:"string",enum:e}}},required:["fonts"],additionalProperties:!1}}),ss=(e,{maxRetries:t=3,initialDelay:n=1e3,maxDelay:o=4e3}={})=>async(...i)=>{let a=0;const r=e.name||"anonymous function";for(;a<t;)try{return await e(...i)}catch(e){if(a++,a>=t)return K.error(`${r} failed after all retries:`,e.message),null;const i=Math.min(n*Math.pow(2,a-1),o);K.info(`${r} retry attempt ${a} after ${i}ms delay...`),await new Promise((e=>setTimeout(e,i)))}};function cs(e,t){const{siteType:n,topic:o,siteDescription:i,siteTitle:a,siteLocation:r,requestedPages:s}=e,c=ke.filter((e=>!["footer","header","page-title"].includes(e.slug)));return`You are a website architecture and content expert who specializes in determining which website sections and pages would benefit specific site types and crafting compelling reasons for sections and pages inclusion based on the site context.\n\n<context>\nCurrent site specifications:\n ${JSON.stringify({siteType:n,topic:o,siteDescription:i,siteTitle:a,siteLocation:r,requestedPages:s})}\n Site type description: ${Ui[n]?.description}\n Site goals:\n ${t}\n\nAvailable sections:\n${JSON.stringify(c,null,2)}\n</context>\n\n<instructions>\n\tAlways call getSiteStructure, and leave your message as null.\n\tAll sections must be taken from the available sections list.\n\tYou must include at least 2 additional pages and a maximum of 4 additional pages.\n\tALWAYS use the pages from site specifications requestedPages if there are any, and NEVER add any additional pages in this case regardles of the min and max numbers.\n\tNEVER add more than 4 additional pages in total unless the requestedPages contains more than 4 pages.\n\tA site homepage  must include at least 4 sections.\n\tFor 'intro' or 'about' homepage sections ALWAYS include the slug of the most relevant page for any CTA buttons to link to. NEVER include a CTA link for other section types.\n\tThe additional pages list should ALWAYS include pages to match any slugs suggested for the CTA links.\n\tNEVER make a page name longer than 15 letters and give preference to one word names, eg. 'Merch' instead of 'Merch Store', 'Tour' insted of 'Tour Dates'.\n\tAdditional pages must have a minimum of 1 section and a maximum of 3 sections.\n\tMake sure that the homepage sections and the additional pages are cohesive and, together, create a cohesive content and design experience. Do not repeat sections.\n\tMake sure the page and section names and descriptions are relevant to the site description, for example a Management Consultants site may have a 'team' section type or page, but it should be called or described as 'Our consultants' for section or  'Consultants'  for pages instead of 'Team'.\n</instructions>\n\n<design-considerations>\n\tDesign pages that solve real problems for visitors to this ${n} website: \n\t\t1. First, identify the core pages that are essential for this specific ${n} and ${t}.\n\t\t2. Consider the complete user journey for someone visiting this ${n} website.\n\t\t3. Then, create additional pages that address the unique needs, questions, and experiences of the target audience. \n\t\t4. For each page, explain why it's specifically relevant to a site of type ${n}, with description ${i} and goals ${t}, and how it enhances the user experience.\n\t\t5. Ensure page titles and descriptions use terminology that resonates with the target audience. Use industry-specific terminology and expectations.\n\t\t6. Recommend sections that best showcase the unique content and functionality needed for each page.\n\t\t7. The relevance if the pages to the site overall is more important than the need for CTA links. CTA links should be as relevant as possible but the relevance of the pages to the site overall is more important.\n</design-considerations>\n`}const ls=()=>({name:"getSiteStructure",description:"Determines which sections to include on the homepage (must include all required sections) and which pages to include with their customized names",parameters:{type:"object",properties:{pages:{type:"array",description:"Array of additional pages to include in the site, with customized names",items:{type:"object",properties:{slug:{type:"string",description:"The slug of the page"},name:{type:"string",description:"The customized name for the page"},description:{type:"string",description:"briefly describe the sort of content that will be on this page, no more than 30 words"},sections:{type:"array",description:"Array of sections to include in the page, with reasons for their inclusion",items:{type:"object",properties:{slug:{type:"string",description:"The slug of the section"},reason:{type:"string",description:"The reason for including this section based on the site specifications and the page type"}},required:["slug","reason"],additionalProperties:!1}}},required:["slug","name","sections"],additionalProperties:!1}},homepageSections:{type:"array",description:"Array of sections to include in the homepage, with reasons for their inclusion",items:{type:"object",properties:{slug:{type:"string",description:"The slug of the section"},reason:{type:"string",description:"The reason for including this section based on the site specifications"},ctaLink:{type:"string",description:"This is the slug of the page that any CTA button on this section should link to. Only include for intro or about sections."}},required:["slug","reason","ctaLink"],additionalProperties:!1}}},required:["pages","homepageSections"],additionalProperties:!1}}),us=JSON.parse('[{"siteMeta":{"siteType":"business","topic":"restaurant","siteDescription":"A family-owned Italian restaurant in downtown","siteTitle":"Mama Mia\'s","siteLocation":{"name":"25 Victoria Street, Rangiora","coordinates":[-43.309067,172.596355]}},"siteGoals":"Increase online reservations and showcase menu items"},{"siteMeta":{"siteType":"portfolio","topic":"photography","siteDescription":"Professional wedding and portrait photography","siteTitle":"Lens & Light","siteLocation":{"name":"24 Main Street, Birmingham, Alabama","coordinates":[33.51837,-86.8125]},"requestedPages":"portfolio, contact"},"siteGoals":"Showcase photography work and attract new clients"},{"siteMeta":{"siteType":"blog","topic":"travel","siteDescription":"Adventure travel blog focusing on budget travel","siteTitle":"Wanderlust","siteLocation":{"name":null}},"siteGoals":"Share travel experiences and build a community of travelers"},{"siteMeta":{"siteType":"health","topic":"fitness","siteDescription":"Personal training and group fitness classes","siteTitle":"FitLife","siteLocation":{"name":"Corner 5th and 6th, Chicago","coordinates":[41.8781,-87.6298]}},"siteGoals":"Attract new members and promote class schedules"},{"siteMeta":{"siteType":"music","topic":"rock","siteDescription":"A rock band from Melbourne","siteTitle":"The Big Jimmies","siteLocation":{"name":null}},"siteGoals":"Showcase music and attract new fans and bookings"},{"siteMeta":{"siteType":"business","topic":"bakery","siteDescription":"Artisanal bakery specializing in French pastries","siteTitle":"Sweet Delights","siteLocation":{"name":"47 Maple Avenue, Portland, Maine","coordinates":[43.6591,-70.2568]}},"siteGoals":"Highlight daily specials and increase catering orders"},{"siteMeta":{"siteType":"business","topic":"automotive","siteDescription":"Premium auto detailing and restoration services","siteTitle":"Pristine Motors","siteLocation":{"name":"1242 Industrial Parkway, Detroit, Michigan","coordinates":[42.3314,-83.0458]}},"siteGoals":"Book more appointments and showcase before/after transformations"},{"siteMeta":{"siteType":"business","topic":"law","siteDescription":"Full-service law firm specializing in corporate law","siteTitle":"Johnson & Williams Law","siteLocation":{"name":"887 Financial District, Manhattan, New York","coordinates":[40.7128,-74.006]}},"siteGoals":"Establish authority in the field and generate client inquiries"},{"siteMeta":{"siteType":"business","topic":"salon","siteDescription":"Luxury hair salon and day spa experience","siteTitle":"Tresses & Tranquility","siteLocation":{"name":"56 Fashion Boulevard, Milan, Italy","coordinates":[45.4642,9.19]}},"siteGoals":"Fill appointment calendar and sell premium hair care products"},{"siteMeta":{"siteType":"business","topic":"bookstore","siteDescription":"Independent bookstore with rare and vintage collections","siteTitle":"Forgotten Tomes","siteLocation":{"name":"17 Literary Lane, Edinburgh, Scotland","coordinates":[55.9533,-3.1883]}},"siteGoals":"Promote book club events and increase online sales"},{"siteMeta":{"siteType":"portfolio","topic":"architecture","siteDescription":"Award-winning sustainable architectural designs","siteTitle":"GreenSpace Architects","siteLocation":{"name":"230 Design District, Barcelona, Spain","coordinates":[41.3851,2.1734]}},"siteGoals":"Display architectural projects and attract commercial clients"},{"siteMeta":{"siteType":"portfolio","topic":"illustration","siteDescription":"Whimsical children\'s book illustrations and character design","siteTitle":"Imagine That! Studios","siteLocation":{"name":"45 Creative Alley, Austin, Texas","coordinates":[30.2672,-97.7431]},"requestedPages":"gallery, process, shop"},"siteGoals":"Showcase illustration portfolio and secure publishing contracts"},{"siteMeta":{"siteType":"portfolio","topic":"web_development","siteDescription":"Full-stack developer specializing in interactive experiences","siteTitle":"Code Canvas","siteLocation":{"name":null}},"siteGoals":"Demonstrate technical expertise and find remote work opportunities"},{"siteMeta":{"siteType":"portfolio","topic":"jewelry","siteDescription":"Handcrafted artisanal jewelry using ethically sourced materials","siteTitle":"Earth & Ore","siteLocation":{"name":"78 Craftsman Way, Santa Fe, New Mexico","coordinates":[35.687,-105.9378]},"requestedPages":"collections, custom-work, contact"},"siteGoals":"Display jewelry collections and receive commission requests"},{"siteMeta":{"siteType":"portfolio","topic":"film","siteDescription":"Independent filmmaker focused on documentary storytelling","siteTitle":"Lens Truth Productions","siteLocation":{"name":null}},"siteGoals":"Share film samples and connect with potential collaborators"},{"siteMeta":{"siteType":"blog","topic":"food","siteDescription":"Gourmet recipes and culinary adventures around the world","siteTitle":"The Curious Palate","siteLocation":{"name":null}},"siteGoals":"Grow subscriber base and secure cookbook publishing deal"},{"siteMeta":{"siteType":"blog","topic":"technology","siteDescription":"Latest tech news and in-depth product reviews","siteTitle":"TechBytes","siteLocation":{"name":null}},"siteGoals":"Increase readership and establish reputation as tech experts"},{"siteMeta":{"siteType":"blog","topic":"parenting","siteDescription":"Honest parenting stories and advice for modern families","siteTitle":"The Imperfect Parent","siteLocation":{"name":null}},"siteGoals":"Create supportive community and develop course offerings"},{"siteMeta":{"siteType":"blog","topic":"sustainability","siteDescription":"Practical tips for eco-friendly living and zero waste","siteTitle":"Small Footprint Living","siteLocation":{"name":null}},"siteGoals":"Inspire environmental action and partner with sustainable brands"},{"siteMeta":{"siteType":"blog","topic":"fashion","siteDescription":"Ethical fashion coverage and sustainable style guides","siteTitle":"Consciously Chic","siteLocation":{"name":null}},"siteGoals":"Build fashion industry connections and monetize through affiliate links"},{"siteMeta":{"siteType":"health","topic":"yoga","siteDescription":"Traditional hatha yoga studio with meditation practices","siteTitle":"Inner Balance Yoga","siteLocation":{"name":"437 Serenity Avenue, Vancouver, Canada","coordinates":[49.2827,-123.1207]}},"siteGoals":"Fill yoga classes and promote wellness retreats"},{"siteMeta":{"siteType":"health","topic":"nutrition","siteDescription":"Holistic nutrition counseling and meal planning services","siteTitle":"Nourish & Thrive","siteLocation":{"name":"89 Wellness Way, Boulder, Colorado","coordinates":[40.015,-105.2705]}},"siteGoals":"Book consultation appointments and sell nutrition programs"},{"siteMeta":{"siteType":"health","topic":"therapy","siteDescription":"Cognitive behavioral therapy and trauma-informed care","siteTitle":"Mindful Healing Center","siteLocation":{"name":"1024 Psychology Plaza, Stockholm, Sweden","coordinates":[59.3293,18.0686]}},"siteGoals":"Make therapy more accessible and reduce stigma around mental health"},{"siteMeta":{"siteType":"health","topic":"dentistry","siteDescription":"Family dentistry focused on preventative care and education","siteTitle":"Bright Smile Dental","siteLocation":{"name":"723 Health District, Brisbane, Australia","coordinates":[-27.4698,153.0251]}},"siteGoals":"Attract new patients and provide clear information about procedures"},{"siteMeta":{"siteType":"health","topic":"chiropractic","siteDescription":"Specialized care for sports injuries and chronic pain","siteTitle":"Align Chiropractic","siteLocation":{"name":"450 Wellness Boulevard, Toronto, Canada","coordinates":[43.6532,-79.3832]}},"siteGoals":"Educate potential patients about benefits and schedule appointments"},{"siteMeta":{"siteType":"music","topic":"jazz","siteDescription":"Contemporary jazz quartet with neo-soul influences","siteTitle":"Midnight Blue","siteLocation":{"name":null}},"siteGoals":"Promote upcoming album and increase festival bookings"},{"siteMeta":{"siteType":"music","topic":"electronic","siteDescription":"Experimental electronic music producer and DJ","siteTitle":"Sonic Architect","siteLocation":{"name":null}},"siteGoals":"Share music samples and connect with record labels"},{"siteMeta":{"siteType":"music","topic":"classical","siteDescription":"Chamber music ensemble specializing in contemporary works","siteTitle":"Modern Strings Collective","siteLocation":{"name":"Vienna Music Hall, Vienna, Austria","coordinates":[48.2082,16.3738]}},"siteGoals":"Announce concert dates and sell digital recordings"},{"siteMeta":{"siteType":"music","topic":"folk","siteDescription":"Traditional folk music with modern storytelling","siteTitle":"The Wayfarers","siteLocation":{"name":null}},"siteGoals":"Build loyal following and secure touring opportunities"},{"siteMeta":{"siteType":"education","topic":"language","siteDescription":"Immersive Spanish language courses for all levels","siteTitle":"Fluent Fast","siteLocation":{"name":"675 Education Avenue, Madrid, Spain","coordinates":[40.4168,-3.7038]}},"siteGoals":"Enroll students in courses and promote cultural exchange programs"},{"siteMeta":{"siteType":"education","topic":"coding","siteDescription":"Interactive coding bootcamp focused on practical skills","siteTitle":"Code Academy Plus","siteLocation":{"name":null}},"siteGoals":"Fill cohorts and showcase student success stories"},{"siteMeta":{"siteType":"education","topic":"art","siteDescription":"Traditional and digital art courses for all ages","siteTitle":"Creative Canvas Studio","siteLocation":{"name":"89 Gallery Road, Florence, Italy","coordinates":[43.7696,11.2558]}},"siteGoals":"Display student artwork and increase workshop attendance"},{"siteMeta":{"siteType":"education","topic":"history","siteDescription":"Archaeological research center with public education programs","siteTitle":"Ancient Horizons Institute","siteLocation":{"name":"23 Museum District, Alexandria, Egypt","coordinates":[31.2001,29.9187]}},"siteGoals":"Share research findings and attract funding for expeditions"},{"siteMeta":{"siteType":"education","topic":"science","siteDescription":"Online science education platform for K-12 students","siteTitle":"Eureka Learning","siteLocation":{"name":null}},"siteGoals":"Increase subscription signups and demonstrate curriculum effectiveness"},{"siteMeta":{"siteType":"nonprofit","topic":"environment","siteDescription":"Conservation organization focused on marine ecosystems","siteTitle":"Ocean Guardians","siteLocation":{"name":"1200 Coastal Highway, Monterey, California","coordinates":[36.6002,-121.8947]}},"siteGoals":"Recruit volunteers and secure donations for conservation projects"},{"siteMeta":{"siteType":"nonprofit","topic":"humanitarian","siteDescription":"International aid organization providing disaster relief","siteTitle":"Global Response Initiative","siteLocation":{"name":"United Nations Plaza, Geneva, Switzerland","coordinates":[46.2044,6.1432]}},"siteGoals":"Raise awareness about current crises and increase donor support"},{"siteMeta":{"siteType":"nonprofit","topic":"education","siteDescription":"Providing educational resources to underserved communities","siteTitle":"Learning For All","siteLocation":{"name":null}},"siteGoals":"Expand program reach and demonstrate measurable impact"},{"siteMeta":{"siteType":"nonprofit","topic":"arts","siteDescription":"Community arts center offering free programs for youth","siteTitle":"Creative Futures","siteLocation":{"name":"890 Cultural District, New Orleans, Louisiana","coordinates":[29.9511,-90.0715]}},"siteGoals":"Showcase student artwork and attract foundation funding"},{"siteMeta":{"siteType":"nonprofit","topic":"animal_welfare","siteDescription":"Animal rescue and rehabilitation center for wildlife","siteTitle":"Wild Lives Sanctuary","siteLocation":{"name":"Rural Route 4, Nairobi, Kenya","coordinates":[-1.2921,36.8219]}},"siteGoals":"Facilitate animal adoptions and educate about conservation efforts"},{"siteMeta":{"siteType":"event","topic":"conference","siteDescription":"Annual tech innovation conference and startup showcase","siteTitle":"Future Forward Summit","siteLocation":{"name":"Tech Center, San Francisco, California","coordinates":[37.7749,-122.4194]}},"siteGoals":"Sell conference tickets and highlight keynote speakers"},{"siteMeta":{"siteType":"event","topic":"festival","siteDescription":"Three-day independent film festival with international submissions","siteTitle":"Vision Cinema Fest","siteLocation":{"name":"Historic Theater District, Park City, Utah","coordinates":[40.6461,-111.498]}},"siteGoals":"Promote screening schedule and sell festival passes"},{"siteMeta":{"siteType":"event","topic":"wedding","siteDescription":"Destination wedding celebration for Julia and Mark","siteTitle":"Julia & Mark\'s Wedding","siteLocation":{"name":"Sunset Beach Resort, Koh Samui, Thailand","coordinates":[9.512,100.0136]}},"siteGoals":"Share wedding details and collect RSVP responses"},{"siteMeta":{"siteType":"event","topic":"seminar","siteDescription":"Professional development seminar series for educators","siteTitle":"Teaching Excellence Institute","siteLocation":{"name":null}},"siteGoals":"Register attendees and provide pre-seminar materials"},{"siteMeta":{"siteType":"event","topic":"exhibition","siteDescription":"Traveling contemporary art exhibition featuring emerging artists","siteTitle":"Perspectives: New Horizons","siteLocation":{"name":"Modern Art Gallery, Seoul, South Korea","coordinates":[37.5665,126.978]}},"siteGoals":"Announce exhibition dates and showcase participating artists"},{"siteMeta":{"siteType":"ecommerce","topic":"handmade","siteDescription":"Handcrafted ceramic homewares with minimalist design","siteTitle":"Clay & Home","siteLocation":{"name":"Workshop Studio, Copenhagen, Denmark","coordinates":[55.6761,12.5683]}},"siteGoals":"Increase online sales and highlight artisan craftsmanship"},{"siteMeta":{"siteType":"ecommerce","topic":"fashion","siteDescription":"Sustainable fashion brand using organic materials","siteTitle":"EcoThread","siteLocation":{"name":null}},"siteGoals":"Convert site visitors to customers and communicate brand values"},{"siteMeta":{"siteType":"ecommerce","topic":"technology","siteDescription":"Curated selection of innovative smart home devices","siteTitle":"Future Home Tech","siteLocation":{"name":null}},"siteGoals":"Simplify complex product information and increase conversion rate"},{"siteMeta":{"siteType":"ecommerce","topic":"books","siteDescription":"Independent publisher specializing in science fiction","siteTitle":"Quantum Ink Press","siteLocation":{"name":"345 Publisher\'s Row, London, UK","coordinates":[51.5074,-0.1278]}},"siteGoals":"Showcase author catalog and increase direct sales"},{"siteMeta":{"siteType":"ecommerce","topic":"food","siteDescription":"Specialty spice blends from around the world","siteTitle":"Global Flavor Co.","siteLocation":{"name":null}},"siteGoals":"Educate customers about product usage and increase repeat purchases"}]');function ds(e){const{siteType:t,topic:n,siteDescription:o,siteTitle:i,siteLocation:a,colorRequest:r}=e;return Ue.format({role:"You are a website designer and an expert at taking site specifications and choosing suitable colors that align with industry standards and brand identity.",context:` Current site specifications:\n${JSON.stringify({siteType:t,topic:n,siteDescription:o,siteTitle:i,siteLocation:a,userColorRequest:r})}`,do:["If userColorRequest is provided, use these as the specific colors. Otherwise, choose the best colors for the website based on the website specifications and the available options. Consider industry standards, brand identity, and user experience when selecting colors.","Always call the color_palette_generator tool. The content of your message should be null."],dont:["Explain your choices to the user.","Ask the user to confirm your choices"]})}function ps({runUrlChangeHandling:e}={}){const{siteTitle:t,isOnboarded:n}=tn().getSiteMetadata(),[o,i]=(0,f.useState)(!1),[a,r]=(0,f.useState)(!1),[{currentStep:s,previousStep:c},l]=(0,f.useState)((()=>({currentStep:new URL(window.location.href).searchParams.get("ai-step"),previousStep:null}))),{setAssistant:u,setDockView:d,setHandoffStep:p,setChatComponents:h,setCurrentUserMessage:m,setIsHandoff:y,setIsMaximized:b}=(0,g.useDispatch)(wt),{setSiteMetadata:w}=tn(),{zoomIn:v,zoomOut:k}=cn(),_=(0,f.useCallback)(((e,t=!1)=>{if(s!==e||t){l((t=>({previousStep:t.currentStep,currentStep:e})));const n=new URL(window.location.href);n.searchParams.set("ai-step",e),t?window.history.replaceState({aiStep:e},"",n):window.history.pushState({aiStep:e},"",n)}}),[s,l]),x=(0,f.useCallback)((e=>{"handoff"===e&&(k(),b(!1),y(!0),p(0),d(D.HANDOFF),n||w({isOnboarded:!0},!0)),"edit"===e&&(u(ji.id),m(""),y(!1),v(),o&&(h([]),d(D.MENUS)),n||w({isOnboarded:!0},!0)),"onboarding"===e&&"onboarding"!==c&&n&&r(!0)}),[c,n,k,b,y,p,d,w,u,m,v,o,h]),C=(0,f.useCallback)((()=>{const e=new URL(window.location.href).searchParams.get("ai-step");"handoff"===e&&"edit"===c&&i(!0),"handoff"===e&&a?_("onboarding",!0):"handoff"!==e&&"edit"!==e||t&&n?c===s&&s===e||(l((t=>({previousStep:t.currentStep,currentStep:e}))),x(e,c)):_("onboarding",!0)}),[c,a,t,n,s,_,x]);return(0,f.useEffect)((()=>{if(e)return C(),window.addEventListener("popstate",C),()=>{window.removeEventListener("popstate",C)}}),[e,C]),{setAiStep:_,getAiStep:()=>s,getPreviousAiStep:()=>c||s,showOnboardingDialog:a,setShowOnboardingDialog:r}}function gs(){const{getCoordinates:e}=vn(),{getSiteMetadata:t,setSiteMetadata:n}=tn(),{buildSite:o}=function(){var e;const{getBuildDesigns:t}=function(){const{runChatCompletion:e}=(0,g.useDispatch)(wt),{chatModel:t}=(0,g.useSelect)((e=>({chatModel:e(wt).getAdvancedChatModel()}))),{resetCachedContent:n,setChosenFonts:o,setDockView:i,setShowThread:a}=(0,g.useDispatch)(wt),{getFontVariations:r}=wo();return{getBuildDesigns:ss((async(s,c)=>{i(D.MENUS),a(!1),Fn("designing_build_started"),n();const l=r(),u=l.map((e=>({name:e.name,keywords:e["x-big-sky-meta"]?.keywords||[]}))),d=[{role:"system",content:as(s,JSON.stringify(u))}],p=l.map((e=>e.title)),g=[{type:"function",function:rs(p)}],h=await e(t,d,g),f=h?.choices?.[0]?.message?.tool_calls;if(!f||0===f.length||"getBuildDesigns"!==f[0].function.name)throw new Error("getBuildDesigns tool call missing in model response.");const m=f[0].function.arguments;try{const e=JSON.parse(m),{fonts:t}=e;return o(t),c&&localStorage.setItem("buildDesigns",JSON.stringify({fonts:t})),{...s,font:t[0]}}catch(e){throw new Error("getBuildDesigns JSON parsing error, some content may be missing")}}))}}(),{getSiteStructure:n}=function(){const e=ke.filter((e=>!["footer","header","page-title"].includes(e.slug))).map((e=>e.slug)),{runChatCompletion:t,setChosenCategories:n}=(0,g.useDispatch)(wt),{chatModel:o}=(0,g.useSelect)((e=>({chatModel:e(wt).getAdvancedChatModel()})));return{getSiteStructure:ss((async(i,a)=>{Fn("get_site_structure_started");const r=[{role:"system",content:cs(i,a)}],s=[{type:"function",function:ls(i.siteType,a)}],c=await t(o,r,s),l=c?.choices?.[0]?.message?.tool_calls;if(!l||0===l.length||"getSiteStructure"!==l[0].function.name)throw new Error("getSiteStructure tool call missing in model response.");try{const t=JSON.parse(l[0].function.arguments);if(!t||!t.homepageSections||!t.pages)throw new Error("Invalid structure response");const o=t.homepageSections.map((t=>({...t,slug:e.includes(t.slug)?t.slug:"general"}))),i=t.pages.map((t=>({...t,sections:t.sections.map((t=>({...t,slug:e.includes(t.slug)?t.slug:"general"})))}))),a=o.map((e=>({slug:e.slug,reason:e.reason,ctaLink:e.ctaLink})));return n(a),{homepageSections:o,pages:i}}catch(e){throw new Error("getSiteStructure JSON parsing error, some content may be missing")}}))}}(),{createColorVariations:o}=function(){const{runChatCompletion:e}=(0,g.useDispatch)(wt),{chatModel:t}=(0,g.useSelect)((e=>({chatModel:e(wt).getAdvancedChatModel()}))),{generateColorPalette:n,validateGenerateColorPaletteArgs:o}=Za(),{setChosenColorsComponent:i}=(0,g.useDispatch)(wt);return{createColorVariations:ss((async a=>{Fn("create_color_variations_started");const r=[{role:"system",content:ds(a)}],s=[{type:"function",function:va()}],c=await e(t,r,s),l=c?.choices?.[0]?.message?.tool_calls;if(!l||0===l.length||"color_palette_generator"!==l[0].function.name)throw new Error("color_palette_generator tool call missing in model response.");const u=l[0].function.arguments;try{const e=JSON.parse(u);o(e);const{component:t,variations:a}=n(e);return i(t),a[0].title}catch(e){throw new Error("color_palette_generator JSON parsing error, some content may be missing")}}))}}(),{setAiStep:i}=ps(),{patternCategories:a,additionalContext:r,pageTitlePatterns:s}=(0,g.useSelect)((e=>{const t=e(wt).getUserLocale();return{chatModel:e(wt).getAdvancedChatModel(),patternCategories:e(wt).getPatternCategories(),additionalContext:e(wt).getAdditionalContext(),pageTitlePatterns:e(wt).getPageTitlePatterns(t)}})),{zoomIn:c}=cn(),{buildNewSite:l}=Vr(),{logAction:u}=pn(),{setShowWelcomeGuide:d}=null!==(e=(0,g.useDispatch)("automattic/wpcom-welcome-guide"))&&void 0!==e?e:{},{composePatterns:p,composeTemplatePartPattern:h,syncSiteMetadataPatterns:f}=Si();delete a.header,delete a.footer;const{postId:y}=Sn(),{setSiteMetadata:b}=tn(),{setImageStyle:w,setIsBuildingSite:_,setBuildProgress:x}=(0,g.useDispatch)(wt),{editEntityRecord:C,saveEntityRecord:S}=(0,g.useDispatch)(Zt.store),{__unstableSetEditorMode:E}=(0,g.useDispatch)(v.store),{addPatternsToCanvas:T}=cn(),{getBlocksByName:I,getBlocks:A}=(0,g.useSelect)(v.store),{setIsHandoff:P}=(0,g.useDispatch)(wt),{setStyles:N}=Bo(),{createPage:O,deleteAllBigSkyPagesExceptHome:R,renamePage:L,homePageId:B}=Pi();return{buildSite:async(e,a=!1)=>{let g=0;c(),_(!0),g+=10,x(g),await R(),await L(B,"Home"),g+=10,x(g),d&&d(!1);const v=t(e,a),D=n(e,r.siteGoals),F=o(e),[j,$,U]=await Promise.all([v,D,F]);if(!j||!$||!U)return _(!1),b({isOnboarded:!1},!1,!0),void l((0,m.__)("Oops! Something went wrong. Please try again.","big-sky"));g+=10,x(g);const{topic:H,siteTitle:z,siteDescription:G,siteLocation:q,font:V,patterns:W}=j;w(e.defaultImageStyle),C("root","site",void 0,{title:z,description:G}),N({color:U,font:V,updateBlocks:!1});const Y=await S("postType","wp_navigation",{title:"Header Navigation",status:"publish",content:(0,k.serialize)([(0,k.createBlock)("core/navigation-link",{label:(0,m.__)("Home","big-sky"),type:"page",id:y,url:"/"})])});if(g+=10,x(g),s?.length){const e=s[Math.floor(Math.random()*s.length)];b({pageTitlePatternId:e?.ID}),u(`Page Title Pattern: ${e?.ID}`,M.COMMENT)}const K=Promise.all($.pages?.map((async(e,t)=>{const n=await O({title:e.name,categories:e.sections,topic:H,siteDescription:G,siteLocation:q,loadInEditor:!1,menuOrder:t+1,existingPageId:null,pageDescription:e.description,slug:e.slug,navigationId:Y.id});return g=Math.min(100,g+10),x(g),n})));x(100);const J=h({templatePart:"header",siteDescription:G,siteLocation:q,topic:H,isQuickOnboarding:a,pattern:W?.find((e=>"header"===e.category))?.id,pages:$.pages});if(u(`Header pattern: ${J?.pattern?.ID}`,M.COMMENT),J?.pattern?.blocks){const e=function e(t){for(const n of t){if("core/navigation"===n.name)return n;if(n.innerBlocks){const t=e(n.innerBlocks);if(t)return t}}}(J.pattern.blocks);e&&(e.attributes.ref=Y.id)}g+=10,x(g);const X=h({templatePart:"footer",siteDescription:G,siteLocation:q,topic:H,pattern:W?.find((e=>"footer"===e.category))?.id});u(`Footer pattern: ${X?.pattern?.ID}`,M.COMMENT);const Z=p({categories:$.homepageSections,topic:H,siteDescription:G,siteLocation:q,numberOfConcepts:1,chosenPatterns:W?.filter((e=>"header"!==e.category&&"footer"!==e.category)),pages:$.pages});g+=10,x(g);const Q=Z[0].patterns.map(((e,t)=>({pattern:e,resolver:Z[0].resolvers[t].resolver})));u(`Content patterns: ${Q?.map((e=>e.pattern.ID)).join(", ")}`,M.COMMENT),await T([J,...Q,X],!0,a);const ee=A(I("core/post-content")),te=await K;te.push({rootBlocks:ee,newPage:{id:y}}),te.map((e=>e.rootBlocks.map((e=>{const t=e.attributes?.metadata?.patternCategory,n=$.homepageSections.find((e=>e.slug===t));return e.attributes?.metadata&&(e.attributes.metadata.reason=n?.reason),e})))),te.forEach((e=>{u(`Page created: ${e.newPage.id}`,M.COMMENT)})),f({ids:te.map((e=>e.newPage.id)),blocks:te.map((e=>e.rootBlocks)),persist:!0}),Z?.[0]?.patterns.length?(b({isOnboarded:!0,navigationId:Y.id},!0),Fn("building_site_finished"),await ut(1e3),i("handoff"),_(!1),P(!0)):E("edit")}}}();return{buildSiteTask:(0,f.useCallback)((async(i=null,a=!1)=>{i||(i=t()),K.info("TOOL CALLED: buildSite",i);const r={siteType:i.siteType,topic:i.topic,siteTitle:i.siteTitle,siteDescription:i.siteDescription,defaultImageStyle:i.imageStyle||i.defaultImageStyle,siteLocation:{name:i.siteLocationName||i.siteLocation?.name},requestedPages:i.requestedPages};i.colorRequest&&(r.colorRequest=i.colorRequest),r.siteLocation.name&&(r.siteLocation.coordinates=await e(r.siteLocation.name)),n(r),o(r,a)}),[o,t,n,e])}}window.bigSkyInitialState?.isDevMode&&(window.runSiteStructureTests=async function(){const e=[];console.log("Starting site structure tests...");for(const t of us){console.log(`Processing test case: ${t.siteMeta.siteTitle}`);const n=[{role:"system",content:cs(t.siteMeta,t.siteGoals)}],o=[{type:"function",function:ls(t.siteMeta.siteType,t.siteGoals)}];try{const i=await window.wp.data.dispatch(wt).runChatCompletion(window.wp.data.select(wt).getAdvancedChatModel(),n,o),a=i?.choices?.[0]?.message?.tool_calls?.[0];if(!a||"getSiteStructure"!==a.function.name)throw new Error("Invalid response from model");const r=JSON.parse(a.function.arguments);e.push({...t,structure:r}),console.log(`Completed test case: ${t.siteMeta.siteTitle}`)}catch(e){console.error(`Error processing ${t.siteMeta.siteTitle}:`,e)}}const t=function(e){const t=e.map((e=>[e.siteMeta.siteType,e.siteMeta.siteTitle,e.siteMeta.siteDescription,e.structure.homepageSections.map((e=>e.slug)).join(" | "),`"${e.structure.pages.map((e=>`${e.name}: ${e.sections.map((e=>e.slug)).join(" | ")}`)).join("\r\n")}"`]));return[["Site Type","Site Title","Site Description","Homepage Sections","Additional Pages/Sections"],...t].map((e=>e.join(","))).join("\n")}(e);!function(e){const t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="site-structure-results.csv",o.click(),window.URL.revokeObjectURL(n)}(t),console.log("Tests completed. CSV file downloaded.")});const hs=()=>{const[e,t]=(0,f.useState)(!1),{resetSite:n}=Vr();return(0,s.createElement)("button",{className:"button button-primary",disabled:e,onClick:async()=>{t(!0),n()}},e?"Resetting...":"Reset remote site metadata")},fs=()=>{const{isStoringConversation:e,setStoreConversation:t}=Jt();return(0,s.createElement)(y.ToggleControl,{label:"Store conversation in OpenAI Evals",checked:e,onChange:e=>{t(e)}})},ms=()=>{const[e,t]=(0,f.useState)((()=>"true"===window.localStorage.getItem("isGeneratingPatterns")));return(0,s.createElement)(y.ToggleControl,{label:"Generate Patterns",checked:e,onChange:e=>{(e=>{t(e),window.localStorage.setItem("isGeneratingPatterns",e)})(e)}})},ys=()=>{const[e,t]=(0,f.useState)((()=>"true"===window.localStorage.getItem("isUsingLocalPatterns")));return(0,s.createElement)(y.ToggleControl,{label:"Use Local Patterns (Requires Page Refresh)",checked:e,onChange:e=>{(e=>{t(e),window.localStorage.setItem("isUsingLocalPatterns",e)})(e)}})},bs=({setShowDebug:e})=>{const{buildSiteTask:t}=gs(),[n,o]=(0,f.useState)(null),{isEditorIframeLoaded:i}=(0,g.useSelect)((e=>({isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded()})));return(0,f.useEffect)((()=>{}),[]),(0,s.createElement)("button",{className:"button button-primary",onClick:async()=>{t(n,!0),e(!1)},disabled:!n||!i},"Quick Onboarding")},ws=()=>{const e=tn().getSiteMetadata(),t={colors:[e.currentColor],fonts:[e.currentFont]};return(0,s.createElement)("button",{className:"button button-primary",onClick:async()=>{localStorage.setItem("siteMeta",JSON.stringify(e)),localStorage.setItem("buildDesigns",JSON.stringify(t))}},"Save Current Build")},vs=({setShowModifyBuildForm:e,setShowDebug:t})=>{const{resetCachedContent:n}=(0,g.useDispatch)(wt),{buildSiteTask:o}=gs(),i=(0,f.useRef)();return(0,s.createElement)("div",{ref:i},(0,s.createElement)("h2",null,"Modify Build"),(0,s.createElement)(Ts,{editable:!0}),(0,s.createElement)("div",{className:"big-sky__ai-debug__checkboxes"},(0,s.createElement)("div",null,(0,s.createElement)("input",{type:"checkbox",name:"resetCachedContent",defaultChecked:!1}),(0,s.createElement)("label",{htmlFor:"resetCachedContent"},"Reset cached content")),(0,s.createElement)("div",null,(0,s.createElement)("input",{type:"checkbox",name:"rebuildSite",defaultChecked:!0}),(0,s.createElement)("label",{htmlFor:"rebuildSite"},"Rebuild site"))),(0,s.createElement)("div",{className:"big-sky__ai-debug__buttons"},(0,s.createElement)("button",{className:"button button-primary",onClick:()=>{const e=(()=>{const e=i.current,t={siteType:e.querySelector('[name="siteType"]').value,siteTitle:e.querySelector('[name="siteTitle"]').value,siteDescription:e.querySelector('[name="siteDescription"]').value,topic:e.querySelector('[name="topic"]').value,currentColor:e.querySelector('[name="currentColor"]').value,currentFont:e.querySelector('[name="currentFont"]').value,defaultImageStyle:e.querySelector('[name="defaultImageStyle"]').value,siteLocation:{name:e.querySelector('[name="locationName"]').value},patterns:Array.from(e.querySelectorAll('[name="pattern"]')).map((e=>({id:parseInt(e.value),category:e.options[e.selectedIndex].dataset.category})))},n={colors:[t.currentColor],fonts:[t.currentFont]};return localStorage.setItem("siteMeta",JSON.stringify(t)),localStorage.setItem("buildDesigns",JSON.stringify(n)),t})();i.current.querySelector('[name="resetCachedContent"]').checked&&n(),i.current.querySelector('[name="rebuildSite"]').checked&&(o(e,!0),t(!1))}},"Save"),(0,s.createElement)("button",{className:"button",onClick:()=>e(!1)},"Close")))},ks=({setShowModifyBuildForm:e})=>(0,s.createElement)("button",{className:"button",onClick:async()=>{e(!0)}},"Modify Build");function _s({setShowDebug:e}){const[t,n]=(0,f.useState)(!1),{saveEntityRecord:o}=(0,g.useDispatch)(Zt.store),{isOnboarded:i}=tn().getSiteMetadata(),{sessionId:a,chatUsage:r,chat35Usage:c,anthropicUsage:l,isBuildingSite:u,isHandoff:d}=(0,g.useSelect)((e=>({chatUsage:e(wt).getOpenAIChatUsage(),chat35Usage:e(wt).getOpenAIChat35Usage(),anthropicUsage:e(wt).getAnthropicUsage(),sessionId:e(wt).getSessionId(),isBuildingSite:e(wt).getIsBuildingSite(),isHandoff:e(wt).getIsHandoff()})));return(0,s.createElement)(y.Popover,{className:"big-sky__ai-debug"},t?(0,s.createElement)(vs,{setShowModifyBuildForm:n,setShowDebug:e}):(0,s.createElement)(s.Fragment,null,(0,s.createElement)("h2",null,"Site Data"),(0,s.createElement)(Ts,null),(0,s.createElement)("h2",null,"Model Usage"),(0,s.createElement)("table",null,(0,s.createElement)("thead",null,(0,s.createElement)("tr",null,(0,s.createElement)("th",null),(0,s.createElement)("th",null,"Prompt"),(0,s.createElement)("th",null,"Completion"),(0,s.createElement)("th",null,"Total"),(0,s.createElement)("th",null,"Reqs"),(0,s.createElement)("th",null,"Cost"))),(0,s.createElement)("tbody",null,(0,s.createElement)(xs,{usageType:"GPT 4",usage:r}),(0,s.createElement)(xs,{usageType:"GPT 3.5",usage:c}),(0,s.createElement)(xs,{usageType:"Claude 3",usage:{promptTokens:l?.inputTokens,completionTokens:l?.outputTokens,totalTokens:l?.totalTokens,totalRequests:l?.totalRequests,estimatedCost:l?.estimatedCost}}))),(0,s.createElement)(s.Fragment,null,(0,s.createElement)("h2",null,"Tools"),(0,s.createElement)(Is,null)),(0,s.createElement)("div",{className:"big-sky__ai-debug__buttons"},(0,s.createElement)(fs,null),(0,s.createElement)(ms,null),(0,s.createElement)(ys,null),(0,s.createElement)(hs,null),!i&&(0,s.createElement)(bs,{setShowDebug:e}),i&&(d||!u)&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(ws,null),(0,s.createElement)(ks,{setShowModifyBuildForm:n})),window?.bigSkyInitialState?.lastPayload&&(0,s.createElement)("button",{className:"button",onClick:async()=>{(await o("root","site",{big_sky_last_site_design_payload:JSON.stringify(window.bigSkyInitialState.lastPayload)})).big_sky_last_site_design_payload&&alert("Payload saved. Now you can run evals with npm run evals")}},"Store Last Payload"),a&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("a",{href:`https://mc.a8c.com/big-sky/session/?session_uuid=${a}`,target:"_blank",rel:"noreferrer",className:"button"},"Session Log")))))}function xs({usageType:e,usage:t}){return(0,s.createElement)("tr",null,(0,s.createElement)("td",null,e),(0,s.createElement)("td",null,t?.promptTokens||0),(0,s.createElement)("td",null,t?.completionTokens||0),(0,s.createElement)("td",null,t?.totalTokens||0),(0,s.createElement)("td",null,t?.totalRequests||0),(0,s.createElement)("td",null,"$",(t?.estimatedCost||0).toFixed(2)))}function Cs({pattern:e}){const{id:t,category:n}=e,o=parseInt(t);return o?(0,s.createElement)(s.Fragment,null,(0,s.createElement)("a",{href:`https://dotcompatterns.wordpress.com/wp-admin/site-editor.php?p=%2Fwp_block%2F${o}&canvas=edit`,target:"_blank",rel:"noreferrer"},t)," "," ",n):(0,s.createElement)("span",null,t,"  ",n)}function Ss(){return(0,s.createElement)("button",{className:"button button-primary",onClick:e=>{e.preventDefault();const t=e.target.closest(".big-sky__ai-debug__pattern-select").querySelector("select").value,n=`https://dotcompatterns.wordpress.com/wp-admin/site-editor.php?p=%2Fwp_block%2F${parseInt(t)}&canvas=edit`;window.open(n,"_blank")}},"Edit")}function Es({paletteColors:e}){return(0,s.createElement)(s.Fragment,null,e.map((({color:e,slug:t})=>(0,s.createElement)("span",{className:"big-sky__ai-debug__swatch",key:t,style:{backgroundColor:e}}))))}function Ts({editable:e=!1}){var t;const{currentColor:n,currentFont:o,siteType:i,topic:a,siteDescription:r,siteLocation:c,siteTitle:l,defaultImageStyle:u,patterns:d,colorRequest:p,requestedPages:f}=tn().getSiteMetadata(),{remotePatterns:m}=(0,g.useSelect)((e=>{const t=e(wt),n=t.getUserLocale();return{remotePatterns:t.getRemotePatterns(n)}})),{currentPostId:y}=(0,g.useSelect)((e=>({currentPostId:e(h.store).getCurrentPostId()})));let b;b=Array.isArray(d)?d:d[y]||[];const{getColorVariations:w,getColorVariationByTitle:v,getFontVariations:k}=wo(),_=v(n),x=null!==(t=_?.settings?.color?.palette?.theme)&&void 0!==t?t:[],C=(0,g.useSelect)((e=>e(wt).getAdditionalContext()));return(0,s.createElement)("div",{className:"big-sky__ai-debug__site-data"},(0,s.createElement)("table",null,(0,s.createElement)("tbody",null,(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Site Type"),(0,s.createElement)("td",null,e?(0,s.createElement)("input",{name:"siteType",defaultValue:i}):i)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Title"),(0,s.createElement)("td",null,e?(0,s.createElement)("input",{name:"siteTitle",defaultValue:l}):l)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Description"),(0,s.createElement)("td",null,e?(0,s.createElement)("input",{name:"siteDescription",defaultValue:r}):r)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Topic"),(0,s.createElement)("td",null,e?(0,s.createElement)("input",{name:"topic",defaultValue:a}):"abstract"!==a&&a)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Requested Pages"),(0,s.createElement)("td",null,e?(0,s.createElement)("input",{name:"requestedPages",defaultValue:f}):f)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Color Request"),(0,s.createElement)("td",null,p&&p)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Color Palette"),(0,s.createElement)("td",null,e?(0,s.createElement)("select",{name:"currentColor",defaultValue:n},w().sort(((e,t)=>e.title.localeCompare(t.title))).map((({title:e})=>(0,s.createElement)("option",{key:e,value:e},e)))):(0,s.createElement)(s.Fragment,null,n," ",(0,s.createElement)(Es,{paletteColors:x})))),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Font"),(0,s.createElement)("td",null,e?(0,s.createElement)("select",{name:"currentFont",defaultValue:o},k().sort(((e,t)=>e.title.localeCompare(t.title))).map((({title:e})=>(0,s.createElement)("option",{key:e,value:e},e)))):o)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Location Name"),(0,s.createElement)("td",null,e?(0,s.createElement)("input",{name:"locationName",defaultValue:JSON.stringify(c?.name)}):JSON.stringify(c?.name))),!e&&(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Location Coordinates"),(0,s.createElement)("td",null,(()=>{if(c&&c.coordinates)return`${c.coordinates[0]}, ${c.coordinates[1]}`})())),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Image Style"),(0,s.createElement)("td",null,e?(0,s.createElement)("select",{name:"defaultImageStyle",defaultValue:u||"photographic"},Pr.map((e=>(0,s.createElement)("option",{key:e,value:e},e)))):u)),(0,s.createElement)("tr",null,(0,s.createElement)("td",null,"Patterns"),(0,s.createElement)("td",null,(0,s.createElement)("div",{className:"big-sky__ai-debug__patterns"},e?b?.map((e=>{const t=m.filter((t=>t.category===e.category)).sort(((e,t)=>e.title.localeCompare(t.title))).map((e=>(0,s.createElement)("option",{key:e.ID,value:e.ID,"data-category":e.category},e.title," ","( ",e.ID," )")));return(0,s.createElement)("div",{className:"big-sky__ai-debug__pattern-select",key:e.id},(0,s.createElement)("select",{name:"pattern",defaultValue:e.id},t),(0,s.createElement)(Ss,null))})):b?.map((e=>(0,s.createElement)("div",{key:e.id},(0,s.createElement)(Cs,{pattern:e}))))))),C&&Object.keys(C).map((e=>(0,s.createElement)("tr",{key:e},(0,s.createElement)("td",null,"Additional Context: ",e),(0,s.createElement)("td",null,JSON.stringify(C[e]))))))))}function Is(){const{patterns:e}=(0,g.useSelect)((e=>{const t=e(wt),n=t.getUserLocale();return{patterns:t.getRemotePatterns(n)}})),{selectedBlock:t}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),n=t?.attributes?.metadata?.remotePatternId||"None selected",{convertToBlocks:o,insertPatterns:i}=Si(),[a,r]=(0,f.useState)(null),c=e.sort(((e,t)=>e.ID-t.ID)),{isOnboarded:l}=tn().getSiteMetadata();return(0,f.useEffect)((()=>{r(c[0]?.ID)}),[c]),(0,s.createElement)("div",{className:"big-sky__ai-debug__tools"},l&&(0,s.createElement)("div",{className:"big-sky__ai-debug__tools__insert-pattern"},(0,s.createElement)("p",null,"Selected Pattern: ",n),(0,s.createElement)("p",null,"Insert Pattern:"),(0,s.createElement)("div",{className:"big-sky__ai-debug__flex"},(0,s.createElement)("select",{onChange:e=>r(e.target.value)},c.map((e=>(0,s.createElement)("option",{key:e.ID,value:e.ID},e.ID,"  ",e.title)))),(0,s.createElement)("button",{className:"button button-primary",onClick:()=>{const e=c.find((e=>e.ID===parseInt(a))),t=o(e.html);e.blocks=t,i([e])}},"Insert"))))}const As=()=>{const[e,t]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{const n=n=>{n.ctrlKey&&"d"===n.key&&t(!e)};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}}),[e]),e?(0,s.createElement)(_s,{setShowDebug:t}):null},Ps=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Ms=()=>{const{setApiKey:e,setHasRetriedChatRequest:t}=(0,g.useDispatch)(wt);return{withJetpackTokenRequest:async n=>{t(!1);const o=await ye();o&&o.token&&(e(o.token),n(o))}}},Ns=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Os=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Rs={};function Ds(e,t){return((t||Rs).jsx?Os:Ns).test(e)}const Ls=/[ \t\n\f\r]/g;function Bs(e){return""===e.replace(Ls,"")}class Fs{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function js(e,t){const n={},o={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(o,e[i].normal);return new Fs(n,o,t)}function $s(e){return e.toLowerCase()}Fs.prototype.property={},Fs.prototype.normal={},Fs.prototype.space=null;class Us{constructor(e,t){this.property=e,this.attribute=t}}Us.prototype.space=null,Us.prototype.boolean=!1,Us.prototype.booleanish=!1,Us.prototype.overloadedBoolean=!1,Us.prototype.number=!1,Us.prototype.commaSeparated=!1,Us.prototype.spaceSeparated=!1,Us.prototype.commaOrSpaceSeparated=!1,Us.prototype.mustUseProperty=!1,Us.prototype.defined=!1;let Hs=0;const zs=Js(),Gs=Js(),qs=Js(),Vs=Js(),Ws=Js(),Ys=Js(),Ks=Js();function Js(){return 2**++Hs}const Xs=Object.keys(o);class Zs extends Us{constructor(e,t,n,i){let a=-1;if(super(e,t),Qs(this,"space",i),"number"==typeof n)for(;++a<Xs.length;){const e=Xs[a];Qs(this,Xs[a],(n&o[e])===o[e])}}}function Qs(e,t,n){n&&(e[t]=n)}Zs.prototype.defined=!0;const ec={}.hasOwnProperty;function tc(e){const t={},n={};let o;for(o in e.properties)if(ec.call(e.properties,o)){const i=e.properties[o],a=new Zs(o,e.transform(e.attributes||{},o),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(a.mustUseProperty=!0),t[o]=a,n[$s(o)]=o,n[$s(a.attribute)]=o}return new Fs(t,n,e.space)}const nc=tc({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),oc=tc({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function ic(e,t){return t in e?e[t]:t}function ac(e,t){return ic(e,t.toLowerCase())}const rc=tc({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:ac,properties:{xmlns:null,xmlnsXLink:null}}),sc=tc({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:Gs,ariaAutoComplete:null,ariaBusy:Gs,ariaChecked:Gs,ariaColCount:Vs,ariaColIndex:Vs,ariaColSpan:Vs,ariaControls:Ws,ariaCurrent:null,ariaDescribedBy:Ws,ariaDetails:null,ariaDisabled:Gs,ariaDropEffect:Ws,ariaErrorMessage:null,ariaExpanded:Gs,ariaFlowTo:Ws,ariaGrabbed:Gs,ariaHasPopup:null,ariaHidden:Gs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ws,ariaLevel:Vs,ariaLive:null,ariaModal:Gs,ariaMultiLine:Gs,ariaMultiSelectable:Gs,ariaOrientation:null,ariaOwns:Ws,ariaPlaceholder:null,ariaPosInSet:Vs,ariaPressed:Gs,ariaReadOnly:Gs,ariaRelevant:null,ariaRequired:Gs,ariaRoleDescription:Ws,ariaRowCount:Vs,ariaRowIndex:Vs,ariaRowSpan:Vs,ariaSelected:Gs,ariaSetSize:Vs,ariaSort:null,ariaValueMax:Vs,ariaValueMin:Vs,ariaValueNow:Vs,ariaValueText:null,role:null}}),cc=tc({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:ac,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ys,acceptCharset:Ws,accessKey:Ws,action:null,allow:null,allowFullScreen:zs,allowPaymentRequest:zs,allowUserMedia:zs,alt:null,as:null,async:zs,autoCapitalize:null,autoComplete:Ws,autoFocus:zs,autoPlay:zs,blocking:Ws,capture:null,charSet:null,checked:zs,cite:null,className:Ws,cols:Vs,colSpan:null,content:null,contentEditable:Gs,controls:zs,controlsList:Ws,coords:Vs|Ys,crossOrigin:null,data:null,dateTime:null,decoding:null,default:zs,defer:zs,dir:null,dirName:null,disabled:zs,download:qs,draggable:Gs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:zs,formTarget:null,headers:Ws,height:Vs,hidden:zs,high:Vs,href:null,hrefLang:null,htmlFor:Ws,httpEquiv:Ws,id:null,imageSizes:null,imageSrcSet:null,inert:zs,inputMode:null,integrity:null,is:null,isMap:zs,itemId:null,itemProp:Ws,itemRef:Ws,itemScope:zs,itemType:Ws,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:zs,low:Vs,manifest:null,max:null,maxLength:Vs,media:null,method:null,min:null,minLength:Vs,multiple:zs,muted:zs,name:null,nonce:null,noModule:zs,noValidate:zs,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:zs,optimum:Vs,pattern:null,ping:Ws,placeholder:null,playsInline:zs,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:zs,referrerPolicy:null,rel:Ws,required:zs,reversed:zs,rows:Vs,rowSpan:Vs,sandbox:Ws,scope:null,scoped:zs,seamless:zs,selected:zs,shadowRootClonable:zs,shadowRootDelegatesFocus:zs,shadowRootMode:null,shape:null,size:Vs,sizes:null,slot:null,span:Vs,spellCheck:Gs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Vs,step:null,style:null,tabIndex:Vs,target:null,title:null,translate:null,type:null,typeMustMatch:zs,useMap:null,value:Gs,width:Vs,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ws,axis:null,background:null,bgColor:null,border:Vs,borderColor:null,bottomMargin:Vs,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:zs,declare:zs,event:null,face:null,frame:null,frameBorder:null,hSpace:Vs,leftMargin:Vs,link:null,longDesc:null,lowSrc:null,marginHeight:Vs,marginWidth:Vs,noResize:zs,noHref:zs,noShade:zs,noWrap:zs,object:null,profile:null,prompt:null,rev:null,rightMargin:Vs,rules:null,scheme:null,scrolling:Gs,standby:null,summary:null,text:null,topMargin:Vs,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Vs,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:zs,disableRemotePlayback:zs,prefix:null,property:null,results:Vs,security:null,unselectable:null}}),lc=tc({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:ic,properties:{about:Ks,accentHeight:Vs,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Vs,amplitude:Vs,arabicForm:null,ascent:Vs,attributeName:null,attributeType:null,azimuth:Vs,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Vs,by:null,calcMode:null,capHeight:Vs,className:Ws,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Vs,diffuseConstant:Vs,direction:null,display:null,dur:null,divisor:Vs,dominantBaseline:null,download:zs,dx:null,dy:null,edgeMode:null,editable:null,elevation:Vs,enableBackground:null,end:null,event:null,exponent:Vs,externalResourcesRequired:null,fill:null,fillOpacity:Vs,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ys,g2:Ys,glyphName:Ys,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Vs,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Vs,horizOriginX:Vs,horizOriginY:Vs,id:null,ideographic:Vs,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Vs,k:Vs,k1:Vs,k2:Vs,k3:Vs,k4:Vs,kernelMatrix:Ks,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Vs,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Vs,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Vs,overlineThickness:Vs,paintOrder:null,panose1:null,path:null,pathLength:Vs,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ws,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Vs,pointsAtY:Vs,pointsAtZ:Vs,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ks,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ks,rev:Ks,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ks,requiredFeatures:Ks,requiredFonts:Ks,requiredFormats:Ks,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Vs,specularExponent:Vs,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Vs,strikethroughThickness:Vs,string:null,stroke:null,strokeDashArray:Ks,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Vs,strokeOpacity:Vs,strokeWidth:null,style:null,surfaceScale:Vs,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ks,tabIndex:Vs,tableValues:null,target:null,targetX:Vs,targetY:Vs,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ks,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Vs,underlineThickness:Vs,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Vs,values:null,vAlphabetic:Vs,vMathematical:Vs,vectorEffect:null,vHanging:Vs,vIdeographic:Vs,version:null,vertAdvY:Vs,vertOriginX:Vs,vertOriginY:Vs,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Vs,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),uc=js([oc,nc,rc,sc,cc],"html"),dc=js([oc,nc,rc,sc,lc],"svg"),pc=/^data[-\w.:]+$/i,gc=/-[a-z]/g,hc=/[A-Z]/g;function fc(e){return"-"+e.toLowerCase()}function mc(e){return e.charAt(1).toUpperCase()}const yc={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var bc=n(133);const wc=bc.default||bc,vc=_c("end"),kc=_c("start");function _c(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function xc(e){return e&&"object"==typeof e?"position"in e||"type"in e?Sc(e.position):"start"in e||"end"in e?Sc(e):"line"in e||"column"in e?Cc(e):"":""}function Cc(e){return Ec(e&&e.line)+":"+Ec(e&&e.column)}function Sc(e){return Cc(e&&e.start)+"-"+Cc(e&&e.end)}function Ec(e){return e&&"number"==typeof e?e:1}class Tc extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let o="",i={},a=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?o=e:!i.cause&&e&&(a=!0,o=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const r=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=r?r.column:void 0,this.fatal=void 0,this.file,this.message=o,this.line=r?r.line:void 0,this.name=xc(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Tc.prototype.file="",Tc.prototype.name="",Tc.prototype.reason="",Tc.prototype.message="",Tc.prototype.stack="",Tc.prototype.column=void 0,Tc.prototype.line=void 0,Tc.prototype.ancestors=void 0,Tc.prototype.cause=void 0,Tc.prototype.fatal=void 0,Tc.prototype.place=void 0,Tc.prototype.ruleId=void 0,Tc.prototype.source=void 0;const Ic={}.hasOwnProperty,Ac=new Map,Pc=/[A-Z]/g,Mc=/-([a-z])/g,Nc=new Set(["table","tbody","thead","tfoot","tr"]),Oc=new Set(["td","th"]),Rc="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Dc(e,t,n){return"element"===t.type?function(e,t,n){const o=e.schema;let i=o;"svg"===t.tagName.toLowerCase()&&"html"===o.space&&(i=dc,e.schema=i),e.ancestors.push(t);const a=$c(e,t.tagName,!1),r=function(e,t){const n={};let o,i;for(i in t.properties)if("children"!==i&&Ic.call(t.properties,i)){const a=jc(e,i,t.properties[i]);if(a){const[i,r]=a;e.tableCellAlignToStyle&&"align"===i&&"string"==typeof r&&Oc.has(t.tagName)?o=r:n[i]=r}}return o&&((n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=o),n}(e,t);let s=Fc(e,t);return Nc.has(t.tagName)&&(s=s.filter((function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&Bs(t.value):Bs(t));var t}))),Lc(e,r,a,t),Bc(r,s),e.ancestors.pop(),e.schema=o,e.create(t,a,r,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Uc(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const o=e.schema;let i=o;"svg"===t.name&&"html"===o.space&&(i=dc,e.schema=i),e.ancestors.push(t);const a=null===t.name?e.Fragment:$c(e,t.name,!0),r=function(e,t){const n={};for(const o of t.attributes)if("mdxJsxExpressionAttribute"===o.type)if(o.data&&o.data.estree&&e.evaluater){const t=o.data.estree.body[0];t.type;const i=t.expression;i.type;const a=i.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Uc(e,t.position);else{const i=o.name;let a;if(o.value&&"object"==typeof o.value)if(o.value.data&&o.value.data.estree&&e.evaluater){const t=o.value.data.estree.body[0];t.type,a=e.evaluater.evaluateExpression(t.expression)}else Uc(e,t.position);else a=null===o.value||o.value;n[i]=a}return n}(e,t),s=Fc(e,t);return Lc(e,r,a,t),Bc(r,s),e.ancestors.pop(),e.schema=o,e.create(t,a,r,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Uc(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const o={};return Bc(o,Fc(e,t)),e.create(t,e.Fragment,o,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Lc(e,t,n,o){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=o)}function Bc(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Fc(e,t){const n=[];let o=-1;const i=e.passKeys?new Map:Ac;for(;++o<t.children.length;){const a=t.children[o];let r;if(e.passKeys){const e="element"===a.type?a.tagName:"mdxJsxFlowElement"===a.type||"mdxJsxTextElement"===a.type?a.name:void 0;if(e){const t=i.get(e)||0;r=e+"-"+t,i.set(e,t+1)}}const s=Dc(e,a,r);void 0!==s&&n.push(s)}return n}function jc(e,t,n){const o=function(e,t){const n=$s(t);let o=t,i=Us;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&pc.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(gc,mc);o="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!gc.test(e)){let n=e.replace(hc,fc);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=Zs}return new i(o,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=o.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===o.property){let t="object"==typeof n?n:function(e,t){const n={};try{wc(t,(function(e,t){let o=e;"--"!==o.slice(0,2)&&("-ms-"===o.slice(0,4)&&(o="ms-"+o.slice(4)),o=o.replace(Mc,zc)),n[o]=t}))}catch(t){if(!e.ignoreInvalidStyle){const n=t,o=new Tc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Rc+"#cannot-parse-style-attribute",o}}return n}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Ic.call(e,n)&&(t[Hc(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&o.space?yc[o.property]||o.property:o.attribute,n]}}function $c(e,t,n){let o;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=Ds(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}o=n}else o=Ds(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else o={type:"Literal",value:t};if("Literal"===o.type){const t=o.value;return Ic.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(o);Uc(e)}function Uc(e,t){const n=new Tc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Rc+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Hc(e){let t=e.replace(Pc,Gc);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function zc(e,t){return t.toUpperCase()}function Gc(e){return"-"+e.toLowerCase()}const qc={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Vc={};function Wc(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Yc(e.children,t,n)}return Array.isArray(e)?Yc(e,t,n):""}function Yc(e,t,n){const o=[];let i=-1;for(;++i<e.length;)o[i]=Wc(e[i],t,n);return o.join("")}function Kc(e,t,n,o){const i=e.length;let a,r=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,o.length<1e4)a=Array.from(o),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);r<o.length;)a=o.slice(r,r+1e4),a.unshift(t,0),e.splice(...a),r+=1e4,t+=1e4}function Jc(e,t){return e.length>0?(Kc(e,e.length,0,t),e):t}class Xc{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const o=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return n&&Zc(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Zc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Zc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Zc(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Zc(this.left,t.reverse())}}}function Zc(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Qc(e){const t={};let n,o,i,a,r,s,c,l=-1;const u=new Xc(e);for(;++l<u.length;){for(;l in t;)l=t[l];if(n=u.get(l),l&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(l-1)[1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,el(u,l)),l=t[l],c=!0);else if(n[1]._container){for(i=l,o=void 0;i--&&(a=u.get(i),"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(o&&(u.get(o)[1].type="lineEndingBlank"),a[1].type="lineEnding",o=i);o&&(n[1].end=Object.assign({},u.get(o)[1].start),r=u.slice(o,l),r.unshift(n),u.splice(o,l-o+1,r))}}return Kc(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function el(e,t){const n=e.get(t)[1],o=e.get(t)[2];let i=t-1;const a=[],r=n._tokenizer||o.parser[n.contentType](n.start),s=r.events,c=[],l={};let u,d,p=-1,g=n,h=0,f=0;const m=[f];for(;g;){for(;e.get(++i)[1]!==g;);a.push(i),g._tokenizer||(u=o.sliceStream(g),g.next||u.push(null),d&&r.defineSkip(g.start),g._isInFirstContentOfListItem&&(r._gfmTasklistFirstContentOfListItem=!0),r.write(u),g._isInFirstContentOfListItem&&(r._gfmTasklistFirstContentOfListItem=void 0)),d=g,g=g.next}for(g=n;++p<s.length;)"exit"===s[p][0]&&"enter"===s[p-1][0]&&s[p][1].type===s[p-1][1].type&&s[p][1].start.line!==s[p][1].end.line&&(f=p+1,m.push(f),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(r.events=[],g?(g._tokenizer=void 0,g.previous=void 0):m.pop(),p=m.length;p--;){const t=s.slice(m[p],m[p+1]),n=a.pop();c.push([n,n+t.length-1]),e.splice(n,2,t)}for(c.reverse(),p=-1;++p<c.length;)l[h+c[p][0]]=h+c[p][1],h+=c[p][1]-c[p][0]-1;return l}const tl={}.hasOwnProperty;function nl(e,t){let n;for(n in t){const o=(tl.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){tl.call(o,a)||(o[a]=[]);const e=i[a];ol(o[a],Array.isArray(e)?e:e?[e]:[])}}}function ol(e,t){let n=-1;const o=[];for(;++n<t.length;)("after"===t[n].add?e:o).push(t[n]);Kc(e,0,0,o)}const il=ml(/[A-Za-z]/),al=ml(/[\dA-Za-z]/),rl=ml(/[#-'*+\--9=?A-Z^-~]/);function sl(e){return null!==e&&(e<32||127===e)}const cl=ml(/\d/),ll=ml(/[\dA-Fa-f]/),ul=ml(/[!-/:-@[-`{-~]/);function dl(e){return null!==e&&e<-2}function pl(e){return null!==e&&(e<0||32===e)}function gl(e){return-2===e||-1===e||32===e}const hl=ml(/\p{P}|\p{S}/u),fl=ml(/\s/);function ml(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function yl(e,t,n,o){const i=o?o-1:Number.POSITIVE_INFINITY;let a=0;return function(o){return gl(o)?(e.enter(n),r(o)):t(o)};function r(o){return gl(o)&&a++<i?(e.consume(o),r):(e.exit(n),t(o))}}const bl={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null!==n)return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),yl(e,t,"linePrefix");e.consume(n)}),(function(t){return e.enter("paragraph"),o(t)}));let n;return t;function o(t){const o=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=o),n=o,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):dl(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),i)}}},wl={tokenize:function(e){const t=this,n=[];let o,i,a,r=0;return s;function s(o){if(r<n.length){const i=n[r];return t.containerState=i[1],e.attempt(i[0].continuation,c,l)(o)}return l(o)}function c(e){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&b();const n=t.events.length;let i,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){i=t.events[a][1].end;break}y(r);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},i),s++;return Kc(t.events,a+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(i){if(r===n.length){if(!o)return p(i);if(o.currentConstruct&&o.currentConstruct.concrete)return h(i);t.interrupt=Boolean(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(vl,u,d)(i)}function u(e){return o&&b(),y(r),p(e)}function d(e){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,h(e)}function p(n){return t.containerState={},e.attempt(vl,g,h)(n)}function g(e){return r++,n.push([t.currentConstruct,t.containerState]),p(e)}function h(n){return null===n?(o&&b(),y(0),void e.consume(n)):(o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:o}),f(n))}function f(n){return null===n?(m(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):dl(n)?(e.consume(n),m(e.exit("chunkFlow")),r=0,t.interrupt=void 0,s):(e.consume(n),f)}function m(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,o.defineSkip(e.start),o.write(s),t.parser.lazy[e.start.line]){let e=o.events.length;for(;e--;)if(o.events[e][1].start.offset<a&&(!o.events[e][1].end||o.events[e][1].end.offset>a))return;const n=t.events.length;let i,s,c=n;for(;c--;)if("exit"===t.events[c][0]&&"chunkFlow"===t.events[c][1].type){if(i){s=t.events[c][1].end;break}i=!0}for(y(r),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;Kc(t.events,c+1,0,t.events.slice(n)),t.events.length=e}}function y(o){let i=n.length;for(;i-- >o;){const o=n[i];t.containerState=o[1],o[0].exit.call(t,e)}n.length=o}function b(){o.write([null]),i=void 0,o=void 0,t.containerState._closeFlow=void 0}}},vl={tokenize:function(e,t,n){return yl(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},kl={tokenize:function(e,t,n){return function(t){return gl(t)?yl(e,o,"linePrefix")(t):o(t)};function o(e){return null===e||dl(e)?t(e):n(e)}},partial:!0},_l={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(t)};function o(t){return null===t?i(t):dl(t)?e.check(xl,a,i)(t):(e.consume(t),o)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}},resolve:function(e){return Qc(e),e}},xl={tokenize:function(e,t,n){const o=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),yl(e,i,"linePrefix")};function i(i){if(null===i||dl(i))return n(i);const a=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(o.parser.constructs.flow,n,t)(i)}},partial:!0},Cl={tokenize:function(e){const t=this,n=e.attempt(kl,(function(o){if(null!==o)return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n;e.consume(o)}),e.attempt(this.parser.constructs.flowInitial,o,yl(e,e.attempt(this.parser.constructs.flow,o,e.attempt(_l,o)),"linePrefix")));return n;function o(o){if(null!==o)return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(o)}}},Sl={resolveAll:Al()},El=Il("string"),Tl=Il("text");function Il(e){return{tokenize:function(t){const n=this,o=this.parser.constructs[e],i=t.attempt(o,a,r);return a;function a(e){return c(e)?i(e):r(e)}function r(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return c(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function c(e){if(null===e)return!0;const t=o[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:Al("text"===e?Pl:void 0)}}function Al(e){return function(t,n){let o,i=-1;for(;++i<=t.length;)void 0===o?t[i]&&"data"===t[i][1].type&&(o=i,i++):t[i]&&"data"===t[i][1].type||(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(t,n):t}}function Pl(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const o=e[n-1][1],i=t.sliceStream(o);let a,r=i.length,s=-1,c=0;for(;r--;){const e=i[r];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)c++,s--;if(s)break;s=-1}else if(-2===e)a=!0,c++;else if(-1!==e){r++;break}}if(c){const i={type:n===e.length||a||c<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-c,offset:o.end.offset-c,_index:o.start._index+r,_bufferIndex:r?s:o.start._bufferIndex+s},end:Object.assign({},o.end)};o.end=Object.assign({},i.start),o.start.offset===o.end.offset?Object.assign(o,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function Ml(e,t,n){const o=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!o.includes(a)&&(t=a(t,n),o.push(a))}return t}function Nl(e,t,n){let o=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let r=[],s=[],c=!0;const l={consume:function(e){dl(e)?(o.line++,o.column=1,o.offset+=-3===e?2:1,w()):-1!==e&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===r[o._index].length&&(o._bufferIndex=-1,o._index++)),u.previous=e,c=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=h(),u.events.push(["exit",t,u]),t},attempt:y((function(e,t){b(e,t.from)})),check:y(m),interrupt:y(m,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:g,sliceSerialize:function(e,t){return function(e,t){let n=-1;const o=[];let i;for(;++n<e.length;){const a=e[n];let r;if("string"==typeof a)r=a;else switch(a){case-5:r="\r";break;case-4:r="\n";break;case-3:r="\r\n";break;case-2:r=t?" ":"\t";break;case-1:if(!t&&i)continue;r=" ";break;default:r=String.fromCharCode(a)}i=-2===a,o.push(r)}return o.join("")}(g(e),t)},now:h,defineSkip:function(e){i[e.line]=e.column,w()},write:function(e){return r=Jc(r,e),function(){let e;for(;o._index<r.length;){const t=r[o._index];if("string"==typeof t)for(e=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===e&&o._bufferIndex<t.length;)f(t.charCodeAt(o._bufferIndex));else f(t)}}(),null!==r[r.length-1]?[]:(b(t,0),u.events=Ml(a,u.events,u),u.events)}};let d,p=t.tokenize.call(u,l);return t.resolveAll&&a.push(t),u;function g(e){return function(e,t){const n=t.start._index,o=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let r;if(n===i)r=[e[n].slice(o,a)];else{if(r=e.slice(n,i),o>-1){const e=r[0];"string"==typeof e?r[0]=e.slice(o):r.shift()}a>0&&r.push(e[i].slice(0,a))}return r}(r,e)}function h(){const{line:e,column:t,offset:n,_index:i,_bufferIndex:a}=o;return{line:e,column:t,offset:n,_index:i,_bufferIndex:a}}function f(e){c=void 0,d=e,p=p(e)}function m(e,t){t.restore()}function y(e,t){return function(n,i,a){let r,d,p,g;return Array.isArray(n)?m(n):"tokenize"in n?m([n]):(f=n,function(e){const t=null!==e&&f[e],n=null!==e&&f.null;return m([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(n)?n:n?[n]:[]])(e)});var f;function m(e){return r=e,d=0,0===e.length?a:y(e[d])}function y(e){return function(n){return g=function(){const e=h(),t=u.previous,n=u.currentConstruct,i=u.events.length,a=Array.from(s);return{restore:function(){o=e,u.previous=t,u.currentConstruct=n,u.events.length=i,s=a,w()},from:i}}(),p=e,e.partial||(u.currentConstruct=e),e.name&&u.parser.constructs.disable.null.includes(e.name)?v():e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,b,v)(n)}}function b(t){return c=!0,e(p,g),i}function v(e){return c=!0,g.restore(),++d<r.length?y(r[d]):a}}}function b(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&Kc(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function w(){o.line in i&&o.column<2&&(o.column=i[o.line],o.offset+=i[o.line]-1)}}const Ol={name:"thematicBreak",tokenize:function(e,t,n){let o,i=0;return function(t){return e.enter("thematicBreak"),function(e){return o=e,a(e)}(t)};function a(a){return a===o?(e.enter("thematicBreakSequence"),r(a)):i>=3&&(null===a||dl(a))?(e.exit("thematicBreak"),t(a)):n(a)}function r(t){return t===o?(e.consume(t),i++,r):(e.exit("thematicBreakSequence"),gl(t)?yl(e,a,"whitespace")(t):a(t))}}},Rl={name:"list",tokenize:function(e,t,n){const o=this,i=o.events[o.events.length-1];let a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,r=0;return function(t){const i=o.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!o.containerState.marker||t===o.containerState.marker:cl(t)){if(o.containerState.type||(o.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(Ol,n,c)(t):c(t);if(!o.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return cl(t)&&++r<10?(e.consume(t),s):(!o.interrupt||r<2)&&(o.containerState.marker?t===o.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),c(t)):n(t)}function c(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||t,e.check(kl,o.interrupt?n:l,e.attempt(Dl,d,u))}function l(e){return o.containerState.initialBlankLine=!0,a++,d(e)}function u(t){return gl(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return o.containerState.size=a+o.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const o=this;return o.containerState._closeFlow=void 0,e.check(kl,(function(n){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,yl(e,t,"listItemIndent",o.containerState.size+1)(n)}),(function(n){return o.containerState.furtherBlankLines||!gl(n)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,i(n)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,e.attempt(Ll,t,i)(n))}));function i(i){return o.containerState._closeFlow=!0,o.interrupt=void 0,yl(e,e.attempt(Rl,t,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},Dl={tokenize:function(e,t,n){const o=this;return yl(e,(function(e){const i=o.events[o.events.length-1];return!gl(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},Ll={tokenize:function(e,t,n){const o=this;return yl(e,(function(e){const i=o.events[o.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===o.containerState.size?t(e):n(e)}),"listItemIndent",o.containerState.size+1)},partial:!0},Bl={name:"blockQuote",tokenize:function(e,t,n){const o=this;return function(t){if(62===t){const n=o.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return gl(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const o=this;return function(t){return gl(t)?yl(e,i,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):i(t)};function i(o){return e.attempt(Bl,t,n)(o)}}},exit:function(e){e.exit("blockQuote")}};function Fl(e,t,n,o,i,a,r,s,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return function(t){return 60===t?(e.enter(o),e.enter(i),e.enter(a),e.consume(t),e.exit(a),d):null===t||32===t||41===t||sl(t)?n(t):(e.enter(o),e.enter(r),e.enter(s),e.enter("chunkString",{contentType:"string"}),h(t))};function d(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(o),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||dl(t)?n(t):(e.consume(t),92===t?g:p)}function g(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function h(i){return u||null!==i&&41!==i&&!pl(i)?u<l&&40===i?(e.consume(i),u++,h):41===i?(e.consume(i),u--,h):null===i||32===i||40===i||sl(i)?n(i):(e.consume(i),92===i?f:h):(e.exit("chunkString"),e.exit(s),e.exit(r),e.exit(o),t(i))}function f(t){return 40===t||41===t||92===t?(e.consume(t),h):h(t)}}function jl(e,t,n,o,i,a){const r=this;let s,c=0;return function(t){return e.enter(o),e.enter(i),e.consume(t),e.exit(i),e.enter(a),l};function l(d){return c>999||null===d||91===d||93===d&&!s||94===d&&!c&&"_hiddenFootnoteSupport"in r.parser.constructs?n(d):93===d?(e.exit(a),e.enter(i),e.consume(d),e.exit(i),e.exit(o),t):dl(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||dl(t)||c++>999?(e.exit("chunkString"),l(t)):(e.consume(t),s||(s=!gl(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),c++,u):u(t)}}function $l(e,t,n,o,i,a){let r;return function(t){return 34===t||39===t||40===t?(e.enter(o),e.enter(i),e.consume(t),e.exit(i),r=40===t?41:t,s):n(t)};function s(n){return n===r?(e.enter(i),e.consume(n),e.exit(i),e.exit(o),t):(e.enter(a),c(n))}function c(t){return t===r?(e.exit(a),s(r)):null===t?n(t):dl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),yl(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===r||null===t||dl(t)?(e.exit("chunkString"),c(t)):(e.consume(t),92===t?u:l)}function u(t){return t===r||92===t?(e.consume(t),l):l(t)}}function Ul(e,t){let n;return function o(i){return dl(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,o):gl(i)?yl(e,o,n?"linePrefix":"lineSuffix")(i):t(i)}}function Hl(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zl={name:"definition",tokenize:function(e,t,n){const o=this;let i;return function(t){return e.enter("definition"),function(t){return jl.call(o,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function a(t){return i=Hl(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),r):n(t)}function r(t){return pl(t)?Ul(e,s)(t):s(t)}function s(t){return Fl(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function c(t){return e.attempt(Gl,l,l)(t)}function l(t){return gl(t)?yl(e,u,"whitespace")(t):u(t)}function u(a){return null===a||dl(a)?(e.exit("definition"),o.parser.defined.push(i),t(a)):n(a)}}},Gl={tokenize:function(e,t,n){return function(t){return pl(t)?Ul(e,o)(t):n(t)};function o(t){return $l(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return gl(t)?yl(e,a,"whitespace")(t):a(t)}function a(e){return null===e||dl(e)?t(e):n(e)}},partial:!0},ql={name:"codeIndented",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("codeIndented"),yl(e,i,"linePrefix",5)(t)};function i(e){const t=o.events[o.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?s(t):dl(t)?e.attempt(Vl,a,s)(t):(e.enter("codeFlowValue"),r(t))}function r(t){return null===t||dl(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),r)}function s(n){return e.exit("codeIndented"),t(n)}}},Vl={tokenize:function(e,t,n){const o=this;return i;function i(t){return o.parser.lazy[o.now().line]?n(t):dl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):yl(e,a,"linePrefix",5)(t)}function a(e){const a=o.events[o.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):dl(e)?i(e):n(e)}},partial:!0},Wl={name:"headingAtx",tokenize:function(e,t,n){let o=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&o++<6?(e.consume(t),i):null===t||pl(t)?(e.exit("atxHeadingSequence"),a(t)):n(t)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),r(n)):null===n||dl(n)?(e.exit("atxHeading"),t(n)):gl(n)?yl(e,a,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function r(t){return 35===t?(e.consume(t),r):(e.exit("atxHeadingSequence"),a(t))}function s(t){return null===t||35===t||pl(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),s)}},resolve:function(e,t){let n,o,i=e.length-2,a=3;return"whitespace"===e[a][1].type&&(a+=2),i-2>a&&"whitespace"===e[i][1].type&&(i-=2),"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4),i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},o={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},Kc(e,a,i-a+1,[["enter",n,t],["enter",o,t],["exit",o,t],["exit",n,t]])),e}},Yl={name:"setextUnderline",tokenize:function(e,t,n){const o=this;let i;return function(t){let r,s=o.events.length;for(;s--;)if("lineEnding"!==o.events[s][1].type&&"linePrefix"!==o.events[s][1].type&&"content"!==o.events[s][1].type){r="paragraph"===o.events[s][1].type;break}return o.parser.lazy[o.now().line]||!o.interrupt&&!r?n(t):(e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),a(t)}(t))};function a(t){return t===i?(e.consume(t),a):(e.exit("setextHeadingLineSequence"),gl(t)?yl(e,r,"lineSuffix")(t):r(t))}function r(o){return null===o||dl(o)?(e.exit("setextHeadingLine"),t(o)):n(o)}},resolveTo:function(e,t){let n,o,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(o=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);const r={type:"setextHeading",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[o][1].type="setextHeadingText",i?(e.splice(o,0,["enter",r,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=r,e.push(["exit",r,t]),e}},Kl=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Jl=["pre","script","style","textarea"],Xl={name:"htmlFlow",tokenize:function(e,t,n){const o=this;let i,a,r,s,c;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l}(t)};function l(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),a=!0,g):63===s?(e.consume(s),i=3,o.interrupt?t:R):il(s)?(e.consume(s),r=String.fromCharCode(s),h):n(s)}function u(a){return 45===a?(e.consume(a),i=2,d):91===a?(e.consume(a),i=5,s=0,p):il(a)?(e.consume(a),i=4,o.interrupt?t:R):n(a)}function d(i){return 45===i?(e.consume(i),o.interrupt?t:R):n(i)}function p(i){return i==="CDATA[".charCodeAt(s++)?(e.consume(i),6===s?o.interrupt?t:E:p):n(i)}function g(t){return il(t)?(e.consume(t),r=String.fromCharCode(t),h):n(t)}function h(s){if(null===s||47===s||62===s||pl(s)){const c=47===s,l=r.toLowerCase();return c||a||!Jl.includes(l)?Kl.includes(r.toLowerCase())?(i=6,c?(e.consume(s),f):o.interrupt?t(s):E(s)):(i=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(s):a?m(s):y(s)):(i=1,o.interrupt?t(s):E(s))}return 45===s||al(s)?(e.consume(s),r+=String.fromCharCode(s),h):n(s)}function f(i){return 62===i?(e.consume(i),o.interrupt?t:E):n(i)}function m(t){return gl(t)?(e.consume(t),m):C(t)}function y(t){return 47===t?(e.consume(t),C):58===t||95===t||il(t)?(e.consume(t),b):gl(t)?(e.consume(t),y):C(t)}function b(t){return 45===t||46===t||58===t||95===t||al(t)?(e.consume(t),b):w(t)}function w(t){return 61===t?(e.consume(t),v):gl(t)?(e.consume(t),w):y(t)}function v(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,k):gl(t)?(e.consume(t),v):_(t)}function k(t){return t===c?(e.consume(t),c=null,x):null===t||dl(t)?n(t):(e.consume(t),k)}function _(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||pl(t)?w(t):(e.consume(t),_)}function x(e){return 47===e||62===e||gl(e)?y(e):n(e)}function C(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||dl(t)?E(t):gl(t)?(e.consume(t),S):n(t)}function E(t){return 45===t&&2===i?(e.consume(t),P):60===t&&1===i?(e.consume(t),M):62===t&&4===i?(e.consume(t),D):63===t&&3===i?(e.consume(t),R):93===t&&5===i?(e.consume(t),O):!dl(t)||6!==i&&7!==i?null===t||dl(t)?(e.exit("htmlFlowData"),T(t)):(e.consume(t),E):(e.exit("htmlFlowData"),e.check(Zl,L,T)(t))}function T(t){return e.check(Ql,I,L)(t)}function I(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),A}function A(t){return null===t||dl(t)?T(t):(e.enter("htmlFlowData"),E(t))}function P(t){return 45===t?(e.consume(t),R):E(t)}function M(t){return 47===t?(e.consume(t),r="",N):E(t)}function N(t){if(62===t){const n=r.toLowerCase();return Jl.includes(n)?(e.consume(t),D):E(t)}return il(t)&&r.length<8?(e.consume(t),r+=String.fromCharCode(t),N):E(t)}function O(t){return 93===t?(e.consume(t),R):E(t)}function R(t){return 62===t?(e.consume(t),D):45===t&&2===i?(e.consume(t),R):E(t)}function D(t){return null===t||dl(t)?(e.exit("htmlFlowData"),L(t)):(e.consume(t),D)}function L(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},concrete:!0},Zl={tokenize:function(e,t,n){return function(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(kl,t,n)}},partial:!0},Ql={tokenize:function(e,t,n){const o=this;return function(t){return dl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):n(t)};function i(e){return o.parser.lazy[o.now().line]?n(e):t(e)}},partial:!0},eu={tokenize:function(e,t,n){const o=this;return function(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i)};function i(e){return o.parser.lazy[o.now().line]?n(e):t(e)}},partial:!0},tu={name:"codeFenced",tokenize:function(e,t,n){const o=this,i={tokenize:function(e,t,n){let i=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(t){return e.enter("codeFencedFence"),gl(t)?yl(e,c,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===a?(e.enter("codeFencedFenceSequence"),l(t)):n(t)}function l(t){return t===a?(i++,e.consume(t),l):i>=s?(e.exit("codeFencedFenceSequence"),gl(t)?yl(e,u,"whitespace")(t):u(t)):n(t)}function u(o){return null===o||dl(o)?(e.exit("codeFencedFence"),t(o)):n(o)}},partial:!0};let a,r=0,s=0;return function(t){return function(t){const n=o.events[o.events.length-1];return r=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,a=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(t)}(t)};function c(t){return t===a?(s++,e.consume(t),c):s<3?n(t):(e.exit("codeFencedFenceSequence"),gl(t)?yl(e,l,"whitespace")(t):l(t))}function l(n){return null===n||dl(n)?(e.exit("codeFencedFence"),o.interrupt?t(n):e.check(eu,g,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||dl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(t)):gl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),yl(e,d,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),u)}function d(t){return null===t||dl(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||dl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(t)):96===t&&t===a?n(t):(e.consume(t),p)}function g(t){return e.attempt(i,b,h)(t)}function h(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return r>0&&gl(t)?yl(e,m,"linePrefix",r+1)(t):m(t)}function m(t){return null===t||dl(t)?e.check(eu,g,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||dl(t)?(e.exit("codeFlowValue"),m(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}},concrete:!0},nu=document.createElement("i");function ou(e){const t="&"+e+";";nu.innerHTML=t;const n=nu.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}const iu={name:"characterReference",tokenize:function(e,t,n){const o=this;let i,a,r=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),i=31,a=al,l(t))}function c(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=ll,l):(e.enter("characterReferenceValue"),i=7,a=cl,l(t))}function l(s){if(59===s&&r){const i=e.exit("characterReferenceValue");return a!==al||ou(o.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return a(s)&&r++<i?(e.consume(s),l):n(s)}}},au={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),o};function o(o){return ul(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}},ru={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),yl(e,t,"linePrefix")}}},su={name:"labelEnd",tokenize:function(e,t,n){const o=this;let i,a,r=o.events.length;for(;r--;)if(("labelImage"===o.events[r][1].type||"labelLink"===o.events[r][1].type)&&!o.events[r][1]._balanced){i=o.events[r][1];break}return function(t){return i?i._inactive?u(t):(a=o.parser.defined.includes(Hl(o.sliceSerialize({start:i.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s):n(t)};function s(t){return 40===t?e.attempt(cu,l,a?l:u)(t):91===t?e.attempt(lu,l,a?c:u)(t):a?l(t):u(t)}function c(t){return e.attempt(uu,l,u)(t)}function l(e){return t(e)}function u(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,o,i,a,r=e.length,s=0;for(;r--;)if(n=e[r][1],o){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[r][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[r][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(o=r,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=r);const c={type:"labelLink"===e[o][1].type?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[o+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=[["enter",c,t],["enter",l,t]],a=Jc(a,e.slice(o+1,o+s+3)),a=Jc(a,[["enter",u,t]]),a=Jc(a,Ml(t.parser.constructs.insideSpan.null,e.slice(o+s+4,i-3),t)),a=Jc(a,[["exit",u,t],e[i-2],e[i-1],["exit",l,t]]),a=Jc(a,e.slice(i+1)),a=Jc(a,[["exit",c,t]]),Kc(e,o,e.length,a),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},cu={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),o};function o(t){return pl(t)?Ul(e,i)(t):i(t)}function i(t){return 41===t?l(t):Fl(e,a,r,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return pl(t)?Ul(e,s)(t):l(t)}function r(e){return n(e)}function s(t){return 34===t||39===t||40===t?$l(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function c(t){return pl(t)?Ul(e,l)(t):l(t)}function l(o){return 41===o?(e.enter("resourceMarker"),e.consume(o),e.exit("resourceMarker"),e.exit("resource"),t):n(o)}}},lu={tokenize:function(e,t,n){const o=this;return function(t){return jl.call(o,e,i,a,"reference","referenceMarker","referenceString")(t)};function i(e){return o.parser.defined.includes(Hl(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function a(e){return n(e)}}},uu={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),o};function o(o){return 93===o?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}},du={name:"labelStartImage",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in o.parser.constructs?n(e):t(e)}},resolveAll:su.resolveAll};function pu(e){return null===e||pl(e)||fl(e)?1:hl(e)?2:void 0}const gu={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,i=pu(o);let a;return function(t){return a=t,e.enter("attentionSequence"),r(t)};function r(s){if(s===a)return e.consume(s),r;const c=e.exit("attentionSequence"),l=pu(s),u=!l||2===l&&i||n.includes(s),d=!i||2===i&&l||n.includes(o);return c._open=Boolean(42===a?u:u&&(i||!d)),c._close=Boolean(42===a?d:d&&(l||!u)),t(s)}},resolveAll:function(e,t){let n,o,i,a,r,s,c,l,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);hu(d,-s),hu(p,s),a={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},r={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},o={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},r.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},r.end),c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=Jc(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=Jc(c,[["enter",o,t],["enter",a,t],["exit",a,t],["enter",i,t]]),c=Jc(c,Ml(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),c=Jc(c,[["exit",i,t],["enter",r,t],["exit",r,t],["exit",o,t]]),e[u][1].end.offset-e[u][1].start.offset?(l=2,c=Jc(c,[["enter",e[u][1],t],["exit",e[u][1],t]])):l=0,Kc(e,n-1,u-n+3,c),u=n+c.length-l-2;break}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function hu(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const fu={name:"autolink",tokenize:function(e,t,n){let o=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return il(t)?(e.consume(t),a):64===t?n(t):c(t)}function a(e){return 43===e||45===e||46===e||al(e)?(o=1,r(e)):c(e)}function r(t){return 58===t?(e.consume(t),o=0,s):(43===t||45===t||46===t||al(t))&&o++<32?(e.consume(t),r):(o=0,c(t))}function s(o){return 62===o?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(o),e.exit("autolinkMarker"),e.exit("autolink"),t):null===o||32===o||60===o||sl(o)?n(o):(e.consume(o),s)}function c(t){return 64===t?(e.consume(t),l):rl(t)?(e.consume(t),c):n(t)}function l(e){return al(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),o=0,l):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||al(t))&&o++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}},mu={name:"htmlText",tokenize:function(e,t,n){const o=this;let i,a,r;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),v):63===t?(e.consume(t),b):il(t)?(e.consume(t),x):n(t)}function c(t){return 45===t?(e.consume(t),l):91===t?(e.consume(t),a=0,g):il(t)?(e.consume(t),y):n(t)}function l(t){return 45===t?(e.consume(t),p):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):dl(t)?(r=u,N(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),p):u(t)}function p(e){return 62===e?M(e):45===e?d(e):u(e)}function g(t){return t==="CDATA[".charCodeAt(a++)?(e.consume(t),6===a?h:g):n(t)}function h(t){return null===t?n(t):93===t?(e.consume(t),f):dl(t)?(r=h,N(t)):(e.consume(t),h)}function f(t){return 93===t?(e.consume(t),m):h(t)}function m(t){return 62===t?M(t):93===t?(e.consume(t),m):h(t)}function y(t){return null===t||62===t?M(t):dl(t)?(r=y,N(t)):(e.consume(t),y)}function b(t){return null===t?n(t):63===t?(e.consume(t),w):dl(t)?(r=b,N(t)):(e.consume(t),b)}function w(e){return 62===e?M(e):b(e)}function v(t){return il(t)?(e.consume(t),k):n(t)}function k(t){return 45===t||al(t)?(e.consume(t),k):_(t)}function _(t){return dl(t)?(r=_,N(t)):gl(t)?(e.consume(t),_):M(t)}function x(t){return 45===t||al(t)?(e.consume(t),x):47===t||62===t||pl(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),M):58===t||95===t||il(t)?(e.consume(t),S):dl(t)?(r=C,N(t)):gl(t)?(e.consume(t),C):M(t)}function S(t){return 45===t||46===t||58===t||95===t||al(t)?(e.consume(t),S):E(t)}function E(t){return 61===t?(e.consume(t),T):dl(t)?(r=E,N(t)):gl(t)?(e.consume(t),E):C(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,I):dl(t)?(r=T,N(t)):gl(t)?(e.consume(t),T):(e.consume(t),A)}function I(t){return t===i?(e.consume(t),i=void 0,P):null===t?n(t):dl(t)?(r=I,N(t)):(e.consume(t),I)}function A(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||pl(t)?C(t):(e.consume(t),A)}function P(e){return 47===e||62===e||pl(e)?C(e):n(e)}function M(o){return 62===o?(e.consume(o),e.exit("htmlTextData"),e.exit("htmlText"),t):n(o)}function N(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return gl(t)?yl(e,R,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),r(t)}}},yu={name:"labelStartLink",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in o.parser.constructs?n(e):t(e)}},resolveAll:su.resolveAll},bu={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),o};function o(o){return dl(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}},wu={name:"codeText",tokenize:function(e,t,n){let o,i,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),r(t)};function r(t){return 96===t?(e.consume(t),a++,r):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(i=e.enter("codeTextSequence"),o=0,l(t)):dl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||dl(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),c)}function l(n){return 96===n?(e.consume(n),o++,l):o===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",c(n))}},resolve:function(e){let t,n,o=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[o][1].type&&"space"!==e[o][1].type))for(t=i;++t<o;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[o][1].type="codeTextPadding",i+=2,o-=2;break}for(t=i-1,o++;++t<=o;)void 0===n?t!==o&&"lineEnding"!==e[t][1].type&&(n=t):t!==o&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),o-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}},vu={42:Rl,43:Rl,45:Rl,48:Rl,49:Rl,50:Rl,51:Rl,52:Rl,53:Rl,54:Rl,55:Rl,56:Rl,57:Rl,62:Bl},ku={91:zl},_u={[-2]:ql,[-1]:ql,32:ql},xu={35:Wl,42:Ol,45:[Yl,Ol],60:Xl,61:Yl,95:Ol,96:tu,126:tu},Cu={38:iu,92:au},Su={[-5]:ru,[-4]:ru,[-3]:ru,33:du,38:iu,42:gu,60:[fu,mu],91:yu,92:[bu,au],93:su,95:gu,96:wu},Eu={null:[gu,Sl]},Tu={null:[42,95]},Iu={null:[]};const Au=/[\0\t\n\r]/g;function Pu(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"":String.fromCodePoint(n)}const Mu=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Nu(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Pu(n.slice(t?2:1),t?16:10)}return ou(n)||e}const Ou={}.hasOwnProperty;function Ru(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(b),autolinkProtocol:u,autolinkEmail:u,atxHeading:i(f),blockQuote:i((function(){return{type:"blockquote",children:[]}})),characterEscape:u,characterReference:u,codeFenced:i(h),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(h,a),codeText:i((function(){return{type:"inlineCode",value:""}}),a),codeTextData:u,data:u,codeFlowValue:u,definition:i((function(){return{type:"definition",identifier:"",label:null,title:null,url:""}})),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i((function(){return{type:"emphasis",children:[]}})),hardBreakEscape:i(m),hardBreakTrailing:i(m),htmlFlow:i(y,a),htmlFlowData:u,htmlText:i(y,a),htmlTextData:u,image:i((function(){return{type:"image",title:null,url:"",alt:null}})),label:a,link:i(b),listItem:i((function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}})),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:i(w,(function(){this.data.expectingFirstListItemValue=!0})),listUnordered:i(w),paragraph:i((function(){return{type:"paragraph",children:[]}})),reference:function(){this.data.referenceType="collapsed"},referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(f),strong:i((function(){return{type:"strong",children:[]}})),thematicBreak:i((function(){return{type:"thematicBreak"}}))},exit:{atxHeading:s(),atxHeadingSequence:function(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}},autolink:s(),autolinkEmail:function(e){d.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){d.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:d,characterReferenceMarkerHexadecimal:g,characterReferenceMarkerNumeric:g,characterReferenceValue:function(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let o;n?(o=Pu(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0):o=ou(t);this.stack[this.stack.length-1].value+=o},characterReference:function(e){this.stack.pop().position.end=Du(e.end)},codeFenced:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0})),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){const e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){const e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:d,codeIndented:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")})),codeText:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e})),codeTextData:d,data:d,definition:s(),definitionDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Hl(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(p),hardBreakTrailing:s(p),htmlFlow:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e})),htmlFlowData:d,htmlText:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e})),htmlTextData:d,image:s((function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0})),label:function(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t},labelText:function(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Mu,Nu)}(t),n.identifier=Hl(t).toLowerCase()},lineEnding:function(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak)return n.children[n.children.length-1].position.end=Du(e.end),void(this.data.atHardBreak=void 0);!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(u.call(this,e),d.call(this,e))},link:s((function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0})),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Hl(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s((function(){this.data.setextHeadingSlurpLineEnding=void 0})),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};Lu(t,(e||{}).mdastExtensions||[]);const n={};return function(e){let i={type:"root",children:[]};const s={stack:[i],tokenStack:[],config:t,enter:r,exit:c,buffer:a,resume:l,data:n},u=[];let d=-1;for(;++d<e.length;)"listOrdered"!==e[d][1].type&&"listUnordered"!==e[d][1].type||("enter"===e[d][0]?u.push(d):d=o(e,u.pop(),d));for(d=-1;++d<e.length;){const n=t[e[d][0]];Ou.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},s),e[d][1])}if(s.tokenStack.length>0){const e=s.tokenStack[s.tokenStack.length-1];(e[1]||Fu).call(s,void 0,e[0])}for(i.position={start:Du(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Du(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)i=t.transforms[d](i)||i;return i};function o(e,t,n){let o,i,a,r,s=t-1,c=-1,l=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?c++:c--,r=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!o||r||c||a||(a=s),r=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:r=void 0}if(!c&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===c&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(o){let r=s;for(i=void 0;r--;){const t=e[r];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",i=r}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!i||a<i)&&(o._spread=!0),o.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",o,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};o=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,a=void 0,r=!0}}}return e[t][1]._spread=l,n}function i(e,t){return function(n){r.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function r(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:Du(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),o=this.tokenStack.pop();if(!o)throw new Error("Cannot close `"+e.type+"` ("+xc({start:e.start,end:e.end})+"): its not open");o[0].type!==e.type&&(t?t.call(this,e,o[0]):(o[1]||Fu).call(this,e,o[0])),n.position.end=Du(e.end)}function l(){return function(e){const t=Vc;return Wc(e,"boolean"!=typeof t.includeImageAlt||t.includeImageAlt,"boolean"!=typeof t.includeHtml||t.includeHtml)}(this.stack.pop())}function u(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n={type:"text",value:""},n.position={start:Du(e.start),end:void 0},t.push(n)),this.stack.push(n)}function d(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Du(e.end)}function p(){this.data.atHardBreak=!0}function g(e){this.data.characterReferenceType=e.type}function h(){return{type:"code",lang:null,meta:null,value:""}}function f(){return{type:"heading",depth:0,children:[]}}function m(){return{type:"break"}}function y(){return{type:"html",value:""}}function b(){return{type:"link",title:null,url:"",children:[]}}function w(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}(n)(function(e){for(;!Qc(e););return e}(function(e){const t=function(e){const t={};let n=-1;for(;++n<e.length;)nl(t,e[n]);return t}([i,...(e||{}).extensions||[]]),n={defined:[],lazy:{},constructs:t,content:o(bl),document:o(wl),flow:o(Cl),string:o(El),text:o(Tl)};return n;function o(e){return function(t){return Nl(n,e,t)}}}(n).document().write(function(){let e,t=1,n="",o=!0;return function(i,a,r){const s=[];let c,l,u,d,p;for(i=n+("string"==typeof i?i.toString():new TextDecoder(a||void 0).decode(i)),u=0,n="",o&&(65279===i.charCodeAt(0)&&u++,o=void 0);u<i.length;){if(Au.lastIndex=u,c=Au.exec(i),d=c&&void 0!==c.index?c.index:i.length,p=i.charCodeAt(d),!c){n=i.slice(u);break}if(10===p&&u===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<d&&(s.push(i.slice(u,d)),t+=d-u),p){case 0:s.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),s.push(-2);t++<l;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return r&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function Du(e){return{line:e.line,column:e.column,offset:e.offset}}function Lu(e,t){let n=-1;for(;++n<t.length;){const o=t[n];Array.isArray(o)?Lu(e,o):Bu(e,o)}}function Bu(e,t){let n;for(n in t)if(Ou.call(t,n))switch(n){case"canContainEols":{const o=t[n];o&&e[n].push(...o);break}case"transforms":{const o=t[n];o&&e[n].push(...o);break}case"enter":case"exit":{const o=t[n];o&&Object.assign(e[n],o);break}}}function Fu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+xc({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+xc({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+xc({start:t.start,end:t.end})+") is still open")}function ju(e){const t=this;t.parser=function(n){return Ru(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const $u="object"==typeof self?self:globalThis,Uu=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),o=i=>{if(e.has(i))return e.get(i);const[a,r]=t[i];switch(a){case 0:case-1:return n(r,i);case 1:{const e=n([],i);for(const t of r)e.push(o(t));return e}case 2:{const e=n({},i);for(const[t,n]of r)e[o(t)]=o(n);return e}case 3:return n(new Date(r),i);case 4:{const{source:e,flags:t}=r;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of r)e.set(o(t),o(n));return e}case 6:{const e=n(new Set,i);for(const t of r)e.add(o(t));return e}case 7:{const{name:e,message:t}=r;return n(new $u[e](t),i)}case 8:return n(BigInt(r),i);case"BigInt":return n(Object(BigInt(r)),i)}return n(new $u[a](r),i)};return o})(new Map,e)(0),Hu="",{toString:zu}={},{keys:Gu}=Object,qu=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=zu.call(e).slice(8,-1);switch(n){case"Array":return[1,Hu];case"Object":return[2,Hu];case"Date":return[3,Hu];case"RegExp":return[4,Hu];case"Map":return[5,Hu];case"Set":return[6,Hu]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Vu=([e,t])=>0===e&&("function"===t||"symbol"===t),Wu=(e,{json:t,lossy:n}={})=>{const o=[];return((e,t,n,o)=>{const i=(e,t)=>{const i=o.push(e)-1;return n.set(t,i),i},a=o=>{if(n.has(o))return n.get(o);let[r,s]=qu(o);switch(r){case 0:{let t=o;switch(s){case"bigint":r=8,t=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([-1],o)}return i([r,t],o)}case 1:{if(s)return i([s,[...o]],o);const e=[],t=i([r,e],o);for(const t of o)e.push(a(t));return t}case 2:{if(s)switch(s){case"BigInt":return i([s,o.toString()],o);case"Boolean":case"Number":case"String":return i([s,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const n=[],c=i([r,n],o);for(const t of Gu(o))!e&&Vu(qu(o[t]))||n.push([a(t),a(o[t])]);return c}case 3:return i([r,o.toISOString()],o);case 4:{const{source:e,flags:t}=o;return i([r,{source:e,flags:t}],o)}case 5:{const t=[],n=i([r,t],o);for(const[n,i]of o)(e||!Vu(qu(n))&&!Vu(qu(i)))&&t.push([a(n),a(i)]);return n}case 6:{const t=[],n=i([r,t],o);for(const n of o)!e&&Vu(qu(n))||t.push(a(n));return n}}const{message:c}=o;return i([r,{name:s,message:c}],o)};return a})(!(t||n),!!t,new Map,o)(e),o},Yu="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Uu(Wu(e,t)):structuredClone(e):(e,t)=>Uu(Wu(e,t));function Ku(e){const t=[];let n=-1,o=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let r="";if(37===a&&al(e.charCodeAt(n+1))&&al(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(r=String.fromCharCode(a));else if(a>55295&&a<57344){const t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(r=String.fromCharCode(a,t),i=1):r=""}else r=String.fromCharCode(a);r&&(t.push(e.slice(o,n),encodeURIComponent(r)),o=n+i+1,r=""),i&&(n+=i,i=0)}return t.join("")+e.slice(o)}function Ju(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Xu(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Zu=function(e){if(null==e)return ed;if("function"==typeof e)return Qu(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Zu(e[n]);return Qu((function(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}))}(e):function(e){const t=e;return Qu((function(n){const o=n;let i;for(i in e)if(o[i]!==t[i])return!1;return!0}))}(e);if("string"==typeof e)return t=e,Qu((function(e){return e&&e.type===t}));var t;throw new Error("Expected function, string, or object as test")};function Qu(e){return function(t,n,o){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,o||void 0))}}function ed(){return!0}const td=[],nd=!0,od=!1,id="skip";function ad(e,t,n,o){let i,a,r;"function"==typeof t&&"function"!=typeof n?(a=void 0,r=t,i=n):(a=t,r=n,i=o),function(e,t,n,o){let i;"function"==typeof t&&"function"!=typeof n?(o=n,n=t):i=t;const a=Zu(i),r=o?-1:1;!function e(i,s,c){const l=i&&"object"==typeof i?i:{};if("string"==typeof l.type){const e="string"==typeof l.tagName?l.tagName:"string"==typeof l.name?l.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let l,u,d,p=td;if((!t||a(i,s,c[c.length-1]||void 0))&&(p=function(e){return Array.isArray(e)?e:"number"==typeof e?[nd,e]:null==e?td:[e]}(n(i,c)),p[0]===od))return p;if("children"in i&&i.children){const t=i;if(t.children&&p[0]!==id)for(u=(o?t.children.length:-1)+r,d=c.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(l=e(n,u,d)(),l[0]===od)return l;u="number"==typeof l[1]?l[1]:u+r}}return p}}(e,void 0,[])()}(e,a,(function(e,t){const n=t[t.length-1],o=n?n.children.indexOf(e):void 0;return r(e,o,n)}),i)}function rd(e,t){const n=t.referenceType;let o="]";if("collapsed"===n?o+="[]":"full"===n&&(o+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+o}];const i=e.all(t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift({type:"text",value:"["});const r=i[i.length-1];return r&&"text"===r.type?r.value+=o:i.push({type:"text",value:o}),i}function sd(e){const t=e.spread;return null==t?e.children.length>1:t}const cd=9,ld=32;function ud(e){const t=String(e),n=/\r?\n|\r/g;let o=n.exec(t),i=0;const a=[];for(;o;)a.push(dd(t.slice(i,o.index),i>0,!0),o[0]),i=o.index+o[0].length,o=n.exec(t);return a.push(dd(t.slice(i),i>0,!1)),a.join("")}function dd(e,t,n){let o=0,i=e.length;if(t){let t=e.codePointAt(o);for(;t===cd||t===ld;)o++,t=e.codePointAt(o)}if(n){let t=e.codePointAt(i-1);for(;t===cd||t===ld;)i--,t=e.codePointAt(i-1)}return i>o?e.slice(o,i):""}const pd={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",o={};t.lang&&(o.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",o=String(t.identifier).toUpperCase(),i=Ku(o.toLowerCase()),a=e.footnoteOrder.indexOf(o);let r,s=e.footnoteCounts.get(o);void 0===s?(s=0,e.footnoteOrder.push(o),r=e.footnoteOrder.length):r=a+1,s+=1,e.footnoteCounts.set(o,s);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(r)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),o=e.definitionById.get(n);if(!o)return rd(e,t);const i={src:Ku(o.url||""),alt:t.alt};null!==o.title&&void 0!==o.title&&(i.title=o.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){const n={src:Ku(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const o={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,o),e.applyData(t,o)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const o={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,o),e.applyData(t,o)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),o=e.definitionById.get(n);if(!o)return rd(e,t);const i={href:Ku(o.url||"")};null!==o.title&&void 0!==o.title&&(i.title=o.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){const n={href:Ku(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const o={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},listItem:function(e,t,n){const o=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let o=-1;for(;!t&&++o<n.length;)t=sd(n[o])}return t}(n):sd(t),a={},r=[];if("boolean"==typeof t.checked){const e=o[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},o.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<o.length;){const e=o[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&r.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?r.push(e):r.push(...e.children)}const c=o[o.length-1];c&&(i||"element"!==c.type||"p"!==c.tagName)&&r.push({type:"text",value:"\n"});const l={type:"element",tagName:"li",properties:a,children:r};return e.patch(t,l),e.applyData(t,l)},list:function(e,t){const n={},o=e.all(t);let i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<o.length;){const e=o[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),o=n.shift(),i=[];if(o){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=kc(t.children[1]),r=vc(t.children[t.children.length-1]);a&&r&&(o.position={start:a,end:r}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const o=n?n.children:void 0,i=0===(o?o.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,r=a?a.length:t.children.length;let s=-1;const c=[];for(;++s<r;){const n=t.children[s],o={},r=a?a[s]:void 0;r&&(o.align=r);let l={type:"element",tagName:i,properties:o,children:[]};n&&(l.children=e.all(n),e.patch(n,l),l=e.applyData(n,l)),c.push(l)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,l),e.applyData(t,l)},text:function(e,t){const n={type:"text",value:ud(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:gd,yaml:gd,definition:gd,footnoteDefinition:gd};function gd(){}const hd={}.hasOwnProperty,fd={};function md(e,t){e.position&&(t.position=function(e){const t=kc(e),n=vc(e);if(t&&n)return{start:t,end:n}}(e))}function yd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,o=e.data.hChildren,i=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}),"element"===n.type&&i&&Object.assign(n.properties,Yu(i)),"children"in n&&n.children&&null!=o&&(n.children=o)}return n}function bd(e,t){const n=t.data||{},o=!("value"in t)||hd.call(n,"hProperties")||hd.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,o),e.applyData(t,o)}function wd(e,t){const n=[];let o=-1;for(t&&n.push({type:"text",value:"\n"});++o<e.length;)o&&n.push({type:"text",value:"\n"}),n.push(e[o]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function vd(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function kd(e,t){const n=function(e,t){const n=t||fd,o=new Map,i=new Map,a=new Map,r={...pd,...n.handlers},s={all:function(e){const t=[];if("children"in e){const n=e.children;let o=-1;for(;++o<n.length;){const i=s.one(n[o],e);if(i){if(o&&"break"===n[o-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=vd(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=vd(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:yd,definitionById:o,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:r,one:function(e,t){const n=e.type,o=s.handlers[n];if(hd.call(s.handlers,n)&&o)return o(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,o=Yu(n);return o.children=s.all(e),o}return Yu(e)}return(s.options.unknownHandler||bd)(s,e,t)},options:n,patch:md,wrap:wd};return ad(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?o:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),s}(e,t),o=n.one(e,void 0),i=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ju,o=e.options.footnoteBackLabel||Xu,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",r=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let c=-1;for(;++c<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[c]);if(!i)continue;const a=e.all(i),r=String(i.identifier).toUpperCase(),l=Ku(r.toLowerCase());let u=0;const d=[],p=e.footnoteCounts.get(r);for(;void 0!==p&&++u<=p;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(c,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+l+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof o?o:o(c,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const g=a[a.length-1];if(g&&"element"===g.type&&"p"===g.tagName){const e=g.children[g.children.length-1];e&&"text"===e.type?e.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...d)}else a.push(...d);const h={type:"element",tagName:"li",properties:{id:t+"fn-"+l},children:e.wrap(a,!0)};e.patch(i,h),s.push(h)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Yu(r),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return i&&a.children.push({type:"text",value:"\n"},i),a}function _d(e,t){return e&&"run"in e?async function(n,o){const i=kd(n,{file:o,...t});await e.run(i,o)}:function(n,o){return kd(n,{file:o,...t||e})}}function xd(e){if(e)throw e}var Cd=n(849);function Sd(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}const Ed=function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');Md(e);let n,o=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(n){o=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(o,i)}if(t===e)return"";let r=-1,s=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(n){o=a+1;break}}else r<0&&(n=!0,r=a+1),s>-1&&(e.codePointAt(a)===t.codePointAt(s--)?s<0&&(i=a):(s=-1,i=r));return o===i?i=r:i<0&&(i=e.length),e.slice(o,i)},Td=function(e){if(Md(e),0===e.length)return".";let t,n=-1,o=e.length;for(;--o;)if(47===e.codePointAt(o)){if(t){n=o;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},Id=function(e){Md(e);let t,n=e.length,o=-1,i=0,a=-1,r=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)o<0&&(t=!0,o=n+1),46===s?a<0?a=n:1!==r&&(r=1):a>-1&&(r=-1);else if(t){i=n+1;break}}return a<0||o<0||0===r||1===r&&a===o-1&&a===i+1?"":e.slice(a,o)},Ad=function(...e){let t,n=-1;for(;++n<e.length;)Md(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){Md(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,o,i="",a=0,r=-1,s=0,c=-1;for(;++c<=e.length;){if(c<e.length)n=e.codePointAt(c);else{if(47===n)break;n=47}if(47===n){if(r===c-1||1===s);else if(r!==c-1&&2===s){if(i.length<2||2!==a||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(o=i.lastIndexOf("/"),o!==i.length-1){o<0?(i="",a=0):(i=i.slice(0,o),a=i.length-1-i.lastIndexOf("/")),r=c,s=0;continue}}else if(i.length>0){i="",a=0,r=c,s=0;continue}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(r+1,c):i=e.slice(r+1,c),a=c-r-1;r=c,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/"),t?"/"+n:n}(t)},Pd="/";function Md(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Nd=function(){return"/"};function Od(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}const Rd=["history","path","basename","stem","extname","dirname"];class Dd{constructor(e){let t;t=e?Od(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Nd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,o=-1;for(;++o<Rd.length;){const e=Rd[o];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Rd.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?Ed(this.path):void 0}set basename(e){Bd(e,"basename"),Ld(e,"basename"),this.path=Ad(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?Td(this.path):void 0}set dirname(e){Fd(this.basename,"dirname"),this.path=Ad(e||"",this.basename)}get extname(){return"string"==typeof this.path?Id(this.path):void 0}set extname(e){if(Ld(e,"extname"),Fd(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ad(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Od(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!Od(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),Bd(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?Ed(this.path,this.extname):void 0}set stem(e){Bd(e,"stem"),Ld(e,"stem"),this.path=Ad(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const o=this.message(e,t,n);throw o.fatal=!0,o}info(e,t,n){const o=this.message(e,t,n);return o.fatal=void 0,o}message(e,t,n){const o=new Tc(e,t,n);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Ld(e,t){if(e&&e.includes(Pd))throw new Error("`"+t+"` cannot be a path: did not expect `"+Pd+"`")}function Bd(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Fd(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const jd=function(e){const t=this.constructor.prototype,n=t[e],o=function(){return n.apply(o,arguments)};return Object.setPrototypeOf(o,t),o},$d={}.hasOwnProperty;class Ud extends jd{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){const e=[],t={run:function(...t){let n=-1;const o=t.pop();if("function"!=typeof o)throw new TypeError("Expected function as last argument, not "+o);!function i(a,...r){const s=e[++n];let c=-1;if(a)o(a);else{for(;++c<t.length;)null!==r[c]&&void 0!==r[c]||(r[c]=t[c]);t=r,s?function(e,t){let n;return function(...t){const a=e.length>t.length;let r;a&&t.push(o);try{r=e.apply(this,t)}catch(e){if(a&&n)throw e;return o(e)}a||(r&&r.then&&"function"==typeof r.then?r.then(i,o):r instanceof Error?o(r):i(r))};function o(e,...o){n||(n=!0,t(e,...o))}function i(e){o(null,e)}}(s,i)(...r):o(null,...r)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}()}copy(){const e=new Ud;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Cd(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(qd("data",this.frozen),this.namespace[e]=t,this):$d.call(this.namespace,e)&&this.namespace[e]||void 0:e?(qd("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const o=t.call(e,...n);"function"==typeof o&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Yd(e),n=this.parser||this.Parser;return zd("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),zd("process",this.parser||this.Parser),Gd("process",this.compiler||this.Compiler),t?o(void 0,t):new Promise(o);function o(o,i){const a=Yd(e),r=n.parse(a);function s(e,n){e||!n?i(e):o?o(n):t(void 0,n)}n.run(r,a,(function(e,t,o){if(e||!t||!o)return s(e);const i=t,a=n.stringify(i,o);var r;"string"==typeof(r=a)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(r)?o.value=a:o.result=a,s(e,o)}))}}processSync(e){let t,n=!1;return this.freeze(),zd("processSync",this.parser||this.Parser),Gd("processSync",this.compiler||this.Compiler),this.process(e,(function(e,o){n=!0,xd(e),t=o})),Wd("processSync","process",n),t}run(e,t,n){Vd(e),this.freeze();const o=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,a){const r=Yd(t);o.run(e,r,(function(t,o,r){const s=o||e;t?a(t):i?i(s):n(void 0,s,r)}))}}runSync(e,t){let n,o=!1;return this.run(e,t,(function(e,t){xd(e),n=t,o=!0})),Wd("runSync","run",o),n}stringify(e,t){this.freeze();const n=Yd(t),o=this.compiler||this.Compiler;return Gd("stringify",o),Vd(e),o(e,n)}use(e,...t){const n=this.attachers,o=this.namespace;if(qd("use",this.frozen),null==e);else if("function"==typeof e)s(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?r(e):a(e)}return this;function i(e){if("function"==typeof e)s(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;s(t,n)}else a(e)}}function a(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");r(e.plugins),e.settings&&(o.settings=Cd(!0,o.settings,e.settings))}function r(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)i(e[t])}}function s(e,t){let o=-1,i=-1;for(;++o<n.length;)if(n[o][0]===e){i=o;break}if(-1===i)n.push([e,...t]);else if(t.length>0){let[o,...a]=t;const r=n[i][1];Sd(r)&&Sd(o)&&(o=Cd(!0,r,o)),n[i]=[e,o,...a]}}}}const Hd=(new Ud).freeze();function zd(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Gd(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function qd(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Vd(e){if(!Sd(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Wd(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Yd(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new Dd(e)}const Kd=[],Jd={allowDangerousHtml:!0},Xd=/^(https?|ircs?|mailto|xmpp)$/i,Zd=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Qd(e){const t=e.allowedElements,n=e.allowElement,o=e.children||"",i=e.className,a=e.components,r=e.disallowedElements,s=e.rehypePlugins||Kd,c=e.remarkPlugins||Kd,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Jd}:Jd,u=e.skipHtml,p=e.unwrapDisallowed,g=e.urlTransform||ep,h=Hd().use(ju).use(c).use(_d,l).use(s),f=new Dd;"string"==typeof o&&(f.value=o);for(const t of Zd)Object.hasOwn(e,t.from)&&(t.from,t.to&&t.to,t.id);const m=h.parse(f);let y=h.runSync(m,f);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:"root"===y.type?y.children:[y]}),ad(y,(function(e,o,i){if("raw"===e.type&&i&&"number"==typeof o)return u?i.children.splice(o,1):i.children[o]={type:"text",value:e.value},o;if("element"===e.type){let t;for(t in qc)if(Object.hasOwn(qc,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],o=qc[t];(null===o||o.includes(e.tagName))&&(e.properties[t]=g(String(n||""),t,e))}}if("element"===e.type){let a=t?!t.includes(e.tagName):!!r&&r.includes(e.tagName);if(!a&&n&&"number"==typeof o&&(a=!n(e,o,i)),a&&i&&"number"==typeof o)return p&&e.children?i.children.splice(o,1,...e.children):i.children.splice(o,1),o}})),function(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let o;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=function(e,t){return function(n,o,i,a){const r=Array.isArray(i.children),s=kc(n);return t(o,i,a,r,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");i=t.jsx,a=t.jsxs,o=function(e,t,n,o){const r=Array.isArray(n.children)?a:i;return o?r(t,n,o):r(t,n)}}var i,a;const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:o,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?dc:uc,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},s=Dc(r,e,void 0);return s&&"string"!=typeof s?s:r.create(e,r.Fragment,{children:s||void 0},void 0)}(y,{Fragment:d.Fragment,components:a,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0})}function ep(e){const t=e.indexOf(":"),n=e.indexOf("?"),o=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||o>-1&&t>o||Xd.test(e.slice(0,t))?e:""}const tp=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM12.75 8V13H11.25V8H12.75ZM12.75 14.5V16H11.25V14.5H12.75Z"})}),np={a:e=>{const{href:t,title:n}=e,o=n?.split("="),i=o?.[0],a=o?.[1],r=i===z.TARGET?a:"_blank";return(0,s.createElement)("a",{href:t,target:r,rel:"_blank"===r?"noopener noreferrer":void 0,onClick:()=>{i===z.DATA_TRACK&&Fn(a)}},e.children)}},op=(0,f.forwardRef)((function({message:e},t){const{userSay:n}=Jt(),{selectBlock:o}=(0,g.useDispatch)(v.store),{withJetpackTokenRequest:i}=Ms(),a=async()=>{e.clientId?o(e.clientId):e.role===M.ACTION&&await i((()=>n(e.content)))},r=Array.isArray(e.content)&&e.content.some((e=>"component"===e.type)),c=gn("big-sky__chat-message",{"big-sky__dock-no-drag":e.role!==M.COMPONENT,"big-sky__chat-message__user":e.role===M.USER,"big-sky__chat-message__error":e.role===M.ERROR,"big-sky__chat-message__thinking":e.role===M.THINKING,"big-sky__chat-message__component":e.role===M.COMPONENT,"big-sky__chat-message__action":e.role===M.ACTION,"big-sky__chat-message__error-assistant":e.role===M.ERROR_ASSISTANT,"big-sky__chat-message__has-block-link":!!e.clientId,"big-sky__chat-message__response-actions":e.role===M.RESPONSE_ACTIONS});return(0,s.createElement)(y.__unstableMotion.div,{ref:t,layoutScroll:!0,layout:"position",...e.role!==M.RESPONSE_ACTIONS&&{initial:{y:0,opacity:0,scale:.98,transition:{duration:.4,ease:[.2,.65,.3,.9]}},exit:{opacity:0,scale:.96,y:0,transition:{duration:.5,ease:[.4,0,.2,1],opacity:{duration:.3}}},animate:{y:0,opacity:1,scale:1,transition:{duration:.6,ease:[0,0,.2,1],opacity:{duration:.4,delay:.1}}}},className:c,role:"button",tabIndex:"0",onClick:a,onKeyDown:a,onFocus:a},(!r||e.showIcon)&&(e.role===M.ASSISTANT||e.role===M.ERROR_ASSISTANT||e.role===M.THINKING||e.role===M.TOOL)&&(0,s.createElement)("div",{className:gn("big-sky__chat-message__avatar")},(0,s.createElement)("div",{className:"icon-container"},(0,s.createElement)(y.Icon,{key:`icon-primary-${e.id||Date.now()}`,icon:e.selectedBlockIcon||e.icon||cr}))),(0,s.createElement)("div",{className:"big-sky__chat-message__content"},e.role===M.ERROR&&(0,s.createElement)(y.Icon,{icon:tp}),(e=>"string"==typeof e?(0,s.createElement)(Qd,{components:np},e):Array.isArray(e)?e.map(((e,t)=>"text"===e.type?(0,s.createElement)(Qd,{key:t,components:np},e.text):"component"===e.type?(0,f.cloneElement)(e.component,{key:t}):null)):(0,f.cloneElement)(e))(e.content)))})),ip=op,ap=({handleSubmit:e,disabled:t=!1})=>(0,s.createElement)(y.Button,{icon:ur,className:"big-sky__chat-submit",onClick:e,disabled:t}),rp=(0,f.forwardRef)((({prompt:e,onSendMessage:t,animationProps:n={},hideInitialMessage:o=!1},i)=>{const{deleteMarkedMessages:a,userSay:r}=Jt(),{withJetpackTokenRequest:c}=Ms(),{isThinking:l}=En(),{logUserMessage:u}=pn(),d=new URLSearchParams(window.location.search).get("prompt")||"",[p,h]=(0,f.useState)(!1),[b,w]=(0,f.useState)(""),[v,k]=(0,f.useState)(!1),{setBlockBeforeChanges:_,setChatComponents:x,setCurrentToolCall:C,setCurrentUserMessage:S,setError:E,setShowThread:T,setShowChatContinueButton:I,setIsTyping:A,setIsSendingMessage:P,incrementFocusInput:N,setIsMaximized:O}=(0,g.useDispatch)(wt),{currentUserMessage:R,showChatContinueButton:L,chatContinueButtonOnClick:B,dockView:F,hideInput:j,focusInput:$,isSendingMessage:U}=(0,g.useSelect)((e=>{const t=e(wt);return{currentUserMessage:t.currentUserMessage(),showChatContinueButton:t.getShowChatContinueButton(),chatContinueButtonOnClick:t.getChatContinueButtonOnClick(),dockView:t.getDockView(),hideInput:t.getHideInput(),currentAssistant:t.getAssistant(),focusInput:t.getFocusInput(),isSendingMessage:t.getIsSendingMessage()}})),H=(0,f.useRef)(null),z=(0,f.useRef)(null),{isOnboarded:G}=tn().getSiteMetadata();(0,f.useEffect)((()=>{i?.current&&i.current?.parentNode?.style?.setProperty("--big-sky-textarea-component-font-family",window.getComputedStyle(i.current).fontFamily)}),[i]),(0,f.useEffect)((()=>{if(!i?.current)return;if(!window.IntersectionObserver)return void i.current.focus();const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&i?.current&&i.current.focus()}))}),{root:null,rootMargin:"0px",threshold:.5});return z.current&&e.observe(z.current),()=>{e.disconnect()}}),[i]),(0,f.useEffect)((()=>{!l&&i?.current&&i?.current?.focus()}),[i,l,$]);const q=G?600:1200,V=(0,f.useCallback)((()=>{const e=i.current;if(e){const t=e.parentNode;if(t.dataset.all=e.value,e.selectionStart!==e.selectionEnd)return void(t.dataset.before="");t.dataset.before=e.value.slice(0,e.selectionStart);const n=window.getComputedStyle(t,":before"),o=Math.round(parseFloat(n.height));e.scrollHeight===o?e.scrollTop=e.scrollHeight:o<=parseInt(window.getComputedStyle(e).minHeight,10)&&(e.scrollTop=0)}}),[i]);(0,f.useEffect)((()=>{[D.MENUS,D.CHAT,D.HANDOFF,D.HANDOFF_CHAT].includes(F)&&V()}),[V,F]);const W=(0,f.useCallback)((()=>{const e=i.current;if(e){e.style.removeProperty("height");const t=e?.parentNode;t&&(t.dataset.all="",t.dataset.before=""),e.scrollTop=0}}),[i]),Y=(0,f.useCallback)((async(e,t)=>{Fn("chat_input_send_message"),a(),E(""),w(""),_(null),C(""),x([]),u(t||R),await c((()=>{r(t||R)})),x([]),S(""),h(!1),T(!0),P(!1),O(!1),W()}),[E,_,C,x,u,R,c,S,T,P,W,r,a,O]),K=(0,f.useCallback)((async(e,n)=>{P(!0),h(!1),t&&await t(n||R),Y(e,n)}),[R,t,Y,P]);return(0,f.useEffect)((()=>{if(d&&!G&&!window.submittingPrompt){const e=new URL(window.location);e.searchParams.delete("prompt"),window.history.replaceState({},"",e),window.submittingPrompt=!0,K(null,d)}}),[d,G,S,K]),(0,f.useEffect)((()=>{h(R?.length>0)}),[R]),j?null:(0,s.createElement)(s.Fragment,null,b&&(0,s.createElement)("div",{className:"big-sky__chat-input__error-too-long"},(0,s.createElement)(ip,{message:{content:b,role:M.ERROR,type:M.ERROR}})),(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky__chat-input",...n,key:"chat-input",ref:z},L&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{className:"big-sky__chat-input__continue",onClick:B},(0,m.__)("Continue","big-sky")),(0,s.createElement)("div",{className:"big-sky__chat-input__ask-ai"},(0,s.createElement)(y.Button,{icon:lr,onClick:()=>{I(!1),N()}},(0,m.__)("Try something different","big-sky")))),!L&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.TextareaControl,{className:"big-sky__chat-input__textarea big-sky__dock-no-drag",resizable:"false",rows:1,__nextHasNoMarginBottom:!0,onChange:e=>{(e=>{if(S(e),V(),e.length<=q)b&&w(""),k(!1);else{v||(Fn("chat_input_message_too_long",{is_onboarded:G}),k(!0));const t=(0,m.sprintf)(
// Translators: Placeholder is a number representing the maximum number of characters allowed in a message.
// Translators: Placeholder is a number representing the maximum number of characters allowed in a message.
(0,m.__)("Your message is too long %1$s/%2$s","big-sky"),e.length,q);w(t)}})(e),h(e.length>0)},label:(0,m.__)("Chat Input","big-sky"),hideLabelFromVision:!0,placeholder:e,value:U&&o?"":R,onKeyUp:()=>{H.current&&clearTimeout(H.current),H.current=setTimeout((()=>{A(!1)}),800)},onKeyDown:e=>{if("Enter"!==e.key||e.shiftKey||b||e.nativeEvent.isComposing||229===e.keyCode)A(!0);else{if(e.preventDefault(),""===R.trim())return void S("");if(l||U)return;K()}},disabled:l,ref:i}),(0,s.createElement)(ap,{handleSubmit:K,disabled:!p||U||l||b}))))})),sp=rp;function cp(){const{assistantSay:e,clearMessages:t}=Jt(),{setShowThread:n}=(0,g.useDispatch)(wt);return{initializeThread:o=>{t(),n(!0),e(o)}}}function lp(){const{userSay:e}=Jt(),{initializeThread:t}=cp(),{setChatComponents:n}=(0,g.useDispatch)(wt),{withJetpackTokenRequest:o}=Ms(),{clearSuggestions:i,setHasRetriedChatRequest:a,logUserChoice:r}=Di();return async()=>{t((0,m.__)("What kind of page would you like to add?","big-sky"));const c=[(0,m.__)("A contact page","big-sky"),(0,m.__)("A blog page","big-sky")].map((t=>{const s=Oi(t);return{...s,onClick:Ri({logUserChoice:r,clearSuggestions:i,setHasRetried:a,respond:async t=>{await o((()=>e(t))),n([])},userSay:e,action:s,shouldClear:!0})}}));n([(0,s.createElement)(Bi,{key:"suggestions",actions:c,animationVariants:{initial:{opacity:0,y:0},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{ease:[.42,.24,.02,1],duration:1,delay:.05}}})])}}function up(e){const[t,n]=(0,f.useState)([]),{useBlockContext:o=!0,onActionClick:i,actions:a=[],animationVariants:r={},showSpotlight:c=!1}=e,{isOnboarded:l}=tn().getSiteMetadata(),{selectedBlock:u}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),{setCurrentUserMessage:d,setShowThread:p}=(0,g.useDispatch)(wt),{logUserChoice:h}=Di(),y=lp(),b=(0,f.useCallback)((e=>{p(!0),h(e),d(e),i(e)}),[h,i,d,p]),w=(0,f.useCallback)((()=>[{key:"site-add-page",actionName:(0,m.__)("Add a page","big-sky"),description:(0,m.__)("to my website","big-sky"),onClick:()=>{y()}},{key:"site-change-colors",actionName:(0,m.__)("Change the colors","big-sky"),description:(0,m.__)("of my website","big-sky"),onClick:()=>{b((0,m.__)("Change the colors of my website.","big-sky"))}},{key:"site-change-fonts",actionName:(0,m.__)("Change the fonts","big-sky"),description:(0,m.__)("of my website","big-sky"),onClick:()=>{b((0,m.__)("Change the fonts of my website.","big-sky"))}},{key:"site-change-layout",actionName:(0,m.__)("Change layout","big-sky"),description:(0,m.__)("try a different layout","big-sky"),onClick:()=>{b((0,m.__)("Change the layout of my website.","big-sky"))}}]),[b,y]),k=(0,f.useCallback)((()=>[{key:"image-ai-image",actionName:(0,m.__)("Generate an image","big-sky"),description:(0,m.__)("using AI","big-sky"),onClick:()=>b((0,m.__)("Make a new AI image to replace the one I have selected.","big-sky"))},{key:"image-find-stock",actionName:(0,m.__)("Find an image","big-sky"),description:(0,m.__)("from stock","big-sky"),onClick:()=>b((0,m.__)("Find me a new stock image to replace the one I have selected.","big-sky"))}]),[b]),_=(0,f.useCallback)((()=>[{key:"logo-ai-image",actionName:(0,m.__)("Make a logo","big-sky"),description:(0,m.__)("using AI","big-sky"),onClick:()=>b((0,m.__)("Make a new logo to replace the one I have selected.","big-sky"))}]),[b]),x=(0,f.useCallback)((()=>[{key:"text-change-tone",actionName:(0,m.__)("Change tone","big-sky"),description:(0,m.__)("to something different","big-sky"),onClick:()=>b((0,m.__)("Change the tone of the text I have selected.","big-sky"))},{key:"text-fix-spelling-grammar",actionName:(0,m.__)("Fix spelling and grammar","big-sky"),description:(0,m.__)("of this text","big-sky"),onClick:()=>b((0,m.__)("Fix the spelling and grammar of the text I have selected.","big-sky"))},{key:"text-make-shorter",actionName:(0,m.__)("Reduce length","big-sky"),description:(0,m.__)("of this text","big-sky"),onClick:()=>b((0,m.__)("Make the text I have selected, shorter.","big-sky"))}]),[b]),C=(0,f.useCallback)((()=>[{key:"button-update-link",actionName:(0,m.__)("Update link","big-sky"),description:(0,m.__)("to something else","big-sky"),onClick:()=>b((0,m.__)("Update the button link to something else.","big-sky"))}]),[b]),S=(0,f.useCallback)((()=>{const e=t[0]?.key;if(a.length>0)return a.map((e=>({...e,action_type:"suggested"})));if((!u||!o)&&l)return w();const n=u?.name;switch(n){case"core/paragraph":case"core/heading":return x();case"core/image":case"core/cover":return k();case"core/site-logo":return _();case"core/button":case"core/social-link":return C();default:if(o&&!e?.includes("site-")&&l)return w()}}),[t,k,_,w,x,C,l,u,o,a]);return(0,f.useEffect)((()=>{n(S())}),[u]),t?.length>0?(0,s.createElement)(Bi,{actions:t,animationVariants:r,showSpotlight:c}):null}function dp({title:e,onClickBackButton:t}){const{isOnboarded:n}=tn().getSiteMetadata(),{hideChatNavigationBackButton:o}=(0,g.useSelect)((e=>({hideChatNavigationBackButton:e(wt).getHideChatNavigationBackButton()})));return(0,s.createElement)("div",{className:"big-sky__chat-navigation"},n&&!o&&(0,s.createElement)(y.Button,{icon:Ps,className:"big-sky__chat-navigation__back",onClick:()=>t(),size:"compact"}),e&&(0,s.createElement)("h4",null,e))}const pp=(0,f.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,f.cloneElement)(e,{width:t,height:t,...n,ref:o})})),gp=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"m4 5.5h2v6.5h1.5v-6.5h2v-1.5h-5.5zm16 10.5h-16v-1.5h16zm-7 4h-9v-1.5h9z"})}),hp=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),fp=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M6.08 10.103h2.914L9.657 12h1.417L8.23 4H6.846L4 12h1.417l.663-1.897Zm1.463-4.137.994 2.857h-2l1.006-2.857ZM11 16H4v-1.5h7V16Zm1 0h8v-1.5h-8V16Zm-4 4H4v-1.5h4V20Zm7-1.5V20H9v-1.5h6Z"})}),mp=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M12 9c-.8 0-1.5.7-1.5 1.5S11.2 12 12 12s1.5-.7 1.5-1.5S12.8 9 12 9zm0-5c-3.6 0-6.5 2.8-6.5 6.2 0 .8.3 1.8.9 3.1.5 1.1 1.2 2.3 2 3.6.7 1 3 3.8 3.2 3.9l.4.5.4-.5c.2-.2 2.6-2.9 3.2-3.9.8-1.2 1.5-2.5 2-3.6.6-1.3.9-2.3.9-3.1C18.5 6.8 15.6 4 12 4zm4.3 8.7c-.5 1-1.1 2.2-1.9 3.4-.5.7-1.7 2.2-2.4 3-.7-.8-1.9-2.3-2.4-3-.8-1.2-1.4-2.3-1.9-3.3-.6-1.4-.7-2.2-.7-2.5 0-2.6 2.2-4.7 5-4.7s5 2.1 5 4.7c0 .2-.1 1-.7 2.4z"})}),yp=function({onLoad:e}){const t=(0,f.useRef)(),{setSiteMetadata:n,getSiteMetadata:o}=tn(),{isEditingSpecs:i,isThinking:a}=(0,g.useSelect)((e=>({isEditingSpecs:e(wt).getIsEditingSpecs(),isThinking:e(wt).getIsThinking()}))),{incrementScrollChatToBottom:r,setChatComponents:c,setIsConfirmingSpecs:l,setIsEditingSpecs:u}=(0,g.useDispatch)(wt),{userSay:d}=Jt(),p=o(),{isOnboarded:h}=p,{withJetpackTokenRequest:b}=Ms(),{buildSiteTask:w}=gs(),v={title:!1,description:!1,location:!1},[k,_]=(0,f.useState)(v),[x,C]=(0,f.useState)([]),{siteTitle:S,siteDescription:E,siteLocationName:T,actions:I}={...p,siteLocationName:p.siteLocation?.name},A=!!(S||E||T);if((0,f.useEffect)((()=>{e&&e()}),[e]),(0,f.useEffect)((()=>{if(A&&!h){const e=I||[{actionName:N},{actionName:O,onClick:()=>{u(!0),r(),c([])}}];l(!0),c([(0,s.createElement)("div",{key:"spec-list-confirm",className:"big-sky__site-specs-list-confirm"},(0,m.__)("Do the above details look correct?","big-sky")),(0,s.createElement)(Fi,{key:"suggestions",args:{...p,actions:e},respond:()=>{w()}})])}return()=>{!h&&A||l(!1)}}),[I,A,d,c,l,u,p,h,b,w,r]),!p?.siteTitle||h)return null;const P=e=>{Fn("site_specs_list_click",{spec_item:e}),u(!0),r()},R=()=>{const e=t.current,n=[{name:"siteTitle",label:(0,m.__)("Site title","big-sky")},{name:"siteDescription",label:(0,m.__)("Site description","big-sky")}],o=[];return n.forEach((({name:t,label:n})=>{const i=e.querySelector(`[name="${t}"]`);if(!i)return;const a=i?.closest("tr");i?.value.trim()?a?.classList.remove("big-sky__spec-list-error"):(o.push(n),a?.classList.add("big-sky__spec-list-error"))})),C(o),0===o.length};return!A||a?null:(0,s.createElement)(ip,{message:{role:M.COMPONENT,content:(0,s.createElement)(s.Fragment,null,(0,s.createElement)("table",{ref:t,className:"big-sky__spec-list"},(0,s.createElement)("tbody",null,x.length>0&&(0,s.createElement)("tr",null,(0,s.createElement)("td",{colSpan:"2"},(0,s.createElement)("div",{className:"big-sky__spec-list-error"},(0,m.__)("The following fields are required:","big-sky"),(0,s.createElement)("ul",null,x.map((e=>(0,s.createElement)("li",{key:e},e))))))),(0,s.createElement)("tr",{onClick:()=>P("site title"),onMouseEnter:()=>_({title:!0,description:!1,location:!1}),onMouseLeave:()=>_(v)},(0,s.createElement)("td",{className:"big-sky__spec-icon",width:"30"},(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Click to update site title","big-sky")},(0,s.createElement)(s.Fragment,null,!k.title&&(0,s.createElement)(pp,{icon:gp}),k.title&&(0,s.createElement)(pp,{icon:hp})))),(0,s.createElement)("td",{className:"big-sky__spec-value"},i?(0,s.createElement)("input",{type:"text",name:"siteTitle",defaultValue:p.siteTitle,onChange:()=>{R()}}):(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Click to update site title","big-sky")},(0,s.createElement)("span",null,p.siteTitle)))),(0,s.createElement)("tr",{onClick:()=>P("site description"),onMouseEnter:()=>_({title:!1,description:!0,location:!1}),onMouseLeave:()=>_(v)},(0,s.createElement)("td",{className:"big-sky__spec-icon",width:"30"},(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Click to update description","big-sky")},(0,s.createElement)(s.Fragment,null,!k.description&&(0,s.createElement)(pp,{icon:fp}),k.description&&(0,s.createElement)(pp,{icon:hp})))),(0,s.createElement)("td",{className:"big-sky__spec-value"},i?(0,s.createElement)("textarea",{name:"siteDescription",defaultValue:p.siteDescription,rows:4,style:{resize:"none"},onChange:()=>{R()}}):(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Click to update description","big-sky")},(0,s.createElement)("span",null,(D=p.siteDescription,D?`${D.charAt(0).toUpperCase()}${D.slice(1)}`:""))))),p.siteLocation?.name&&(0,s.createElement)("tr",{onClick:()=>P("location"),onMouseEnter:()=>_({title:!1,description:!1,location:!0}),onMouseLeave:()=>_(v)},(0,s.createElement)("td",{className:"big-sky__spec-icon",width:"30"},(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Click to update location","big-sky")},(0,s.createElement)(s.Fragment,null,!k.location&&(0,s.createElement)(pp,{icon:mp}),k.location&&(0,s.createElement)(pp,{icon:hp})))),(0,s.createElement)("td",{className:"big-sky__spec-value"},i?(0,s.createElement)("input",{type:"text",name:"siteLocationName",defaultValue:p.siteLocation.name,onChange:()=>{R()}}):(0,s.createElement)(y.Tooltip,{text:(0,m.__)("Click to update location","big-sky")},(0,s.createElement)("span",null,p.siteLocation.name)))),i&&(0,s.createElement)("tr",{style:{height:"30px"}},(0,s.createElement)("td",null),(0,s.createElement)("td",{style:{position:"relative"}},(0,s.createElement)(ap,{handleSubmit:()=>{(()=>{const e=t.current,o=e.querySelector('[name="siteTitle"]')?.value,i=e.querySelector('[name="siteDescription"]')?.value,a=e.querySelector('[name="siteLocationName"]')?.value,r={...p,siteTitle:o,siteDescription:i,siteLocation:{name:a}};n(r,!1,!0)})(),u(!1)},disabled:x.length>0}))))))}});var D},bp=(e="",t="")=>{const n=window?.JP_CONNECTION_INITIAL_STATE?.userConnectionData?.currentUser?.blogId;return"https://wordpress.com/setup/ai-site-builder/domains?siteId="+n+"&redirect="+e+"&siteTitle="+t},wp=(e="")=>{const t=window?.JP_CONNECTION_INITIAL_STATE?.userConnectionData?.currentUser?.blogId;return"https://wordpress.com/setup/ai-site-builder/plans?siteId="+t+"&redirect="+e};function vp({onlyShowLastRequest:e=!1}){const{hasRetriedChatRequest:t,getSessionId:n,scrollChatToBottom:o}=(0,g.useSelect)((e=>({hasRetriedChatRequest:e(wt).getHasRetriedChatRequest(),getSessionId:e(wt).getSessionId(),scrollChatToBottom:e(wt).getScrollChatToBottom()}))),{addAssistantMessage:i,deleteMarkedMessages:a,getMessages:r,error:c,setError:l}=Jt(),u=r(),d=(0,f.useRef)(),{setApiKey:p,setHasRetriedChatRequest:h,setHideChatNavigationBackButton:b,setHideInput:w}=(0,g.useDispatch)(wt),v=Ei(),k=()=>{const e=setTimeout((()=>{d.current?.scrollIntoView({behavior:"smooth",block:"end"})}),100);return()=>clearTimeout(e)},_="Unauthorized"===c;(0,f.useEffect)((()=>{_&&!t&&(async()=>{await me(p,!1),l(""),h(!0)})()}),[c,_,u,p,l,t,h]),(0,f.useEffect)((()=>{k()}),[u,o]);const x=P()&&c?.includes("Rate limit exceeded");return(0,f.useEffect)((()=>{c&&x&&(async()=>{w(!0),b(!0),a(),await v(),i(null,(0,f.createInterpolateElement)(/* translators: upgrade is an inline link "Upgrade now" to the domain registration page */ /* translators: upgrade is an inline link "Upgrade now" to the domain registration page */
(0,m.__)("You've run into the limit for AI messages. You can upgrade to have unlimited access or continue editing your site manually. <upgrade></upgrade>","big-sky"),{upgrade:(0,s.createElement)("a",{href:wp("site-launch"),rel:"noopener noreferrer",onClick:()=>{Fn("rate_limit_pick_plan")}},(0,m.__)("Upgrade now","big-sky"))}),{role:M.ERROR_ASSISTANT}),Fn("rate_limit_show_exceeded_message")})()}),[c,x,b,w]),(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky__chat-thread",initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-10,transition:{duration:.2}},key:"chat-thread"},(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky__chat-thread__scroller",layoutRoot:!0},(0,s.createElement)(y.__unstableAnimatePresence,{initial:!1,mode:"popLayout"},u?.filter(((t,n,o)=>{const i=o.map((e=>e.role)).lastIndexOf(M.USER);return n>=(e?i:0)&&""!==t.content&&t.role!==M.TOOL&&t.role!==M.SYSTEM&&(t.role!==M.ASSISTANT||"make_suggestions"!==t.tool_calls?.[0]?.function.name)})).map(((e,t)=>(0,s.createElement)(ip,{message:e,key:e.id||`message-${t}`})))),c&&(!_||t)&&!x&&(0,s.createElement)(y.Notice,{status:"error",politeness:"assertive",onRemove:()=>{Fn("error_dismissed"),l("")}},c.includes("openai_error")?(0,m.__)("Whoops! Our AI is having some issues right now. Please try again later.","big-sky"):(0,f.createInterpolateElement)((0,m.sprintf)(/* translators: %s is a reference for debugging, support is an inline link "contact support" to the support page */ /* translators: %s is a reference for debugging, support is an inline link "contact support" to the support page */
(0,m.__)("Something went wrong. Please try again or <support></support> with reference: %s","big-sky"),n),{support:(0,s.createElement)("a",{href:"https://wordpress.com/help?help-center=wapuu",target:"_blank",rel:"noopener noreferrer"},(0,m.__)("contact support","big-sky"))})),(0,s.createElement)(yp,{onLoad:k}),(0,s.createElement)("div",{className:"big-sky__chat-thread__end",ref:d})))}function kp(){const{chatComponents:e}=(0,g.useSelect)((e=>({chatComponents:e(wt).getChatComponents()}))),{isThinking:t}=En();return!e||0===e.length||t?null:(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky__chat-components",key:"chat-components-actions"},e.map(((e,t)=>(0,s.createElement)("div",{className:"big-sky__chat-components-component",key:t},e))))}var _p=n(957);function xp({color:e="blue",instanceId:t,onClick:n,width:o=32,height:i=32}){const{RiveComponent:a,inactiveInput:r,typingInput:c,thinkingInput:l}=function(e="blue"){const t="State Machine A",n="https://s0.wp.com/wp-content/plugins/big-sky-plugin/assets/big-sky-icon",o=`${n}/blue.riv`,i=`${n}/white.riv`,{rive:a,RiveComponent:r}=(0,_p.useRive)({src:"blue"===e?o:i,stateMachines:t,autoplay:!1}),s=(0,_p.useStateMachineInput)(a,t,"inactive",!1),c=(0,_p.useStateMachineInput)(a,t,"thinking",!1),l=(0,_p.useStateMachineInput)(a,t,"typing",!1),u=(0,f.useCallback)((()=>{a&&a.play(t)}),[a,t]),d=(0,f.useCallback)((()=>{a&&a.pause(t)}),[a,t]);return(0,f.useEffect)((()=>()=>{a&&a.cleanup()}),[a]),(0,f.useEffect)((()=>{u()}),[u]),{rive:a,RiveComponent:r,inactiveInput:s,typingInput:l,thinkingInput:c,startStateMachine:u,pauseStateMachine:d}}(e),{isTyping:u,isDragging:d}=(0,g.useSelect)((e=>{const t=e(wt);return{isTyping:t.getIsTyping(),isDragging:t.getIsDragging()}})),{isThinking:p}=En(),h=(0,f.useRef)(null),m=(0,f.useRef)(!1);(0,f.useEffect)((()=>{d&&(h.current=null,m.current=!1)}),[d]),(0,f.useEffect)((()=>{const e=e=>{if(d)if(h.current){const t=Math.abs(e.clientX-h.current.x),n=Math.abs(e.clientY-h.current.y);(t>5||n>5)&&(m.current=!0)}else h.current={x:e.clientX,y:e.clientY}};return d&&window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[d]),(0,f.useEffect)((()=>{c&&(c.value=u),l&&(l.value=p),r&&(r.value=!u&&!p)}),[u,p,c,l,r]);return(0,s.createElement)(y.__unstableAnimatePresence,{mode:"wait"},(0,s.createElement)(y.__unstableMotion.div,{variants:{default:{scale:1,y:0,x:0},waiting:{scale:[.5,.6,.5],y:[-10,10,-10],x:[0,0,0],transition:{ease:"easeInOut",repeat:1/0,duration:1.5}},waitingEnter:{scale:.5,y:-10,x:0,transition:{ease:"easeInOut",duration:.3}},waitingExit:{scale:1,y:0,x:0,transition:{ease:"easeInOut",duration:.3}}},initial:{x:0},className:"big-sky__assistant-icon",id:t,onClick:e=>(n&&!m.current&&n(e),e.preventDefault())},(0,s.createElement)(a,{style:{width:o,height:i}})))}const Cp={menus:{width:"auto",height:48},chat:{width:360,height:440},pending:{width:"auto",height:48},completed:{width:"auto",height:48},handoff:{width:368,height:"auto"},handoff_chat:{width:368,height:"auto",maxHeight:440}},Sp={menus:{width:"auto",height:48},chat:{width:600,height:600},pending:{width:"auto",height:48},completed:{width:"auto",height:48},handoff:{width:600,height:"auto"},handoff_chat:{width:600,height:"auto",maxHeight:600}},Ep=(e,t)=>t?Sp[e]?.width||"auto":Cp[e]?.width||"auto",Tp=(e,t)=>t?Sp[e]?.height||"auto":Cp[e]?.height||48,Ip=(e,t)=>t?Sp[e]?.maxHeight||"auto":Cp[e]?.maxHeight||"auto",Ap=(e=!1)=>e?{title:"",prompt:(0,m.__)("Type what you'd like to do","big-sky")}:{title:(0,m.__)("What sort of website do you need?","big-sky"),prompt:(0,m.__)("Describe your site","big-sky")};function Pp({showNavigation:e=!0,navigationTitle:t,onClickBackButton:n,useBlockContext:o,defaultPrompt:i,isOnboarded:a,assistantQuestion:r,assistantId:c,fileUploadEnabled:l=!0,onlyShowLastRequest:u=!1}){const{inputtedFiles:d,isHandoff:p,showThread:h,currentUserMessage:m,onInputtedFilesAction:b,dockView:w}=(0,g.useSelect)((e=>({inputtedFiles:e(wt).getInputtedFiles(),isHandoff:e(wt).getIsHandoff(),showThread:e(wt).getShowThread(),currentUserMessage:e(wt).currentUserMessage(),onInputtedFilesAction:e(wt).getOnInputtedFilesAction(),dockView:e(wt).getDockView()}))),{setCurrentUserMessage:v,setInputtedFiles:k,setShowThread:_}=(0,g.useDispatch)(wt),{withJetpackTokenRequest:x}=Ms(),C=(0,f.useRef)(),{getMessages:S,userSay:E,addAssistantMessage:T,clearMessages:I}=Jt(),A=S(),{isThinking:P}=En();(0,f.useEffect)((()=>{c&&r&&(I(),T(c,r))}),[r,c]);const M=(0,f.useCallback)((async e=>{const t=await Promise.all(e.map((async e=>({file:e,name:e.name,url:URL.createObjectURL(e)}))));k([...d,...t])}),[d,k]),N=(0,f.useCallback)((e=>{k(d.filter(((t,n)=>n!==e)))}),[d,k]),O=({name:e,url:t,onRemove:n})=>(0,s.createElement)("div",{className:"big-sky__file-preview"},t&&(0,s.createElement)("img",{width:"50",height:"50",alt:e,src:t}),(0,s.createElement)("div",{className:"big-sky__file-preview-close-button-container"},(0,s.createElement)(y.Button,{className:"big-sky__file-preview-close-button",size:"small",iconSize:10,icon:Ps,onClick:n})));return(0,s.createElement)(s.Fragment,null,l&&(0,s.createElement)(y.DropZone,{onFilesDrop:M}),(0,s.createElement)("div",{className:"big-sky__dock__chat-view"},(0,s.createElement)("div",{className:"big-sky__dock__chat-content",style:{maxHeight:(()=>{if(w!==D.HANDOFF_CHAT)return"auto";const e=Ip(D.HANDOFF_CHAT,!1),t=document.querySelector(".big-sky__dock__handoff-step"),n=window.getComputedStyle(t),o=parseInt(n.paddingTop,10),i=parseInt(n.paddingBottom,10),a=document.querySelector(".big-sky__dock__handoff-step__title-actions"),r=a?.offsetHeight||0,s=C.current||document.querySelector(".big-sky__dock__chat-input");return e-(r+o+i+16+(s?.offsetHeight||0)+18)+"px"})()}},e&&(0,s.createElement)(dp,{title:t,onClickBackButton:()=>n()}),!A?.length&&!p&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(dp,{title:" ",onClickBackButton:()=>n()}),(0,s.createElement)(xp,{width:64,height:64})),(h||!a)&&(0,s.createElement)(vp,{onlyShowLastRequest:u}),!h&&a&&!m&&!d?.length&&(0,s.createElement)(up,{useBlockContext:o,focusInput:()=>{C.current?.focus()},onActionClick:async e=>{_(!0),await x((()=>E(e))),v("")}})),(0,s.createElement)(kp,null),(0,s.createElement)(Fi,null),l&&!P&&!b?.action&&!!d?.length&&(0,s.createElement)(y.__experimentalHStack,{justify:"flex-start",className:"big-sky__file-preview-container",spacing:3,wrap:!0},d.map((({name:e,url:t},n)=>(0,s.createElement)(O,{key:n,name:e,url:t,onRemove:()=>N(n)})))),(0,s.createElement)("div",{className:"big-sky__dock__chat-input"},(0,s.createElement)(sp,{prompt:i,ref:C,animationProps:{initial:{opacity:0,filter:"blur(5px)",scale:.9},animate:{opacity:1,filter:"blur(0px)",scale:1,transition:{duration:.3,delay:.1,ease:[.42,.24,.02,1]}},exit:{filter:"blur(5px)",opacity:0,scale:.9,transition:{duration:.2,ease:[.42,.24,.02,1]}}}}))))}function Mp(){const{isHandoff:e,isToolContainerVisible:t,toolComponent:n}=(0,g.useSelect)((e=>{const t=e(wt);return{isHandoff:t.getIsHandoff(),isToolContainerVisible:t.isToolContainerVisible(),toolComponent:t.getToolComponent()}}));if(!t||!n)return;const o=n.key;return(0,s.createElement)(y.Popover,{className:gn("big-sky__dock__tool-container",{"big-sky__assistant-ai-actions__popover-content":!0,"big-sky__dock__wrapper":!0,"big-sky__dock__use-hover-effects":!["color-picker","font-picker","site-layout-picker","pattern-picker"].includes(o)&&!e,"big-sky__dock__handoff":e}),animate:!1},n)}function Np({title:e="",description:t="",component:n=null,primaryCta:o={text:(0,m.__)("Continue","big-sky"),onClick:()=>{}},tertiaryCta:i={text:(0,m.__)("Cancel","big-sky"),onClick:()=>{},isAi:!1},onBackClick:a=null,isChatMode:r=!1,onSkip:c=null,stepKey:l=null}){const[u,d]=(0,f.useState)(!1),[p,h]=(0,f.useState)(null),{isMaximized:b}=(0,g.useSelect)((e=>({isMaximized:e(wt).getIsMaximized()}))),w=(0,f.useRef)(n);return(0,f.useEffect)((()=>{w.current=n}),[n]),(0,f.useEffect)((()=>{u||(w.current&&"function"==typeof w.current?w.current(h):h(w.current),d(!0))}),[u]),(0,s.createElement)("div",{className:"big-sky__dock__handoff-step",style:{width:Ep(D.HANDOFF,b)}},(0,s.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions"},a&&(0,s.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions__back"},(0,s.createElement)(y.Button,{icon:Oa,onClick:a})),(0,s.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions__title"},e),c&&(0,s.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions__skip"},(0,s.createElement)(y.Button,{onClick:c},(0,m.__)("Skip","big-sky")))),t&&(0,s.createElement)("div",{className:"big-sky__dock__handoff-step__description"},t),(0,s.createElement)("div",{className:gn("big-sky__dock__handoff-step__component",{[`step-${l}`]:l})},p),!r&&(0,s.createElement)("div",{className:"big-sky__dock__handoff-step__buttons"},(0,s.createElement)(y.Button,{className:"big-sky__dock__handoff-step__buttons__button big-sky__dock__handoff-step__buttons__button-primary",onClick:o.onClick},o.text),i&&(0,s.createElement)(y.Button,{className:gn("big-sky__dock__handoff-step__buttons__button big-sky__dock__handoff-step__buttons__button-tertiary",{"big-sky__dock__handoff-step__buttons__button-tertiary-ai":i.isAi}),onClick:()=>{i.onClick(h)}},i.isAi?(0,s.createElement)(s.Fragment,null,(0,s.createElement)(lr,null),i.text):i.text)))}function Op(){const{setAiStep:e}=ps(),{chosenCategories:t,chosenColorsComponent:n,chosenFonts:o,handoffStep:i,assistant:a,showChatContinueButton:r}=(0,g.useSelect)((e=>{const t=e(wt);return{chosenCategories:t.getChosenCategories(),chosenColorsComponent:t.getChosenColorsComponent(),chosenFonts:t.getChosenFonts(),handoffStep:t.getHandoffStep(),assistant:t.getAssistant(),showChatContinueButton:t.getShowChatContinueButton()}})),{setDockView:c,setIsHandoff:l,setIsToolContainerVisible:u,setCurrentHandoffArea:d,setCurrentUserMessage:p,setChatComponents:h,setShowChatContinueButton:y,setChatContinueButtonOnClick:b,setHandoffStep:w,setShowEditorWelcome:v,setAssistant:k,setIsMaximized:_}=(0,g.useDispatch)(wt),{zoomIn:x}=cn(),{userSay:C,assistantSay:S}=Jt(),{initializeThread:E}=cp(),{showFontPicker:T}=_r(),{showSiteLayouts:I}=Er(),{withJetpackTokenRequest:A}=Ms(),M=Ei(),N=(0,f.useRef)(),O=()=>{Fn("handoff_finished"),y(!1),h([]),l(!1),M(),d(null),c(D.CHAT),u(!1),k(ji.id),e("edit"),x(),(()=>{v(!0),E((0,m.__)("Let's start working on the contents of your site. Click around to edit your layout, images, or copy. You can also give me commands.","big-sky")),P()&&S((0,m.__)("Your free trial comes with 30 requests to our AI assistant.","big-sky"));const e=[{key:"help-edit-header",actionName:(0,m.__)("How do I change the header design?","big-sky")},{key:"help-edit-colors",actionName:(0,m.__)("How do I customize colors?","big-sky")},{key:"help-edit-images",actionName:(0,m.__)("How do I change images?","big-sky")},{key:"help-edit-logo",actionName:(0,m.__)("How do I add a logo?","big-sky")}];h([(0,s.createElement)(Fi,{key:"suggestions",args:{actions:e},respond:async e=>{await A((()=>C(e))),p(""),h([])}})])})()};(0,f.useEffect)((()=>{N.current||(Fn("handoff_start"),N.current=!0,M())}),[M]);const R=e=>{h([]);const t=L.findIndex((t=>t.key===e));w(t)};(0,f.useEffect)((()=>{"ask-ai-colors"!==L[i].key&&"ask-ai-fonts"!==L[i].key&&(y(!1),k(ji.id)),"ask-ai-colors"===L[i].key&&a!==Qa.id&&k(Qa.id),"ask-ai-fonts"===L[i].key&&a!==xr.id&&k(xr.id)}),[i,y]),(0,f.useEffect)((()=>{r&&("ask-ai-colors"===L[i].key&&b((()=>{R("pick-fonts"),d("fonts")})),"ask-ai-fonts"===L[i].key&&b((()=>{O()})))}),[i,r,b,R,d]);const L=[{key:"welcome",component:(0,s.createElement)(Np,{title:(0,m.__)("Let's work on your site!","big-sky"),description:(0,m.__)("To start, let's pick a layout, color palette, and font pairing. We can edit more details afterwards.","big-sky"),primaryCta:{text:(0,m.__)("Continue","big-sky"),onClick:()=>{Fn("handoff_continue_click",{step:"welcome"}),R("pick-layouts"),d("layouts")}},tertiaryCta:{text:(0,m.__)("Do this later","big-sky"),onClick:()=>{Fn("handoff_do_later_click"),O()}}})},{key:"pick-layouts",component:(0,s.createElement)(Np,{onBackClick:()=>{Fn("handoff_back_click",{step:"pick-layouts"}),R("welcome")},title:(0,m.__)("Pick a layout","big-sky"),description:(0,m.__)("First, pick from these layouts to organize your content and enhance user experience.","big-sky"),component:e=>{const{component:n}=I({categories:t});e(n)},primaryCta:{text:(0,m.__)("Continue","big-sky"),onClick:()=>{Fn("handoff_continue_click",{step:"pick-layouts"}),R("pick-colors"),d("colors")}},tertiaryCta:!1,onSkip:()=>{Fn("handoff_skip_click",{step:"pick-layouts"}),R("pick-colors"),d("colors")},stepKey:"pick-layouts"})},{key:"pick-colors",component:(0,s.createElement)(Np,{onBackClick:()=>{Fn("handoff_back_click",{step:"pick-colors"}),R("pick-layouts"),d("layouts")},title:(0,m.__)("Pick your colors","big-sky"),description:(0,m.__)("Select from our recommended color palettes to complement your site's design.","big-sky"),component:e=>{e(n)},primaryCta:{text:(0,m.__)("Continue","big-sky"),onClick:()=>{Fn("handoff_continue_click",{step:"pick-colors"}),R("pick-fonts"),d("fonts")}},tertiaryCta:{text:(0,m.__)("Describe the colors that you'd like","big-sky"),onClick:()=>{Fn("handoff_ask_ai_click",{step:"pick-colors"}),c(D.HANDOFF_CHAT),R("ask-ai-colors")},isAi:!0},onSkip:()=>{Fn("handoff_skip_click",{step:"pick-colors"}),R("pick-fonts"),d("fonts")},stepKey:"pick-colors"})},{key:"ask-ai-colors",component:(0,s.createElement)(Np,{onBackClick:()=>{Fn("handoff_back_click",{step:"ask-ai-colors"}),c(D.HANDOFF),_(!1),R("pick-colors")},title:(0,m.__)("Ask AI","big-sky"),component:(0,s.createElement)(Pp,{showNavigation:!1,useBlockContext:!1,assistantQuestion:(0,m.__)("Give me a little more information on the type of colors you want, or I can suggest colors for you.","big-sky"),assistantId:Qa.id,defaultPrompt:(0,m.__)('"Show me modern colors"',"big-sky")}),isChatMode:!0,onSkip:()=>{Fn("handoff_skip_click",{step:"ask-ai-colors"}),c(D.HANDOFF),_(!1),R("pick-fonts"),d("fonts")},stepKey:"ask-ai-colors"})},{key:"pick-fonts",component:(0,s.createElement)(Np,{onBackClick:()=>{Fn("handoff_back_click",{step:"pick-fonts"}),R("pick-colors"),d("colors")},title:(0,m.__)("Pick your font pair","big-sky"),description:(0,m.__)("Finally, select from these curated fonts pairing.","big-sky"),component:async e=>{const{component:t}=await T({keywords:[],fonts:o,initialGeneration:!0});e(t)},primaryCta:{text:(0,m.__)("Continue","big-sky"),onClick:()=>{Fn("handoff_continue_click",{step:"pick-fonts"}),O()}},tertiaryCta:{text:(0,m.__)("Describe the fonts that you'd like","big-sky"),onClick:()=>{Fn("handoff_ask_ai_click",{step:"pick-fonts"}),c(D.HANDOFF_CHAT),R("ask-ai-fonts")},isAi:!0},onSkip:()=>{Fn("handoff_skip_click",{step:"pick-fonts"}),O()},stepKey:"pick-fonts"})},{key:"ask-ai-fonts",component:(0,s.createElement)(Np,{onBackClick:()=>{Fn("handoff_back_click",{step:"ask-ai-fonts"}),_(!1),c(D.HANDOFF),R("pick-fonts")},title:(0,m.__)("Ask AI","big-sky"),component:(0,s.createElement)(Pp,{showNavigation:!1,useBlockContext:!1,assistantQuestion:(0,m.__)("Give me a little more information on the type of fonts you'd like. I can also suggest some fonts for you.","big-sky"),assistantId:xr.id,defaultPrompt:(0,m.__)('"Show me modern fonts"',"big-sky")}),isChatMode:!0,onSkip:()=>{Fn("handoff_skip_click",{step:"ask-ai-fonts"}),_(!1),O()},stepKey:"ask-ai-fonts"})}];return(0,s.createElement)("div",{key:L[i].key},(0,f.cloneElement)(L[i].component))}const Rp=(0,d.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(u.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})});function Dp({onAssistantMenuClick:e,imageUrl:t}){const n=(0,m.__)("Background Image","big-sky");return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{onClick:()=>e(n,"background-image"),icon:!t&&qt,className:"has-color-picker has-chevron",label:(0,m.__)("Background image","big-sky")},t&&(0,s.createElement)("img",{src:t,alt:(0,m.__)("Cover image","big-sky"),className:"big-sky__assistant-ai-actions__color-picker__button is-small"}),(0,s.createElement)(pp,{icon:Rp})))}function Lp({onAssistantMenuClick:e}){const t=(0,m.__)("Update","big-sky");return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{className:"has-chevron",onClick:()=>e(t,"button-update")},t,(0,s.createElement)(pp,{icon:Rp})))}const Bp=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});function Fp({onAssistantMenuClick:e}){const t=(0,m.__)("Add Pattern","big-sky"),n=(0,m.__)("Describe the pattern to add","big-sky"),{userSay:o}=Jt(),{initializeThread:i}=cp(),{setChatComponents:a,setCurrentUserMessage:r}=(0,g.useDispatch)(wt),{withJetpackTokenRequest:c}=Ms(),{getAvailablePatternCategories:l}=Si(),{patterns:u}=tn().getSiteMetadata(),{currentPostId:d}=(0,g.useSelect)((e=>({currentPostId:e(h.store).getCurrentPostId()})));return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{onClick:()=>(async()=>{e(t,"add-pattern",n),i((0,m.__)("What kind of pattern would you like to add to your page?","big-sky"));const p=l()?.filter((e=>"header"!==e&&"footer"!==e));let g=[];g=Array.isArray(u)?u.map((e=>e.category)):u[d]?.map((e=>e.category));const h={actions:p.filter((e=>!g.includes(e))).sort((()=>Math.random()-.5)).map((e=>(e=>{switch(e){case"about":return{key:e,actionName:(0,m.__)("About Section","big-sky"),description:(0,m.__)("A section about my site","big-sky"),message:(0,m.__)("Insert a section all about my site","big-sky")};case"contact":return{key:e,actionName:(0,m.__)("Contact","big-sky"),description:(0,m.__)("A contact section","big-sky"),message:(0,m.__)("Insert a section with contact information","big-sky")};case"events":return{key:e,actionName:(0,m.__)("Events List","big-sky"),description:(0,m.__)("A list of upcoming events","big-sky"),message:(0,m.__)("Insert a section with a list of upcoming events","big-sky")};case"gallery":return{key:e,actionName:(0,m.__)("Image Gallery","big-sky"),description:(0,m.__)("A gallery of images","big-sky"),message:(0,m.__)("Insert a section with a gallery of images","big-sky")};case"intro":return{key:e,actionName:(0,m.__)("Intro Section","big-sky"),description:(0,m.__)("A section introducing my site","big-sky"),message:(0,m.__)("Insert a section introducing my site","big-sky")};case"menu":return{key:e,actionName:(0,m.__)("Menu","big-sky"),description:(0,m.__)("A food menu","big-sky"),message:(0,m.__)("Insert a section for my food menu","big-sky")};case"newsletter":return{key:e,actionName:(0,m.__)("Newsletter","big-sky"),description:(0,m.__)("A newsletter subscribe form","big-sky"),message:(0,m.__)("Insert a section with a newsletter subscribe form","big-sky")};case"posts":return{key:e,actionName:(0,m.__)("Posts List","big-sky"),description:(0,m.__)("A list of my posts","big-sky"),message:(0,m.__)("Insert a section with a list of my posts","big-sky")};case"pricing":return{key:e,actionName:(0,m.__)("Pricing Table","big-sky"),description:(0,m.__)("A pricing table for my services","big-sky"),message:(0,m.__)("Insert a section with a pricing table for my services","big-sky")};case"services":return{key:e,actionName:(0,m.__)("Services List","big-sky"),description:(0,m.__)("A list of my services","big-sky"),message:(0,m.__)("Insert a section with a list of my services","big-sky")};case"testimonials":return{key:e,actionName:(0,m.__)("Testimonials","big-sky"),description:(0,m.__)("A list of testimonials","big-sky"),message:(0,m.__)("Insert a section with some testimonials","big-sky")};case"team":return{key:e,actionName:(0,m.__)("Team","big-sky"),description:(0,m.__)("A list of team members","big-sky"),message:(0,m.__)("Insert a section with a list of team members","big-sky")};default:const t=e.charAt(0).toUpperCase()+e.slice(1);return{key:e,actionName:t,description:(0,m.sprintf)(
// translators: %s is the pattern category name
// translators: %s is the pattern category name
(0,m.__)("A %s section","big-sky"),t)}}})(e)))};a([(0,s.createElement)(Fi,{key:"suggestions",args:h,respond:async e=>{await c((()=>o(e))),r(""),a([])}})])})(),icon:Bp,iconPosition:"left"},t))}function jp({onAssistantMenuClick:e,selectedBlock:t}){const{getSettings:n}=(0,g.useSelect)(v.store),{updateBlockAttributes:o,replaceBlock:i}=(0,g.useDispatch)(v.store),{editEntityRecord:a}=(0,g.useDispatch)(Zt.store),r=(0,m.__)("Regenerate","big-sky");return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{className:"has-chevron",onClick:()=>e(r,"regenerate-image")},r,(0,s.createElement)(pp,{icon:Rp})),t&&(0,s.createElement)(y.FormFileUpload,{onChange:e=>{const{files:r}=e.target;if("core/site-logo"===t.name)return void n().mediaUpload({filesList:r,onFileChange:([e])=>{a("root","site",void 0,{site_logo:e.id})}});const s=URL.createObjectURL(r[0]),c=(0,k.createBlock)(t.name,{...t.attributes,url:void 0,id:void 0,blob:s});i(t.clientId,c),n().mediaUpload({filesList:r,onFileChange:([e])=>{o(c.clientId,{blob:void 0,id:e.id,url:e.url})}})},accept:"image/*",multiple:!1,render:({openFileDialog:e})=>(0,s.createElement)(y.Button,{onClick:()=>{e()}},(0,m._x)("Upload","verb","big-sky"))}))}function $p({onAssistantMenuClick:e}){const t=(0,m.__)("Add Page","big-sky"),n=(0,m.__)("Describe the page to add","big-sky"),o=lp();return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{onClick:()=>{e(t,"add-page",n),o()},icon:Bp,iconPosition:"left"},t))}const{useHistory:Up}=rn(xn.privateApis),Hp=function({selectedBlock:e}){const{currentPostId:t}=(0,g.useSelect)((e=>({currentPostId:e(h.store).getCurrentPostId()}))),n=Up();if(!e||!e.attributes.id||!e.attributes.type)return null;if(e.attributes.id===t)return null;const o=(0,m.__)("Go to page","big-sky");return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{onClick:async()=>{n.navigate(`${e.attributes.type}/${e.attributes.id}?canvas=edit`)}},o))};function zp({onAssistantMenuClick:e}){const t=(0,m.__)("Rewrite","big-sky");return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Button,{className:"has-chevron",onClick:()=>e(t,"rewrite")},t,(0,s.createElement)(pp,{icon:Rp})))}function Gp(){const{selectedBlock:e}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),{getBlockStyles:t}=(0,g.useSelect)(k.store),{updateBlockAttributes:n}=(0,g.useDispatch)(v.store),{getSectionVariationBackgroundColor:o,getSectionVariationTextColor:i}=wo(),{currentColor:a}=tn().getSiteMetadata(),r=(0,f.useCallback)((()=>{if(!e)return null;const n=t(e.name);return n?(n.find((e=>"section-default"===e.name))||n.unshift({name:"section-default",label:"Default"}),n):null}),[t,e]),c=(0,f.useCallback)((()=>{if(!e||!e?.attributes?.className)return null;const t=[...e.attributes.className?.matchAll(F)];return!(!t||t.length<1)&&t[0][1]?.trim()}),[e]),l=(0,f.useCallback)((t=>{if(!e)return;const o=r();if(Fn("dock_menu_item_click",{menu_slug:"section-color-variation-picker"}),!o)return;const i=o.findIndex((e=>e.name===t)),a=o[i+1>=o.length?0:i+1].name,s=e.attributes.className.replaceAll(F,"");n(e.clientId,{className:`${s.trim()} is-style-${a}`})}),[r,e,n]);return(0,f.useMemo)((()=>{const e=c();if(!e)return null;const{hex:t}=o(e,a),{hex:n}=i(e,a);return t&&n&&(0,s.createElement)(y.Button,{key:`variation-${e}`,label:(0,m.__)("Pattern styles","big-sky"),onClick:()=>l(e),style:{background:`linear-gradient(90deg, ${t} 50%, ${n} 50%, ${n} 100%)`},className:"big-sky__pattern-variations-menu__button"})}),[c,o,a,i,l])}function qp(){const{currentColor:e}=tn().getSiteMetadata(),{getBlockAttributes:t,selectedBlock:n}=(0,g.useSelect)((e=>{const{getBlockAttributes:t,getSelectedBlock:n}=e(v.store);return{getBlockAttributes:t,selectedBlock:n()}})),{updateBlockAttributes:o}=(0,g.useDispatch)(v.store),{getParentRootPatternBlock:i}=sn(),{getThemeColors:a}=Bo(),{getSectionVariationTextColor:r}=wo(),c=a(),[l,u]=(0,f.useState)((()=>n.attributes?.textColor||n.attributes?.style?.color?.text||null)),[d,p]=(0,f.useState)(null),h=(0,f.useCallback)((()=>{const t="#fff linear-gradient(-45deg,#0000 48%,#ddd 0,#ddd 52%,#0000 0)";if(!n)return t;const o=i(n.clientId);if(!o||!o.attributes?.className)return t;const a=[...o.attributes.className?.matchAll(F)];if(!a.length)return t;const s=a[0][1];if(!s)return t;const{hex:c}=r(s,e);return c||t}),[n,i,r,e]),m=(0,f.useCallback)((()=>{const e=c.find((({slug:e})=>e===n.attributes?.textColor));return e?.color||n.attributes?.style?.color?.text||h()}),[h,n.attributes,c]);(0,f.useEffect)((()=>{u(null);const e=m();e&&u(e),void 0===c.find((({color:e})=>e===n.attributes?.textColor))&&k(n.attributes?.style?.color?.text)}),[m,n,c]);const b=(0,f.useRef)(),w=async({color:e,slug:i})=>{u(e);const a=t(n.clientId),r={...a,textColor:i};i||(r.textColor=null,r.style={...a.style,color:{...a.style.color,text:e}}),await o(n.clientId,r)},k=e=>{b.current&&(b.current.style.background=e),p(e)},_=l||d||h();return(0,s.createElement)(y.Dropdown,{contentClassName:"big-sky__assistant-ai-actions__popover-content",popoverProps:{placement:"top-center",offset:14},renderToggle:({isOpen:e,onToggle:t})=>(0,s.createElement)("div",{onClick:()=>{Fn("dock_menu_item_click",{selected_block:n?.name||null,menu_slug:"color-picker-toggle"}),t()},role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||t()}},(0,s.createElement)(y.Button,{className:"has-chevron has-color-picker","aria-expanded":e},(0,s.createElement)("span",{style:{background:_},className:"big-sky__assistant-ai-actions__color-picker__button is-small"}),(0,s.createElement)(y.Icon,{icon:Rp}))),renderContent:()=>(0,s.createElement)("div",{className:"big-sky__assistant-ai-actions__color-picker"},c.map((({color:e,slug:t})=>(0,s.createElement)(y.Button,{key:e,style:{background:e},onClick:()=>{Fn("dock_menu_item_click",{selected_block:n?.name||null,menu_slug:"color-picker-choice",color_name:e}),w({color:e,slug:t})},className:"big-sky__assistant-ai-actions__color-picker__button"+(l===e?" is-selected":"")}))),(0,s.createElement)(y.Dropdown,{className:"big-sky__assistant-ai-actions__color-picker__wheel",contentClassName:"big-sky__assistant-ai-actions__popover-content big-sky__assistant-ai-actions__popover-colorpicker",popoverProps:{placement:"top-center",offset:16},renderToggle:({isOpen:e,onToggle:t})=>(0,s.createElement)(y.Button,{className:gn("big-sky__assistant-ai-actions__color-picker__button","big-sky__assistant-ai-actions__color-picker__wheel-button",{"is-selected":l===d,"has-custom-color":d}),style:{background:d},ref:b,onClick:()=>{Fn("dock_menu_item_click",{selected_block:n?.name||null,menu_slug:"color-picker-choice",color_name:"color-wheel"}),d&&(k(d),w({color:d,slug:null})),t()},"aria-expanded":e},d&&(0,s.createElement)("span",{className:"big-sky__assistant-ai-actions__color-picker__custom-indicator"})),renderContent:()=>(0,s.createElement)(y.ColorPicker,{onChange:e=>{k(e),w({color:e,slug:null})},color:d})}))})}function Vp({setChatSettings:e,setUseBlockContext:t}){const{isOnboarded:n}=tn().getSiteMetadata(),o=(0,g.useSelect)((e=>e(bn.store).isOpen()),[]),{selectedBlock:i}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),{setDockView:a,setHideInput:r}=(0,g.useDispatch)(wt),c=(0,f.useCallback)((()=>{const c=(o={})=>({onAssistantMenuClick:(s,c=null,l=Ap(n).prompt,u=!0)=>{Fn("dock_menu_item_click",{selected_block:i?.name||null,menu_slug:c}),r(!1),t(u),a(D.CHAT),e({title:s,prompt:l,...o})}});if(!0===o)return(0,s.createElement)($p,{...c()});if(!i||!n)return null;const l=i?.attributes?.metadata?.remotePatternId;switch(i.name){case"core/group":case"core/post-content":return l?(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Fp,{...c({showThread:!0})}),(0,s.createElement)(Gp,null)):null;case"core/paragraph":case"core/heading":return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(zp,{...c()}),(0,s.createElement)(qp,null));case"core/image":case"core/site-logo":return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(jp,{...c(),selectedBlock:i}));case"core/cover":return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Fp,{...c({showThread:!0})}),(0,s.createElement)(Dp,{...c(),imageUrl:i?.attributes?.url}));case"core/button":case"core/social-link":return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Lp,{...c()}));case"core/navigation-link":return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Hp,{...c(),selectedBlock:i}));case"core/page-list":case"core/navigation":return(0,s.createElement)(s.Fragment,null,(0,s.createElement)($p,{...c()}));default:return null}}),[i,n,r,t,a,e,o])();return(0,s.createElement)(s.Fragment,null,c&&(0,s.createElement)("div",{className:"big-sky__dock-ai-menus"},c))}function Wp({setChatSettings:e,setUseBlockContext:t}){const{isOnboarded:n}=tn().getSiteMetadata(),{setDockView:o,setHideInput:i,setAssistant:a}=(0,g.useDispatch)(wt),{dockView:r,isAssistantButtonVisible:c,isBuildingSite:l,selectedBlock:u,assistant:d}=(0,g.useSelect)((e=>{const t=e(wt),n=e(v.store);return{isAssistantButtonVisible:t.getIsAssistantButtonVisible(),isBuildingSite:t.getIsBuildingSite(),dockView:t.getDockView(),selectedBlock:n.getSelectedBlock(),assistant:t.getAssistant()}})),{setShowThread:p}=(0,g.useDispatch)(wt),{clearMessages:h}=Jt(),m=(0,f.useCallback)((()=>{l||[D.HANDOFF,D.HANDOFF_CHAT].includes(r)||(Fn("dock_assistant_icon_click",{selected_block:u?.name||null}),h(),i(!1),t(!1),p(!1),o(D.CHAT),e(Ap(n)),d!==ji.id&&a(ji.id))}),[l,r,t,p,o,e,n]);return(0,f.useEffect)((()=>{const e=e=>{n&&(e.metaKey||e.ctrlKey)&&"j"===e.key&&(e.preventDefault(),r===D.CHAT?o(D.MENUS):m())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[m,r,o,n]),(0,s.createElement)(s.Fragment,null,(![D.CHAT,D.HANDOFF,D.HANDOFF_CHAT].includes(r)||[D.HANDOFF,D.HANDOFF_CHAT].includes(r)&&c)&&(0,s.createElement)(xp,{onClick:m,width:48,height:48}),[D.HANDOFF,D.HANDOFF_CHAT].includes(r)&&(0,s.createElement)(Op,{setChatSettings:e}),r===D.MENUS&&(0,s.createElement)(Vp,{setUseBlockContext:t,setChatSettings:e}))}var Yp=n(794);const Kp=20,Jp={NONE:"none",LEFT:"left",RIGHT:"right",CENTER:"center"},Xp="bigSkyDockPosition";function Zp({dockWidth:e=0,dockHeight:t=0,containerWidth:n=0,activeZone:o}){const i="auto"===e?document.querySelector(".big-sky__dock__animator")?.offsetWidth||0:e;if(!n||!i||!t)return null;const a=[{position:Jp.LEFT,x:Kp},{position:Jp.CENTER,x:Math.max(0,n/2-i/2)},{position:Jp.RIGHT,x:Math.max(0,n-i-Kp)}];return(0,s.createElement)(s.Fragment,null,a.map((({position:e,x:n})=>(0,s.createElement)(y.__unstableMotion.div,{key:e,className:gn("big-sky__dock__dropzone",`big-sky__dock__dropzone-${e}`,{"is-active":o===e}),style:{position:"absolute",left:n,bottom:Kp,width:i,height:t},initial:{opacity:0},animate:{opacity:o===e?.8:0,scale:1},transition:{type:"spring",stiffness:300,damping:25}}))))}const Qp=()=>{try{const e=window?.localStorage?.getItem(Xp);switch(e){case Jp.RIGHT:return{x:window.innerWidth-48-Kp,y:-Kp,snap:Jp.RIGHT};case Jp.CENTER:return{x:window.innerWidth/2-24,y:-Kp,snap:Jp.CENTER};default:return{x:Kp,y:-Kp,snap:Jp.LEFT}}}catch(e){return null}},eg=({currentSnap:e})=>{try{window?.localStorage?.setItem(Xp,e)}catch(e){}};function tg({children:e,dockView:t,isMaximized:n,containerRef:o}){const{setIsDragging:i}=(0,g.useDispatch)(wt),{isDragging:a}=(0,g.useSelect)((e=>({isDragging:e(wt).getIsDragging()}))),{selectedBlock:r}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{selectedBlock:t()}})),[c,l]=(0,f.useState)(window.innerWidth>=782);(0,f.useEffect)((()=>{const e=window.matchMedia("(min-width: 782px)"),t=e=>{l(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}),[]);const[u,d]=(0,f.useState)((()=>Qp()||{x:Kp,y:-Kp,snap:Jp.LEFT})),[p,h]=(0,f.useState)((()=>Qp()||{x:Kp,y:-Kp,snap:Jp.LEFT})),m=Ep(t,n),b=Tp(t,n),[w,k]=(0,f.useState)((()=>Qp()?.snap||Jp.LEFT)),[_,x]=(0,f.useState)(!1),C=(0,f.useRef)(null),S=(0,f.useRef)(),E=(0,f.useRef)(null),[T,I]=(0,f.useState)(null),A=(0,f.useRef)(null),P=(0,f.useRef)(!1),M=(0,f.useRef)(!1);(0,f.useEffect)((()=>{a&&(A.current=null,P.current=!1)}),[a]),(0,f.useEffect)((()=>{const e=e=>{if(a)if(A.current){const t=Math.abs(e.clientX-A.current.x),n=Math.abs(e.clientY-A.current.y);(t>5||n>5)&&(P.current=!0,x(!0))}else A.current={x:e.clientX,y:e.clientY}};if(!a){const e=setTimeout((()=>{x(!1)}),300);return()=>clearTimeout(e)}return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[a]),(0,f.useEffect)((()=>{c&&eg({currentSnap:w})}),[w,c]);const N=(0,f.useCallback)(((e,t,n)=>{const o=S.current?.offsetWidth||0,i=n/3,a=e+o/2;let r;switch(r=a<=i?Jp.LEFT:a<=2*i?Jp.CENTER:Jp.RIGHT,I(r),k(r),r){case Jp.LEFT:return{x:Kp,y:-Kp};case Jp.RIGHT:return{x:n-o-Kp,y:-Kp};case Jp.CENTER:const e={x:n/2-o/2,y:-Kp};return h(e),e}}),[]),O=(0,f.useCallback)(((e,t)=>{if(i(!1),P.current){M.current=!0;const e=o.current?.offsetWidth||window.innerWidth,n=N(t.x,t.y,e);d(n)}C.current=null}),[N,o,i]);(0,f.useEffect)((()=>{const e=e=>{M.current&&(e.stopPropagation(),M.current=!1)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)}),[]),(0,f.useEffect)((()=>{if(!r)return;const e=o.current?.offsetWidth||window.innerWidth,t=N(S.current?.getBoundingClientRect().left,S.current?.getBoundingClientRect().top,e);d(t)}),[o,S,r,N]);const R=(0,f.useCallback)(((e,n=!1)=>{if(w===Jp.NONE)return;const i=o.current?.offsetWidth||window.innerWidth,a=e||S.current?.offsetWidth||0,r=i/2,s=t===D.MENUS;let c;w===Jp.LEFT?c={x:Kp,y:-Kp}:w===Jp.RIGHT?c={x:i-a-Kp,y:-Kp}:w===Jp.CENTER&&(c={x:s&&p?.x&&!n?p.x:r-a/2,y:-Kp}),c&&(d(c),s&&h(c))}),[o,w,p,t]),L=(0,f.useCallback)((()=>{R(null,!0),I(null),P.current=!1}),[R]);(0,f.useEffect)((()=>{const e=()=>R();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[o,w,R]),(0,f.useEffect)((()=>{"auto"===m||a||R(m)}),[m,w,a]);const B=(0,s.createElement)("div",{ref:E,className:gn("big-sky__dock__draggable-wrapper",{"is-dragging":a&&P.current,"is-position-left":!a&&c&&w===Jp.LEFT,"is-position-center":!c||!a&&w===Jp.CENTER,"is-position-right":!a&&c&&w===Jp.RIGHT}),style:w!==Jp.CENTER&&c?{width:"auto"===m?S.current?.offsetWidth:m,height:b}:{}},(0,s.createElement)(y.__unstableMotion.div,{layout:!0,layoutRoot:!0,className:"big-sky__dock__animator",ref:S,initial:{width:m,height:b,opacity:0},style:{bottom:(()=>{switch(w){case Jp.LEFT:case Jp.RIGHT:case Jp.CENTER:return 0}})(),left:(()=>{switch(w){case Jp.LEFT:return 0;case Jp.RIGHT:case Jp.CENTER:return"auto"}})(),top:(()=>{switch(w){case Jp.LEFT:case Jp.RIGHT:case Jp.CENTER:return"auto"}})(),right:(()=>{switch(w){case Jp.RIGHT:return 0;case Jp.CENTER:case Jp.LEFT:return"auto"}})(),maxWidth:m},animate:{opacity:1,width:m,height:b,scale:1,transition:{type:"spring",mass:1.1,stiffness:280,damping:28,duration:.2}},onAnimationComplete:L},e));return(0,s.createElement)(s.Fragment,null,_&&(0,s.createElement)(Zp,{dockWidth:m,dockHeight:b,containerWidth:o.current?.offsetWidth||window.innerWidth,activeZone:T}),(0,s.createElement)(Yp,{position:u,onStart:(e,t)=>{i(!0),C.current={x:t.x,y:t.y,mouseX:e.clientX,mouseY:e.clientY}},onStop:O,onDrag:(e,t)=>{if(P.current){const n=o.current?.offsetWidth||window.innerWidth,i=e.clientX-C.current.mouseX,a=C.current.x+i;N(a,t.y,n)}},bounds:"parent",cancel:".big-sky__dock-no-drag",nodeRef:E,enableClickEvents:!1,preventDefaultEvents:!0,disabled:!c,offsetParent:o.current},B))}function ng(){const[e,t]=(0,f.useState)(!0),[n,o]=(0,f.useState)("big-sky__dock"),{isOnboarded:i}=tn().getSiteMetadata(),{zoomIn:a}=cn(),[r,c]=(0,f.useState)(Ap(i)),{getMessages:l,clearMessages:u}=Jt(),d=l(),{setChatComponents:p,setShowThread:h,setDockView:m,setOnSelectedBlockAction:b,setInputtedFiles:w,setOnInputtedFilesAction:v,setShowEditorWelcome:k,setIsMaximized:_}=(0,g.useDispatch)(wt),{isBuildingSite:x,isMaximized:C,dockView:S}=(0,g.useSelect)((e=>{const t=e(wt);return{isBuildingSite:t.getIsBuildingSite(),dockView:t.getDockView(),isMaximized:t.getIsMaximized()}})),E=(0,f.useRef)(),T=(0,f.useCallback)((()=>{h(!1),p([]),b({}),w([]),v({}),u(),k(!1),_(!1)}),[h,p,b,w,v,u,k,_]);(0,f.useEffect)((()=>{o(gn("big-sky__dock",{"big-sky__dock__is-menus":S===D.MENUS,"big-sky__dock__is-chat":S===D.CHAT}));const{canvasiFrameBody:e}=Xt();e?.classList&&(e.classList.remove("big-sky__dock__is-menus"),e.classList.remove("big-sky__dock__is-chat"),e.classList.add(`big-sky__dock__is-${S}`))}),[S,i]);const I=(0,f.useCallback)((()=>{Fn("dock_back_button_click"),a(),m(D.MENUS),T()}),[a,m,T]);return(0,f.useEffect)((()=>{if(!i||x)return;const e=e=>{"Escape"===e.key&&I()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[I,i,x]),(0,f.useEffect)((()=>{function e(){const{height:e}=window.visualViewport,t=document.documentElement.clientHeight-e;E.current.style.bottom=`${t}px`,E.current.style.height=`${e}px`}if(window.visualViewport)return e(),window.visualViewport.addEventListener("resize",e),()=>{window.visualViewport.removeEventListener("resize",e)}}),[]),(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Mp,null),(0,s.createElement)(y.Popover,{ref:E,resize:C,className:gn("big-sky__dock__wrapper","big-sky__assistant-ai-actions__popover-content",{"big-sky__dock__is-onboarding":!i,"big-sky__dock__is-maximized":C})},(0,s.createElement)("div",{className:n},(0,s.createElement)(y.__unstableAnimatePresence,{mode:"wait"},(0,s.createElement)("div",{className:"big-sky__dock__container"},(0,s.createElement)(tg,{dockView:S,isMaximized:C,containerRef:E},S===D.CHAT&&(0,s.createElement)(Pp,{showNavigation:d.length>0,navigationTitle:r.title,onClickBackButton:()=>I(),useBlockContext:e,defaultPrompt:r.prompt,isOnboarded:i}),(0,s.createElement)(Wp,{setChatSettings:c,setUseBlockContext:t})))))))}const og=function({previewUrl:e,size:t="medium"}){"small"!==t&&(t="medium");const[n,o]=(0,f.useState)(!1),[i,a]=(0,f.useState)(!1),r=(0,f.useRef)(null),c=(0,f.useRef)(null);return(0,f.useEffect)((()=>(c.current=setTimeout((()=>{n||a(!0)}),5e3),()=>{c.current&&clearTimeout(c.current)})),[n]),(0,s.createElement)("div",{className:`big-sky-site-preview big-sky-site-preview-${t}`},!n&&!i&&(0,s.createElement)("div",{className:"big-sky-site-preview__loading"},(0,m.__)("Loading preview","big-sky")),i&&(0,s.createElement)("div",{className:"big-sky-site-preview__fallback"},(0,s.createElement)("div",{className:"fallback-header"}),(0,s.createElement)("div",{className:"fallback-content"},(0,s.createElement)("div",{className:"fallback-line"}),(0,s.createElement)("div",{className:"fallback-line"}),(0,s.createElement)("div",{className:"fallback-line short"}))),!i&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("iframe",{ref:r,title:(0,m.__)("Site Preview","big-sky"),src:e,onLoad:()=>{o(!0),c.current&&clearTimeout(c.current);try{const e=r.current;if(e&&e.contentDocument){const t=document.createElement("style");t.textContent="\n\t\t\t\t\t/* Hide admin bar */\n\t\t\t\t\t#wpadminbar {\n\t\t\t\t\t\tdisplay: none !important;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Make all elements non-interactive */\n\t\t\t\t\thtml, body, * {\n\t\t\t\t\t\tpointer-events: none !important;\n\t\t\t\t\t\tuser-select: none !important;\n\t\t\t\t\t}\n\t\t\t\t",e.contentDocument.head.appendChild(t)}}catch(e){K.error("Could not inject styles into iframe"),a(!0)}},onError:()=>{a(!0)},className:n?"is-loaded":"",sandbox:"allow-same-origin allow-scripts"}),(0,s.createElement)("div",{className:"big-sky-site-preview__overlay","aria-hidden":"true"})))};function ig(){const e=(0,g.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=e(Zt.store);return t().some((e=>n(e.kind,e.name,e.key)))}),[]),t=(0,g.useSelect)((e=>e(wt).getIsEditorIframeLoaded()),[]),{getSiteMetadata:n}=tn(),o=Ei(),[i,a]=(0,f.useState)(!1),[r,c]=(0,f.useState)(null);!function({setIsModalOpen:e,setReason:t}){const n=Ei(),o=P(),i=(0,g.useSelect)((e=>e(wt).getIsEditorIframeLoaded()),[]);(0,f.useEffect)((()=>{if(!o||!i)return;const a=document.querySelector(".editor-post-publish-button");if(a){a.classList.remove("is-primary"),a.classList.add("is-secondary");const o=document.createElement("button");return o.classList.add("components-button","editor-post-launch-button","is-primary","is-compact"),o.textContent=(0,m.__)("Launch","big-sky"),o.addEventListener("click",(()=>{n(),e(!0),t("launch_button"),Fn("show_free_trial_paywall",{reason:"launch_button_click"})})),a.parentNode.insertBefore(o,a.nextSibling),()=>{o.remove()}}}),[o,i,e,t,n])}({setIsModalOpen:a,setReason:c}),(0,f.useEffect)((()=>{new URLSearchParams(window.location.search).has("ai-website-builder-trial")&&(a(!0),c(H),Fn("show_free_trial_paywall",{reason:H}))}),[a]);const l=(0,f.useCallback)((async e=>{e.preventDefault(),e.stopPropagation(),await o(),a(!0),c(U),Fn("show_free_trial_paywall",{reason:U})}),[a,o]);if((0,f.useEffect)((()=>{if(P()&&t){const e=document.querySelectorAll(".edit-site-editor__view-mode-toggle");return e.forEach((e=>{e.addEventListener("click",l)})),()=>{e.forEach((e=>{e.removeEventListener("click",l)}))}}}),[t,l]),!P()||!i)return null;const u=(()=>{const e=new URL(window.location.href),t=e.origin;return{title:n().siteTitle||(0,m.__)("Your Site","big-sky"),description:n().siteDescription||"",hostname:e.hostname,previewUrl:`${t}/?preview=true&iframe=true`}})(),d=r===U||r===H?{title:(0,m.__)("Choose a plan","big-sky"),text:(0,m.__)("Experience everything WordPress.com has to offer by upgrading to one of our paid plans.","big-sky"),buttonText:(0,m.__)("Upgrade now","big-sky"),action:wp("site-launch"),tracksEvent:"paywall_upgrade",size:"medium",secondaryButtonText:("undefined"==typeof window?1:window?.bigSkyInitialState?.siteCount||1)>1?(0,m.__)("Manage all sites","big-sky"):null,secondaryTracksEvent:"paywall_sites",secondaryAction:"https://wordpress.com/sites",targetPage:"plans"}:{title:(0,m.__)("Ready to launch?","big-sky"),text:(0,m.__)("Choose your domain to get started, then pick a plan to launch your site.","big-sky"),buttonText:(0,m.__)("Continue","big-sky"),size:"medium",action:bp("site-launch",u.title),tracksEvent:"paywall_upgrade",targetPage:"domains"};return(0,s.createElement)(y.Modal,{title:d.title,onRequestClose:()=>{if(a(!1),Fn("paywall_dismiss",{reason:r}),c(null),r===H){const e=new URL(window.location);e.searchParams.delete("ai-website-builder-trial"),window.history.replaceState({},"",e)}},className:"big-sky-modal big-sky-modal-paywall",isDismissible:!0,shouldCloseOnClickOutside:!1,size:d.size},(0,s.createElement)("div",{className:"big-sky-modal-paywall__preview-container"},(0,s.createElement)("p",{className:"big-sky-modal-paywall__summary-text"},d.text),(0,s.createElement)("div",{className:"big-sky-modal-paywall__preview-wrapper"},(0,s.createElement)(og,{previewUrl:u.previewUrl,size:"small"}),(0,s.createElement)("div",{className:"big-sky-modal-paywall__site-info"},(0,s.createElement)("h2",{className:"big-sky-modal-paywall__site-title"},u.title),(0,s.createElement)("div",{className:"big-sky-modal-paywall__site-domain"},u.description)))),(0,s.createElement)("div",{className:"big-sky-modal__buttons"},d?.secondaryButtonText&&(0,s.createElement)(y.Button,{variant:"secondary",onClick:async e=>{e.preventDefault(),Fn(d.secondaryTracksEvent,{reason:r}),window.location.href=d.secondaryAction}},d.secondaryButtonText),(0,s.createElement)(y.Button,{variant:"primary",onClick:async e=>{e.preventDefault(),Fn(d.tracksEvent,{reason:r,target_page:d.targetPage}),window.location.href=d.action},disabled:e,accessibleWhenDisabled:!0},d.buttonText)))}const ag=window.wp.preferences;function rg(e){const t=new Image;t.onerror=t=>{K.error("Error preloading image after uploading from pexels",t,{url:e})},t.src=e}function sg(e,t){const n=[];return e.forEach((e=>{["core/image","core/cover"].includes(e.name)&&e.attributes.url&&!e.attributes.url.startsWith(t)&&e.attributes.url.includes("pexels.com")&&n.push(e),n.push(...sg(e.innerBlocks,t))})),n}let cg=!1;function lg(){const{postType:e,postId:t}=(0,g.useSelect)((e=>({postType:e(h.store).getCurrentPostType(),postId:e(h.store).getCurrentPostId()}))),n=(0,g.useSelect)((n=>n(Zt.store).isSavingEntityRecord("postType",e,t))),{editorBlocks:o,siteUrl:i}=(0,g.useSelect)((e=>({editorBlocks:e(h.store).getEditorBlocks(),mediaUpload:e(v.store).getSettings().mediaUpload,siteUrl:e(Zt.store).getSite()?.url||""})),[]),{updateBlockAttributes:a}=(0,g.useDispatch)(v.store),{savePost:r}=(0,g.useDispatch)(h.store);function s(){const e=ge(),n=e?`https://${window.Jetpack_Editor_Initial_State.siteFragment}`:i,r=sg(o,n).map((e=>{const t=e.attributes.url.match(/pexels\.com\/photos\/(\d+)\//);return e.pexelsID=t?t[1]:null,e})).filter((e=>e.pexelsID)),s=[];if(r.length>0){const n=e?"rest/v1.1/external-media-upload":"wpcom/v2/external-media/copy/pexels",o=r.map((e=>({guid:JSON.stringify({url:e.attributes.url,caption:e.pexelsID,name:`image-pexels-${e.pexelsID}.jpg`,title:"Uploaded from Pexels "+e.pexelsID})}))),i=E({path:n,method:"POST",data:{[e?"external_ids":"media"]:e?o.map((e=>e.guid)):o,service:"pexels",post_id:t}}).then((e=>new Promise(((t,n)=>{var o;const i=null!==(o=e?.media)&&void 0!==o?o:e;K.info("Uploaded images",i),r.length!==i.length&&n("Not all images were uploaded");for(let e=0;e<i.length;e++){var s,c,l,u,d;const t=null!==(s=null!==(c=i[e].error)&&void 0!==c?c:i[e].errors)&&void 0!==s?s:null;null===t?(rg(null!==(l=i[e]?.URL)&&void 0!==l?l:i[e].url),a(r[e].clientId,{id:null!==(u=i[e]?.ID)&&void 0!==u?u:i[e].id,url:null!==(d=i[e]?.URL)&&void 0!==d?d:i[e].url})):n(t)}t()}))));s.push(i)}else Promise.resolve([]);return Promise.all(s)}return{importExternalImagesNow:async()=>{cg=!0,await s(),cg=!1},importExternalImagesOnSave:async()=>{!cg&&n&&(cg=!0,(await s()).length>0&&await r(),cg=!1)}}}function ug(){!function({awaitEditor:e}){var t;const{canvasMode:n,clearTemplateParts:o,clearBlocks:i,insertDummySections:a,setIframeScale:r,zoomIn:s,zoomOut:c}=cn(),[l,u]=(0,f.useState)(!1),{getBlockCount:d}=(0,g.useSelect)(v.store),p=(0,g.useSelect)((e=>e(v.store).getSelectedBlock()?.name),[]),{getEditorSettings:m}=(0,g.useSelect)(h.store),{updateEditorSettings:y}=(0,g.useDispatch)(h.store),{setDefaultRenderingMode:b,setRenderingMode:w}=rn((0,g.useDispatch)(h.store)),{isOnboarded:k}=tn().getSiteMetadata(),{chosenCategories:_,isBuildingSite:x,isEditorReady:C,isEditorIframeLoaded:S,isHandoff:T}=(0,g.useSelect)((e=>({chosenCategories:e(wt).getChosenCategories(),isBuildingSite:e(wt).getIsBuildingSite(),isEditorReady:e(wt).getIsEditorReady(),isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded(),isHandoff:e(wt).getIsHandoff(),isTemplatePartContentReady:e(wt).getIsTemplatePartContentReady()})),[]),{getContentBlockClientID:I}=sn(),{postId:A}=Sn(),{setDefaults:P}=(0,g.useDispatch)(ag.store),{setIsEditorReady:M,setIsEditorIframeLoaded:N}=(0,g.useDispatch)(wt),{setShowWelcomeGuide:O}=null!==(t=(0,g.useDispatch)("automattic/wpcom-welcome-guide"))&&void 0!==t?t:{};(0,f.useEffect)((()=>{e&&!l&&(u(!0),(async()=>{await new Promise((e=>{const t=(0,g.subscribe)((()=>{d(I())>=0&&(t(),e())}))})),M(!0)})())}),[d,M,e,l,I]);const R=(0,f.useCallback)((()=>{const{canvasiFrameDocument:e}=Xt();return e?.querySelector("html")}),[]);(0,f.useEffect)((()=>{P("core",{distractionFree:!0,fixedToolbar:!0,isComplementaryAreaVisible:!1,showBlockBreadcrumbs:!1}),P("core/edit-site",{isComplementaryAreaVisible:!1,welcomeGuide:!1,welcomeGuidePage:!1,welcomeGuideStyles:!1,welcomeGuideTemplate:!1})}),[P]),(0,f.useEffect)((()=>{O&&O(!1)}),[O]),(0,f.useEffect)((()=>{const t=async()=>{const e=R();if(!e?.classList.contains("block-editor-iframe__html"))return await ut(500),void t();N(!0)};C&&e&&!S&&t()}),[e,R,S,C,N]),function(){const e=(0,f.useRef)(),t=(0,f.useRef)(),{getMedia:n}=(0,g.useSelect)((e=>{const{getMedia:t}=e(Zt.store);return{getMedia:t}}),[]),{record:o,editedRecord:i,isResolving:a}=(0,Zt.useEntityRecord)("root","site"),{useCustomCss:r}=Bo(),[s,c]=r(),{currentColor:l}=tn().getSiteMetadata(),{setStyleProperties:u}=cn(),{getColorVariationByTitle:d}=wo(),{isEditorReady:p,isEditorIframeLoaded:h}=(0,g.useSelect)((e=>({isEditorReady:e(wt).getIsEditorReady(),isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded()}))),{canvasiFrameDocument:m}=Xt();(0,f.useEffect)((()=>{if(!(p&&h&&m&&m.body))return;const n=m.getElementById("svg-logo-colors");if(n)e.current=n;else{const t=m.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("id","svg-logo-colors"),t.setAttribute("width","0px"),t.setAttribute("height","0px"),t.setAttribute("class","logo-svg"),m.body.appendChild(t),e.current=t}const o=m.getElementById("style-logo-colors");if(o)t.current=o;else{const e=m.createElement("style");e.setAttribute("id","style-logo-colors"),m.body.appendChild(e),t.current=e}}),[m,h,p]),(0,f.useEffect)((()=>{var r;if(!p||!h)return;if(a)return;const g=null!==(r=i?.site_logo)&&void 0!==r?r:o?.site_logo;g&&(async()=>{var o;let i=n(g);!i&&g&&(i=await async function(e){try{return await E({path:`/wp/v2/media/${e}`,method:"GET"})}catch(e){K.error("Error fetching media by id: ",e)}}(g));const a=!!i?.meta?.big_sky_generated_logo||"site_logo_bsky"===i?.slug?.substring(0,14),r=d(l),p=a?Object.entries(null!==(o=d(l)?.styles?.blocks?.["core/group"]?.variations)&&void 0!==o?o:{}).map((([e,t])=>{var n,o;return{name:e,text:null!==(n=null!==(o=t?.color?.text)&&void 0!==o?o:r?.styles?.color?.text)&&void 0!==n?n:"#000"}})):[];var h;a&&!p.includes("section-default")&&p.unshift({name:"section-default",text:null!==(h=r?.styles?.color?.text)&&void 0!==h?h:"#000"}),e.current&&t.current&&function(e,t,n){e.replaceChildren();const o=[];for(const t of n){o.push(`.is-style-${t.name} feFlood { color: ${t.text}; }`),o.push(`.is-style-${t.name} { --site-logo-filter: url(#svg-logo-color-${t.name}); }`);const n=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","filter");n.setAttribute("id",`svg-logo-color-${t.name}`),n.setAttribute("class",`is-style-${t.name}`),n.setAttribute("color-interpolation-filters","sRGB");const i=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","feFlood");i.setAttribute("flood-color","currentcolor"),i.setAttribute("result","flood");const a=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","feComposite");a.setAttribute("operator","in"),a.setAttribute("in","flood"),a.setAttribute("in2","SourceGraphic"),n.appendChild(i),n.appendChild(a),e.appendChild(n)}t.textContent=o.join("\n")}(e.current,t.current,p),u(a?{"--site-logo-url":`url(${i.source_url})`,"--site-logo-object-position":"-1024px"}:{"--site-logo-url":"none","--site-logo-object-position":"50%"}),a?ai(s,c,i.source_url):function(e,t){e.includes("/* START Big Sky */")&&t(e.replace(/\/\* START Big Sky \*\/.*\/\* END Big Sky \*\//s,"").trim())}(s,c)})()}),[l,d,n,h,p,a,u,s,c,i?.site_logo,o?.site_logo])}();const D=(0,f.useRef)(null);(0,f.useEffect)((()=>{const{canvasiFrame:e}=Xt();return S?(e&&(e.style.visibility="visible"),D.current||(D.current=new window.MutationObserver((t=>{for(const n of t)for(const t of n.removedNodes)t.contains(e)&&N(!1)})),D.current.observe(document.getElementById("site-editor"),{subtree:!0,childList:!0}))):D.current&&(D.current.disconnect(),D.current=null),()=>{D.current&&(D.current.disconnect(),D.current=null)}}),[S,N]),(0,f.useEffect)((()=>{(async()=>{const{canvasiFrame:e}=Xt();C&&!S&&e?e.style.opacity=0:C&&S&&e&&(await ut(300),e.style.opacity=1)})()}),[C,S]);const L=(0,g.useRegistry)(),B=(0,g.useSelect)((e=>{const{getBlockOrder:t,getBlocksByName:n,getBlockEditingMode:o}=e(v.store),i=n("core/template-part");return[...i.filter((e=>"contentOnly"===o(e))),...i.flatMap((e=>t(e))).filter((e=>"disabled"===o(e)))]}),[]);(0,f.useEffect)((()=>{if(B?.length)for(const e of B)L.dispatch(v.store).setBlockEditingMode(e,"default")}),[B,L]);const[F,j]=(0,f.useState)(!1),$=(0,f.useCallback)((e=>{"function"==typeof b?b(e):w(e)}),[w,b]);(0,f.useEffect)((()=>{(async()=>{x?(j(!0),c(),$("template-locked"),T||(await ut(500),await Promise.all([o(),i()]),_.length&&(await a({count:_.length+2,replaceTemplateParts:!0}),j(!1)))):T?($("template-locked"),c()):k&&($("template-locked"),s())})()}),[_,x,k,T,A]);const U=(0,f.useRef)(void 0);(0,f.useEffect)((()=>{p&&("core/template-part"===p?(U.current=m().onNavigateToEntityRecord,y({onNavigateToEntityRecord:void 0})):U.current&&y({onNavigateToEntityRecord:U.current}))}),[p,y,m]),(0,f.useEffect)((()=>{if(!S)return;const{canvasiFrame:e,canvasiFrameRoot:t}=Xt();if(!e)return;const n={"big-sky__is-building-site":x||!k,"big-sky__is-handoff":!!T,"big-sky__is-building-site-overlay":F};for(const[o,i]of Object.entries(n))e.classList.toggle(o,i),t.classList.toggle(o,i)}),[S,x,k,T,F]),(0,f.useEffect)((()=>{(async()=>{const{canvasiFrameRoot:e}=Xt(),t=document.querySelector(".big-sky__ai-messages");"view"===n?(document.querySelector("body").classList.add("big-sky__canvas-mode-view"),e?.classList?.add("big-sky__canvas-mode-view"),t&&(t.style.visibility="hidden")):(document.querySelector("body").classList.remove("big-sky__canvas-mode-view"),e?.classList?.remove("big-sky__canvas-mode-view"),await ut(1500),t&&(t.style.visibility="visible"),r())})()}),[n,S,r])}({awaitEditor:!0});const{importExternalImagesOnSave:e}=lg();return(0,f.useEffect)((()=>{e()}),[e]),null}function dg(){!function({awaitEditor:e}){const[t,n]=(0,f.useState)(!1),{getBlockCount:o}=(0,g.useSelect)((e=>({getBlocks:e(v.store).getBlocks,getBlockCount:e(v.store).getBlockCount}))),i=(0,g.useSelect)((e=>e(h.store).getEditorMode())),{isSiteEditor:a}=Sn(),{getContentBlockClientID:r}=sn(),{setIsEditorReady:s}=(0,g.useDispatch)(wt);(0,f.useEffect)((()=>{"visual"!==i&&n(!1);e&&!t&&"visual"===i&&(n(!0),(async()=>{await new Promise((e=>{const t=(0,g.subscribe)((()=>{const n=o(r());if(a)n>0&&(t(),e());else{const{canvasiFrameDocument:o}=Xt(),i=o?.querySelector("html"),a=i&&i.classList.contains("block-editor-iframe__html");n>0&&a&&(t(),e())}}))})),s(!0)})())}),[o,s,e,t,r,i,a])}({awaitEditor:!0});const{importExternalImagesOnSave:e}=lg(),t=(0,g.useSelect)((e=>e(h.store).getEditorMode())),{setIsEditorReady:n}=(0,g.useDispatch)(wt);return(0,f.useEffect)((()=>{"visual"!==t&&n(!1)}),[t,n]),(0,f.useEffect)((()=>{e()}),[e]),null}function pg(){const{isSiteEditor:e,isPostEditor:t}=Sn();return e?(0,s.createElement)(ug,null):t?(0,s.createElement)(dg,null):null}const gg=({hook:e})=>(e(),null);function hg(){return(0,s.createElement)(s.Fragment,null,os.filter((e=>e.toolkitHook)).map(((e,t)=>(0,s.createElement)(gg,{key:t,hook:e.toolkitHook}))))}const fg=[{actionName:(0,m.__)("Build a site for my bakery","big-sky"),prompt:(0,m.__)("Create a warm and inviting website for my artisanal bakery.","big-sky")},{actionName:(0,m.__)("Design a modern portfolio","big-sky"),prompt:(0,m.__)("Design a sleek, modern portfolio to showcase my work.","big-sky")},{actionName:(0,m.__)("Launch a landing page for my book","big-sky"),prompt:(0,m.__)("Create a captivating landing page for my book launch.","big-sky")},{actionName:(0,m.__)("Start a travel blog","big-sky"),prompt:(0,m.__)("Build a vibrant travel blog featuring adventures and travel tips.","big-sky")},{actionName:(0,m.__)("Design a restaurant website","big-sky"),prompt:(0,m.__)("Create an elegant website for my Japanese restaurant.","big-sky")},{actionName:(0,m.__)("Build a site for my yoga studio","big-sky"),prompt:(0,m.__)("Design a serene, welcoming site for my yoga studio.","big-sky")},{actionName:(0,m.__)("Create a site for my podcast","big-sky"),prompt:(0,m.__)("Build a bold, energetic website for my podcast.","big-sky")},{actionName:(0,m.__)("Launch a coaching website","big-sky"),prompt:(0,m.__)("Create a polished, professional website for my coaching business.","big-sky")},{actionName:(0,m.__)("Start a coffee shop site","big-sky"),prompt:(0,m.__)("Design a quirky and cozy website for my coffee shop.","big-sky")}];function mg(){const{setCurrentUserMessage:e}=(0,g.useDispatch)(wt),{logUserChoice:t}=pn(),n=(0,f.useCallback)((n=>{Fn("onboarding_suggestion_click"),e(n),t(n)}),[t,e]),o=(0,f.useCallback)(((e=5,t=[])=>{const o=t.map((e=>e.prompt));return[...fg.filter((e=>!o.includes(e.prompt)))].sort((()=>.5-Math.random())).slice(0,e).map((e=>({...e,key:we(),onClick:()=>{n(e.prompt)}})))}),[n]),[i,a]=(0,f.useState)(o());return(0,f.useEffect)((()=>{!i?.length>0&&a(o())}),[i,o]),(0,s.createElement)("div",{className:"big-sky-onboarding__actions"},(0,s.createElement)(up,{actions:i,key:i[0]?.key,showSpotlight:!0}))}const yg=()=>(0,s.createElement)(y.__unstableAnimatePresence,{mode:"wait"},(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky-disclaimer",initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{ease:"easeInOut",duration:.3}},exit:{opacity:0,y:-20,transition:{ease:"easeInOut",duration:.3}}},(0,s.createElement)("p",null,(0,f.createInterpolateElement)(/* translators: aiGuidelinesLink: "AI Guidelines", userGuidelinesLink: "User Guidelines" */ /* translators: aiGuidelinesLink: "AI Guidelines", userGuidelinesLink: "User Guidelines" */
(0,m.__)("You can review our <aiGuidelinesLink></aiGuidelinesLink>, and all sites must comply with WordPress.com's <userGuidelinesLink></userGuidelinesLink>.","big-sky"),{aiGuidelinesLink:(0,s.createElement)("a",{href:"https://automattic.com/ai-guidelines/",target:"_blank",rel:"noreferrer noopener",onClick:e=>{Fn("ai_guidelines_click"),e.stopPropagation()}},(0,m.__)("AI Guidelines","big-sky")),userGuidelinesLink:(0,s.createElement)("a",{href:"https://wordpress.com/support/user-guidelines/",target:"_blank",rel:"noreferrer noopener",onClick:e=>{Fn("user_guidelines_click"),e.stopPropagation()}},(0,m.__)("User Guidelines","big-sky"))}))));function bg({onSendMessage:e,onClickSuggestion:t}){const n=(0,f.useRef)(null),o=new URLSearchParams(window.location.search).has("referrer"),i="ai-site-builder"===new URLSearchParams(window.location.search).get("referrer");return(0,s.createElement)(y.__unstableMotion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:350},transition:{duration:.6,ease:[.42,.24,.02,1],delay:o&&!i?1:.5},className:"big-sky-onboarding__landing-view"},(0,s.createElement)("div",{className:"big-sky-onboarding__main-content"},(0,s.createElement)("div",{className:"big-sky-onboarding__assistant-button"},(0,s.createElement)(xp,{width:100,height:100,color:"white"})),(0,s.createElement)("h1",{className:"big-sky-onboarding__title"},(0,m.__)("Make a website as unique as you.","big-sky")),(0,s.createElement)("div",{className:"big-sky-onboarding__chat-input"},(0,s.createElement)(sp,{ref:n,prompt:(0,m.__)("Describe your site in a few words","big-sky"),onSendMessage:e})),(0,s.createElement)(mg,{onClickSuggestion:t})),(0,s.createElement)(yg,null))}function wg({onSendMessage:e}){const t=(0,f.useRef)(null),n=(0,f.useRef)(null),{isConfirmingSpecs:o,isEditingSpecs:i}=(0,g.useSelect)((e=>{const t=e(wt);return{isConfirmingSpecs:t.getIsConfirmingSpecs(),isEditingSpecs:t.getIsEditingSpecs()}})),{getMessages:a}=Jt(),r=a(),c=r[r.length-1];(0,f.useEffect)((()=>{const e=new ResizeObserver((e=>{for(const t of e)t.target===n.current&&t.contentRect.height>0&&document.documentElement.style.setProperty("--chat-input-height",`${t.contentRect.height}px`)}));return n.current&&e.observe(n.current),()=>{e.disconnect()}}),[]);const l=(0,f.useMemo)((()=>{if("assistant"===c?.role&&c?.content[0]?.text){if(c.content[0].text.includes("title"))return(0,m.__)("Type your site title","big-sky");if(c.content[0].text.includes("name"))return(0,m.__)("Type a name","big-sky");if(c.content[0].text.includes("description")||c.content[0].text.includes("describe"))return(0,m.__)("Type a description","big-sky");if(c.content[0].text.includes("topic"))return(0,m.__)("Type a topic","big-sky");if(c.content[0].text.includes("address")||c.content[0].text.includes("location")||c.content[0].text.includes("locate"))return(0,m.__)("Type an address","big-sky")}return""}),[c]);return(0,s.createElement)("div",{className:gn("big-sky-onboarding__chat-view",{"is-editing-specs":i})},(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky-onboarding__chat-thread"},(0,s.createElement)(vp,null)),(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky-onboarding__chat-input",ref:n},(0,s.createElement)("div",{style:{position:"relative"}},(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky-onboarding__actions",style:o?{position:"absolute",bottom:0}:{}},(0,s.createElement)(y.__unstableAnimatePresence,{mode:"sync"},(0,s.createElement)("div",null,(0,s.createElement)(kp,{key:"chat-components-actions"}),(0,s.createElement)(Fi,{key:"chat-suggestions-actions"})))),(0,s.createElement)(y.__unstableAnimatePresence,{mode:"sync"},!o&&(0,s.createElement)(sp,{ref:t,prompt:l,onSendMessage:e,animationProps:{initial:{opacity:0,scaleX:1},animate:{opacity:1,scaleX:1},exit:{opacity:0,scaleX:0},transition:{duration:1,ease:[.42,.24,.02,1]},style:{transformOrigin:"left"}},hideInitialMessage:!0})))))}class vg extends f.PureComponent{static defaultProps={total:100,compact:!1,isPulsing:!1,canGoBackwards:!1};static getDerivedStateFromProps(e,t){return{allTimeMax:Math.max(t.allTimeMax,e.value)}}state={allTimeMax:this.props.value};getCompletionPercentage(){const e=Math.ceil((this.props.canGoBackwards?this.props.value:this.state.allTimeMax)/this.props.total*100);return Math.min(e,100)}renderBar(){const{color:e,title:t,total:n,value:o,style:i}=this.props;let a={width:this.getCompletionPercentage()+"%"};return e&&(a.backgroundColor=e),i&&(a={...a,...i}),(0,s.createElement)("div",{"aria-valuemax":n,"aria-valuemin":0,"aria-valuenow":o,"aria-label":"progress bar",className:"progress-bar__progress",role:"progressbar",style:a},t)}render(){const e=["progress-bar"];return this.props.className&&e.push(this.props.className),this.props.compact&&e.push("is-compact"),this.props.isPulsing&&e.push("is-pulsing"),(0,s.createElement)("div",{className:e.join(" ")},this.renderBar())}}function kg(){const e=(0,m.__)("Building your site! Here's what you could try next","big-sky"),t=(0,f.useMemo)((()=>[(0,m.__)("Refresh the design with bolder colors and fonts","big-sky"),(0,m.__)("Give me a modern font","big-sky"),(0,m.__)("Give it a warmer, welcoming feel","big-sky"),(0,m.__)("Generate a logo for my website","big-sky"),(0,m.__)("Make it feel more premium with refined typography","big-sky"),(0,m.__)("Make it pop with vibrant colors","big-sky"),(0,m.__)("Change the website colors to white, eggplant, and #C0C2C9","big-sky"),(0,m.__)("Build a simple contact page for clients","big-sky"),(0,m.__)("Highlight customer testimonials on homepage","big-sky"),(0,m.__)("Add a link to my Instagram","big-sky"),(0,m.__)("Make a simple 'about us' page","big-sky"),(0,m.__)("Add a map to show my location","big-sky")]),[]),n=(0,m.__)("All set! Ready to see your new site?","big-sky"),[o,i]=(0,f.useState)(t[0]),[a,r]=(0,f.useState)(!0),c=(0,g.useSelect)((e=>e(wt).getBuildProgress()));return(0,f.useEffect)((()=>{const e=setTimeout((()=>{r(!1)}),3e3),n=setInterval((()=>{!a&&c<90&&i(t[Math.floor(Math.random()*t.length)])}),3e3);return()=>{clearInterval(n),clearTimeout(e)}}),[a,t,c]),(0,s.createElement)("div",{className:"big-sky-onboarding__building-view"},(0,s.createElement)("div",{className:"big-sky-onboarding__building-content"},(0,s.createElement)("div",{className:"big-sky-onboarding__placeholder-container"},(0,s.createElement)(y.__unstableAnimatePresence,{mode:"wait"},(0,s.createElement)(y.__unstableMotion.p,{key:a?"opening":o,initial:{y:20,opacity:0,filter:"blur(8px)"},animate:{y:0,opacity:1,filter:"blur(0px)"},exit:{y:-20,opacity:0,filter:"blur(8px)"},transition:{duration:.4,opacity:{duration:.4},y:{duration:.4,ease:"easeInOut"},filter:{duration:.4,ease:"easeInOut"}},className:"big-sky-onboarding__placeholder"},c>=90?n:a?e:`"${o}"`)),(0,s.createElement)("div",{className:"big-sky-onboarding__progress-container"},(0,s.createElement)(vg,{value:c,compact:!0})))))}const _g=()=>{const[e,t]=(0,f.useState)(75),[n,o]=(0,f.useState)(!1),[i,a]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{const e=setTimeout((()=>{t(100),o(!0)}),500),n=setTimeout((()=>{a(!0)}),1e3);return()=>{clearTimeout(e),clearTimeout(n)}}),[]),i?null:(0,s.createElement)("div",{className:"big-sky-onboarding__loading "+(n?"is-fading":"")},(0,s.createElement)("div",{className:"processing-step__container"},(0,s.createElement)("div",{className:"processing-step__icon"},(0,s.createElement)(y.Icon,{width:24,height:24,icon:dr,fill:"#fff"})),(0,s.createElement)("div",{className:"processing-step"},(0,s.createElement)(vg,{value:e,compact:!0})),(0,s.createElement)(yg,null)))};function xg({isOpen:e,onClose:t,onCancel:n,onConfirm:o,cancelText:i,confirmText:a,messages:r,title:c,reverseButtons:l=!1}){return e&&(0,s.createElement)(y.Modal,{className:"big-sky-onboarding__dialog",onRequestClose:t,title:c},r.map(((e,t)=>(0,s.createElement)("p",{key:t},e))),(0,s.createElement)("div",{className:"big-sky-onboarding__dialog-buttons"},(l?a:i)&&(0,s.createElement)(y.Button,{variant:"secondary",onClick:l?o:n},l?a:i),(l?i:a)&&(0,s.createElement)(y.Button,{variant:"primary",onClick:l?n:o},l?i:a)))}function Cg(){const{setIsConfirmingSpecs:e,setIsEditingSpecs:t,incrementFocusInput:n}=(0,g.useDispatch)(wt),{topic:o}=tn().getSiteMetadata(),{currentUserMessage:i,isBuildingSite:a}=(0,g.useSelect)((e=>({apiKey:e(wt).getApiKey(),sessionId:e(wt).getSessionId(),currentUserMessage:e(wt).currentUserMessage(),isBuildingSite:e(wt).getIsBuildingSite()}))),r=new URLSearchParams(window.location.search),c=r.has("prompt"),[l,u]=(0,f.useState)(!!o||c),[d,p]=(0,f.useState)(!1),h=(0,f.useRef)(o),{setStoreConversation:b}=Jt(),w=r.get("referrer"),v=null!==w,k="ai-site-builder"===w,{setAiStep:_}=ps();(0,f.useEffect)((()=>{null!==h.current&&null===o&&u(!1),h.current=o}),[o]),_("onboarding"),(0,f.useEffect)((()=>(document.body.classList.add("big-sky-onboarding-open"),()=>{document.body.classList.remove("big-sky-onboarding-open")})),[]);const x=(0,f.useRef)(!1);(0,f.useEffect)((()=>{x.current||(Fn("onboarding_started"),x.current=!0)}),[]),(0,f.useEffect)((()=>{b&&b(!0)}),[b]);const C=async()=>{u(!0),await ut(1500)},S=(0,f.useCallback)((()=>{e(!1),t(!1)}),[e,t]),E=()=>{p(!1),n()},T=(0,f.useCallback)((()=>a?(0,s.createElement)(kg,null):l?(0,s.createElement)(wg,{onSendMessage:S}):(0,s.createElement)(bg,{key:"onboarding-landing-view",onSendMessage:C,onClickSuggestion:C})),[S,a,l]);return(0,s.createElement)(y.Popover,{className:"big-sky-onboarding"},v&&!k&&(0,s.createElement)(_g,null),(0,s.createElement)(y.__unstableMotion.div,{className:"big-sky-onboarding__content big-sky-onboarding__content--glow"+(i||l?" big-sky-onboarding__content--animate":""),key:"onboarding-content",initial:{opacity:0},animate:{opacity:1,transition:{duration:.3,ease:"easeInOut"}},exit:{opacity:0,backgroundColor:"#f3f3f3",transition:{duration:1,ease:"easeInOut",backgroundColor:{duration:.5}}}},(0,s.createElement)("div",{className:"big-sky-onboarding__icon"},(0,s.createElement)(y.Icon,{width:24,height:24,icon:dr,fill:"#fff"})),v&&!k&&(0,s.createElement)("div",{className:"big-sky-onboarding__exit"},(0,s.createElement)(y.Button,{onClick:()=>{p(!0)}},"Exit")),(0,s.createElement)(y.__unstableAnimatePresence,{mode:"wait"},T())),d&&(0,s.createElement)(xg,{isOpen:d,onClose:E,onCancel:E,onConfirm:()=>{p(!1),Fn("onboarding_exit"),window.history.go(-2)},cancelText:(0,m.__)("Continue using AI","big-sky"),confirmText:(0,m.__)("Exit","big-sky"),messages:[(0,m.__)("If you exit now, any changes you've made will not be saved. You will be redirected to the page where you can choose how to start creating your site. Would you like to continue?","big-sky")],title:(0,m.__)("Exit the AI builder","big-sky"),reverseButtons:!0}))}function Sg(){return Sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sg.apply(this,arguments)}function Eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eg(Object(n),!0).forEach((function(t){Ig(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ig(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ag extends c().Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame((()=>{this.reCalculateColumnCount()}))):this.reCalculateColumnCount()}reCalculateColumnCount(){const e=window&&window.innerWidth||1/0;let t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let n=1/0,o=t.default||2;for(let i in t){const a=parseInt(i);a>0&&e<=a&&a<n&&(n=a,o=t[i])}o=Math.max(1,parseInt(o)||1),this.state.columnCount!==o&&this.setState({columnCount:o})}itemsInColumns(){const e=this.state.columnCount,t=new Array(e),n=c().Children.toArray(this.props.children);for(let o=0;o<n.length;o++){const i=o%e;t[i]||(t[i]=[]),t[i].push(n[o])}return t}renderColumns(){const{column:e,columnAttrs:t={},columnClassName:n}=this.props,o=this.itemsInColumns(),i=100/o.length+"%";let a=n;a&&"string"!=typeof a&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===a&&(a="my-masonry-grid_column"));const r=Tg(Tg(Tg({},e),t),{},{style:Tg(Tg({},t.style),{},{width:i}),className:a});return o.map(((e,t)=>c().createElement("div",Sg({},r,{key:t}),e)))}logDeprecated(e){console.error("[Masonry]",e)}render(){const e=this.props,{children:t,breakpointCols:n,columnClassName:o,columnAttrs:i,column:a,className:r}=e,s=function(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let l=r;return"string"!=typeof r&&(this.logDeprecated('The property "className" requires a string'),void 0===r&&(l="my-masonry-grid")),c().createElement("div",Sg({},s,{className:l}),this.renderColumns())}}Ag.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0};const Pg=Ag,Mg=window.wp.deprecated;var Ng=n.n(Mg);function Og(e){return["core/edit-post","core/edit-site"].includes(e)?(Ng()(`${e} interface scope`,{alternative:"core interface scope",hint:"core/edit-post and core/edit-site are merging.",version:"6.6"}),"core"):e}function Rg(e,t){return"core"===e&&"edit-site/template"===t?(Ng()("edit-site/template sidebar",{alternative:"edit-post/document",version:"6.6"}),"edit-post/document"):"core"===e&&"edit-site/block-inspector"===t?(Ng()("edit-site/block-inspector sidebar",{alternative:"edit-post/block",version:"6.6"}),"edit-post/block"):t}const Dg=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e=Og(e),area:t=Rg(e,t)}),Lg=(e,t)=>({registry:n,dispatch:o})=>{t&&(e=Og(e),t=Rg(e,t),n.select(ag.store).get(e,"isComplementaryAreaVisible")||n.dispatch(ag.store).set(e,"isComplementaryAreaVisible",!0),o({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},Bg=e=>({registry:t})=>{e=Og(e),t.select(ag.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(ag.store).set(e,"isComplementaryAreaVisible",!1)},Fg=(e,t)=>({registry:n})=>{if(!t)return;e=Og(e),t=Rg(e,t);const o=n.select(ag.store).get(e,"pinnedItems");!0!==o?.[t]&&n.dispatch(ag.store).set(e,"pinnedItems",{...o,[t]:!0})},jg=(e,t)=>({registry:n})=>{if(!t)return;e=Og(e),t=Rg(e,t);const o=n.select(ag.store).get(e,"pinnedItems");n.dispatch(ag.store).set(e,"pinnedItems",{...o,[t]:!1})};function $g(e,t){return function({registry:n}){Ng()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(ag.store).toggle(e,t)}}function Ug(e,t,n){return function({registry:o}){Ng()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),o.dispatch(ag.store).set(e,t,!!n)}}function Hg(e,t){return function({registry:n}){Ng()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(ag.store).setDefaults(e,t)}}function zg(e){return{type:"OPEN_MODAL",name:e}}function Gg(){return{type:"CLOSE_MODAL"}}const qg=(0,g.createRegistrySelector)((e=>(t,n)=>{n=Og(n);const o=e(ag.store).get(n,"isComplementaryAreaVisible");if(void 0!==o)return!1===o?null:t?.complementaryAreas?.[n]})),Vg=(0,g.createRegistrySelector)((e=>(t,n)=>{n=Og(n);const o=e(ag.store).get(n,"isComplementaryAreaVisible"),i=t?.complementaryAreas?.[n];return o&&void 0===i})),Wg=(0,g.createRegistrySelector)((e=>(t,n,o)=>{var i;o=Rg(n=Og(n),o);const a=e(ag.store).get(n,"pinnedItems");return null===(i=a?.[o])||void 0===i||i})),Yg=(0,g.createRegistrySelector)((e=>(t,n,o)=>(Ng()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(ag.store).get(n,o))));function Kg(e,t){return e.activeModal===t}const Jg=(0,g.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}}),Xg=(0,g.createReduxStore)("core/interface",{reducer:Jg,actions:a,selectors:r});(0,g.register)(Xg);const{useHistory:Zg}=rn(xn.privateApis),{PrivateListView:Qg}=rn(v.privateApis),eh=(0,f.createContext)({});function th({template:e,page:t,isFrontPage:n,reorderKey:o}){const[i]=(0,Zt.useEntityBlockEditor)("postType","wp_template",{id:e.id}),a=Zg(),{close:r}=(0,g.useDispatch)(bn.store);return(0,s.createElement)("div",null,(0,s.createElement)("p",null,n?"Home":t.title.rendered),(0,s.createElement)("div",{role:"button",tabIndex:0,onClick:()=>{a.navigate(`/${t.type}/${t.id}?canvas=edit`),r()},onKeyDown:e=>{"Enter"===e.key&&(a.navigate(`/${t.type}/${t.id}?canvas=edit`),r())},style:{cursor:"pointer",opacity:"publish"===t.status?1:.5}},(0,s.createElement)(v.BlockPreview,{blocks:i,reorderKey:o})))}function nh({page:e,siteMetadata:t,isFrontPage:n,reorderKey:o}){const i=(0,g.useSelect)((e=>e(Zt.store).getEntityRecords("postType","wp_template",{per_page:-1})?.find((e=>"page"===e.slug))),[]),a=(0,f.useMemo)((()=>({postType:e.type,postId:e.id})),[e]);return i?(0,s.createElement)(Zt.EntityProvider,{kind:"postType",type:e.type,id:e.id},(0,s.createElement)(v.BlockContextProvider,{value:a},(0,s.createElement)(th,{template:i,page:e,siteMetadata:t,isFrontPage:n,reorderKey:o}))):null}function oh({siteMetadata:e,siteSettings:t,pages:n,reorderKey:o}){return(0,s.createElement)(Pg,{breakpointCols:3,className:"big-sky__mosaic",columnClassName:"big-sky__mosaic__column"},n?.map((n=>(0,s.createElement)("div",{key:n.id},(0,s.createElement)(nh,{page:n,siteMetadata:e,isFrontPage:n.id===t?.page_on_front,reorderKey:o})))))}function ih({block:e}){const{siteMetadata:t,siteSettings:n,page:o}=(0,g.useSelect)((t=>{const{getEntityRecord:n}=t(Zt.store);return{siteMetadata:t(wt).getSiteMetadata(),siteSettings:n("root","site"),page:n("postType","page",e.attributes.id)}}),[e.attributes.id]),i=(0,f.useContext)(eh),{editEntityRecord:a,saveEditedEntityRecord:r}=(0,g.useDispatch)(Zt.store);if("core/navigation-link"!==e.name)return null;if(!o)return;const c=o.id===n?.page_on_front,l=t.navigationId,u=i.find((({attributes:e})=>e.id===o.id));return(0,s.createElement)(y.ToggleControl,{__nextHasNoMarginBottom:!0,disabled:c,checked:u,onChange:async()=>{let e=[...i];u?e=e.filter((e=>"core/navigation-link"===e.name&&e.attributes.id!==o.id)):e.find((e=>"core/navigation-link"===e.name&&e.attributes.id===o.id))||e.push((0,k.createBlock)("core/navigation-link",{label:o.title.rendered,type:"page",id:o.id,url:o.link,kind:"post-type"})),await a("postType",o.type,o.id,{status:u?"draft":"publish"}),await r("postType",o.type,o.id),await a("postType","wp_navigation",l,{blocks:e,content:e=>{var t;return(0,k.serialize)(null!==(t=e.blocks)&&void 0!==t?t:[])}})}})}function ah({siteMetadata:e}){const t=(0,g.useSelect)((e=>e(Zt.store).getEntityRecord("root","site")),[]),n=(0,g.useSelect)((e=>e(Zt.store).getEntityRecords("postType","page",{per_page:-1,status:"draft,publish",orderby:"date",order:"asc"})),[]),{enableComplementaryArea:o,disableComplementaryArea:i}=(0,g.useDispatch)(Xg),{editEntityRecord:a}=(0,g.useDispatch)(Zt.store),{set:r}=(0,g.useDispatch)(ag.store);(0,f.useEffect)((()=>(r("core","distractionFree",!1),o("core","big-sky/pages-sidebar"),()=>{i("core","big-sky/pages-sidebar"),r("core","distractionFree",!0)})),[o,i,r]);const[c]=(0,Zt.useEntityBlockEditor)("postType","wp_navigation",{id:e.navigationId}),l=(0,f.useMemo)((()=>c.filter((e=>"page"===e.attributes.type)).map((e=>({...e,attributes:{...e.attributes,id:e.attributes.id||"/"!==e.attributes.url?e.attributes.id:t.page_on_front}})))),[c,t.page_on_front]),u=(0,f.useMemo)((()=>n?.length?n.map((e=>(0,k.createBlock)("core/navigation-link",{label:e.title.rendered,type:"page",id:e.id,url:e.link,kind:"post-type"}))):[]),[n]),d=(0,f.useMemo)((()=>{const e=new Map(l.map((e=>[e.attributes.id,e]))),t=[];return u.forEach((n=>{e.has(n.attributes.id)||t.push(n)})),t}),[l,u]),p=(0,f.useMemo)((()=>[(0,k.createBlock)("core/navigation",{ref:e.navigationId,maxNestingLevel:5},l)]),[l,e.navigationId]),b=(0,f.useMemo)((()=>[(0,k.createBlock)("core/navigation",{},d)]),[d]),[w,_]=(0,f.useState)(0),x=(0,f.useMemo)((()=>l.map((e=>n?.find((t=>t.id===e.attributes.id)))).filter(Boolean)),[l,n]);return x?.length?(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y.Fill,{name:"__unstable-block-tools-after"},(0,s.createElement)(oh,{siteMetadata:e,siteSettings:t,pages:x,reorderKey:w})),(0,s.createElement)(h.PluginSidebar,{identifier:"big-sky/pages-sidebar",title:(0,m.__)("Pages","big-sky")},(0,s.createElement)(eh.Provider,{value:c},(0,s.createElement)("h2",null,(0,m.__)("Pages","big-sky")),(0,s.createElement)(v.BlockEditorProvider,{value:p,onChange:async function([t]){await a("postType","wp_navigation",e.navigationId,{blocks:[...t.innerBlocks],content:e=>{var t;return(0,k.serialize)(null!==(t=e.blocks)&&void 0!==t?t:[])}}),_((e=>e+1))}},(0,s.createElement)(rh,{rootClientId:p?.[0]?.clientId}),(0,s.createElement)(Qg,{rootClientId:p?.[0]?.clientId,additionalBlockContent:ih,showBlockMovers:!1,onSelect:null,blockSettingsMenu:null,isExpanded:!0})),(0,s.createElement)("div",{className:"big-sky__pages-sidebar__draft-pages"},(0,s.createElement)(v.BlockEditorProvider,{value:b},(0,s.createElement)(Qg,{rootClientId:b?.[0]?.clientId,additionalBlockContent:ih,showBlockMovers:!1,onSelect:null,blockSettingsMenu:null})))))):null}function rh({rootClientId:e}){const{updateBlockListSettings:t}=(0,g.useDispatch)(v.store);return(0,f.useEffect)((()=>{t(e,{allowedBlocks:["core/navigation-link"]})}),[t,e]),null}function sh({siteMetadata:e}){const{close:t}=(0,g.useDispatch)(bn.store),n=(0,g.useSelect)((e=>e(bn.store).isOpen()),[]);return(0,f.useEffect)((()=>{function e(e){e.target.closest(".editor-document-bar__command")&&n&&(t(),e.stopPropagation())}return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}}),[n,t]),(0,f.useEffect)((()=>{document.body.classList.toggle("big-sky__pages-modal-open",n)}),[n]),!0===n&&(0,s.createElement)(ah,{siteMetadata:e})}const{GlobalStylesProvider:ch}=rn(h.privateApis),lh=function(){const{isBuildingSite:e,isEditorIframeLoaded:t,isDevMode:n,siteMetadata:o,currentHandoffArea:i,headerSectionIsReady:a}=(0,g.useSelect)((e=>{const t=e(wt);return{isBuildingSite:t.getIsBuildingSite(),isEditorIframeLoaded:t.getIsEditorIframeLoaded(),isDevMode:t.getIsDevMode(),siteMetadata:t.getSiteMetadata(),currentHandoffArea:t.getCurrentHandoffArea(),headerSectionIsReady:t.getHeaderSectionIsReady()}}),[]),r=jn(),{logAction:c,logToolCall:l,logAssistantMessage:u,logError:d}=pn(),{setDockView:p,setAssistant:b,setHeaderSectionIsReady:w}=(0,g.useDispatch)(wt),{isPostEditor:v,isSiteEditor:k,postType:_}=Sn(),x=(0,g.useSelect)((e=>e(h.store).getEditorMode())),[C,S]=(0,f.useState)(!1),{getMessages:E,error:T}=Jt(),I=E(),A=(0,f.useRef)(null),P=(0,f.useRef)(null),{buildNewSite:N}=Vr(),{setSiteMetadata:O}=tn(),R=o?.isOnboarded,{setAiStep:L,showOnboardingDialog:B,setShowOnboardingDialog:F}=ps({runUrlChangeHandling:!0}),{canvasiFrameBody:j}=Xt();(0,f.useEffect)((()=>{const e=I?.filter((e=>e.role!==M.RESPONSE_ACTIONS)),t=e?.[e?.length-1];if(t&&t!==A.current){const e=t?.role,n=t?.content?.[0]?.text||t?.content||"",o=t?.tool_calls?.[0];if(e===M.ASSISTANT){const e=o?.function;e&&l(e,t.id),n&&"component"!==n?.[0]?.type&&u(n,t.id)}A.current=t}}),[I,l,u]),(0,f.useEffect)((()=>{T?T!==P.current&&(d(T),P.current=T):P.current=null}),[T,d]),(0,f.useEffect)((()=>{r&&c("Page Saved",M.COMMENT)}),[r]),(0,f.useEffect)((()=>{j?t&&!C&&S(!0):S(!1)}),[t,C,S,j]);const $=os.find((e=>"big-sky-color"===e.id)),U=os.find((e=>"big-sky-font"===e.id)),H=(0,f.useCallback)((()=>"colors"===i?$.id:"fonts"===i?U.id:ji.id),[i,$,U]);(0,f.useEffect)((()=>{b(R?H():qi.id)}),[H,R,b]);const z=C&&R||v&&"visual"===x&&R;return(0,s.createElement)(s.Fragment,null,"page"===_&&(0,s.createElement)(sh,{siteMetadata:o}),(0,s.createElement)(ch,null,z&&(0,s.createElement)(ng,null),(0,s.createElement)(y.__unstableAnimatePresence,{mode:"wait"},(!R||e)&&!a&&k&&(0,s.createElement)(Cg,{key:`onboarding-${a}`})),(0,s.createElement)(hg,null),e&&(0,s.createElement)(is,null),n?(0,s.createElement)(As,null):null),(0,s.createElement)(pg,null),(0,s.createElement)(xg,{isOpen:B,onClose:()=>F(!1),onCancel:()=>{F(!1),L("handoff"),p(D.MENUS)},onConfirm:()=>{F(!1),w(!1),O({isOnboarded:!1},!1,!0),N()},messages:[(0,m.__)("If you go back, your current progress may be lost. From there, you can start fresh and create a new site.","big-sky")],cancelText:(0,m.__)("Continue editing","big-sky"),confirmText:(0,m.__)("Build a new site","big-sky"),title:(0,m.__)("Start Over?","big-sky")}),(0,s.createElement)(ig,null))};class uh extends f.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){K.error("Plugin Error:",e,t),this.props.onReset?.()}render(){return this.props.children}}const dh=uh;function ph({name:e,hook:t,search:n}){var o;const{commands:i}=(0,g.useSelect)((e=>({commands:e(wt).getCommands()}))),{addCommand:a}=(0,g.useDispatch)(wt),r=null!==(o=t({search:n}))&&void 0!==o?o:{};return(0,f.useEffect)((()=>{i[e]&&i[e].length===r.commands.length||a({[e]:r.commands})}),[a,i,t,r.commands,e]),e&&t||K.warn("invalid loader",{name:e,hook:t}),null}function gh(){const{commandLoadersNonContextual:e,commandLoadersContextual:t}=(0,g.useSelect)((e=>({commandLoadersNonContextual:e(bn.store).getCommandLoaders(!1),commandLoadersContextual:e(bn.store).getCommandLoaders(!0)}))),n=["core/block-editor/blockQuickActions","core/block-editor/blockTransforms"];return(0,s.createElement)(s.Fragment,null,t.concat(e).filter((e=>e?.name&&(n.includes(e.name)||e.name.startsWith("ai/")))).map((e=>e&&e.name?(0,s.createElement)(ph,{key:e.name,name:e.name,hook:e.hook,search:""}):(K.warn("invalid loader",e),null))))}const hh=function(){const[e,t]=(0,f.useState)(!1),[n,o]=(0,f.useState)([]),{getBlock:i,getBlocksByName:a,getBlockAttributes:r,isEditorIframeLoaded:c,isHandoff:l,selectedBlock:u}=(0,g.useSelect)((e=>{const{getSelectedBlock:t}=e(v.store);return{getBlock:e(v.store).getBlock,getBlocksByName:e(v.store).getBlocksByName,getBlockAttributes:e(v.store).getBlockAttributes,selectedBlock:t(),isEditorIframeLoaded:e(wt).getIsEditorIframeLoaded(),isHandoff:e(wt).getIsHandoff(),getImageStyle:e(wt).getImageStyle}})),{updateBlockAttributes:d}=(0,g.useDispatch)(v.store),{themeColors:p}=Bo(),{isThinking:h}=En();(0,f.useEffect)((()=>{if(!c)return;const e=(0,g.subscribe)((()=>{if(!h)return;if(!a("core/post-content")[0])return;const{canvasiFrameWindow:e}=Xt();e&&"complete"===e.document.readyState&&e.document.querySelectorAll("[data-big-sky-processing-state]").forEach((e=>{const t=e.dataset.bigSkyProcessingState;"processing"===t?(e.classList.add("big-sky__is-processing"),e.classList.remove("big-sky__has-processed")):"processed"===t&&(e.classList.add("big-sky__has-processed"),e.classList.remove("big-sky__is-processing"))}))}));return()=>e()}),[c,h,a]),(0,f.useEffect)((()=>{if(!c)return;const e=a("core/cover");o(e.map((e=>{const t=i(e);return{clientId:t.clientId,url:t.attributes.url}})))}),[i,a,c,l]);const m=(0,f.useCallback)((e=>{const t=e.clientId,o=n.find((e=>e.clientId===t))?.url;return e.attributes.url!==o}),[n]),y=(0,f.useCallback)((async()=>{t(!0);const e=await ci(u.attributes.url);o((e=>{const t=e.findIndex((e=>e.clientId===u.clientId));return-1!==t?e.map(((e,n)=>n===t?{...e,url:u.attributes.url}:e)):[...e,{clientId:u.clientId,url:u.attributes.url}]}));const n=_o(e,p),i=r(u.clientId);await d(u.clientId,{overlayColor:void 0,customOverlayColor:e,isUserOverlayColor:!1,style:{...i?.style,color:{text:n?.color},elements:{heading:{color:{text:`var(--wp--preset--color--${n?.slug})`}}}}}),t(!1)}),[u,d,r,p]);return(0,f.useEffect)((()=>{if(!u)return;let t=()=>{};return"core/cover"===u.name&&u.attributes.url&&m(u)&&!e&&(t=(0,g.subscribe)(y)),()=>{t()}}),[u,y,m,e]),(0,s.createElement)(s.Fragment,null)};function fh({notice:e,type:t="info",delay:n=3e3}){const{setIsToolContainerVisible:o,setToolComponent:i}=(0,g.useDispatch)(wt);return(0,f.useEffect)((()=>{let e;return n>0&&(e=setTimeout((()=>{o(!1),i(null)}),n)),()=>{e&&clearTimeout(e)}}),[n,o,i]),(0,s.createElement)("div",{className:`big-sky__dock__notice big-sky__dock__notice-${t}`},(0,s.createElement)(Qd,null,e))}const mh=["page"];(0,l.registerPlugin)("big-sky-assembler",{icon:p,render:()=>{const e=(()=>{const{resetStore:e,setToolComponent:t,setIsToolContainerVisible:n}=(0,g.useDispatch)(wt);return()=>{e(),t((0,s.createElement)(fh,{notice:(0,m.__)("We couldn't complete that request. Please try again.","big-sky"),type:"error"})),n(!0)}})();return function(){const{postType:e,isPostEditor:t,isSiteEditor:n}=Sn(),{canvasMode:o}=cn(),i=(0,g.useSelect)((e=>e(h.store).getEditorMode())),a=n?rn(xn.privateApis).useLocation():null;return n&&"edit"===o&&("page-item"===a?.name||mh.includes(e))||t&&"visual"===i&&mh.includes(e)}()?(0,s.createElement)(dh,{onReset:e},(0,s.createElement)(lh,null),(0,s.createElement)(gh,null),(0,s.createElement)(hh,null)):null}}),window.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.name="viewport",document.head.appendChild(e)),e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}))}},r={};function s(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return a[e].call(n.exports,n,n.exports,s),n.exports}s.m=a,e=[],s.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],r=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(r=!1,i<a&&(a=i));if(r){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);s.r(i);var a={};t=t||[null,n({}),n([]),n(n)];for(var r=2&o&&e;"object"==typeof r&&!~t.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,s.d(i,a),i},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>e+".js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},i="big-sky:",s.l=(e,t,n,a)=>{if(o[e])o[e].push(t);else{var r,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+n){r=d;break}}r||(c=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",i+n),r.src=e),o[e]=[t];var p=(t,n)=>{r.onerror=r.onload=null,clearTimeout(g);var i=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),c&&document.head.appendChild(r)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={57:0,350:0};s.f.j=(t,n)=>{var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else if(350!=t){var i=new Promise(((n,i)=>o=e[t]=[n,i]));n.push(o[2]=i);var a=s.p+s.u(t),r=new Error;s.l(a,(n=>{if(s.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",r.name="ChunkLoadError",r.type=i,r.request=a,o[1](r)}}),"chunk-"+t,t)}else e[t]=0},s.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,r,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(c)var u=c(s)}for(t&&t(n);l<a.length;l++)i=a[l],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},n=globalThis.webpackChunkbig_sky=globalThis.webpackChunkbig_sky||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=s.O(void 0,[350],(()=>s(665)));c=s.O(c)})();
//# sourceMappingURL=index.js.map;
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t){e.exports=wp.i18n},function(e,t){e.exports=wp.blocks},function(e,t){e.exports=wp.editor},function(e,t){e.exports=wp.components},function(e,t){e.exports=wp.element},function(e,t,n){"use strict";function r(e){return e.replace(/&(?!([a-z0-9]+|#[0-9]+|#x[a-f0-9]+);)/gi,"&amp;")}function o(e){return e.replace(/</g,"&lt;")}function a(e){return o(r(e))}function l(e){return o(e.replace(/&/g,"&amp;"))}t.b=a,t.a=l;n(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=(n.n(r),n(7));Object(r.registerBlockType)("syntaxhighlighter/code",o.a)},function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(8)),a=n(13),l=n(17),i=n(20),c=(n.n(i),n(21)),u=(n.n(c),window.syntaxHighlighterData.settings);t.a={title:Object(r.__)("SyntaxHighlighter Code","syntaxhighlighter"),description:Object(r.__)("Adds syntax highlighting to source code (front end only).","syntaxhighlighter"),icon:"editor-code",category:"formatting",keywords:[Object(r.__)("Source","syntaxhighlighter"),Object(r.__)("Program","syntaxhighlighter"),Object(r.__)("Develop","syntaxhighlighter")],attributes:{content:{type:"string",source:"text",selector:"pre"},language:{type:"string",default:u.language.default},lineNumbers:{type:"boolean",default:u.lineNumbers.default},firstLineNumber:{type:"string",default:u.firstLineNumber.default},highlightLines:{type:"string"},wrapLines:{type:"boolean",default:u.wrapLines.default},makeURLsClickable:{type:"boolean",default:u.makeURLsClickable.default},quickCode:{type:"boolean",default:u.quickCode.default}},supports:{html:!1,align:!0},transforms:l.a,edit:o.a,save:a.a}},function(e,t,n){"use strict";function r(e){var t=e.attributes,n=e.setAttributes,r=e.className,c=t.content,u=window.syntaxHighlighterData.settings.tabSize,s=wp.element.createElement("div",{className:r+" wp-block-code"},wp.element.createElement(o.PlainText,{className:"wp-block-syntaxhighlighter__textarea",style:{tabSize:u,MozTabSize:""+u},value:c,onChange:function(e){return n({content:e})},placeholder:Object(a.__)("Tip: you can choose a code language from the block settings.","syntaxhighlighter"),"aria-label":Object(a.__)("SyntaxHighlighter Code","syntaxhighlighter")}));return wp.element.createElement(i.Fragment,null,Object(l.a)({attributes:t,setAttributes:n}),s)}t.a=r;var o=n(2),a=(n.n(o),n(0)),l=(n.n(a),n(9)),i=n(4);n.n(i)},function(e,t,n){"use strict";var r=n(3),o=(n.n(r),n(4)),a=(n.n(o),n(2)),l=(n.n(a),n(0)),i=(n.n(l),n(10));t.a=function(e){var t=e.attributes,n=e.setAttributes,c=[],u=[],s=t.language,p=t.lineNumbers,h=t.firstLineNumber,g=t.highlightLines,f=t.wrapLines,m=t.makeURLsClickable,b=t.quickCode,d=window.syntaxHighlighterData,y=d.settings,w=d.brushes;if(y.language.supported){var v=[];for(var x in w)v.push({label:w[x],value:x});c.push(wp.element.createElement(r.PanelRow,{key:"code-language"},wp.element.createElement(r.SelectControl,{label:Object(l.__)("Code Language","syntaxhighlighter"),value:s,options:v,onChange:function(e){return n({language:e})}}))),u.push(Object(i.a)({attributes:t,setAttributes:n,options:v}))}return y.lineNumbers.supported&&c.push(wp.element.createElement(r.PanelRow,{key:"show-line-numbers"},wp.element.createElement(r.ToggleControl,{label:Object(l.__)("Show Line Numbers","syntaxhighlighter"),checked:p,onChange:function(e){return n({lineNumbers:e})}}))),p&&y.firstLineNumber.supported&&c.push(wp.element.createElement(r.PanelRow,{key:"first-line-number"},wp.element.createElement(r.TextControl,{label:Object(l.__)("First Line Number","syntaxhighlighter"),type:"number",value:h,onChange:function(e){return n({firstLineNumber:e})},min:"1",max:"100000"}))),y.highlightLines.supported&&c.push(wp.element.createElement(r.PanelRow,{key:"highlight-lines"},wp.element.createElement(r.TextControl,{label:Object(l.__)("Highlight Lines","syntaxhighlighter"),value:g,help:Object(l.__)("A comma-separated list of line numbers to highlight. Can also be a range. Example: 1,5,10-20","syntaxhighlighter"),onChange:function(e){return n({highlightLines:e})}}))),y.wrapLines.supported&&c.push(wp.element.createElement(r.PanelRow,{key:"wrap-long-lines"},wp.element.createElement(r.ToggleControl,{label:Object(l.__)("Wrap Long Lines","syntaxhighlighter"),checked:f,onChange:function(e){return n({wrapLines:e})}}))),y.makeURLsClickable.supported&&c.push(wp.element.createElement(r.PanelRow,{key:"make-urls-clickable"},wp.element.createElement(r.ToggleControl,{label:Object(l.__)("Make URLs Clickable","syntaxhighlighter"),checked:m,onChange:function(e){return n({makeURLsClickable:e})}}))),y.quickCode.supported&&c.push(wp.element.createElement(r.PanelRow,{key:"edit-mode"},wp.element.createElement(r.ToggleControl,{label:Object(l.__)("Enable edit mode on double click","syntaxhighlighter"),checked:b,onChange:function(e){return n({quickCode:e})}}))),wp.element.createElement(o.Fragment,null,wp.element.createElement(a.BlockControls,null,wp.element.createElement(r.ToolbarGroup,null,u)),wp.element.createElement(a.InspectorControls,{key:"syntaxHighlighterInspectorControls"},wp.element.createElement(r.PanelBody,{title:Object(l.__)("Settings","syntaxhighlighter")},c)))}},function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(11));t.a=function(e){var t=e.attributes,n=e.setAttributes,a=e.options,l=t.language;return wp.element.createElement(o.a,{key:"code-language",options:a,optionsLabel:Object(r.__)("Code Language","syntaxhighlighter"),value:l,onChange:function(e){return n({language:e})}})}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(12),a=n.n(o),l=n(3),i=(n.n(l),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),c=function(e){var t=e.options,n=e.optionsLabel,o=e.icon,c=e.value,u=e.onChange,s=r(e,["options","optionsLabel","icon","value","onChange"]),p=t.find(function(e){return c===e.value});return wp.element.createElement(l.Dropdown,i({className:"syntaxhighlighter-toolbar-dropdown",popoverProps:{isAlternate:!0,position:"bottom right left",focusOnMount:!0,className:a()("syntaxhighlighter-toolbar-dropdown__popover")},renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return wp.element.createElement(l.Button,{onClick:n,icon:o,"aria-expanded":t,"aria-haspopup":"true",children:p?p.label:""})},renderContent:function(e){var r=e.onClose;return wp.element.createElement(l.NavigableMenu,{role:"menu",stopNavigationEvents:!0},wp.element.createElement(l.MenuGroup,{label:n},t.map(function(e){var t=e.value===p.value;return wp.element.createElement(l.MenuItem,{key:e.value,role:"menuitemradio",isSelected:t,className:a()("syntaxhighlighter-toolbar-dropdown__option",{"is-selected":t}),onClick:function(){u(e.value),r()},children:e.label})})))}},s))};t.a=c},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var l=n.apply(null,r);l&&e.push(l)}else if("object"===o)for(var i in r)a.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var a={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){"use strict";function r(e){var t=e.attributes;return wp.element.createElement("pre",null,Object(o.a)(t.content))}t.a=r;var o=n(14)},function(e,t,n){"use strict";function r(e){return Object(a.flow)(l.a,o)(e||"")}function o(e){return e.replace(/^(\s*https?:)\/\/([^\s<>"]+\s*)$/m,"$1&#47;&#47;$2")}t.a=r;var a=n(15),l=(n.n(a),n(5))},function(e,t){e.exports=lodash},function(e,t,n){"use strict";function r(e){return e.replace(/>/g,"&gt;")}t.a=r},function(e,t,n){"use strict";var r=n(1),o=(n.n(r),n(5)),a=n(18),l=n.n(a),i=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(_n=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&l.return&&l.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.a={from:[{type:"enter",regExp:/^```\w*$/,transform:function(e){var t=e.content,n=void 0===t?"":t,o=n.match(/^```(\w+)/)||[null,null],a=i(o,2),l=a[1],c=l?{language:l}:void 0;return Object(r.createBlock)("syntaxhighlighter/code",c)}},{type:"raw",isMatch:function(e){return"PRE"===e.nodeName&&1===e.children.length&&"CODE"===e.firstChild.nodeName},transform:function(e){var t=e.firstChild.textContent,n=t.match(/^```(\w+)?\n/)||[null,null],o=i(n,2),a=o[0],l=o[1],c=l?{language:l}:{};return c.content=a?t.replace(a,"").replace(/```\s*$/,""):t,Object(r.createBlock)("syntaxhighlighter/code",c)},schema:{pre:{children:{code:{children:{"#text":{}}}}}}},{type:"block",blocks:["core/code"],transform:function(e){var t=e.content;return Object(r.createBlock)("syntaxhighlighter/code",{content:l()(t)})}}],to:[{type:"block",blocks:["core/code"],transform:function(e){var t=e.content;return Object(r.createBlock)("core/code",{content:Object(o.b)(t)})}}]}},function(e,t,n){(function(t){function n(e){if("string"==typeof e)return e;if(o(e))return v?v.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}function r(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||r(e)&&d.call(e)==c}function a(e){return null==e?"":n(e)}function l(e){return e=a(e),e&&s.test(e)?e.replace(u,m):e}var i=1/0,c="[object Symbol]",u=/&(?:amp|lt|gt|quot|#39|#96);/g,s=RegExp(u.source),p={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},h="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,f=h||g||Function("return this")(),m=function(e){return function(t){return null==e?void 0:e[t]}}(p),b=Object.prototype,d=b.toString,y=f.Symbol,w=y?y.prototype:void 0,v=w?w.toString:void 0;e.exports=l}).call(t,n(19))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t){}]);;
(()=>{var e={6941:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let o=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(r=o))})),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(3212)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},3212:(e,t,n)=>{e.exports=function(e){function t(e){let n,r,s,a=null;function i(...e){if(!i.enabled)return;const o=i,r=Number(new Date),s=r-(n||r);o.diff=s,o.prev=n,o.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";a++;const s=t.formatters[r];if("function"==typeof s){const t=e[a];n=s.call(o,t),e.splice(a,1),a--}return n})),t.formatArgs.call(o,e);(o.log||t.log).apply(o,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=o,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==t.namespaces&&(r=t.namespaces,s=t.enabled(e)),s),set:e=>{a=e}}),"function"==typeof t.init&&t.init(i),i}function o(e,n){const o=t(this.namespace+(void 0===n?":":n)+e);return o.log=this.log,o}function r(e,t){let n=0,o=0,r=-1,s=0;for(;n<e.length;)if(o<t.length&&(t[o]===e[n]||"*"===t[o]))"*"===t[o]?(r=o,s=n,o++):(n++,o++);else{if(-1===r)return!1;o=r+1,s++,n=s}for(;o<t.length&&"*"===t[o];)o++;return o===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of n)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const n of t.skips)if(r(e,n))return!1;for(const n of t.names)if(r(e,n))return!0;return!1},t.humanize=n(7378),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},7378:e=>{var t=1e3,n=60*t,o=60*n,r=24*o,s=7*r,a=365.25*r;function i(e,t,n,o){var r=t>=1.5*n;return Math.round(e/n)+" "+o+(r?"s":"")}e.exports=function(e,c){c=c||{};var d=typeof e;if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>100)return;var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!i)return;var c=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===d&&isFinite(e))return c.long?function(e){var s=Math.abs(e);if(s>=r)return i(e,s,r,"day");if(s>=o)return i(e,s,o,"hour");if(s>=n)return i(e,s,n,"minute");if(s>=t)return i(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=r)return Math.round(e/r)+"d";if(s>=o)return Math.round(e/o)+"h";if(s>=n)return Math.round(e/n)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8025:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(6941),r=n.n(o),s=n(5468);const a=r()("videopress:get-media-token");const i=async function(e,t={}){const{id:n=0,guid:o=0,flushToken:r}=t,i=`vpc-${e}-${n}-${o}`,c=window?.videopressAjax?.context||"main";let d;const u=localStorage.getItem(i);if(r)a("(%s) Flushing %o token",c,i),localStorage.removeItem(i);else try{if(u){if(d=await JSON.parse(u),d&&d.expire>Date.now())return a("(%s) Providing %o token from the store",c,i),d.data;a("(%s) Token %o expired. Clean.",c,i),localStorage.removeItem(i)}}catch{a("Invalid token in the localStore")}const l=await function(e,t={}){const{id:n=0,guid:o,subscriptionPlanId:r=0,adminAjaxAPI:a,filename:i}=t;return new Promise((function(t,c){const d=a||window.videopressAjax?.ajaxUrl||window?.ajaxurl||"/wp-admin/admin-ajax.php";if(!s.p.includes(e))return c("Invalid scope");const u={action:"videopress-get-playback-jwt"};switch(e){case"upload":u.action="videopress-get-upload-token",i&&(u.filename=i);break;case"upload-jwt":u.action="videopress-get-upload-jwt";break;case"playback":u.action="videopress-get-playback-jwt",u.guid=o,u.post_id=String(n),u.subscription_plan_id=r}fetch(d,{method:"POST",credentials:"same-origin",body:new URLSearchParams(u)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((n=>{if(!n.success)throw new Error("Token is not achievable");switch(e){case"upload":case"upload-jwt":t({token:n.data.upload_token,blogId:n.data.upload_blog_id,url:n.data.upload_action_url});break;case"playback":t({token:n.data.jwt})}})).catch((()=>{console.warn("Token is not achievable"),t({token:null})}))}))}(e,t);return"playback"===e&&l?.token&&(a("(%s) Storing %o token",c,i),localStorage.setItem(i,JSON.stringify({data:l,expire:Date.now()+864e5}))),a("(%s) Providing %o token from request/response",c,i),l}},5468:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});const o=["upload","playback","upload-jwt"]}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(6941),t=n.n(e),o=n(8025);const r=t()("videopress:token-bridge"),{videopressAjax:s}=window;async function a(e){if(await new Promise((function(e){if("loading"!==document.readyState)return e();document.addEventListener("DOMContentLoaded",(function(){e()}))})),!window.__guidsToPlanIds)return 0;return window.__guidsToPlanIds[e]||0}async function i(e){if("videopress_token_request"!==e.data?.event)return;if(!s)return void r("(%s) videopressAjax is not accesible");const{context:t="main"}=s,{guid:n,requestId:i,isRetry:c}=e.data;if(!n||!i)return void r("(%s) Invalid request",t);const d=window?.videopressAjax.post_id||0,u=await a(n);if(-1===["https://videopress.com","https://video.wordpress.com"].indexOf(e.origin))return void r("(%s) Invalid origin",t);const{source:l}=e;if(l instanceof MessagePort||"undefined"!=typeof ServiceWorker&&l instanceof ServiceWorker)return void r("(%s) Invalid source",t);r("(%s) Token request accepted: %o | %o | %o",t,n,d,i),r("(%s) Send acknowledge receipt requested",t),l.postMessage({event:"videopress_token_request_ack",guid:n,requestId:i},{targetOrigin:"*"}),c&&r("(%s) client retrying request. Flush the token.",t);const f=await(0,o.A)("playback",{id:Number(d),guid:n,subscriptionPlanId:u,adminAjaxAPI:s.ajaxUrl,flushToken:c});if(!f?.token)return r("(%s) Error getting token",t),void l.postMessage({event:"videopress_token_error",guid:e.data.guid,requestId:i},{targetOrigin:"*"});r("(%s) sending token",t),l.postMessage({event:"videopress_token_received",guid:n,jwt:f.token,requestId:i},{targetOrigin:"*"})}s?(r("(%s)  Listen token requester",s?.context||"main"),window.addEventListener("message",i)):r("(%s) videopressAjax is not accesible")})()})();;
/*! This file is auto-generated */
!function(l){var a=l(document),r=wp.i18n.__;window.postboxes={handle_click:function(){var e,o=l(this),s=o.closest(".postbox"),t=s.attr("id");"dashboard_browser_nag"!==t&&(s.toggleClass("closed"),e=!s.hasClass("closed"),(o.hasClass("handlediv")?o:o.closest(".postbox").find("button.handlediv")).attr("aria-expanded",e),"press-this"!==postboxes.page&&postboxes.save_state(postboxes.page),t&&(s.hasClass("closed")||"function"!=typeof postboxes.pbshow?s.hasClass("closed")&&"function"==typeof postboxes.pbhide&&postboxes.pbhide(t):postboxes.pbshow(t)),a.trigger("postbox-toggled",s))},handleOrder:function(){var e=l(this),o=e.closest(".postbox"),s=o.attr("id"),t=o.closest(".meta-box-sortables").find(".postbox:visible"),a=t.length,t=t.index(o);if("dashboard_browser_nag"!==s)if("true"===e.attr("aria-disabled"))s=e.hasClass("handle-order-higher")?r("The box is on the first position"):r("The box is on the last position"),wp.a11y.speak(s);else{if(e.hasClass("handle-order-higher")){if(0===t)return void postboxes.handleOrderBetweenSortables("previous",e,o);o.prevAll(".postbox:visible").eq(0).before(o),e.trigger("focus"),postboxes.updateOrderButtonsProperties(),postboxes.save_order(postboxes.page)}e.hasClass("handle-order-lower")&&(t+1===a?postboxes.handleOrderBetweenSortables("next",e,o):(o.nextAll(".postbox:visible").eq(0).after(o),e.trigger("focus"),postboxes.updateOrderButtonsProperties(),postboxes.save_order(postboxes.page)))}},handleOrderBetweenSortables:function(e,o,s){var t=o.closest(".meta-box-sortables").attr("id"),a=[];l(".meta-box-sortables:visible").each(function(){a.push(l(this).attr("id"))}),1!==a.length&&(t=l.inArray(t,a),s=s.detach(),"previous"===e&&l(s).appendTo("#"+a[t-1]),"next"===e&&l(s).prependTo("#"+a[t+1]),postboxes._mark_area(),o.focus(),postboxes.updateOrderButtonsProperties(),postboxes.save_order(postboxes.page))},updateOrderButtonsProperties:function(){var e=l(".meta-box-sortables:visible:first").attr("id"),o=l(".meta-box-sortables:visible:last").attr("id"),s=l(".postbox:visible:first"),t=l(".postbox:visible:last"),a=s.attr("id"),r=t.attr("id"),i=s.closest(".meta-box-sortables").attr("id"),t=t.closest(".meta-box-sortables").attr("id"),n=l(".handle-order-higher"),d=l(".handle-order-lower");n.attr("aria-disabled","false").removeClass("hidden"),d.attr("aria-disabled","false").removeClass("hidden"),e===o&&a===r&&(n.addClass("hidden"),d.addClass("hidden")),e===i&&l(s).find(".handle-order-higher").attr("aria-disabled","true"),o===t&&l(".postbox:visible .handle-order-lower").last().attr("aria-disabled","true")},add_postbox_toggles:function(t,e){var o=l(".postbox .hndle, .postbox .handlediv"),s=l(".postbox .handle-order-higher, .postbox .handle-order-lower");this.page=t,this.init(t,e),o.on("click.postboxes",this.handle_click),s.on("click.postboxes",this.handleOrder),l(".postbox .hndle a").on("click",function(e){e.stopPropagation()}),l(".postbox a.dismiss").on("click.postboxes",function(e){var o=l(this).parents(".postbox").attr("id")+"-hide";e.preventDefault(),l("#"+o).prop("checked",!1).triggerHandler("click")}),l(".hide-postbox-tog").on("click.postboxes",function(){var e=l(this),o=e.val(),s=l("#"+o);e.prop("checked")?(s.show(),"function"==typeof postboxes.pbshow&&postboxes.pbshow(o)):(s.hide(),"function"==typeof postboxes.pbhide&&postboxes.pbhide(o)),postboxes.save_state(t),postboxes._mark_area(),a.trigger("postbox-toggled",s)}),l('.columns-prefs input[type="radio"]').on("click.postboxes",function(){var e=parseInt(l(this).val(),10);e&&(postboxes._pb_edit(e),postboxes.save_order(t))})},init:function(o,e){var s=l(document.body).hasClass("mobile"),t=l(".postbox .handlediv");l.extend(this,e||{}),l(".meta-box-sortables").sortable({placeholder:"sortable-placeholder",connectWith:".meta-box-sortables",items:".postbox",handle:".hndle",cursor:"move",delay:s?200:0,distance:2,tolerance:"pointer",forcePlaceholderSize:!0,helper:function(e,o){return o.clone().find(":input").attr("name",function(e,o){return"sort_"+parseInt(1e5*Math.random(),10).toString()+"_"+o}).end()},opacity:.65,start:function(){l("body").addClass("is-dragging-metaboxes"),l(".meta-box-sortables").sortable("refreshPositions")},stop:function(){var e=l(this);l("body").removeClass("is-dragging-metaboxes"),e.find("#dashboard_browser_nag").is(":visible")&&"dashboard_browser_nag"!=this.firstChild.id?e.sortable("cancel"):(postboxes.updateOrderButtonsProperties(),postboxes.save_order(o))},receive:function(e,o){"dashboard_browser_nag"==o.item[0].id&&l(o.sender).sortable("cancel"),postboxes._mark_area(),a.trigger("postbox-moved",o.item)}}),s&&(l(document.body).on("orientationchange.postboxes",function(){postboxes._pb_change()}),this._pb_change()),this._mark_area(),this.updateOrderButtonsProperties(),a.on("postbox-toggled",this.updateOrderButtonsProperties),t.each(function(){var e=l(this);e.attr("aria-expanded",!e.closest(".postbox").hasClass("closed"))})},save_state:function(e){var o,s;"nav-menus"!==e&&(o=l(".postbox").filter(".closed").map(function(){return this.id}).get().join(","),s=l(".postbox").filter(":hidden").map(function(){return this.id}).get().join(","),l.post(ajaxurl,{action:"closed-postboxes",closed:o,hidden:s,closedpostboxesnonce:jQuery("#closedpostboxesnonce").val(),page:e},function(){wp.a11y.speak(r("Screen Options updated."))}))},save_order:function(e){var o=l(".columns-prefs input:checked").val()||0,s={action:"meta-box-order",_ajax_nonce:l("#meta-box-order-nonce").val(),page_columns:o,page:e};l(".meta-box-sortables").each(function(){s["order["+this.id.split("-")[0]+"]"]=l(this).sortable("toArray").join(",")}),l.post(ajaxurl,s,function(e){e.success&&wp.a11y.speak(r("The boxes order has been saved."))})},_mark_area:function(){var o=l("div.postbox:visible").length,e=l("#dashboard-widgets .meta-box-sortables:visible, #post-body .meta-box-sortables:visible"),s=!0;e.each(function(){var e=l(this);1==o||e.children(".postbox:visible").length?(e.removeClass("empty-container"),s=!1):e.addClass("empty-container")}),postboxes.updateEmptySortablesText(e,s)},updateEmptySortablesText:function(e,o){var s=l("#dashboard-widgets").length,t=r(o?"Add boxes from the Screen Options menu":"Drag boxes here");s&&e.each(function(){l(this).hasClass("empty-container")&&l(this).attr("data-emptyString",t)})},_pb_edit:function(e){var o=l(".metabox-holder").get(0);o&&(o.className=o.className.replace(/columns-\d+/,"columns-"+e)),l(document).trigger("postboxes-columnchange")},_pb_change:function(){var e=l('label.columns-prefs-1 input[type="radio"]');switch(window.orientation){case 90:case-90:e.length&&e.is(":checked")||this._pb_edit(2);break;case 0:case 180:l("#poststuff").length?this._pb_edit(1):e.length&&e.is(":checked")||this._pb_edit(2)}},pbshow:!1,pbhide:!1}}(jQuery);;
